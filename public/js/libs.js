var WebDataRocksToolbar=function(e,t,i,r,o){this.pivot=t,this.pivotContainer=e,this.width="number"==typeof r||0>r.indexOf("px")&&0>r.indexOf("%")?r+"px":r,this.Labels=o};WebDataRocksToolbar.prototype.getTabs=function(){var e=[],t=this.Labels;return e.push({title:t.connect,id:"wdr-tab-connect",icon:this.icons.connect,menu:[{title:t.connect_local_csv,id:"wdr-tab-connect-local-csv",handler:this.connectLocalCSVHandler,mobile:!1,icon:this.icons.connect_csv},{title:t.connect_local_json,id:"wdr-tab-connect-local-json",handler:this.connectLocalJSONHandler,mobile:!1,icon:this.icons.connect_json},{title:this.osUtils.isMobile?t.connect_remote_csv_mobile:t.connect_remote_csv,id:"wdr-tab-connect-remote-csv",handler:this.connectRemoteCSV,icon:this.icons.connect_csv}]}),e.push({title:t.open,id:"wdr-tab-open",icon:this.icons.open,menu:[{title:t.local_report,id:"wdr-tab-open-local-report",handler:this.openLocalReport,mobile:!1,icon:this.icons.open_local},{title:this.osUtils.isMobile?t.remote_report_mobile:t.remote_report,id:"wdr-tab-open-remote-report",handler:this.openRemoteReport,icon:this.icons.open_remote}]}),e.push({title:t.save,id:"wdr-tab-save",handler:this.saveHandler,mobile:!1,icon:this.icons.save}),e.push({title:t.export,id:"wdr-tab-export",mobile:!1,icon:this.icons.export,menu:[{title:t.export_print,id:"wdr-tab-export-print",handler:this.printHandler,icon:this.icons.export_print},{title:t.export_html,id:"wdr-tab-export-html",handler:this.exportHandler,args:"html",icon:this.icons.export_html},{title:t.export_excel,id:"wdr-tab-export-excel",handler:this.exportHandler,args:"excel",icon:this.icons.export_excel},{title:t.export_pdf,id:"wdr-tab-export-pdf",handler:this.exportHandler,args:"pdf",icon:this.icons.export_pdf}]}),e.push({title:t.format,id:"wdr-tab-format",icon:this.icons.format,rightGroup:!0,menu:[{title:this.osUtils.isMobile?t.format_cells_mobile:t.format_cells,id:"wdr-tab-format-cells",handler:this.formatCellsHandler,icon:this.icons.format_number},{title:this.osUtils.isMobile?t.conditional_formatting_mobile:t.conditional_formatting,id:"wdr-tab-format-conditional",handler:this.conditionalFormattingHandler,icon:this.icons.format_conditional}]}),e.push({title:t.options,id:"wdr-tab-options",handler:this.optionsHandler,icon:this.icons.options,rightGroup:!0}),e.push({title:t.fields,id:"wdr-tab-fields",handler:this.fieldsHandler,icon:this.icons.fields,rightGroup:!0}),null!=document.addEventListener&&e.push({title:t.fullscreen,id:"wdr-tab-fullscreen",handler:this.fullscreenHandler,mobile:!1,icon:this.icons.fullscreen,rightGroup:!0}),e},WebDataRocksToolbar.prototype.create=function(){this.popupManager=new WebDataRocksToolbar.PopupManager(this),this.dataProvider=this.getTabs(),this.filterConnectMenu(),this.init()},WebDataRocksToolbar.prototype.applyToolbarLayoutClasses=function(){if(!this.osUtils.isMobile){var e=this,t=function(){if(e.toolbarWrapper){var t=e.toolbarWrapper.getBoundingClientRect().width;e.toolbarWrapper.classList.remove("wdr-layout-500"),e.toolbarWrapper.classList.remove("wdr-layout-360"),e.toolbarWrapper.classList.remove("wdr-layout-300"),500>t&&e.toolbarWrapper.classList.add("wdr-layout-500"),360>t&&e.toolbarWrapper.classList.add("wdr-layout-360"),300>t&&e.toolbarWrapper.classList.add("wdr-layout-300")}};t(),window.addEventListener("resize",t)}},WebDataRocksToolbar.prototype.init=function(){this.container=this.pivotContainer,this.container.style.position=""==this.container.style.position?"relative":this.container.style.position,this.toolbarWrapper=document.createElement("div"),this.toolbarWrapper.id="wdr-toolbar-wrapper",this.toolbarWrapper.style.width=this.width,this.osUtils.isMobile&&this.addClass(this.toolbarWrapper,"wdr-mobile"),this.addClass(this.toolbarWrapper,"wdr-toolbar-ui"),this.toolbarWrapper.style.width=this.width;var e=document.createElement("ul");e.id="wdr-toolbar";var t=document.createElement("div");t.classList.add("wdr-toolbar-group-right"),e.appendChild(t);for(var i=0;i<this.dataProvider.length;i++)if(!this.isDisabled(this.dataProvider[i]))if(this.osUtils.isMobile&&null!=this.dataProvider[i].menu&&1!=this.dataProvider[i].collapse)for(var r=0;r<this.dataProvider[i].menu.length;r++)this.isDisabled(this.dataProvider[i].menu[r])||e.appendChild(this.createTab(this.dataProvider[i].menu[r]));else r=this.dataProvider[i].divider?this.createDivider(this.dataProvider[i]):this.createTab(this.dataProvider[i]),t&&this.dataProvider[i].rightGroup?t.appendChild(r):e.appendChild(r);this.toolbarWrapper.appendChild(e),this.container.insertBefore(this.toolbarWrapper,this.container.firstChild),this.updateLabels(this.Labels),this.applyToolbarLayoutClasses()},WebDataRocksToolbar.prototype.updateLabels=function(e){e=this.Labels=e,this.setText(document.querySelector("#wdr-tab-connect > a > span"),e.connect),this.setText(document.querySelector("#wdr-tab-connect-local-csv > a > span"),e.connect_local_csv),this.setText(document.querySelector("#wdr-tab-connect-local-json > a > span"),e.connect_local_json),this.setText(document.querySelector("#wdr-tab-connect-remote-csv > a > span"),this.osUtils.isMobile?e.connect_remote_csv_mobile:e.connect_remote_csv),this.setText(document.querySelector("#wdr-tab-open > a > span"),e.open),this.setText(document.querySelector("#wdr-tab-open-local-report > a > span"),e.local_report),this.setText(document.querySelector("#wdr-tab-open-remote-report > a > span"),this.osUtils.isMobile?e.remote_report_mobile:e.remote_report),this.setText(document.querySelector("#wdr-tab-save > a > span"),e.save),this.setText(document.querySelector("#wdr-tab-format > a > span"),e.format),this.setText(document.querySelector("#wdr-tab-format-cells > a > span"),this.osUtils.isMobile?e.format_cells_mobile:e.format_cells),this.setText(document.querySelector("#wdr-tab-format-conditional > a > span"),this.osUtils.isMobile?e.conditional_formatting_mobile:e.conditional_formatting),this.setText(document.querySelector("#wdr-tab-options > a > span"),e.options),this.setText(document.querySelector("#wdr-tab-fullscreen > a > span"),e.fullscreen),this.setText(document.querySelector("#wdr-tab-export > a > span"),e.export),this.setText(document.querySelector("#wdr-tab-export-print > a > span"),e.export_print),this.setText(document.querySelector("#wdr-tab-export-html > a > span"),e.export_html),this.setText(document.querySelector("#wdr-tab-export-excel > a > span"),e.export_excel),this.setText(document.querySelector("#wdr-tab-export-pdf > a > span"),e.export_pdf),this.setText(document.querySelector("#wdr-tab-fields > a > span"),e.fields)},WebDataRocksToolbar.prototype.icons={connect:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-305.5 396.5 36 36"><title>menu_connect</title><path fill="#555" d="M-274.5 425.409s-.988.277-1.422.761l-3.536-1.783c.189-.509.258-1.066.07-1.572l3.719-1.76a2.36 2.36 0 0 0 3.317.147 2.341 2.341 0 0 0 .157-3.3 2.335 2.335 0 0 0-4.055 1.582c-.009.122-.008.237.001.358l-3.896 1.884a2.281 2.281 0 0 0-1.359-.451 2.338 2.338 0 0 0-2.177 2.481 2.33 2.33 0 0 0 2.177 2.179c.491 0 .967-.156 1.359-.451l3.921 1.892a2.317 2.317 0 0 0 1.981 2.604 2.316 2.316 0 0 0 2.604-1.981c.171-1.269-1-2.432-2.262-2.603a8.794 8.794 0 0 0-.6-.026v.039zM-301.592 413.883c-.008.105-.908.222.092.326v6.836c0 2.587 5.827 5.455 13.177 5.455h1.081c-1.146-3 .303-6.854 3.299-8.155-1.448.172-2.868.069-4.334.069-7.056.009-12.775-2.093-13.315-4.531z"/><path fill="#555" d="M-288.5 416.217c7.377 0 13-2.097 13-4.683v-6.853c0-2.586-5.647-4.682-13-4.682-7.352 0-13 2.104-13 4.69v6.853c0 2.586 5.648 4.675 13 4.675zm.177-15.268c5.903 0 10.691 1.661 10.691 3.741s-4.796 3.741-10.691 3.741c-5.894 0-10.683-1.67-10.683-3.741 0-2.072 4.79-3.741 10.683-3.741z"/></svg>',connect_csv:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path d="M11 24l6 0V27h-6V24z"/><path d="M12.8 22L12.8 22l1.2-2.5L15.1 22h1.9l-2-3.9L16.9 14h-1.8l-1 2.5L12.9 14h-1.8l1.9 3.9L11 22H12.8z"/><path d="M19 19h6v3h-6V19z"/><path d="M19 14h6v3L19 17V14z"/><path d="M19 24h6v3h-6V24z"/><path d="M23 4H7v28h22V11L23 4zM8 31V5h14v7h6v19H8L8 31z"/></svg>',connect_json:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path d="M23 4H7v28h22V11L23 4zM8 31V5h14v7h6v19H8L8 31z"/><path d="M19 24c0 0.6-0.4 1-1 1 -0.6 0-1-0.4-1-1v-2c0-0.6 0.4-1 1-1 0.6 0 1 0.4 1 1V24zM21 18v-2c0-0.6-0.4 0-1 0 -0.6 0-1-0.4-1-1 0-0.6 0.4-1 1-1 1.7 0 3 0.3 3 2v2c0 1.1 0.9 2 2 2 0.6 0 1 0.4 1 1 0 0.6-0.4 1-1 1 -1.1 0-2 0.9-2 2v2c0 1.7-1.3 2-3 2 -0.6 0-1-0.4-1-1s0.4-1 1-1c0.6 0 1 0.6 1 0v-2c0-1.2 0.5-2.3 1.4-3C21.5 20.3 21 19.2 21 18zM11 20c1.1 0 2-0.9 2-2v-2c0-1.7 1.3-2 3-2 0.6 0 1 0.4 1 1 0 0.6-0.4 1-1 1 -0.6 0-1-0.6-1 0v2c0 1.2-0.5 2.3-1.4 3 0.8 0.7 1.4 1.8 1.4 3v2c0 0.6 0.4 0 1 0 0.6 0 1 0.4 1 1s-0.4 1-1 1c-1.7 0-3-0.3-3-2v-2c0-1.1-0.9-2-2-2 -0.6 0-1-0.4-1-1C10 20.4 10.4 20 11 20z"/><path d="M18 17c0.6 0 1 0.4 1 1s-0.4 1-1 1 -1-0.4-1-1S17.4 17 18 17z"/></svg>',open:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-305.5 396.5 36 36"><title>menu_open</title><path fill="#555" d="M-279.351 408.5h8.976c.064 0 .126-.067.167-.025.021.052.021.055 0 .107l-2.053 20.701c-.01.117-.104.217-.219.217h-30.102c-.116 0-.21-.104-.221-.22l-1.989-16.009c-.022-.041-.022.124 0 .083.042-.054.115.146.178.146h21.198c.87 0 1.665-.726 2.053-1.499l1.812-3.446a.414.414 0 0 1 .2-.055zm-4.052 2.473c.084-.011.162-.052.194-.126l1.813-3.288c.408-.754 1.196-1.059 2.054-1.059h7.842v-2.637c0-1.102-.83-2.166-1.929-2.25-.053 0-.183-.113-.235-.113h-18.328c-.104 0-.188.006-.241-.09.01-1.1-.858-1.91-1.958-1.91h-6.902c-1.226 0-2.406.864-2.406 2.089v9.426l20.096-.042z"/></svg>',open_local:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><style>.a{fill:none;}</style><path d="M30.9 10.6C30.8 10.4 30.2 10 30 10h-1V8c0-0.4-0.6-1-1-1H15l-1-2H8C7.6 5 7 5.6 7 6v4H6c-0.2 0-0.8 0.4-0.9 0.6 -0.1 0.1-0.2 0.3-0.1 0.5l2.1 19.5C7.2 30.8 7.7 31 8 31h20c0.3 0 0.8-0.2 0.9-0.5l2.1-19.5C31 10.9 31 10.7 30.9 10.6zM28 30H8L6 11h24L28 30z"/><line x1="11" y1="23" x2="11" y2="23" class="a"/><line x1="25" y1="23" x2="25" y2="23" class="a"/><polygon points="11 15 11 23 17 23 17 25 14 25 14 26 22 26 22 25 19 25 19 23 25 23 25 15 "/></svg>',open_remote:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path d="M30.9 10.6C30.8 10.4 30.2 10 30 10h-1V8c0-0.4-0.6-1-1-1H15l-1-2H8C7.6 5 7 5.6 7 6v4H6c-0.2 0-0.8 0.4-0.9 0.6 -0.1 0.1-0.2 0.3-0.1 0.5l2.1 19.5C7.2 30.8 7.7 31 8 31h20c0.3 0 0.8-0.2 0.9-0.5l2.1-19.5C31 10.9 31 10.7 30.9 10.6zM28 30H8L6 11h24L28 30z"/><path d="M24.8 18.1l-0.8 1.5c-0.2 0.2-0.5 0.2-0.8 0 -1.3-1.2-3.2-1.9-5.3-1.9 -2.1 0-4 0.7-5.3 1.9 -0.2 0.2-0.5 0.2-0.8 0l-0.8-1.5c-0.1-0.1-0.2-0.2-0.2-0.3 0-0.1 0.1-0.2 0.2-0.3 1.7-1.5 4.1-2.5 6.8-2.5 2.7 0 5.1 0.9 6.8 2.5 0.1 0 0.2 0.2 0.2 0.3C25 17.9 24.9 18 24.8 18.1zM18 19.6c1.5 0 2.8 0.5 3.8 1.4 0.2 0.2 0.2 0.5 0 0.7l-0.8 1.5c-0.2 0.2-0.5 0.2-0.8 0 -0.6-0.5-1.4-0.8-2.3-0.8 -0.9 0-1.7 0.3-2.3 0.8 -0.2 0.2-0.5 0.2-0.8 0l-0.8-1.5c-0.2-0.2-0.2-0.5 0-0.7C15.2 20.1 16.5 19.6 18 19.6zM18 23.4c0.8 0 1.4 0.6 1.4 1.3 0 0.7-0.6 1.3-1.4 1.3 -0.8 0-1.4-0.6-1.4-1.3C16.6 24 17.2 23.4 18 23.4z"/></svg>',save:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-17.5 774.5 36 36"><title>menu_save</title><g fill="#555"><path d="M15.191 783.284l-5.457-5.467a1.101 1.101 0 0 0-.781-.317h-.835c-.2 0-.618.163-.618.363v8.889c0 .618-.245.748-.853.748H-5.638c-.617 0-.862-.14-.862-.748v-8.889c0-.2-.409-.363-.609-.363h-6.283c-.618 0-1.108.499-1.108 1.107v27.785c0 .617.5 1.107 1.108 1.107h27.784c.618 0 1.108-.499 1.108-1.107v-22.337c0-.29-.109-.562-.309-.771zM8.98 801.463c0 .618-.499 1.037-1.107 1.037H-6.873c-.617 0-.627-.357-.627-.966v-8.626c0-.617.019-1.408.627-1.408H7.882c.618 0 1.108.613 1.108 1.223l-.01 8.74z"/><path d="M-4.167 784.5h9.361c.2 0 .306.228.306.028v-6.665c0-.2-.106-.363-.306-.363h-9.361c-.2 0-.333.163-.333.363v6.665c0 .191.124-.028.333-.028zm5.667-4.294c0-.618.392-1.108 1-1.108.618 0 1 .5 1 1.108v1.97c0 .618-.392 1.108-1 1.108-.618 0-1-.5-1-1.108v-1.97zM4.168 796.5h-7.31c-.617 0-1.108.393-1.108 1s.5 1 1.108 1h7.31c.617 0 1.107-.393 1.107-1s-.498-1-1.107-1z"/></g></svg>',export:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-17.5 774.5 36 36"><title>menu_export</title><g fill="#555"><path d="M15.446 795.615l-4.289-6.461c-.346-.515-.803-.654-1.428-.654H7.788c-.186 0-.346-.029-.363.156-.008.076.017.07.059.137l4.76 7.108c.042.06.034.337-.017.38-.025.025-.067.219-.102.219H6.699c-.194 0-.354-.063-.363.125-.305 3.23-3.174 5.495-6.407 5.192-2.81-.263-5.039-2.329-5.3-5.14-.009-.195-.168-.178-.363-.178h-5.401c-.076 0-.144-.281-.144-.357 0-.025.008-.157.017-.175l4.76-7.203c.102-.16.05-.245-.109-.347-.06-.035-.118.082-.187.082h-1.94c-.616 0-1.199.145-1.553.658l-4.664 6.547c-.203.304-.545.586-.545.95v9.216c1 .911 1.267 1.646 2.187 1.629h27.625c.903.009 1.188-.709 1.188-1.611v-9.233c1-.373.157-.735-.054-1.04z"/><path d="M-3.674 783.5H-2.5v10.2c1 1.4 1.764 2.464 3.165 2.371 1.274-.083 1.835-1.097 2.835-2.371v-10.2h1.207c.346 0 .641-.04.65-.387.008-.151-.042-.193-.144-.311l-4.186-5.11c-.228-.287-.642-.302-.929-.073-.042.034-.076.081-.101.115l-4.135 5.172c-.22.271-.187.447.084.668.11.085.244-.074.38-.074z"/></g></svg>',export_print:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-17.5 774.5 36 36"><title>dd_save_print</title><path fill="#555" d="M-5.5 798.685v3.815h11v-7h-11v3.185zm2-1.185h7v1h-7v-1zm0 2h7v1h-7v-1zM5.5 786.308V782.5h-11v7h11z"/><path fill="#555" d="M8.94 786.5H7.5v4h-14v-4h-1.44c-1.493 0-2.56 1.064-2.56 2.558v6.87c0 1.493 1.067 2.572 2.56 2.572h1.44v-4h14v4h1.44c1.493 0 2.56-1.064 2.56-2.557v-6.878c0-1.501-1.074-2.565-2.56-2.565z"/></svg>',export_excel:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path d="M24.4 15h-3.8L18 18.6 15.3 15h-3.8l4.5 5.2L11 27h7.3L18 25h-2l2-3L21.1 27H25l-5.1-6.8L24.4 15z"/><path d="M23 4H7v28h22V11L23 4zM8 31V5h14v7h6v19H8L8 31z"/></svg>',export_html:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path d="M25.7 20.8l-2.3-2.5c-0.2-0.2-0.4-0.3-0.6-0.3 -0.2 0-0.4 0.1-0.6 0.3 -0.3 0.4-0.3 1 0 1.4l1.7 1.9 -1.7 1.9c-0.2 0.2-0.3 0.4-0.3 0.7 0 0.3 0.1 0.5 0.3 0.7 0.2 0.2 0.4 0.3 0.6 0.3 0.2 0 0.4-0.1 0.6-0.3l2.3-2.5C26.1 21.8 26.1 21.2 25.7 20.8z"/><path d="M14 24c0-0.3-0.1-0.5-0.3-0.7l-1.7-1.9 1.7-1.9c0.3-0.4 0.3-1 0-1.4 -0.2-0.2-0.4-0.3-0.6-0.3 -0.2 0-0.4 0.1-0.6 0.3l-2.3 2.5c-0.3 0.4-0.3 1 0 1.4l2.3 2.5c0.2 0.2 0.4 0.3 0.6 0.3 0.2 0 0.4-0.1 0.6-0.3C13.9 24.5 14 24.3 14 24z"/><path d="M20.4 15.1c-0.1 0-0.2-0.1-0.3-0.1 -0.4 0-0.8 0.3-0.9 0.6l-4.1 11.1c-0.1 0.2-0.1 0.5 0 0.7 0.1 0.2 0.3 0.4 0.5 0.5C15.7 28 15.8 28 16 28c0.4 0 0.8-0.3 0.9-0.6l4.1-11.1C21.1 15.8 20.9 15.2 20.4 15.1z"/><path d="M23 4H7v28h22V11L23 4zM8 31V5h14v7h6v19H8L8 31z"/></svg>',export_pdf:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path d="M17.2 17.1L17.2 17.1C17.3 17.1 17.3 17.1 17.2 17.1c0.1-0.5 0.2-0.7 0.2-1V15.8c0.1-0.6 0.1-1 0-1.1 0 0 0 0 0-0.1l-0.1-0.1 0 0 0 0c0 0 0 0.1-0.1 0.1C16.9 15.2 16.9 16 17.2 17.1L17.2 17.1zM13.8 24.8c-0.2 0.1-0.4 0.2-0.6 0.3 -0.8 0.7-1.3 1.5-1.5 1.8l0 0 0 0 0 0C12.5 26.9 13.1 26.2 13.8 24.8 13.9 24.8 13.9 24.8 13.8 24.8 13.9 24.8 13.8 24.8 13.8 24.8zM24.1 23.1c-0.1-0.1-0.6-0.5-2.1-0.5 -0.1 0-0.1 0-0.2 0l0 0c0 0 0 0 0 0.1 0.8 0.3 1.6 0.6 2.1 0.6 0.1 0 0.1 0 0.2 0l0 0h0.1c0 0 0 0 0-0.1l0 0C24.2 23.3 24.1 23.3 24.1 23.1zM24.6 24c-0.2 0.1-0.6 0.2-1 0.2 -0.9 0-2.2-0.2-3.4-0.8 -1.9 0.2-3.4 0.5-4.5 0.9 -0.1 0-0.1 0-0.2 0.1 -1.3 2.4-2.5 3.5-3.4 3.5 -0.2 0-0.3 0-0.4-0.1l-0.6-0.3v-0.1c-0.1-0.2-0.1-0.3-0.1-0.6 0.1-0.6 0.8-1.6 2.1-2.4 0.2-0.1 0.6-0.3 1-0.6 0.3-0.6 0.7-1.2 1.1-2 0.6-1.1 0.9-2.3 1.2-3.3l0 0c-0.4-1.4-0.7-2.1-0.2-3.7 0.1-0.5 0.4-0.9 0.9-0.9h0.2c0.2 0 0.4 0.1 0.7 0.2 0.8 0.8 0.4 2.6 0 4.1 0 0.1 0 0.1 0 0.1 0.4 1.2 1.1 2.3 1.8 2.9 0.3 0.2 0.6 0.5 1 0.7 0.6 0 1-0.1 1.5-0.1 1.3 0 2.2 0.2 2.6 0.8 0.1 0.2 0.1 0.5 0.1 0.7C24.9 23.5 24.8 23.8 24.6 24zM17.3 19.6c-0.2 0.8-0.7 1.7-1.1 2.7 -0.2 0.5-0.4 0.8-0.7 1.2h0.1 0.1l0 0c1.5-0.6 2.8-0.9 3.7-1 -0.2-0.1-0.3-0.2-0.4-0.3C18.4 21.6 17.7 20.7 17.3 19.6z"/><path d="M23 4H7v28h22V11L23 4zM8 31V5h14v7h6v19H8L8 31z"/></svg>',format:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-17.5 774.5 36 36"><title>menu_format</title><g fill="#555"><path d="M15.144 781.92a7.62 7.62 0 0 0-4.238-4.157 4.634 4.634 0 0 0-1.201-.254.99.99 0 0 0-.906.36l-10.797 10.829c-1.462 1.462-2.916 2.908-4.37 4.378a1.347 1.347 0 0 0-.326.596c-.481 2.197-.939 4.402-1.413 6.607a.639.639 0 0 0 .792.793l6.551-1.381c.253-.049.49-.171.67-.359 5.063-5.08 10.127-10.144 15.19-15.207.237-.229.384-.548.4-.882a8.491 8.491 0 0 0-.352-1.323zm-16.825 16.652l-2.54.531a2.367 2.367 0 0 0-1.911-1.87c.18-.906.384-1.813.571-2.729a2.05 2.05 0 0 1 1.078.229 6.007 6.007 0 0 1 2.671 2.605c.139.318.245.653.311.996 0 .157 0 .157-.18.238z"/><path d="M6.568 804.5H-11.5v-18h7.761l1.83-2.118 1.593-1.882h-12.455c-.947 0-1.729 1.241-1.729 2.18v21.097c0 .947.77 1.724 1.726 1.724H8.283c.947 0 2.217-.769 2.217-1.724v-12.488l-4 3.438v7.773h.068z"/></g></svg>',format_number:'<svg xmlns="http://www.w3.org/2000/svg" width="52" height="36" viewBox="0 0 52 36"><path d="M31 19.2v-3.4l2.5-0.4c0.2-0.7 0.5-1.4 0.9-2.1l-1.4-2 2.4-2.4 2 1.4c0.7-0.4 1.4-0.7 2.1-0.9l0.4-2.5h3.4l0.4 2.5c0.7 0.2 1.4 0.5 2.1 0.9l2-1.4 2.4 2.4 -1.4 2c0.4 0.7 0.7 1.4 0.9 2.1L52 15.8v3.4l-2.5 0.4c-0.2 0.7-0.5 1.4-0.9 2.1l1.4 2 -2.4 2.4 -2-1.5c-0.7 0.4-1.4 0.7-2.1 0.9l-0.4 2.5h-3.4l-0.4-2.5c-0.7-0.2-1.4-0.5-2.1-0.9l-2 1.5 -2.4-2.4 1.4-2c-0.4-0.7-0.7-1.4-0.9-2.1L31 19.2zM41.5 21c1.9 0 3.5-1.6 3.5-3.5 0-1.9-1.6-3.5-3.5-3.5 -1.9 0-3.5 1.6-3.5 3.5C38 19.4 39.6 21 41.5 21z"/><path d="M38 30H1V6h36V5H0v26h38V30L38 30z"/><path d="M9.4 21.1c-0.3 0.3-0.7 0.4-1.2 0.4 -0.5 0-0.9-0.2-1.2-0.5s-0.4-0.8-0.4-1.4H5c0 0.9 0.2 1.7 0.7 2.2 0.5 0.6 1.2 0.9 2 1v1.3h1.1v-1.4c0.8-0.1 1.5-0.4 1.9-0.9 0.5-0.5 0.7-1.1 0.7-1.9 0-0.4-0.1-0.8-0.2-1.1 -0.1-0.3-0.3-0.6-0.5-0.8 -0.2-0.2-0.5-0.4-0.8-0.6 -0.3-0.2-0.8-0.4-1.4-0.6 -0.6-0.2-1-0.4-1.2-0.7s-0.4-0.6-0.4-1c0-0.4 0.1-0.8 0.4-1 0.2-0.2 0.6-0.4 1-0.4 0.4 0 0.8 0.2 1 0.5 0.3 0.3 0.4 0.8 0.4 1.4h1.6c0-0.9-0.2-1.6-0.6-2.2 -0.4-0.6-1-0.9-1.8-1v-1.5H7.9v1.5C7.1 12.6 6.5 12.9 6 13.4s-0.7 1.1-0.7 1.9c0 1.1 0.5 2 1.6 2.6 0.3 0.2 0.8 0.4 1.3 0.6 0.6 0.2 1 0.4 1.2 0.7s0.4 0.6 0.4 1C9.8 20.5 9.7 20.8 9.4 21.1z"/><path d="M16.3 12.6h-0.2l-3.8 1.5v1.4l2.4-0.8v8.1h1.6V12.6z"/><path d="M19.9 23.8c0.2-0.5 0.4-1 0.4-1.5l0-1.2h-1.5v1.3c0 0.3-0.1 0.6-0.2 1 -0.1 0.3-0.3 0.7-0.5 1.1l0.9 0.5C19.3 24.7 19.6 24.3 19.9 23.8z"/><path d="M27 16.7c0-1.4-0.3-2.5-0.8-3.2s-1.3-1.1-2.4-1.1c-1.1 0-1.9 0.4-2.4 1.1 -0.5 0.7-0.8 1.8-0.8 3.3v1.8c0 1.4 0.3 2.5 0.8 3.2s1.3 1.1 2.4 1.1c1.1 0 1.9-0.4 2.4-1.1 0.5-0.7 0.8-1.8 0.8-3.3V16.7zM25.4 18.9c0 0.9-0.1 1.6-0.4 2 -0.2 0.4-0.6 0.6-1.2 0.6 -0.5 0-0.9-0.2-1.2-0.7 -0.3-0.5-0.4-1.2-0.4-2.1v-2.3c0-0.9 0.1-1.5 0.4-2 0.3-0.4 0.6-0.6 1.2-0.6 0.5 0 0.9 0.2 1.2 0.7 0.3 0.4 0.4 1.1 0.4 2.1V18.9z"/></svg>',format_conditional:'<svg xmlns="http://www.w3.org/2000/svg" width="52" height="36" viewBox="0 0 52 36"><polygon points="38 5 0 5 0 31 26 31 26 30 1 30 1 6 37 6 37 10 38 10 "/><path d="M9 13H8.6L5 14.4v1.4l2-0.8V23h2V13z"/><path d="M17 22h-4l2.4-2.9c0.6-0.7 1-1.3 1.3-1.8 0.3-0.5 0.4-1.1 0.4-1.5 0-0.8-0.3-1.5-0.8-2 -0.5-0.5-1.2-0.7-2.2-0.7 -0.6 0-1.2 0.1-1.7 0.4s-0.9 0.6-1.1 1C11.1 14.9 11 16 11 16h1.6c0 0 0.1-0.9 0.4-1.3s0.7-0.4 1.2-0.4c0.4 0 0.8 0.2 1 0.5 0.3 0.3 0.4 0.7 0.4 1.1 0 0.4-0.1 0.7-0.3 1.1 -0.2 0.4-0.6 0.8-1.1 1.3L11 21.9V23h6V22z"/><path d="M21 19h0.8c0.6 0 1-0.1 1.3 0.2 0.3 0.3 0.4 0.6 0.4 1.1 0 0.5-0.1 0.8-0.4 1.1 -0.3 0.3-0.6 0.4-1.1 0.4 -0.5 0-0.8-0.3-1.1-0.5C20.6 20.9 20.5 21 20.5 20h-1.5c0 1 0.3 1.6 0.8 2.1s1.3 0.8 2.1 0.8c0.9 0 1.6-0.2 2.2-0.7 0.6-0.5 0.8-1.2 0.8-2.1 0-0.5-0.1-1-0.4-1.4 -0.3-0.4-0.6-0.7-1.1-0.9 0.4-0.2 0.7-0.5 1-0.9 0.3-0.4 0.4-0.8 0.4-1.2 0-0.9-0.3-1.5-0.8-2 -0.5-0.5-1.2-0.7-2.1-0.7 -0.5 0-1 0.1-1.5 0.3 -0.4 0.2-0.8 0.7-1 1.1S19.1 15 19.1 16h1.5c0-1 0.1-0.9 0.4-1.1 0.3-0.3 0.6-0.5 1-0.5 0.5 0 0.8 0.1 1 0.3s0.3 0.6 0.3 1.1c0 0.5-0.1 0.7-0.4 1C22.7 17 22.3 17 21.9 17H21V19z"/><path d="M47.8 7C50.1 7 52 8.9 52 11.2c0 1-0.3 1.8-0.8 2.5l-1.7 1.7L43.6 9.5l1.7-1.7C46 7.3 46.8 7 47.8 7zM30.7 22.4L29 30l7.6-1.7 11.6-11.6 -5.9-5.9L30.7 22.4zM42 17.9l-5.1 5.1 -0.9-0.9 5.1-5L42 17.9z"/></svg>',options:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-17.5 774.5 36 36"><title>menu_options</title><path fill="#555" d="M11.363 789.058l-.76-1.838a33.692 33.692 0 0 0 1.601-4.223l-2.327-2.328a31.444 31.444 0 0 0-4.142 1.691l-1.829-.76a32.88 32.88 0 0 0-1.83-4.101h-3.291a32.106 32.106 0 0 0-1.731 4.133l-1.83.76a33.556 33.556 0 0 0-4.206-1.609l-2.328 2.32a31.563 31.563 0 0 0 1.69 4.141l-.759 1.838a34.366 34.366 0 0 0-4.117 1.838v3.3a32.519 32.519 0 0 0 4.117 1.731l.759 1.829a33.633 33.633 0 0 0-1.608 4.223l2.327 2.328a32.986 32.986 0 0 0 4.133-1.699l1.83.76a31.481 31.481 0 0 0 1.862 4.108h3.291a32.194 32.194 0 0 0 1.732-4.133l1.837-.76a33.57 33.57 0 0 0 4.207 1.609l2.327-2.328a31.481 31.481 0 0 0-1.69-4.141l.76-1.838a32.532 32.532 0 0 0 4.108-1.829v-3.3a30.142 30.142 0 0 0-4.133-1.722zM.5 799.202a6.706 6.706 0 1 1 6.706-6.706A6.71 6.71 0 0 1 .5 799.202z"/></svg>',fields:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-17.5 774.5 36 36"><title>menu_fields</title><g fill="#555"><path d="M11.351 787.279c1.112.367 2.027 1.221 2.55 2.221H13.5v-10.627c0-.744-.089-1.357-.825-1.373h-26.339c-.736.008-.836.612-.836 1.349v21.656c0 .735.093.995.836.995h10.836c-.008 0 .205-1.314.629-2.025-.073-.098-.123.025-.18.025H-12.5v-6h10.563l.83-1.699c.4-.76 1.606-1.258 1.606-1.667V785.5h10.843l.009 1.779zM-1.5 791.5h-11v-6h11v6z"/><path d="M15.805 801.444l-1.602-1.308c0-.237.082-.49.082-.817a2.483 2.483 0 0 0-.082-.817l1.602-1.389a.399.399 0 0 0 .082-.49l-1.528-2.86a.364.364 0 0 0-.278-.123.678.678 0 0 0-.18 0l-1.912.866a6.95 6.95 0 0 0-1.299-.817l-.311-1.989c-.017-.195-.188-.199-.384-.199H6.93c-.147 0-.384.037-.384.199l-.311 2.053c-.458.229-.899.468-1.299.786l-1.912-.834c-.041-.008-.09-.016-.131-.008a.356.356 0 0 0-.319.192l-1.528 2.817c-.082.164-.082.408.082.489l1.749 1.308c0 .237-.082.489-.082.816a2.48 2.48 0 0 0 .082.817l-1.602 1.356a.399.399 0 0 0-.082.49l1.528 2.86a.364.364 0 0 0 .278.123.678.678 0 0 0 .18 0l1.912-.817c.4.318.842.597 1.299.817l.311 2.116a.322.322 0 0 0 .221.4c.033.008.065.017.09.017h3.065c.147 0 .384-.164.384-.327l.311-2.215c.466-.212.907-.49 1.299-.817l1.831.817a.441.441 0 0 0 .54-.163l1.528-2.86c.056-.08-.018-.326-.165-.489zm-7.306.744a2.865 2.865 0 0 1-3.064-2.664c-.114-1.585 1.079-2.95 2.664-3.064a2.867 2.867 0 0 1 3.072 2.868 2.804 2.804 0 0 1-2.672 2.86z"/></g></svg>',fullscreen:'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="-17.5 774.5 36 36"><title>menu_fullscreen_open</title><g fill="#555"><path d="M-7.5 779.976V777.5h-7v7h3v-2.752l3.758 4.067 1.74-1.846-4.342-4.003 2.844.01zM-7.742 799.096l-3.758 4.101V800.5h-3v7h7v-2h-2.618l-.049-.371 4.124-4.054-1.699-1.979zM8.746 785.913l3.754-4.092v2.679h3v-7h-7v2h2.602l.082.381-4.126 4.041 1.688 1.991zM13.5 800.5v2.598l-.382.074-4.058-4.003-1.882 1.575 4.006 3.756H8.5v3h7v-7h-2zM-4 786.5h9c1.104 0 2.5.908 2.5 2.011v7.996c0 1.103-1.396 1.993-2.5 1.993h-9c-1.104 0-2.5-.891-2.5-1.993v-8.005c0-1.103 1.396-2.002 2.5-2.002z"/></g></svg>'},WebDataRocksToolbar.prototype.connectLocalCSVHandler=function(){this.pivot.connectTo({dataSourceType:"csv",browseForFile:!0})},WebDataRocksToolbar.prototype.connectLocalJSONHandler=function(){this.pivot.connectTo({dataSourceType:"json",browseForFile:!0})},WebDataRocksToolbar.prototype.connectRemoteCSV=function(){this.showConnectToRemoteCSVDialog()},WebDataRocksToolbar.prototype.openLocalReport=function(){this.pivot.open()},WebDataRocksToolbar.prototype.openRemoteReport=function(){this.showOpenRemoteReportDialog()},WebDataRocksToolbar.prototype.saveHandler=function(){this.pivot.save("report.json","file")},WebDataRocksToolbar.prototype.formatCellsHandler=function(){this.showFormatCellsDialog()},WebDataRocksToolbar.prototype.conditionalFormattingHandler=function(){this.showConditionalFormattingDialog()},WebDataRocksToolbar.prototype.optionsHandler=function(){this.showOptionsDialog()},WebDataRocksToolbar.prototype.fieldsHandler=function(){this.pivot.openFieldsList()},WebDataRocksToolbar.prototype.printHandler=function(){this.pivot.print()},WebDataRocksToolbar.prototype.exportHandler=function(e){"pdf"==e?this.showExportPdfDialog():this.pivot.exportTo(e)},WebDataRocksToolbar.prototype.fullscreenHandler=function(){this.toggleFullscreen()},WebDataRocksToolbar.prototype.defaults={},WebDataRocksToolbar.prototype.showConnectToRemoteCSVDialog=function(){var e=this,t=this.Labels,i=this.popupManager.createPopup();i.content.classList.add("wdr-popup-w500"),i.setTitle(t.open_remote_csv),i.setToolbar([{id:"wdr-btn-open",label:t.open,handler:function(){0<r.value.length&&e.pivot.connectTo({filename:r.value,dataSourceType:"csv"})},isPositive:!0},{id:"wdr-btn-cancel",label:t.cancel}]);t=document.createElement("div");var r=document.createElement("input");r.id="wdr-inp-file-url",r.type="text",r.value="https://cdn.webdatarocks.com/data/data.csv",t.appendChild(r),i.setContent(t),this.popupManager.addPopup(i.content)},WebDataRocksToolbar.prototype.showOpenRemoteReportDialog=function(){var e=this,t=this.Labels,i=this.popupManager.createPopup();i.content.classList.add("wdr-popup-w500"),i.setTitle(t.open_remote_report),i.setToolbar([{id:"wdr-btn-open",label:t.open,handler:function(){0<r.value.length&&e.pivot.load(r.value)},isPositive:!0},{id:"wdr-btn-cancel",label:t.cancel}]);t=document.createElement("div");var r=document.createElement("input");r.type="text";var o=e.pivot.getOptions()||{};r.value=o.grid&&"flat"==o.grid.type?"https://cdn.webdatarocks.com/reports/report-flat.json":"https://cdn.webdatarocks.com/reports/report.json",t.appendChild(r),i.setContent(t),this.popupManager.addPopup(i.content)},WebDataRocksToolbar.prototype.showFormatCellsDialog=function(){var e=this,t=this.Labels,i=function(){l.disabled=h.disabled=c.disabled=d.disabled=p.disabled=C.disabled=f.disabled=g.disabled="empty"==a.value;var t=e.pivot.getFormat(a.value);l.value="left"==t.textAlign||"right"==t.textAlign?t.textAlign:"right",h.value=t.thousandsSeparator,c.value=t.decimalSeparator,d.value=t.decimalPlaces,p.value=t.currencySymbol,C.value=t.currencySymbolAlign,f.value=t.nullValue,g.value=1==t.isPercent},r=this.popupManager.createPopup();r.content.id="wdr-popup-format-cells",r.setTitle(this.osUtils.isMobile?t.format:t.format_cells),r.setToolbar([{id:"wdr-btn-apply",label:t.apply,handler:function(){var t={};""==a.value&&(t.name=""),t.textAlign=l.value,t.thousandsSeparator=h.value,t.decimalSeparator=c.value,t.decimalPlaces=d.value,t.currencySymbol=p.value,t.currencySymbolAlign=C.value,t.nullValue=f.value,t.isPercent="true"==g.value,e.pivot.setFormat(t,""==a.value?null:a.value),e.pivot.refresh()},isPositive:!0},{id:"wdr-btn-cancel",label:t.cancel}],!0);var o=document.createElement("div"),s=document.createElement("div");s.classList.add("wdr-inp-group"),o.appendChild(s);var n=document.createElement("div");n.classList.add("wdr-inp-row"),n.classList.add("wdr-ir-horizontal"),s.appendChild(n),(u=document.createElement("label")).classList.add("wdr-uc"),e.setText(u,t.choose_value),n.appendChild(u);var a=(m=e.createSelect()).select;a.onchange=i,a.options[0]=new Option(t.choose_value,"empty"),a.options[0].disabled=!0,a.options[1]=new Option(t.all_values,""),n.appendChild(m),(n=document.createElement("div")).classList.add("wdr-inp-row"),n.classList.add("wdr-ir-horizontal"),s.appendChild(n),(s=document.createElement("div")).classList.add("wdr-inp-group"),o.appendChild(s),(n=document.createElement("div")).classList.add("wdr-inp-row"),n.classList.add("wdr-ir-horizontal"),s.appendChild(n),u=document.createElement("label"),e.setText(u,t.text_align),n.appendChild(u);var l=(m=e.createSelect()).select;l.options[0]=new Option(t.align_left,"left"),l.options[1]=new Option(t.align_right,"right"),n.appendChild(m),(n=document.createElement("div")).classList.add("wdr-inp-row"),n.classList.add("wdr-ir-horizontal"),s.appendChild(n),u=document.createElement("label"),e.setText(u,t.thousand_separator),n.appendChild(u);var h=(m=e.createSelect()).select;h.options[0]=new Option(t.none,""),h.options[1]=new Option(t.space," "),h.options[2]=new Option(",",","),h.options[3]=new Option(".","."),n.appendChild(m),(n=document.createElement("div")).classList.add("wdr-inp-row"),n.classList.add("wdr-ir-horizontal"),s.appendChild(n),u=document.createElement("label"),e.setText(u,t.decimal_separator),n.appendChild(u);var c=(m=e.createSelect()).select;c.options[0]=new Option(".","."),c.options[1]=new Option(",",","),n.appendChild(m),(n=document.createElement("div")).classList.add("wdr-inp-row"),n.classList.add("wdr-ir-horizontal"),s.appendChild(n),u=document.createElement("label"),e.setText(u,t.decimal_places),n.appendChild(u);for(var d=(m=e.createSelect()).select,u=0;11>u;u++)d.options[u]=new Option(0===u?t.none:u-1,u-1);n.appendChild(m),(n=document.createElement("div")).classList.add("wdr-inp-row"),n.classList.add("wdr-ir-horizontal"),s.appendChild(n),u=document.createElement("label"),e.setText(u,t.currency_symbol),n.appendChild(u);var p=document.createElement("input");p.classList.add("wdr-inp"),p.type="text",n.appendChild(p),(n=document.createElement("div")).classList.add("wdr-inp-row"),n.classList.add("wdr-ir-horizontal"),s.appendChild(n),u=document.createElement("label"),e.setText(u,t.currency_align),n.appendChild(u);var C=(m=e.createSelect()).select;C.options[0]=new Option(t.align_left,"left"),C.options[1]=new Option(t.align_right,"right"),n.appendChild(m),(n=document.createElement("div")).classList.add("wdr-inp-row"),n.classList.add("wdr-ir-horizontal"),s.appendChild(n),u=document.createElement("label"),e.setText(u,t.null_value),n.appendChild(u);var f=document.createElement("input");f.classList.add("wdr-inp"),f.type="text",n.appendChild(f),(n=document.createElement("div")).classList.add("wdr-inp-row"),n.classList.add("wdr-ir-horizontal"),s.appendChild(n),u=document.createElement("label"),e.setText(u,t.is_percent),n.appendChild(u);var m,g=(m=e.createSelect()).select;for(g.options[0]=new Option(t.true_value,!0),g.options[1]=new Option(t.false_value,!1),n.appendChild(m),r.setContent(o),this.popupManager.addPopup(r.content),t=e.pivot.getMeasures(),u=0;u<t.length;u++)a.options[u+2]=new Option(t[u].caption,t[u].uniqueName);i()},WebDataRocksToolbar.prototype.showConditionalFormattingDialog=function(){var e=this,t=this.Labels,i=this.pivot.getAllConditions(),r=function(e){for(var t=e.match(/\W\d+\.*\d*/g),i=[],r=!1,o="",s=0;s<e.length;s++)'"'==e[s]||"'"==e[s]?(r?i.push(o):o="",r=!r):r&&(o+=e[s]);return e=e.match(/<=|>=|<|>|=|=|!=|isNaN/g),null==t&&null==i?{}:{value1:null!=t?t[0].replace(/\s/,""):i[0],value2:null!=t&&1<t.length?t[1].replace(/\s/,""):"",sign:e?e.join(""):""}},o=this.popupManager.createPopup();o.content.id="wdr-popup-conditional",o.setTitle(this.osUtils.isMobile?t.conditional:t.conditional_formatting),o.setToolbar([{id:"wdr-btn-apply",label:t.apply,handler:function(){e.pivot.removeAllConditions();for(var t=0;t<i.length;t++){var r;r=i[t].sign;var o=i[t].value1,s=i[t].value2,n="",a=null==s||0==s.length,l="><"===r,h="isNaN"===r;if((null==o||0==o.length)&&!h||l&&a||(l&&!a?n="AND(#value > "+o+", #value < "+s+")":h?n="isNaN(#value)":(isNaN(parseFloat(o))&&(o="'"+o+"'"),n="#value "+r+" "+o)),null==(r=n))return;i[t].formula=r,e.pivot.addCondition(i[t])}e.pivot.refresh()},isPositive:!0},{id:"wdr-btn-cancel",label:t.cancel}],!0);var s=document.createElement("a");s.id="wdr-add-btn",s.setAttribute("href","javascript:void(0)"),s.classList.add("wdr-ui-btn"),s.classList.add("wdr-ui-btn-light"),s.classList.add("wdr-button-add"),s.onclick=function(){var t={sign:"<",value1:"0",measures:e.pivot.getMeasures(),format:{fontFamily:"Arial",fontSize:"12px",color:"#000000",backgroundColor:"#FFFFFF"}};i.push(t),n.appendChild(e.createConditionalFormattingItem(t,i)),e.popupManager.centerPopup(o.content)},s.setAttribute("title",t.add_condition),(t=document.createElement("span")).classList.add("wdr-icon"),t.classList.add("wdr-icon-act_add"),s.appendChild(t),o.toolbar.insertBefore(s,o.toolbar.firstChild);var n=document.createElement("div");for(n.classList.add("wdr-popup-content"),n.onclick=function(t){t.target.classList.contains("wdr-cr-delete")&&e.popupManager.centerPopup(o.content)},s=0;s<i.length;s++)t=r(i[s].formula),i[s].value1=t.value1,i[s].value2=t.value2,i[s].sign=t.sign,i[s].measures=e.pivot.getMeasures(),n.appendChild(e.createConditionalFormattingItem(i[s],i));o.setContent(n),this.popupManager.addPopup(o.content)},WebDataRocksToolbar.prototype.defaults.fontSizes="8px 9px 10px 11px 12px 13px 14px".split(" "),WebDataRocksToolbar.prototype.defaults.fonts="Arial;Lucida Sans Unicode;Verdana;Courier New;Palatino Linotype;Tahoma;Impact;Trebuchet MS;Georgia;Times New Roman".split(";"),WebDataRocksToolbar.prototype.defaults.conditions=[{label:"less_than",sign:"<"},{label:"less_than_or_equal",sign:"<="},{label:"greater_than",sign:">"},{label:"greater_than_or_equal",sign:">="},{label:"equal_to",sign:"="},{label:"not_equal_to",sign:"!="},{label:"between",sign:"><"},{label:"is_empty",sign:"isNaN"}],WebDataRocksToolbar.prototype.createConditionalFormattingItem=function(e,t){var i=this,r=this.Labels,o=function(){"sign"in e&&"><"===e.sign?(u.classList.remove("wdr-width120"),u.classList.add("wdr-width50"),u.style.display="inline-block",C.value="value2"in e?e.value2:"0",C.style.display="inline-block",p.style.display="inline-block"):("sign"in e&&"isNaN"===e.sign?u.style.display="none":(u.classList.add("wdr-width120"),u.classList.remove("wdr-width50"),u.style.display="inline-block"),C.style.display="none",p.style.display="none")},s=function(){var t=e.format;null!=t&&(y.style.backgroundColor=t.backgroundColor||"#fff",y.style.color=t.color||"#000",y.style.fontFamily=t.fontFamily||"Arial",y.style.fontSize=t.fontSize||"12px")},n=document.createElement("div");n.classList.add("wdr-condition-row");var a=document.createElement("div");a.classList.add("wdr-wrap-relative"),n.appendChild(a);var l=document.createElement("span");l.classList.add("wdr-cr-delete"),l.classList.add("wdr-icon"),l.classList.add("wdr-icon-act_trash"),l.onclick=function(){var i=t.indexOf(e);-1<i&&t.splice(i,1),n.parentNode.removeChild(n)},a.appendChild(l),(l=document.createElement("div")).classList.add("wdr-cr-inner"),a.appendChild(l);var h=document.createElement("div");h.classList.add("wdr-cr-lbl"),h.classList.add("wdr-width50"),i.setText(h,r.value+":"),l.appendChild(h),(h=i.createSelect()).id="wdr-values";var c=h.select;"measures"in e?(function(e,t){c[0]=new Option(r.all_values,"");for(var o=(o=i.pivot.getOptions()||{}).grid&&"flat"==o.grid.type,s=0;s<e.length;s++)o&&7==e[s].type||(c[c.options.length]=new Option(e[s].caption,e[s].uniqueName));null!=t?c.value=t:c.selectedIndex=0}(e.measures,e.measure),c.disabled=0===e.measures.length):c.disabled=!0,c.onchange=function(){e.measure=c.value},l.appendChild(h),(h=i.createSelect()).id="wdr-conditions";var d=h.select;!function(e){for(var t=0;t<i.defaults.conditions.length;t++)d[t]=new Option(r[i.defaults.conditions[t].label],i.defaults.conditions[t].sign);null!=e?d.value=e:d.selectedIndex=0}("sign"in e?e.sign:null),d.onchange=function(){e.sign=d.value,"sign"in e&&"><"===e.sign?e.value2=0:("sign"in e&&"isNaN"===e.sign&&delete e.value1,delete e.value2),o()},l.appendChild(h);var u=document.createElement("input");u.classList.add("wdr-number-inp"),u.classList.add("wdr-width50"),u.type="number",u.value="value1"in e?e.value1:"0",u.onchange=function(){e.value1=0==u.value.length?"0":u.value},l.appendChild(u);var p=document.createElement("span");p.id="wdr-and-label",p.classList.add("wdr-width20"),i.setText(p,r.and_symbole),l.appendChild(p);var C=document.createElement("input");C.classList.add("wdr-number-inp"),C.classList.add("wdr-width50"),C.type="number",C.value="value2"in e?e.value2:"0",C.onchange=function(){e.value2=0==C.value.length?"0":C.value},l.appendChild(C),o(),(l=document.createElement("div")).classList.add("wdr-cr-inner"),a.appendChild(l),(h=document.createElement("div")).classList.add("wdr-cr-lbl"),h.classList.add("wdr-width50"),i.setText(h,r.format+":"),l.appendChild(h),(h=i.createSelect()).id="wdr-font-family";var f=h.select;!function(e){for(var t=0;t<i.defaults.fonts.length;t++)f[t]=new Option(i.defaults.fonts[t],i.defaults.fonts[t]);f.value=null==e?"Arial":e}(e.hasOwnProperty("format")&&e.format.hasOwnProperty("fontFamily")?e.format.fontFamily:null),f.onchange=function(){null!=e.format&&(e.format.fontFamily=f.value,s())},l.appendChild(h),(h=i.createSelect()).id="wdr-font-size";var m=h.select;!function(e){for(var t=0;t<i.defaults.fontSizes.length;t++)m[t]=new Option(i.defaults.fontSizes[t],i.defaults.fontSizes[t]);m.value=null==e?"12px":e}(e.hasOwnProperty("format")&&e.format.hasOwnProperty("fontSize")?e.format.fontSize:null),m.onchange=function(){null!=e.format&&(e.format.fontSize=m.value,s())},l.appendChild(h);var g=new WebDataRocksToolbar.ColorPicker(this,n);g.setColor(e.hasOwnProperty("format")&&e.format.hasOwnProperty("backgroundColor")?e.format.backgroundColor:"0xFFFFFF","bg"),g.setColor(e.hasOwnProperty("format")&&e.format.hasOwnProperty("color")?e.format.color:"0x000000","font"),g.changeHandler=function(){null!=e.format&&(y.style.color=g.fontColor||"#000",y.style.backgroundColor=g.backgroundColor||"#fff")},g.applyHandler=function(){null!=e.format&&(e.format.color=g.fontColor,e.format.backgroundColor=g.backgroundColor,s())},g.cancelHandler=function(){null!=e.format&&(g.setColor(e.format.hasOwnProperty("backgroundColor")?e.format.backgroundColor:"0xFFFFFF","bg"),g.setColor(e.format.hasOwnProperty("color")?e.format.color:"0x000000","font")),s()},l.appendChild(g.element);var y=document.createElement("input");return y.id="wdr-sample",y.classList.add("wdr-inp"),y.type="number",y.value="73.93",y.style.pointerEvents="none",l.appendChild(y),s(),n},WebDataRocksToolbar.prototype.showOptionsDialog=function(){var e=this,t=this.Labels,i=this.popupManager.createPopup();i.content.id="wdr-popup-options",i.setTitle(this.osUtils.isMobile?t.options:t.layout_options),i.setToolbar([{id:"wdr-btn-apply",label:t.apply,handler:function(){var t,i;h.checked?t="off":d.checked?t="on":u.checked?t="rows":p.checked&&(t="columns"),y.checked?i="off":_.checked?i="on":v.checked?i="rows":b.checked&&(i="columns");var r="compact";m&&m.checked?r="classic":g&&g.checked&&(r="flat");var o=e.pivot.getOptions();o={grid:{showGrandTotals:t,showTotals:i,type:r}};e.pivot.setOptions(o),e.pivot.refresh()},isPositive:!0},{id:"wdr-btn-cancel",label:t.cancel}],!0);var r=document.createElement("div");r.classList.add("wdr-popup-content");var o=document.createElement("div");o.classList.add("wdr-ui-row"),r.appendChild(o);var s=document.createElement("div");s.classList.add("wdr-ui-col-2"),o.appendChild(s),(C=document.createElement("div")).classList.add("wdr-title-2"),e.setText(C,t.grand_totals),s.appendChild(C);var n="wdr-grand-totals-"+Date.now();(C=document.createElement("ul")).classList.add("wdr-radiobtn-list"),s.appendChild(C);var a=document.createElement("li"),l=document.createElement("div");l.classList.add("wdr-radio-wrap");var h=document.createElement("input");h.type="radio",h.name=n,h.id="wdr-gt-1",h.value="off",l.appendChild(h);var c=document.createElement("label");c.setAttribute("for","wdr-gt-1"),e.setText(c,t.grand_totals_off),l.appendChild(c),a.appendChild(l),C.appendChild(a),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap");var d=document.createElement("input");d.type="radio",d.name=n,d.id="wdr-gt-2",d.value="on",l.appendChild(d),(c=document.createElement("label")).setAttribute("for","wdr-gt-2"),e.setText(c,t.grand_totals_on),l.appendChild(c),a.appendChild(l),C.appendChild(a),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap");var u=document.createElement("input");u.type="radio",u.name=n,u.id="wdr-gt-3",u.value="rows",l.appendChild(u),(c=document.createElement("label")).setAttribute("for","wdr-gt-3"),e.setText(c,t.grand_totals_on_rows),l.appendChild(c),a.appendChild(l),C.appendChild(a),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap");var p=document.createElement("input");p.type="radio",p.name=n,p.id="wdr-gt-4",p.value="rows",l.appendChild(p),(c=document.createElement("label")).setAttribute("for","wdr-gt-4"),e.setText(c,t.grand_totals_on_columns),l.appendChild(c),a.appendChild(l),C.appendChild(a),(C=document.createElement("div")).classList.add("wdr-title-2"),e.setText(C,t.layout),s.appendChild(C);var C,f="wdr-layout-"+Date.now();(C=document.createElement("ul")).classList.add("wdr-radiobtn-list"),s.appendChild(C),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap"),(n=document.createElement("input")).type="radio",n.name=f,n.id="wdr-lt-1",n.value="compact",l.appendChild(n),(c=document.createElement("label")).setAttribute("for","wdr-lt-1"),e.setText(c,t.compact_view),l.appendChild(c),a.appendChild(l),C.appendChild(a),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap");var m=document.createElement("input");m.type="radio",m.name=f,m.id="wdr-lt-2",m.value="classic",l.appendChild(m),(c=document.createElement("label")).setAttribute("for","wdr-lt-2"),e.setText(c,t.classic_view),l.appendChild(c),a.appendChild(l),C.appendChild(a),s=e.pivot.getReport({withDefaults:!0,withGlobals:!0}),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap");var g=document.createElement("input");g.type="radio",g.name=f,g.id="wdr-lt-3",g.value="flat",l.appendChild(g),(c=document.createElement("label")).setAttribute("for","wdr-lt-3"),e.setText(c,t.flat_view),l.appendChild(c),a.appendChild(l),C.appendChild(a),(s=document.createElement("div")).classList.add("wdr-ui-col-2"),o.appendChild(s),(C=document.createElement("div")).classList.add("wdr-title-2"),e.setText(C,t.subtotals),s.appendChild(C),o="wdr-subtotals-"+Date.now(),(C=document.createElement("ul")).classList.add("wdr-radiobtn-list"),s.appendChild(C),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap");var y=document.createElement("input");y.type="radio",y.name=o,y.id="wdr-st-1",y.value="off",l.appendChild(y),(c=document.createElement("label")).setAttribute("for","wdr-st-1"),e.setText(c,t.subtotals_off),l.appendChild(c),a.appendChild(l),C.appendChild(a),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap");var _=document.createElement("input");_.type="radio",_.name=o,_.id="wdr-st-2",_.value="on",l.appendChild(_),(c=document.createElement("label")).setAttribute("for","wdr-st-2"),e.setText(c,t.subtotals_on),l.appendChild(c),a.appendChild(l),C.appendChild(a),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap");var v=document.createElement("input");v.type="radio",v.name=o,v.id="wdr-st-3",v.value="rows",l.appendChild(v),(c=document.createElement("label")).setAttribute("for","wdr-st-3"),e.setText(c,t.subtotals_on_rows),l.appendChild(c),a.appendChild(l),C.appendChild(a),a=document.createElement("li"),(l=document.createElement("div")).classList.add("wdr-radio-wrap");var b=document.createElement("input");b.type="radio",b.name=o,b.id="wdr-st-4",b.value="columns",l.appendChild(b),(c=document.createElement("label")).setAttribute("for","wdr-st-4"),e.setText(c,t.subtotals_on_columns),l.appendChild(c),a.appendChild(l),C.appendChild(a),i.setContent(r),this.popupManager.addPopup(i.content),"off"==(t=(s=e.pivot.getOptions()||{}).grid||{}).showGrandTotals||0==t.showGrandTotals?h.checked=!0:"on"==t.showGrandTotals||1==t.showGrandTotals?d.checked=!0:"rows"==t.showGrandTotals?u.checked=!0:"columns"==t.showGrandTotals&&(p.checked=!0),"off"==t.showTotals?y.checked=!0:"on"==t.showTotals?_.checked=!0:"rows"==t.showTotals?v.checked=!0:"columns"==t.showTotals&&(b.checked=!0),"flat"==t.type&&g?g.checked=!0:"classic"==t.type&&m?m.checked=!0:n&&(n.checked=!0)},WebDataRocksToolbar.prototype.showExportPdfDialog=function(){var e=this,t=this.Labels,i=this.popupManager.createPopup();i.setTitle(t.choose_page_orientation),i.setToolbar([{id:"wdr-btn-apply",label:t.apply,handler:function(){var t="portrait";a.checked&&(t="landscape"),e.pivot.exportTo("pdf",{pageOrientation:t})},isPositive:!0},{id:"wdr-btn-cancel",label:t.cancel}]);var r=document.createElement("div"),o=document.createElement("ul");o.classList.add("wdr-radiobtn-list"),r.appendChild(o);var s=document.createElement("li");o.appendChild(s);var n=document.createElement("div");n.classList.add("wdr-radio-wrap"),s.appendChild(n),(s=document.createElement("input")).id="wdr-portrait-radio",s.type="radio",s.name="wdr-pdf-orientation",s.checked=!0,n.appendChild(s),(s=document.createElement("label")).setAttribute("for","wdr-portrait-radio"),e.setText(s,t.portrait),n.appendChild(s),s=document.createElement("li"),o.appendChild(s),(n=document.createElement("div")).classList.add("wdr-radio-wrap"),s.appendChild(n);var a=document.createElement("input");a.id="wdr-landscape-radio",a.type="radio",a.name="wdr-pdf-orientation",n.appendChild(a),(s=document.createElement("label")).setAttribute("for","wdr-landscape-radio"),e.setText(s,t.landscape),n.appendChild(s),i.setContent(r),this.popupManager.addPopup(i.content)},WebDataRocksToolbar.prototype.toggleFullscreen=function(){this.isFullscreen()?this.exitFullscreen():this.enterFullscreen(this.container)},WebDataRocksToolbar.prototype.isFullscreen=function(){return document.fullScreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},WebDataRocksToolbar.prototype.enterFullscreen=function(e){if(e.requestFullscreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullscreen&&window==top){if(this.containerStyle={width:this.container.style.width,height:this.container.style.height,position:this.container.style.position,top:this.container.style.top,bottom:this.container.style.bottom,left:this.container.style.left,right:this.container.style.right,marginTop:this.container.style.marginTop,marginLeft:this.container.style.left,toolbarWidth:this.toolbarWrapper.style.width},this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="fixed",this.container.style.top="0px",this.container.style.left="0px",this.toolbarWrapper.style.width="100%",e.requestFullscreen)e.requestFullscreen();else if(e.webkitRequestFullScreen){var t=navigator.userAgent;-1<t.indexOf("Safari")&&-1==t.indexOf("Chrome")?e.webkitRequestFullScreen():e.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}else e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&(window==top?e.msRequestFullscreen():alert("Fullscreen mode in IE 11 is not currently supported while Pivot embeded in iframe."));e.addEventListener("fullscreenchange",function(){window.screenTop||window.screenY||this.isFullscreen()||this.exitFullscreen()}.bind(this),!1),e.addEventListener("webkitfullscreenchange",function(){window.screenTop||window.screenY||this.isFullscreen()||this.exitFullscreen()}.bind(this),!1),e.addEventListener("mozfullscreenchange",function(){window.fullScreen||window.innerWidth==screen.width&&window.innerHeight==screen.height||this.exitFullscreen()}.bind(this),!1)}},WebDataRocksToolbar.prototype.exitFullscreen=function(){this.container.style.width=this.containerStyle.width,this.container.style.height=this.containerStyle.height,this.container.style.position=this.containerStyle.position,this.container.style.top=this.containerStyle.top,this.container.style.left=this.containerStyle.left,this.container.style.marginTop=this.containerStyle.marginTop,this.container.style.marginLeft=this.containerStyle.marginLeft,this.toolbarWrapper.style.width=this.containerStyle.toolbarWidth,document.exitFullscreen?document.exitFullscreen():document.cancelFullscreen?document.cancelFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullScreen?document.webkitExitFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},WebDataRocksToolbar.prototype.nullOrUndefined=function(e){return null==e},WebDataRocksToolbar.prototype.hasClass=function(e,t){return e.className.match(RegExp("(\\s|^)"+t+"(\\s|$)"))},WebDataRocksToolbar.prototype.addClass=function(e,t){this.hasClass(e,t)||(e.className+=" "+t)},WebDataRocksToolbar.prototype.removeClass=function(e,t){this.hasClass(e,t)&&(e.className=e.className.replace(RegExp("(\\s|^)"+t+"(\\s|$)")," "))},WebDataRocksToolbar.prototype.setText=function(e,t){e&&(void 0!==e.innerText&&(e.innerText=t),void 0!==e.textContent&&(e.textContent=t))},WebDataRocksToolbar.prototype.createSelect=function(){var e=document.createElement("div");e.classList.add("wdr-select");var t=document.createElement("select");return e.appendChild(t),e.select=t,e},WebDataRocksToolbar.prototype.createDivider=function(e){return(e=document.createElement("li")).className="wdr-divider",e},WebDataRocksToolbar.prototype.createTab=function(e){var t=document.createElement("li");t.id=e.id;var i=document.createElement("a");(e.hasOwnProperty("class_attr")&&i.setAttribute("class",e.class_attr),i.setAttribute("href","javascript:void(0)"),e.icon)&&((o=document.createElement("div")).classList.add("wdr-svg-icon"),o.innerHTML=e.icon,i.appendChild(o));o=document.createElement("span"),this.setText(o,e.title),i.appendChild(o);var r=this,o="function"==typeof e.handler?e.handler:this[e.handler];return this.nullOrUndefined(o)||(i.onclick=function(e,t){return function(){e.call(r,t)}}(o,e.args)),this.nullOrUndefined(this[e.onShowHandler])||(i.onmouseover=function(e){return function(){e.call(r)}}(this[e.onShowHandler])),t.onmouseover=function(){r.showDropdown(this)},t.onmouseout=function(){r.hideDropdown(this)},t.appendChild(i),null==e.menu||this.osUtils.isMobile&&1!=e.collapse||t.appendChild(this.createTabMenu(e.menu)),t},WebDataRocksToolbar.prototype.showDropdown=function(e){var t=e.querySelectorAll(".wdr-dropdown")[0];t&&(t.style.display="block",t.getBoundingClientRect().right>this.toolbarWrapper.getBoundingClientRect().right&&(t.style.right=0,this.addClass(e,"wdr-align-rigth")))},WebDataRocksToolbar.prototype.hideDropdown=function(e){var t=e.querySelectorAll(".wdr-dropdown")[0];t&&(t.style.display="none",t.style.right=null,this.removeClass(e,"wdr-align-rigth"))},WebDataRocksToolbar.prototype.createTabMenu=function(e){var t=document.createElement("div");t.className="wdr-dropdown wdr-shadow-container";var i=document.createElement("ul");i.className="wdr-dropdown-content";for(var r=0;r<e.length;r++)this.isDisabled(e[r])||i.appendChild(e[r].divider?this.createMenuDivider():this.createTab(e[r]));return t.appendChild(i),t},WebDataRocksToolbar.prototype.createMenuDivider=function(){var e=document.createElement("li");return e.className="wdr-v-divider",e},WebDataRocksToolbar.prototype.isDisabled=function(e){return!!this.nullOrUndefined(e)||(!1===e.ios&&this.osUtils.isIOS||!1===e.android&&this.osUtils.isAndroid||!1===e.mobile&&this.osUtils.isMobile)},WebDataRocksToolbar.prototype.filterConnectMenu=function(){var e=[],t=this.Labels;e.push({title:t.connect_local_csv,id:"wdr-tab-connect-local-csv",handler:this.connectLocalCSVHandler,mobile:!1,icon:this.icons.connect_csv}),e.push({title:t.connect_local_json,id:"wdr-tab-connect-local-json",handler:this.connectLocalJSONHandler,mobile:!1,icon:this.icons.connect_json}),e.push({title:this.osUtils.isMobile?t.connect_remote_csv_mobile:t.connect_remote_csv,id:"wdr-tab-connect-remote-csv",handler:this.connectRemoteCSV,icon:this.icons.connect_csv}),this.dataProvider[0]&&"wdr-tab-connect"==this.dataProvider[0].id&&(this.dataProvider[0].menu=e)},WebDataRocksToolbar.prototype.getElementById=function(e,t){var i=function(e,t){for(var r=0;r<e.childNodes.length;r++){var o=e.childNodes[r];if(o.id==t)return o;if(null!=(o=i(o,t)))return o}return null};return i(t||this.toolbarWrapper,e)},WebDataRocksToolbar.prototype.osUtils={isIOS:!(!navigator.userAgent.match(/iPhone|iPad|iPod/i)&&!navigator.platform.match(/iPhone|iPad|iPod/i)),isMac:/Mac/i.test(navigator.platform),isAndroid:!!navigator.userAgent.match(/Android/i),isBlackBerry:/BlackBerry/i.test(navigator.platform),isMobile:navigator.userAgent.match(/iPhone|iPad|iPod/i)||navigator.platform.match(/iPhone|iPad|iPod/i)||navigator.userAgent.match(/Android/i)||/BlackBerry/i.test(navigator.platform)},WebDataRocksToolbar.PopupManager=function(e){this.toolbar=e,this.activePopup=null},WebDataRocksToolbar.PopupManager.prototype.createPopup=function(){return new WebDataRocksToolbar.PopupManager.PopupWindow(this)},WebDataRocksToolbar.PopupManager.prototype.addPopup=function(e){if(null!=e){this.removePopup(),this.modalOverlay=this.createModalOverlay(),this.activePopup=e,this.toolbar.toolbarWrapper.appendChild(e),this.toolbar.toolbarWrapper.appendChild(this.modalOverlay),this.addLayoutClasses(e),this.centerPopup(e);var t=this;e.resizeHandler=function(){e&&(t.addLayoutClasses(e),t.centerPopup(e))},window.addEventListener("resize",e.resizeHandler)}},WebDataRocksToolbar.PopupManager.prototype.addLayoutClasses=function(e){e.classList.remove("wdr-layout-tablet"),e.classList.remove("wdr-layout-mobile"),e.classList.remove("wdr-layout-mobile-small");var t=this.getBoundingRect(this.toolbar.container);768>t.width&&e.classList.add("wdr-layout-tablet"),580>t.width&&e.classList.add("wdr-layout-mobile"),460>t.width&&e.classList.add("wdr-layout-mobile-small")},WebDataRocksToolbar.PopupManager.prototype.centerPopup=function(e){var t=this.getBoundingRect(this.toolbar.container),i=this.getBoundingRect(e),r=this.getBoundingRect(this.toolbar.toolbarWrapper);e.style.zIndex=parseInt(this.modalOverlay.style.zIndex)+1,this.modalOverlay.style.height=t.height+"px",e.style.left=Math.max(0,(r.width-i.width)/2)+"px",e.style.top=Math.max(0,(t.height-i.height)/2)+"px"},WebDataRocksToolbar.PopupManager.prototype.removePopup=function(e){e=e||this.activePopup,null!=this.modalOverlay&&(this.toolbar.toolbarWrapper.removeChild(this.modalOverlay),this.modalOverlay=null),null!=e&&(this.toolbar.toolbarWrapper.removeChild(e),this.activePopup=null,window.removeEventListener("resize",e.resizeHandler))},WebDataRocksToolbar.PopupManager.prototype.getBoundingRect=function(e){var t=e.getBoundingClientRect();return{left:t.left,right:t.right,top:t.top,bottom:t.bottom,width:t.width||e.clientWidth,height:t.height||e.clientHeight}},WebDataRocksToolbar.PopupManager.prototype.createModalOverlay=function(){var e=document.createElement("div");e.className="wdr-modal-overlay",e.id="wdr-popUp-modal-overlay";var t=this;return e.addEventListener("click",function(e){t.removePopup(t.activePopup)}),e},WebDataRocksToolbar.PopupManager.PopupWindow=function(e){this.popupManager=e;var t=document.createElement("div");t.className="wdr-panel-content";var i=document.createElement("div");i.className="wdr-title-bar";var r=document.createElement("div");r.className="wdr-title-text";var o=document.createElement("div");o.className="wdr-toolbox",o.style.clear="both",this.content=document.createElement("div"),this.content.className="wdr-popup wdr-panel wdr-toolbar-ui wdr-ui",this.content.appendChild(t),t.appendChild(i),i.appendChild(r),this.setTitle=function(e){WebDataRocksToolbar.prototype.setText(r,e)},this.setContent=function(e){t.insertBefore(e,i.nextSibling)};var s=this;return this.setToolbar=function(e,n){o.innerHTML="";for(var a=e.length-1;0<=a;a--){var l=document.createElement("a");l.setAttribute("href","javascript:void(0)"),l.className="wdr-ui-btn"+(e[a].isPositive?" wdr-ui-btn-dark":""),e[a].id&&(l.id=e[a].id),WebDataRocksToolbar.prototype.setText(l,e[a].label),l.onclick=function(e){return function(){null!=e&&e.call(),s.popupManager.removePopup()}}(e[a].handler),!0===e[a].disabled?WebDataRocksToolbar.prototype.addClass(l,"wdr-ui-disabled"):WebDataRocksToolbar.prototype.removeClass(l,"wdr-ui-disabled"),e[a].isPositive&&(WebDataRocksToolbar.prototype.osUtils.isMac||WebDataRocksToolbar.prototype.osUtils.isIOS)?o.appendChild(l):o.insertBefore(l,o.firstChild)}n?(o.classList.add("wdr-ui-col"),i.appendChild(o),i.classList.add("wdr-ui-row"),r.classList.add("wdr-ui-col")):t.appendChild(o)},this.toolbar=o,this.titleBar=i,this.title=r,this},WebDataRocksToolbar.ColorPicker=function(e,t){function i(e){e=e.target.getAttribute("data-c"),d.drawShades(d.colors[e]),d.setColor(e,d.currentType,!0)}function r(e){e=e.target.getAttribute("data-c"),d.setColor(e,d.currentType,!0)}function o(e){d.currentType=e,a.classList.remove("wdr-current"),l.classList.remove("wdr-current"),"bg"==e?(l.classList.add("wdr-current"),d.setColor(d.backgroundColor,e,!1)):(a.classList.add("wdr-current"),d.setColor(d.fontColor,e,!1))}function s(){d.closePopup(),d.cancelHandler&&d.cancelHandler()}this.toolbar=e,this.element=document.createElement("div"),this.element.classList.add("wdr-colorpick-wrap"),this.element.classList.add("wdr-width40"),this.colorPickerButton=document.createElement("div"),this.colorPickerButton.classList.add("wdr-colorpick-btn"),this.element.appendChild(this.colorPickerButton),this.colorPickerIcon=document.createElement("span"),this.colorPickerIcon.classList.add("wdr-icon"),this.colorPickerIcon.classList.add("wdr-icon-act_font"),this.colorPickerButton.appendChild(this.colorPickerIcon),this.popup=document.createElement("div"),this.popup.classList.add("wdr-colorpick-popup"),this.popup.onclick=function(e){e.stopPropagation()},t.appendChild(this.popup);var n=document.createElement("div");n.classList.add("wdr-color-targ-switch"),this.popup.appendChild(n);var a=document.createElement("a");a.classList.add("wdr-cts-item"),a.classList.add("wdr-current"),a.href="javascript:void(0);",a.innerHTML=e.Labels.cp_text,a.onclick=function(){o("font")},n.appendChild(a);var l=document.createElement("a");for(var h in l.classList.add("wdr-cts-item"),l.innerHTML=e.Labels.cp_highlight,l.href="javascript:void(0);",l.onclick=function(){o("bg")},n.appendChild(l),(n=document.createElement("div")).classList.add("wdr-cp-sett-row"),this.popup.appendChild(n),this.colorInput=document.createElement("input"),this.colorInput.type="text",this.colorInput.classList.add("wdr-inp"),this.colorInput.classList.add("wdr-width140"),this.colorInput.classList.add("wdr-tac"),this.colorInput.onchange=function(){var e=d.colorInput.value;d.isColor(e)&&d.setColor(e,d.currentType,!0)},n.appendChild(this.colorInput),this.colorPreview=document.createElement("div"),this.colorPreview.classList.add("wdr-cp-curr-color"),this.colorPreview.classList.add("wdr-width140"),n.appendChild(this.colorPreview),this.mainColors=document.createElement("div"),this.mainColors.classList.add("wdr-row-9colors"),this.popup.appendChild(this.mainColors),this.colors){(n=document.createElement("div")).classList.add("wdr-r9c-item"),n.style.backgroundColor=h,n.setAttribute("data-c",h),n.addEventListener("click",i),this.mainColors.appendChild(n);var c=document.createElement("span");c.classList.add("wdr-cp-currentmark"),c.classList.add("wdr-icon"),c.classList.add("wdr-icon-act_check"),n.appendChild(c),(c=document.createElement("span")).classList.add("wdr-r9c-arrow"),c.style.borderTopColor=h,n.appendChild(c)}for(this.shadeColors=document.createElement("div"),this.shadeColors.classList.add("wdr-row-4colors"),this.popup.appendChild(this.shadeColors),h=0;8>h;h++)(n=document.createElement("div")).classList.add("wdr-r4c-item"),n.addEventListener("click",r),this.shadeColors.appendChild(n),(c=document.createElement("span")).classList.add("wdr-cp-currentmark"),c.classList.add("wdr-icon"),c.classList.add("wdr-icon-act_check"),n.appendChild(c);this.drawShades(this.colors["#000000"]),(n=document.createElement("div")).classList.add("wdr-cp-btns-row"),this.popup.appendChild(n),(h=document.createElement("a")).innerHTML=e.Labels.apply,h.classList.add("wdr-ui-btn"),h.classList.add("wdr-ui-btn-dark"),h.addEventListener("click",function(){d.closePopup(),d.applyHandler&&d.applyHandler()}),(c=document.createElement("a")).innerHTML=e.Labels.cancel,c.classList.add("wdr-ui-btn"),c.addEventListener("click",s),WebDataRocksToolbar.prototype.osUtils.isMac||WebDataRocksToolbar.prototype.osUtils.isIOS?(n.appendChild(c),n.appendChild(h)):(n.appendChild(h),n.appendChild(c)),this.currentType="font",this.colorPickerButton.addEventListener("click",function(e){e.stopPropagation(),d.isOpened()?d.closePopup():d.openPopup()}),document.body.addEventListener("click",function(e){s()});var d=this},WebDataRocksToolbar.ColorPicker.prototype.colors={"#000000":"#000000 #212121 #424242 #616161 #757575 #9E9E9E #BDBDBD #FFFFFF".split(" "),"#F44336":"#D32F2F #E53935 #F44336 #EF5350 #E57373 #EF9A9A #FFCDD2 #FFEBEE".split(" "),"#FF9800":"#F57C00 #FB8C00 #FF9800 #FFA726 #FFB74D #FFCC80 #FFE0B2 #FFF3E0".split(" "),"#FFEB3B":"#FBC02D #FDD835 #FFEB3B #FFEE58 #FFF176 #FFF59D #FFF9C4 #FFFDE7".split(" "),"#8BC34A":"#689F38 #7CB342 #8BC34A #9CCC65 #AED581 #C5E1A5 #DCEDC8 #F1F8E9".split(" "),"#009688":"#00796B #00897B #009688 #26A69A #4DB6AC #80CBC4 #B2DFDB #E0F2F1".split(" "),"#03A9F4":"#0288D1 #039BE5 #03A9F4 #29B6F6 #4FC3F7 #81D4FA #B3E5FC #E1F5FE".split(" "),"#3F51B5":"#303F9F #3949AB #3F51B5 #5C6BC0 #7986CB #9FA8DA #C5CAE9 #E8EAF6".split(" "),"#9C27B0":"#7B1FA2 #8E24AA #9C27B0 #AB47BC #BA68C8 #CE93D8 #E1BEE7 #F3E5F5".split(" ")},WebDataRocksToolbar.ColorPicker.prototype.isOpened=function(){return this.popup.parentElement&&this.popup.parentElement.classList.contains("wdr-popup-opened")},WebDataRocksToolbar.ColorPicker.prototype.drawShades=function(e){if(e)for(var t=this.shadeColors.children,i=0;i<t.length;i++){var r=t[i];r.setAttribute("data-c",e[i]),r.style.backgroundColor=e[i],r.style.borderRight="#FFFFFF"==e[i]?"1px solid #d5d5d5":"none",r.style.borderBottom="#FFFFFF"==e[i]?"1px solid #d5d5d5":"none"}},WebDataRocksToolbar.ColorPicker.prototype.setColor=function(e,t,i){"string"==typeof e&&0==e.indexOf("0x")&&(e="#"+e.substr(2)),"bg"==t?(this.backgroundColor=e,this.colorPickerButton.style.backgroundColor=e):(this.fontColor=e,this.colorPickerIcon.style.color=e),this.colorInput.value=e,this.colorPreview.style.backgroundColor=e,this.drawSelected(),i&&this.changeHandler&&this.changeHandler()},WebDataRocksToolbar.ColorPicker.prototype.drawSelected=function(){var e="bg"==this.currentType?this.backgroundColor:this.fontColor,t=this.findMain(e);this.drawShades(this.colors[t]);for(var i=this.mainColors.children,r=0;r<i.length;r++)i[r].classList.remove("wdr-current");for((t=this.mainColors.querySelector("[data-c='"+t+"']"))&&t.classList.add("wdr-current"),i=this.shadeColors.children,r=0;r<i.length;r++)i[r].classList.remove("wdr-current");(e=this.shadeColors.querySelector("[data-c='"+e+"']"))&&e.classList.add("wdr-current")},WebDataRocksToolbar.ColorPicker.prototype.findMain=function(e){for(var t in"string"==typeof e&&0==e.indexOf("0x")&&(e="#"+e.substr(2)),this.colors)if(0<=this.colors[t].indexOf(e))return t},WebDataRocksToolbar.ColorPicker.prototype.isColor=function(e){return e.match(/^#?[0-9A-Fa-f]{6}$/g)},WebDataRocksToolbar.ColorPicker.prototype.closePopup=function(){this.popup.parentElement&&this.popup.parentElement.classList.remove("wdr-popup-opened")},WebDataRocksToolbar.ColorPicker.prototype.openPopup=function(){for(var e=this.toolbar.toolbarWrapper.querySelectorAll(".wdr-colorpick-popup"),t=0;t<e.length;t++)e[t].parentElement.classList.remove("wdr-popup-opened");this.popup.parentElement&&(e=this.toolbar.toolbarWrapper.querySelector("#wdr-popup-conditional .wdr-panel-content"),t=this.getWhere(this.colorPickerButton,e),0>this.getWhere(this.colorPickerButton,document.body).top-this.popup.clientHeight?(this.popup.classList.remove("wdr-arrow-down"),this.popup.classList.add("wdr-arrow-up"),this.popup.style.top=this.colorPickerButton.clientHeight+t.top+11+"px",this.popup.style.bottom=""):(this.popup.classList.add("wdr-arrow-down"),this.popup.classList.remove("wdr-arrow-up"),this.popup.style.bottom=e.clientHeight-t.top+5+"px",this.popup.style.top=""),this.popup.style.left=t.left+this.colorPickerButton.clientWidth/2+2+"px",this.popup.parentElement.classList.add("wdr-popup-opened"))},WebDataRocksToolbar.ColorPicker.prototype.getWhere=function(e,t){var i=0,r=0;if(e.offsetParent){i=e.offsetLeft,r=e.offsetTop;for(var o=e;(o=o.parentNode)&&o!=t;)i-=0,r-=o.scrollTop?o.scrollTop:0;for(;(e=e.offsetParent)&&e!=t;)i+=e.offsetLeft,r+=e.offsetTop}return{top:r+0,left:i+0}};var WebDataRocks=function(e){function t(){}function i(){}function r(){}function o(){}o.J3B="rowLevels",o.u0B=" filterHeaderCell",r.t0C=127,o.o2B="%",t.W8Q="printcomplete",o.c5B="hierarchies",r.L2C="-",t.o9Q="min",o.R7B="%d%",o.P2B="params",t.L7C="dd/MM/yyyy",o.z6B="extendedDataWidth",r.I4C="wdr-droppable",r.v0C=40,r.g0C=99,o.N6B="extendedDataHeight",r.Z8C=24,i.J3Y="wdr-search-btn",t.p0B="<td {0}>",i.G8x="isReportDefined",t.I3C="ul",o.n3B="search",o.D0B="class='",o.P3B="columnCount",r.P2C="ntr",o.Q6B="levelOrdinal",r.e0C=192,o.r3B="columnAxis",r.n8C=7,o.Q7B="%q%",r.V2C="padding",o.c4B="...",o.J5B=".Day",i.J9x="solid",t.B8B="and",i.b9Y="==",r.G3C="wdr-ui-prompt",t.R6C="&",t.l5C="/",i.B6Y="wdr-drag-handle",i.S1Y="classic",r.i4C="touchstart",i.L2Y="i",i.F2Y=".wdr-cell",r.m8C=32,r.r8C=35,r.Q2C="undefined",t.j9Q="*",t.e5C="<body>",i.t2Y="wdr-filters",r.i8C=19,o.E4B="rgb(33, 33, 33)",t.l6C=1e6,o.i3B="rowsOnly",t.y9Q="landscape",o.r0B="showHeaders",i.L8Y="max-width",r.a8C=11,i.a1Y="dblclick",r.R4C="mouseup",t.q0B=" columnHeaderCell",o.Q5B="measuresHierarchy",i.Y4Y='">',r.F3C="position",t.I8B="</config>",t.P7C=", ",t.g6Q="All",i.y2Y="title",r.V4C=2048,i.b2Y="wdr-helper",t.c6C="text/xml",i.p6Y="wdr-aggregations-view",i.K8Y="wdr-ui-label-light",t.a3C="wdr-ui-hgroup",o.F4B="background-color",i.D0Y="wdr-level-",i.v8x="isReportComplete",i.j3Y="wdr-popup-header wdr-ui-row",i.Z3Y="wdr-close-search wdr-ui-icon wdr-icon-act_close",r.o0C=100,t.h7C=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/i,o.A5B="regularMeasures",o.b0B="font-size",i.a4Y=".wdr-filters",t.i7C="\t",r.G2C="id",i.Y6Y="wdr-values",i.d3Y="wdr-lst-hierarchies",i.g2Y="z-index",r.h8C=13,o.u6B="dataHeight",t.A8B="filename",i.M9Y=">",o.D7B="' in CSV is invalid: ",o.N7B="The following JSON meta object for the field '",r.l2C="size",t.S8B="\x3c!--",t.o6C="html",o.F0B="#wdr-data-sheet",i.k7B="%n%",t.A6C="file",o.G6B="rowSortTuple",i.l6Y="wdr-lst-measures",o.a0B=".filterHeaderCell{{0}}\n",t.n6C="json",o.S3B="dataLoaded",i.f3Y="wdr-search-wrap",i.r7B="desc",t.o5C="<title>",t.n9Q="max",r.Y0C=60,t.X9B="Year",r.r2C="keyup",t.h6C="=",o.F3B="\\",r.j2C="right",o.V6B="hasRowSorting",r.W3C="type",t.j5C="<html>",r.m0C=500,t.a7C="dd/MM/yyyy HH:mm:ss",o.o6B="folder",r.I8C=30,t.Y1Q="portrait",r.s4C=" ",t.B0B="class='cell'",t.N6C=1e3,o.x7B=/^(\+|dt\+|t\+|n\+|-|ds\+|d\+|m\+|w\+|D\+|D4\+|url\+|img\+|id\+)/,r.O8C=1,t.F9Q=";",r.M2C="left",t.O5C="1px",i.N3Y="wdr-moreicon-display",o.t5B="formula",i.a3Y="wdr-ui-row",o.r6B="asc",i.k2Y=".wdr-header",o.v6B="rowSortType",i.z3Y="wdr-calc-display",t.W0B="caption",o.m3B="measureDepth",r.a0C=191,t.U9Q='"',t.m7C="|",o.N0B=" cell",r.V3C="_",o.h5B="measures_",r.A4C="touchend",o.x6B="lastColsTupleInteracted",r.g2C="bottom",r.N2C="wdr-noselect",i.m1Y="wdr-popup-title",i.F4Y="isSmooth",r.p3C="text",i.N2Y="wdr-rows-resize",r.x2C="number",t.t7C=":",i.g3Y="wdr-ui-col wdr-vam",r.C2C="paste",r.L8C=10,r.C8C=37,t.m3C="label",o.h7B="**--!--**/",o.i5B=".Month",t.v8Q="exportcomplete",o.H4B="rgb(242, 242, 242)",r.z0C=63,o.t0B=".totalCell{{0}}\n",o.U5B="hierarchy",o.p6B="columnSortTuple",o.C3B="rowCount",r.o8C=6,r.x4C=null,r.y4C="px",t.m8B=".js",i.j1Y="wdr-grid-layout",o.R3B="QUERY_COMPLETE",o.x4B="italic",o.Y7B=".csv",t.m6C="\n",o.z0B=" totalCell",t.M1B="export",t.R1B="if",i.l3Y="isExpandAll",r.U0C=39,t.C7C="}",r.r4C="div",r.s2C="width",i.E3Y="wdr-ui-icon wdr-icon-act_search",i.D3Y="wdr-droppable-valid",o.k5B=".Year",i.X6Y="wdr-search-opened",t.W9Q="truestyle",r.A0C=200,t.a1Q="members",i.a6Y="wdr-level",r.f0C=224,r.y8C=25,o.w3B="rowAxis",t.M5C="-9999px",o.H3B="columnsOnly",r.v2C="all",t.l8Q="beforegriddraw",t.P5C="Day",i.y3Y="wdr-list-content",o.Z3B="pages",r.O3C="absolute",r.Y3C="wdr-selected",i.v9Y="count",i.w3Y="wdr-prompt",t.Q7C="rgb(255,255,255)",i.c6Y="wdr-text-display",r.E2C="wdr-ui-btn",t.d8B="/**----**",r.c0C=128,o.A6B="month",i.z2Y="wdr-cols-resize",t.R7C="#",r.I2C="span",t.S5Q="Limitation!",t.T8B=".json",t.k6C=",",o.f3B="isClassic",t.A5C=2e3,r.V0C=50,o.M6B="uniqueName",o.y3B="measures",t.M6C="GET",r.y2C="inline-block",o.P0B="drillThrough",i.u3Y="wdr-aggr-display",r.J2C="a",i.O9Y="<",t.w7C="{",r.E8C=21,r.n2C="none",i.F3Y="#wdr-drag-handle",o.g3B="descendants",t.M8Q="rows",o.b5B="hidden",i.w5Y="<b>$1</b>",o.A3B="QUERY_ERROR",o.g2B="percent",o.J4B="rgb(0,0,0)",o.W2B="color",r.K2C="string",o.F6B="flat",i.l4Y="data-r",r.b8C=3,i.V8Y="wdr-ui-btn-dark",r.e8C=12,t.K9Q="(",i.p4Y="data-c",r.e4C="mousemove",r.E4C="opacity",t.L1Q="update",i.M3Y="wdr-level-folder",o.f6B="filter",t.O7C="0",i.K4Y="line-height",i.K3Y="wdr-drop-indicator",r.S8C=27,o.k3B="dataStorage",t.f7C=".",r.q2C="parent",o.l6B="columnSortType",t.U7C="Month",o.c0B=".rowHeaderCell{{0}}\n",r.c8C=9,i.L3Y="wdr-popup-content",r.j8C=4,t.d3C="data-index",o.I3B="rowMaxDepth",o.a6B=".[]",i.j9Y="!=",o.x0B="style='",i.P7B="date",i.t3Y="wdr-ui-btn-light wdr-icon-act_calc",t.b8Q="columns",t.t8Q="slice",o.e0B=".level{0}{{1}}\n",o.V5B="level",r.b2C="top",i.O3Y="wdr-folder",t.y3C="li",t.z9Q=")",t.S3C="allowMultipleSelection",t.H6C="length",r.k8C=17,r.P8C=38,o.n0B=".cell{{0}}\n",i.c3Y="wdr-btn-add-measure",t.t5C="<style>",o.q6B="dataWidth",r.H2C="click",i.H3Y="wdr-search-inp",o.R0B=".{0}{{1}}\n",r.o2C="input",i.k7Y="close",t.F5C="name",o.h0B="padding-left",o.X6B="columnSortMeasure",t.j7C="true",t.x1Q="function",t.t9Q="sum",i.B2Y="wdr-cols-sheet",r.C4C="",r.g8C=5,i.a8Y="max-height",o.B6B="hasColumnSorting",o.T0B="showAggregations",t.V6C="scroll",i.x3Y="wdr-droppable-invalid",i.T3Y="wdr-list-header",i.w4Y="wdr-row",t.k5C="boolean",t.F1Q="keydown",o.L0B=".columnHeaderCell{{0}}\n",i.k8Y="wdr-pivot-title",r.B3C="focusout",r.t8C=8,r.Q8C=16,o.M0B="font-family",r.M8C=2,r.O2C="height",o.W6B="rowSortMeasure",o.q7B=1e4,o.b4B="text-align",r.k4C="wdr-draggable",t.I5C="?",r.T8C=31,o.E3B="columnLevels",i.f7B="NaN",t.e1B="delete",t.X0B="</td>",r.a2C="textarea",o.M4B="font-weight",t.k8B="url",t.v9Q="'",t.n5C="</title>",t.S7C="&#39;",i.m8Y="wdr-filtered",i.o3Y="wdr-popup-subtitle",r.A8C=15,t.g9Q="^",r.R2C="block",r.F8C=0,i.i2Y="wdr-compact-view",i.L6Y="wdr-measure",i.h2Y="wdr-rows-filter",r.k2C="on",t.R8B="report.json",r.f4C="mousedown",r.m4C="mouseleave",r.J8C=20,r.N0C=64,o.K4B="bold",i.T9x='"/>',i.y9Y="isInlineData",i.Y2Y="wheel",r.w2C="keypress",o.R5B="calculatedMeasures",i.n3Y="wdr-ui-col wdr-vam wdr-tar wdr-ui-btns-row",t.D5C="Singleton",t.Z3C="data",r.X3C="focusin",i.F8Y=" / ",i.d1Y="compact",o.T3B="columnMaxDepth",o.N4B="off",t.D7C="+",i.a9Y="value",t.C1B="false",o.d3B="measuresPosition",i.Q2Y="[Measures]",t.p8Q="aftergriddraw",r.q3C="wdr-ui-toggle-btn",i.z4Y="min-height",o.Y6B="isEmpty",o.D6B="lastRowsTupleInteracted",i.q1Y="tabindex",t.Y0B=" rowHeaderCell level",i.v4Y=1e5,i.g1Y="isFlatTable",i.O8Y=" - ",o.U6B="multiMeasures",o.s6B="pivot",t.J5C="relative",i.n2Y="data-h",t.S5C="()",r.R8C=14,t.J7C="\r";var s,n,a,l,h,c,d,u,p,C,f,m,g,y,_,v,b,w,F,E,O,S,T,x,L,A,I,R,D,N,M,P,H,U,B,k,V,z,q,G,W,j,Y,X,K,Q,J,Z,$,ee,te,ie,re,oe,se,ne,ae,le,he,ce,de,ue,pe,Ce,fe,me,ge,ye,_e,ve,be,we,Fe,Ee,Oe,Se,Te,xe,Le,Ae,Ie,Re,De,Ne,Me,Pe,He,Ue,Be,ke,Ve,ze,qe,Ge,We,je,Ye,Xe,Ke,Qe,Je,Ze,$e,et,tt,it,rt,ot,st,nt,at,lt,ht,ct,dt,ut,pt,Ct,ft,mt,gt,yt,_t,vt,bt,wt,Ft,Et,Ot,St,Tt,xt,Lt,At,It,Rt,Dt,Nt,Mt,Pt,Ht,Ut,Bt,kt,Vt,zt,qt,Gt,Wt,jt,Yt,Xt,Kt,Qt,Jt,Zt,$t,ei,ti,ii,ri,oi,si,ni,ai,li,hi,ci,di,ui,pi,Ci,fi,mi,gi,yi,_i,vi,bi,wi,Fi,Ei,Oi,Si,Ti,xi,Li,Ai,Ii,Ri,Di,Ni,Mi,Pi,Hi,Ui,Bi,ki,Vi,zi,qi,Gi,Wi,ji,Yi,Xi,Ki,Qi,Ji,Zi,$i,er,tr,ir,rr,or,sr,nr,ar,lr,hr,cr,dr,ur,pr,Cr,fr,mr,gr,yr,_r,vr,br,wr,Fr,Er,Or,Sr,Tr,xr,Lr,Ar,Ir,Rr,Dr,Nr,Mr,Pr,Hr,Ur,Br,kr,Vr,zr,qr,Gr,Wr,jr,Yr,Xr,Kr,Qr,Jr,Zr,$r,eo,to,io,ro,oo,so,no,ao,lo,ho,co,uo,po,Co,fo,mo,go,yo,_o,vo,bo,wo,Fo,Eo,Oo,So,To,xo,Lo,Ao,Io,Ro,Do,No,Mo,Po,Ho,Uo,Bo,ko,Vo,zo,qo,Go,Wo,jo,Yo,Xo,Ko,Qo,Jo,Zo,$o,es,ts,is,rs,os,ss,ns,as,ls,hs,cs,ds,us,ps,Cs,fs,ms,gs,ys,_s,vs,bs,ws,Fs,Es,Os,Ss,Ts,xs,Ls,As,Is,Rs,Ds,Ns,Ms,Ps,Hs,Us,Bs,ks,Vs,zs,qs,Gs,Ws,js,Ys,Xs,Ks,Qs,Js,Zs,$s,en,tn,rn,on,sn,nn,an,ln,hn,cn,dn,un,pn,Cn,fn,mn,gn,yn,_n,vn,bn,wn,Fn,En,On,Sn,Tn,xn,Ln,An,In,Rn,Dn,Nn,Mn,Pn,Hn,Un,Bn,kn,Vn,zn,qn,Gn,Wn,jn,Yn,Xn,Kn,Qn,Jn,Zn,$n,ea,ta,ia,ra,oa,sa,na,aa,la,ha,ca,da,ua,pa,Ca,fa,ma,ga,ya,_a,va,ba,wa,Fa,Ea,Oa,Sa,Ta,xa,La,Aa,Ia,Ra,Da,Na,Ma,Pa,Ha,Ua,Ba,ka,Va,za,qa,Ga=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=r.x4C===t?Object.create(t):(i.prototype=t.prototype,new i)});a=s||(s={}),l=function(){function e(e,t,i){var o=r;void o.F8C===t&&(t=o.x4C),void o.F8C===i&&(i=o.x4C),this.type=e,this.target=t,this.data=i}return e.isNativeType=function(e){return-r.O8C<"fullscreenchange mozfullscreenchange webkitfullscreenchange MSFullscreenChange focusin focusout touchstart touchmove touchend touchenter touchleave touchcancel".split(r.s4C).indexOf(e)},e.COMPLETE="event_complete",e.CONNECTED="event_connected",e.PROGRESS="event_progress",e.SELECT="event_select",e.CHANGE="event_change",e.ERROR="event_error",e.OPENED="event_opened",e.CLOSED="event_closed",e.CANCEL="event_cancel",e.OPEN="event_open",e.CLOSE="event_close",e.RESIZE="event_resize",e}(),a._Event=l,l=function(){function e(){this.dispatchActive=!r.O8C,this._listeners=[],this._addedListeners=[],this._deletedListeners=[]}return e.prototype.areListenersEqual=function(e,t){return e.type==t.type&&e.handler==t.handler},e.prototype.hasEventListener=function(e,t){var i=r;if(Be.nullOrUndefined(this._listeners[e]))return!i.O8C;for(var o=i.F8C;o<this._listeners[e].length;o++)if(this.areListenersEqual(this._listeners[e][o],t))return!i.F8C;return!i.O8C},e.prototype.addEventListener=function(e,t,i){var o=r;if(void o.F8C===i&&(i=o.F8C),t={type:e,handler:t,priority:i},!this.hasEventListener(e,t))if(this.dispatchActive)Be.nullOrUndefined(this._addedListeners[e])&&(this._addedListeners[e]=[]),this._addedListeners[e].push(t);else if(Be.nullOrUndefined(this._listeners[e])&&(this._listeners[e]=[]),o.F8C==this._listeners[e].length)this._listeners[e].push(t);else{this._listeners[e][this._listeners[e].length-o.O8C].priority>=i&&this._listeners[e].push(t);for(var s=o.F8C;s<this._listeners[e].length;s++)if(this._listeners[e][s].priority<i){this._listeners[e].splice(s,o.F8C,t);break}}},e.prototype.removeEventListener=function(e,t){if(!Be.nullOrUndefined(this._listeners[e])){for(var i={type:e,handler:t},o=this._listeners[e].slice(r.F8C),s=[],n=r.F8C;n<o.length;n++)this.areListenersEqual(o[n],i)?this.dispatchActive&&(Be.nullOrUndefined(this._deletedListeners[e])&&(this._deletedListeners[e]=[]),this._deletedListeners[e].push(o[n])):s.push(o[n]);this._listeners[e]=s}},e.prototype.removeAllEventListeners=function(e){void r.F8C===e?(this._listeners=[],this._addedListeners=[],this._deletedListeners=[]):(Be.nullOrUndefined(this._listeners)||(this._listeners[e]=[]),Be.nullOrUndefined(this._addedListeners)||(this._addedListeners[e]=[]),Be.nullOrUndefined(this._deletedListeners)||(this._deletedListeners[e]=[]))},e.prototype.dispatch=function(e){var t=r;if(!Be.nullOrUndefined(this._listeners[e.type])){this.dispatchActive=!t.F8C;for(var i=this._listeners[e.type].slice(t.F8C),o=t.F8C;o<i.length;o++){if(!Be.nullOrUndefined(this._deletedListeners[e.type])){var s,n=!t.O8C;for(s in this._deletedListeners[e.type])this.areListenersEqual(i[o],this._deletedListeners[e.type][s])&&(n=!t.F8C);if(n)continue}e instanceof De.model.APIEvent?i[o].handler.call(this,e.data):i[o].handler.call(this,e)}for(var a in delete this._deletedListeners[e.type],this._addedListeners){if(Be.nullOrUndefined(this._listeners[a]))i=[];else{if(!(this._listeners[a]instanceof Array))continue;i=this._listeners[a].slice(t.F8C)}if(!Be.nullOrUndefined(this._addedListeners[a]))for(o=t.F8C;o<this._addedListeners[a].length;o++)if(t.F8C==i.length)i.push(this._addedListeners[a][o]);else for(i[i.length-t.O8C].priority==this._addedListeners[a][o].priority&&i.push(this._addedListeners[a][o]),e=t.F8C;e<i.length;e++)if(i[e].priority<this._addedListeners[a][o].priority){i.splice(e,t.F8C,this._addedListeners[a][o]);break}this._listeners[a]=i,this._addedListeners[a]=[]}this.dispatchActive=!t.O8C}},e.prototype.dispatchWith=function(e,t,i){e=new a._Event(e,r.x4C==t?this:t,i),this.dispatch(e)},e}(),a.EventDispatcher=l,c=h||(h={}),d=c.dragndrop||(c.dragndrop={}),u=function(){var e="wdr-dragging-move",t="wdr-dragging";function i(){var e=r,t=this;this.distance=e.g8C,this._lastDraggable=e.x4C,Be.fmdocument.addEventListener(e.e4C,function(e){return t.onMouseMove(e)}),Be.fmdocument.addEventListener("touchmove",function(e){return t.onTouchMove(e)},!e.O8C),Be.fmdocument.addEventListener(e.R4C,function(e){return t.onMouseUp(e)}),Be.fmdocument.addEventListener(e.A4C,function(e){return t.onTouchEnd(e)}),Be.fmdocument.addEventListener("touchcancel",function(e){return t.onTouchEnd(e)})}return i.getInstance=function(){return i.instance||(i.instance=new i),i.instance},i.dispose=function(){i.instance=r.x4C},i.prototype.makeDraggable=function(e,t){var i=this;e.addClass(r.k4C);var o=function(o){t.handle&&!o.target.matches(t.handle)||i.dragElement==e||(r.x4C!=i.dragElement&&i.stopDrag(t,o),i.dragElement=e,i.dragOptions=t,i.startX=i.getX(o),i.startY=i.getY(o))};e.addEventListener(r.f4C,o),e.addEventListener(r.i4C,o)},i.prototype.getX=function(e){return e instanceof MouseEvent?e.clientX:e.changedTouches[r.F8C].clientX},i.prototype.getY=function(e){return e instanceof MouseEvent?e.clientY:e.changedTouches[r.F8C].clientY},i.prototype.onMouseMove=function(e){var i=r;i.O8C==e.which&&this.dragElement&&(this.dragHelper&&this.dragElement.hasClass(t)?(this.setHelperPosition(e.clientX,e.clientY),this.dragOptions.onDrag&&this.dragOptions.onDrag(this.dragElement,e),e.preventDefault()):Be.nullOrUndefined(this.dragOptions.onDragStart)||this.dragOptions.onDragStart(this.dragElement,e)?(this.dragHelper=this.dragOptions.createHelper(this.dragElement),this.dragHelper.css(i.E4C,i.F8C),De._view.PivotView.stage.container.addChild(this.dragHelper),this.setHelperPosition(e.clientX,e.clientY,!i.F8C),this.dragElement.addClass(t)):(this.dragElement=i.x4C,this.dragHelper.removeFromParent(!i.F8C),this.dragHelper=i.x4C))},i.prototype.isDistanceOK=function(e,t){return Math.abs(this.startX-e)>this.distance||Math.abs(this.startY-t)>this.distance?!r.F8C:!r.O8C},i.prototype.setHelperPosition=function(t,i,o){var s=r;if(void s.F8C===o&&(o=!s.O8C),s.x4C!=this.dragHelper){var n=De._view.PivotView.stage.container.getOffset();this.dragHelper.position({top:i-n.top,left:t-n.left}),this.isDistanceOK(t,i)&&(this.dragHelper.css(s.E4C,s.O8C),this.dragElement.addClass(e)),o&&s.x4C!=this.dragElement&&(n=this.dragElement.getOffset(),i=Math.max(s.F8C,Math.min(this.dragElement.height,i-n.top)),t=Math.max(s.F8C,Math.min(this.dragElement.width,this.dragHelper.width,t-n.left)),this.dragHelper.css("margin-top",-i+s.y4C),this.dragHelper.css("margin-left",-t+s.y4C))}},i.prototype.onTouchMove=function(e){var i=r;if(this.dragElement){var o=e.touches[i.F8C];if(this.dragHelper&&this.dragElement.hasClass(t)){if(this.setHelperPosition(o.clientX,o.clientY),this.dragOptions.onDrag&&this.dragOptions.onDrag(this.dragElement,e),e.preventDefault(),o=e.changedTouches[i.F8C],o=c.UIElement.convert(document.elementFromPoint(o.clientX,o.clientY))){var s=o.closest(".wdr-droppable");s&&s.droppableOptions&&s.droppableOptions.onDragOver&&(s.droppableOptions.onDragOver(this.dragElement,this.dragHelper,s,e),this._lastDraggable=s)}(i.x4C==o||i.x4C==s)&&i.x4C!=this._lastDraggable&&this._lastDraggable.droppableOptions&&this._lastDraggable.droppableOptions.onDragLeave&&this._lastDraggable.droppableOptions.onDragLeave(this.dragElement,this.dragHelper,this._lastDraggable,e)}else Be.nullOrUndefined(this.dragOptions.onDragStart)||this.dragOptions.onDragStart(this.dragElement,e)?(this.dragHelper=this.dragOptions.createHelper(this.dragElement),this.dragHelper.css(i.E4C,i.F8C),De._view.PivotView.stage.container.addChild(this.dragHelper),this.setHelperPosition(o.clientX,o.clientY,!i.F8C),this.dragElement.addClass(t)):(this.dragElement=i.x4C,this.dragHelper.removeFromParent(!i.F8C),this.dragHelper=i.x4C)}},i.prototype.onMouseUp=function(e){this.stopDrag(this.dragOptions,e)},i.prototype.onTouchEnd=function(e){for(var t=e.changedTouches[r.F8C],i=t=c.UIElement.convert(document.elementFromPoint(t.clientX,t.clientY));t;){if(t.hasClass(r.I4C)){Be.nullOrEmpty(t.droppableOptions.itemSelector)||(i=i.closest(t.droppableOptions.itemSelector)),t.droppableOptions.onDrop(this.dragElement,t,i,e);break}t=t.parent}this.stopDrag(this.dragOptions,e)},i.prototype.stopDrag=function(i,o){var s=r;s.x4C!=this.dragHelper&&(this.dragHelper.removeFromParent(!s.F8C),this.dragHelper=s.x4C),s.x4C!=this.dragElement&&(this.dragElement.removeClass(t),this.dragElement.removeClass(e),i.onDragEnd&&this.isDistanceOK(this.getX(o),this.getY(o))&&i.onDragEnd(this.dragElement,o),this.dragElement=s.x4C),this._lastDraggable=s.x4C,this.startY=this.startX=NaN},i.prototype.makeDroppable=function(e,t,i){var o=r,s=this;e.hasClass(o.I4C)||(e.addClass(o.I4C),e.addEventListener("mouseenter",function(e){o.x4C!=s.dragElement&&o.O8C==e.which&&i.onDragEnter&&i.onDragEnter(s.dragElement,s.dragHelper,t,e)}),e.addEventListener(o.m4C,function(e){o.x4C!=s.dragElement&&o.O8C==e.which&&i.onDragLeave&&i.onDragLeave(s.dragElement,s.dragHelper,t,e)}),e.addEventListener("mouseover",function(e){o.x4C!=s.dragElement&&o.O8C==e.which&&i.onDragOver&&i.onDragOver(s.dragElement,s.dragHelper,t,e)}),e.addEventListener(o.R4C,function(t){if(o.x4C!=s.dragElement&&o.O8C==t.which){var r=c.UIElement.convert(t.target);Be.nullOrEmpty(i.itemSelector)||(r=r.closest(i.itemSelector)),i.onDrop(s.dragElement,e,r,t)}}))},i}(),d.DragManager=u,p=h||(h={}),C=function(e){var t="wdr-ui-disabled";function i(t,i){var o=r;void o.F8C===t&&(t=o.r4C),void o.F8C===i&&(i=o.C4C);var s=e.call(this)||this;return s.container=new p.UIElement(t),s.container.addClass("wdr-ui "+i),Be.browserVersion().isMobile&&s.container.addClass("wdr-ui-mobile"),s.validate(),s}return Ga(i,e),i.prototype.validate=function(){this.invalidHash={}},i.prototype.invalidate=function(e){void r.F8C===e&&(e=r.v2C),this.invalidHash[e]=!r.F8C,this.draw()},i.prototype.isInvalid=function(){for(var e=r,t=[],i=e.F8C;i<arguments.length;i++)t[i]=arguments[i];if(this.invalidHash.all)return!e.F8C;for(i=e.F8C;i<t.length;i++)if(this.invalidHash[t[i]])return!e.F8C;return!e.O8C},i.prototype.draw=function(){this.validate()},i.prototype.validateNow=function(){this.invalidate()},i.prototype.show=function(){this.container.show()},i.prototype.hide=function(){this.container.hide()},i.prototype.getId=function(){return this.container.attr(r.G2C)},i.prototype.setId=function(e){this.container.attr(r.G2C,e)},i.prototype.getName=function(){return this.name},i.prototype.setName=function(e){this.name=e},i.prototype.html=function(e){return void r.F8C===e?this.container.html():(this.container.html(e),this)},i.prototype.setEnabled=function(e){this.container.toggleClass(t,!e)},i.prototype.getEnabled=function(){return!this.container.hasClass(t)},i.prototype.addClass=function(e){void r.F8C===e&&(e=r.C4C),this.container.addClass(e)},i.prototype.removeClass=function(e){this.container.removeClass(e)},Object.defineProperty(i.prototype,r.V2C,{get:function(){return this.container.padding},set:function(e){},enumerable:!r.F8C,configurable:!r.F8C}),i.prototype.getWidth=function(e){return this.container.getWidth(e)},i.prototype.setWidth=function(e){this.getWidth()!==e&&(this.container.setWidth(e),this.invalidate(r.l2C))},i.prototype.getHeight=function(e){return void r.F8C===e&&(e=!r.O8C),this.container.getHeight(e)},i.prototype.setHeight=function(e){this.getHeight()!==e&&(this.container.setHeight(e),this.invalidate(r.l2C))},i.prototype.isVisible=function(e){return void r.F8C===e&&(e=void r.F8C),void r.F8C!==e&&(e?this.show():this.hide()),this.container.visible},i.prototype.position=function(){return this.container.position()},i.prototype.addChild=function(e,t){void r.F8C===t&&(t=!r.O8C),t?this.container.prepend(e.container):this.container.append(e.container)},i.prototype.removeFromParent=function(e){void r.F8C===e&&(e=!r.O8C),e?this.container.remove():this.container.detach()},i.prototype.getX=function(){return this.container.left},i.prototype.getY=function(){return this.container.top},i.prototype.hitTestPoint=function(e,t){return e>=this.getX()&&e<=this.getX()+this.getWidth()&&t>=this.getY()&&t<=this.getY()+this.getHeight()},i.prototype.addEventListener=function(e,t){this.container.addEventListener(e,t)},i.prototype.removeEventListener=function(e,t){this.container.removeEventListener(e,t)},i.prototype.dispatch=function(e){this.container.dispatch(e)},i.prototype.dispatchWith=function(e,t,i){this.container.dispatchWith(e,t,i)},i.prototype.addLayoutClasses=function(e){void r.F8C===e&&(e=!r.O8C),e=e?this.getWidth(!r.F8C):De._view.PivotView.stageWidth,this.container.toggleClass("wdr-layout-tablet",768>e),this.container.toggleClass("wdr-layout-mobile",580>e),this.container.toggleClass("wdr-layout-mobile-small",460>e)},i}(s.EventDispatcher),p.UIComponentBase=C,f=h||(h={}),m=function(e){var t=r,i="class";function o(i,r){void t.F8C===i&&(i=t.r4C),void t.F8C===r&&(r=t.C4C);var o=e.call(this)||this;return o.display=t.R2C,o.frames=[],o.__handlers=[],o.element=t.K2C==typeof i?document.createElement(i):i,o.addClass("wdr-ui-element"),o.addClass(r),o}return Ga(o,e),Object.defineProperty(o.prototype,"element",{get:function(){return this._element},set:function(e){(this._element=e)&&(this._element.uielement=this)},enumerable:!t.F8C,configurable:!t.F8C}),Object.defineProperty(o.prototype,t.G2C,{get:function(){return this.element.id},set:function(e){this.element.id=e},enumerable:!t.F8C,configurable:!t.F8C}),Object.defineProperty(o.prototype,t.q2C,{get:function(){return o.convert(this.element.parentElement)},enumerable:!t.F8C,configurable:!t.F8C}),Object.defineProperty(o.prototype,"nodeName",{get:function(){return this._element.nodeName.toLowerCase()},enumerable:!t.F8C,configurable:!t.F8C}),o.prototype.addChild=function(e){this.element.appendChild(e.element)},o.prototype.children=function(){for(var e=this.element.firstElementChild,t=[];e;)t.push(o.convert(e)),e=e.nextElementSibling;return t},o.prototype.contains=function(e){return this.element.contains(e.element)},o.prototype.append=function(e){return e&&this.addChild(e),this},o.prototype.prepend=function(e){return this.element.insertBefore(e.element,this.element.firstChild),this},o.prototype.before=function(e){return this.element.parentNode&&this.element.parentNode.insertBefore(e.element,this.element),this},o.prototype.after=function(e){return this.element.parentNode&&this.element.nextElementSibling?this.element.parentNode.insertBefore(e.element,this.element.nextElementSibling):this.append(e),this},o.prototype.addComponent=function(e){this.element.appendChild(e.container.element)},o.prototype.removeFromParent=function(e){void t.F8C===e&&(e=!t.F8C),e?this.remove():this.detach()},o.prototype.remove=function(){t.x4C!=this.element&&(this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.dispose())},o.prototype.detach=function(){if(t.x4C!=this.element&&this.element.parentNode){var e=this.element.cloneNode(!t.F8C);this.element.parentNode.removeChild(this.element),this.element=e}},o.prototype.removeAllChildren=function(){for(;this.element&&this.element.firstChild;){var e=o.convert(this.element.firstChild);e&&e.dispose&&e.dispose(),this.element.removeChild(this.element.firstChild)}},o.prototype.clone=function(){return o.convert(this.element.cloneNode(!t.F8C))},o.convert=function(e){return e&&e.nodeType==Node.ELEMENT_NODE?Be.nullOrUndefined(e.uielement)?new o(e):e.uielement:t.x4C},o.prototype.get=function(e){var i=this.children();return t.F8C<i.length?i[e]:t.x4C},o.prototype.find=function(e,i){if(void t.F8C===i||!t.O8C==i)return o.convert(this.element.querySelector(e));for(var r=this.element.querySelectorAll(e),s=[],n=t.F8C;n<r.length;n++)s.push(o.convert(r[n]));return s},o.prototype.closest=function(e){if(!this.element)return t.x4C;for(var i=this.element;t.x4C!=i;){if(i.matches){if(i.matches(e))return i==this.element?this:o.convert(i)}else if(i.msMatchesSelector(e))return i==this.element?this:o.convert(i);i=i.parentElement}return t.x4C},o.prototype.addClass=function(e){if(!this.element)return this;for(var r=(e=e.trim()).split(t.s4C),o=t.F8C;o<r.length;o++)t.F8C<r[o].length&&(Be.detectBrowser().isMsie?(e=this.element.getAttribute(i),Be.nullOrUndefined(e)?this.element.setAttribute(i,r[o]):-t.O8C==e.split(t.s4C).indexOf(r[o])&&this.element.setAttribute(i,e+t.s4C+r[o])):!t.O8C==this.element.classList.contains(r[o])&&this.element.classList.add(r[o]));return this},o.prototype.removeClass=function(e){if(!this.element)return this;if(e=e.trim(),t.F8C<e.length)if(Be.detectBrowser().isMsie){var r=this.element.getAttribute(i);Be.nullOrUndefined(r)||(e=(r=r.split(t.s4C)).indexOf(e),-t.O8C<e&&(r.splice(e,t.O8C),this.element.setAttribute(i,r.join(t.s4C))))}else this.element.classList.contains(e)&&this.element.classList.remove(e);return this},o.prototype.toggleClass=function(e,t){t?this.addClass(e):this.removeClass(e)},o.prototype.hasClass=function(e){return this.element.classList.contains(e)},o.prototype.disableSelection=function(){return this.addClass(t.N2C),this},o.prototype.enableSelection=function(){return this.addClass("wdr-selectable"),this},o.prototype.getWidth=function(e){if(void t.F8C===e&&(e=!t.O8C),!this.element)return t.F8C;var i=window.getComputedStyle(this.element);return e=e?t.F8C:(parseFloat(i.paddingLeft)||t.F8C)+(parseFloat(i.paddingRight)||t.F8C),this.element.clientWidth-e},o.prototype.setWidth=function(e){return t.x2C===typeof e?this.element.style.width=e+t.y4C:t.K2C===typeof e&&(this.element.style.width=e),this},Object.defineProperty(o.prototype,t.s2C,{get:function(){return this.getWidth()},set:function(e){this.setWidth(e)},enumerable:!t.F8C,configurable:!t.F8C}),Object.defineProperty(o.prototype,t.V2C,{get:function(){var e=window.getComputedStyle(this.element);return{left:parseFloat(e.paddingLeft)||t.F8C,right:parseFloat(e.paddingRight)||t.F8C,top:parseFloat(e.paddingTop)||t.F8C,bottom:parseFloat(e.paddingBottom)||t.F8C}},set:function(e){},enumerable:!t.F8C,configurable:!t.F8C}),Object.defineProperty(o.prototype,"borderWidth",{get:function(){var e=window.getComputedStyle(this.element);return{left:parseFloat(e.borderLeftWidth||e.borderWidth)||t.F8C,right:parseFloat(e.borderRightWidth||e.borderWidth)||t.F8C,top:parseFloat(e.borderTopWidth||e.borderWidth)||t.F8C,bottom:parseFloat(e.borderBottomWidth||e.borderWidth)||t.F8C}},enumerable:!t.F8C,configurable:!t.F8C}),o.prototype.getHeight=function(e){void t.F8C===e&&(e=!t.O8C);var i=window.getComputedStyle(this.element);return e=e?t.F8C:(parseFloat(i.paddingTop)||t.F8C)+(parseFloat(i.paddingBottom)||t.F8C),t.F8C>this.element.clientHeight-e?t.F8C:this.element.clientHeight-e},o.prototype.setHeight=function(e){return t.x2C===typeof e?this.element.style.height=e+t.y4C:t.K2C===typeof e&&(this.element.style.height=e),this},Object.defineProperty(o.prototype,t.O2C,{get:function(){return this.getHeight()},set:function(e){this.setHeight(e)},enumerable:!t.F8C,configurable:!t.F8C}),Object.defineProperty(o.prototype,t.M2C,{get:function(){return this.element.getBoundingClientRect().left},set:function(e){this.element.style.left=e+t.y4C},enumerable:!t.F8C,configurable:!t.F8C}),Object.defineProperty(o.prototype,t.b2C,{get:function(){return this.element.getBoundingClientRect().top},set:function(e){this.element.style.top=e+t.y4C},enumerable:!t.F8C,configurable:!t.F8C}),Object.defineProperty(o.prototype,t.j2C,{get:function(){return this.element.getBoundingClientRect().right},set:function(e){this.element.style.right=e+t.y4C},enumerable:!t.F8C,configurable:!t.F8C}),Object.defineProperty(o.prototype,t.g2C,{get:function(){return this.element.getBoundingClientRect().bottom},set:function(e){this.element.style.bottom=e+t.y4C},enumerable:!t.F8C,configurable:!t.F8C}),o.prototype.outerHtml=function(){return this.element.outerHTML},o.prototype.html=function(e){return void t.F8C===e?this.element.innerHTML:(this.element.innerHTML=e,this)},o.prototype.empty=function(){this.html(t.C4C)},o.prototype.clear=function(){this.empty()},o.prototype.text=function(e){return void t.F8C===e?this.element.textContent:(t.o2C==this.element.tagName.toLowerCase()?this.element.value=e:this.element.textContent=e,this)},o.prototype.focus=function(){return this.element.focus(),this},o.prototype.blur=function(){return this.element.blur(),this},o.prototype.show=function(){this.element.style.display=this.display},o.prototype.hide=function(){this.element.style.display=t.n2C},Object.defineProperty(o.prototype,"x",{get:function(){return this.element.offsetLeft},enumerable:!t.F8C,configurable:!t.F8C}),Object.defineProperty(o.prototype,"y",{get:function(){return this.element.offsetTop},enumerable:!t.F8C,configurable:!t.F8C}),o.prototype.offset=function(e){if(void t.F8C===e)return this.getOffset();this.css(t.M2C,e.left+t.y4C),this.css(t.b2C,e.top+t.y4C)},o.prototype.getBoundingClientRect=function(){return this.element.getBoundingClientRect()},o.prototype.position=function(e){if(void t.F8C===e)return{top:this.y,left:this.x};this.offset(e)},o.prototype.attr=function(e,i){if(void t.F8C===i)return this.element.getAttribute(e);try{this.element.setAttribute(e,i)}catch(t){this.element.attributes[e]=i}return this},o.prototype.removeAttr=function(e){return this.element.removeAttribute(e),this},o.prototype.css=function(e,i){return void t.F8C===i?window.getComputedStyle(this.element)[o.toCamelCase(e)]:(this.element.style[o.toCamelCase(e)]=i,this)},o.toCamelCase=function(e){var i=e.split(t.L2C);if(t.O8C<i.length){for(e=t.O8C;e<i.length;e++)i[e]=i[e].charAt(t.F8C).toUpperCase()+i[e].substr(t.O8C);return i.join(t.C4C)}return e},o.prototype.val=function(){return t.o2C==this.element.tagName.toLowerCase()||t.a2C==this.element.tagName.toLowerCase()?this.element.value:this.element.textContent},o.prototype.requestAnimationFrame=function(e){var i=t.F8C;return window.requestAnimationFrame?i=window.requestAnimationFrame(e):window.msRequestAnimationFrame?i=window.msRequestAnimationFrame(e):window.mozRequestAnimationFrame?i=window.mozRequestAnimationFrame(e):window.webkitRequestAnimationFrame?i=window.webkitRequestAnimationFrame(e):e.call(t.x4C),this.frames.push(i),i},o.prototype.cancelAnimationFrame=function(e){this.frames.splice(this.frames.indexOf(e),t.O8C),t.F8C!=e&&(t.x4C!=window.cancelAnimationFrame?window.cancelAnimationFrame(e):t.x4C!=window.msCancelRequestAnimationFrame?window.msCancelRequestAnimationFrame(e):t.x4C!=window.mozCancelAnimationFrame?window.mozCancelAnimationFrame(e):t.x4C!=window.webkitCancelAnimationFrame&&window.webkitCancelAnimationFrame(e))},Object.defineProperty(o.prototype,"visible",{get:function(){return this.element&&t.n2C!=this.css("display")},set:function(e){e?this.show():this.hide()},enumerable:!t.F8C,configurable:!t.F8C}),o.prototype.getOffset=function(e){if(void t.F8C===e&&(e=t.x4C),t.x4C==e)return this.element.getBoundingClientRect();for(var i=t.F8C,r=t.F8C,o=this.element;o&&o!=e&&!isNaN(o.offsetLeft)&&!isNaN(o.offsetTop);)i+=o.offsetLeft-o.scrollLeft,r+=o.offsetTop-o.scrollTop,o=o.offsetParent;return{top:r,left:i}},o.prototype.getScrollTop=function(){return this.element.scrollTop},o.prototype.setScrollTop=function(e){return this.element.scrollTop=e,this},o.prototype.setScrollLeft=function(e){return this.element.scrollLeft=e,this},o.prototype.addEventListener=function(i,r,o){t.Q2C!==typeof this.element[t.k2C+i]||s._Event.isNativeType(i)?(Be.nullOrUndefined(this.__handlers[i])&&(this.__handlers[i]=[]),this.__handlers[i][r.toString()]=function(e){r(e)},this.element.addEventListener(i,this.__handlers[i][r.toString()],o)):e.prototype.addEventListener.call(this,i,r,o)},o.prototype.removeEventListener=function(i,r,o){t.Q2C!==typeof this.element[t.k2C+i]||s._Event.isNativeType(i)?this.__handlers[i]&&this.element.removeEventListener(i,this.__handlers[i][r.toString()],o):e.prototype.removeEventListener.call(this,i,r)},o.prototype.dispatch=function(t){e.prototype.dispatch.call(this,t)},o.prototype.removeAllEventListeners=function(i){for(var r in this.__handlers)if(void t.F8C===i||i==r)for(var o in this.__handlers[r])try{this.element.removeEventListener(r,this.__handlers[r][o],!t.F8C),this.element.removeEventListener(r,this.__handlers[r][o],!t.O8C)}catch(e){console.error(e)}this.__handlers=[],e.prototype.removeAllEventListeners.call(this,r)},o.prototype.dispose=function(){this.removeAllEventListeners(),this.removeAllChildren(),this._element=this._element.uielement=t.x4C;for(var e=t.F8C;e<this.frames.length;e++)this.cancelAnimationFrame(this.frames[e]);this.frames=[],this._resizableHelper&&this._resizableHelper.dispose()},o.prototype.refresh=function(){this.html(this.html())},o.prototype.draggable=function(e){f.dragndrop.DragManager.getInstance().makeDraggable(this,e)},o.prototype.droppable=function(e,t){this._droppableOptions=e,f.dragndrop.DragManager.getInstance().makeDroppable(this,t||this,e)},Object.defineProperty(o.prototype,"droppableOptions",{get:function(){return this._droppableOptions},enumerable:!t.F8C,configurable:!t.F8C}),o.prototype.index=function(){for(var e=t.F8C,i=this.element;i=i.previousElementSibling;)e++;return e},o.prototype.resizable=function(e){this._resizableHelper=new f.resizable.ResizableHelper(this,e)},o}(s.EventDispatcher),f.UIElement=m,g=h||(h={}),y=function(e){var t="wdr-ui-pressed";function i(t){var i=r;void i.F8C===t&&(t=i.C4C);var o=e.call(this,i.J2C,i.E2C)||this;return o.mouseDownTimeout=i.F8C,o.repeatDelay=i.V0C,o.addClass(t),o.container.addEventListener(i.H2C,function(e){return o.onClick(e)}),o.container.addEventListener(i.f4C,function(e){return o.onMouseDown()}),o.container.addEventListener(i.R4C,function(e){return o.onMouseUp()}),o.container.addEventListener("mouseout",function(e){return o.onMouseOut()}),o.container.display=i.y2C,o}return Ga(i,e),i.prototype.onClick=function(e){this.getEnabled()&&this.dispatchWith(i.CLICK_EVENT,this),e.stopImmediatePropagation()},i.prototype.onMouseDown=function(){var e=this;this.container.toggleClass(t,!r.F8C),this.mouseDownTimeout=Be.fmSetInterval(function(){return e.dispatchMouseDown()},this.getRepeatDelay())},i.prototype.dispatchMouseDown=function(){this.dispatch(new s._Event(i.MOUSE_DOWN_EVENT,this))},i.prototype.onMouseUp=function(){this.container.toggleClass(t,!r.O8C),Be.fmClearInterval(this.mouseDownTimeout)},i.prototype.onMouseOut=function(){this.container.toggleClass(t,!r.O8C),Be.fmClearInterval(this.mouseDownTimeout)},i.prototype.getLabel=function(){return this.label},i.prototype.setRepeatDelay=function(e){this.repeatDelay=e},i.prototype.getRepeatDelay=function(){return this.repeatDelay},i.prototype.setLabel=function(e){this.label!=e&&(this.label=e,this.container.text(this.label))},i.MOUSE_DOWN_EVENT="buttonmousedown",i.CLICK_EVENT="buttonclick",i}(g.UIComponentBase),g.UIButton=y,_=h||(h={}),v=function(e){function t(t){var i=r;void i.F8C===t&&(t=i.C4C);var o=e.call(this,i.I2C,"wdr-ui wdr-ui-label")||this;return o.container.display=i.y2C,o.setLabel(t),o}return Ga(t,e),t.prototype.getLabel=function(){return this.label},t.prototype.setLabel=function(e,t){void r.F8C===t&&(t=!r.O8C),this.label!=e&&(this.label=e,t?this.container.html(this.label):this.container.text(this.label))},t.prototype.setSelectable=function(e){e?this.container.enableSelection():this.container.disableSelection()},t}(_.UIComponentBase),_.UILabel=v,b=h||(h={}),w=function(e){function t(){var t=r,i=e.call(this,t.a2C,"wdr-ui-text-area")||this;return i.container.addEventListener(t.w2C,function(e){return i.onKeyPressed(e)}),i.container.addEventListener(t.r2C,function(e){return i.onKeyUp(e)}),i.container.addEventListener(t.C2C,function(e){return i.onInputPaste(e)}),i}return Ga(t,e),t.prototype.onKeyUp=function(e){this.dispatchChange()},t.prototype.onInputPaste=function(e){this.dispatchChange()},t.prototype.dispatchChange=function(){this.dispatch(new s._Event(b.UITextInput.CHANGE_EVENT,this))},t.prototype.getText=function(){return this.container.val()},t.prototype.setText=function(e){this.getText()!=e&&(this.container.element.value=e,this.dispatchChange())},t.prototype.clear=function(){this.setText(r.C4C)},t.prototype.insertText=function(e){var t=this.getSelectionBeginIndex(),i=this.getSelectionEndIndex(),o=(o=this.getText()).substr(r.F8C,t)+e+o.substr(t);this.setText(o),this.setSelection(t+e.length,i+e.length)},t.prototype.setSelection=function(e,t){void r.F8C===t&&(t=-r.O8C),this.container.element.focus(),this.container.element.setSelectionRange(e,r.F8C>t?e:t)},t.prototype.getSelectionBeginIndex=function(){return this.container.element.selectionStart},t.prototype.getSelectionEndIndex=function(){return this.container.element.selectionEnd},t.prototype.selectAll=function(){this.setSelection(r.F8C,this.getText().length)},t.prototype.onKeyPressed=function(e){e.ctrlKey?(this.dispatchWith(t.EVENT_CTRL_ENTER),e.preventDefault()):r.h8C==e.keyCode&&(this.dispatchWith(t.EVENT_ENTER),e.preventDefault())},t.EVENT_ENTER=r.P2C,t.EVENT_CTRL_ENTER="ntl",t}(b.UIComponentBase),b.UITextArea=w,F=h||(h={}),E=function(e){var t="data-placeholder";function i(){var i=r,o=e.call(this,i.o2C,"wdr-ui-text-input")||this;return o.text=i.C4C,o.prompt=i.C4C,o.changeDelay=i.F8C,o.changeDispatched=!i.F8C,o.container.display=i.y2C,o.container.attr(i.W3C,i.p3C),o.container.attr(t,i.C4C),o.container.addEventListener(i.X3C,function(e){return o.onFocusIn()}),o.container.addEventListener(i.B3C,function(e){return o.onFocusOut()}),o.container.addEventListener(i.r2C,function(e){return o.onKeyUp(e)}),o.container.addEventListener(i.w2C,function(e){return o.onKeyPressed(e)}),o.container.addEventListener(i.C2C,function(e){return o.onInputPaste(e)}),o}return Ga(i,e),i.getChar=function(e){var t=r;return t.x4C==e.which?t.m8C>e.keyCode?t.x4C:String.fromCharCode(e.keyCode):t.F8C!=e.which&&t.F8C!=e.charCode?t.m8C>e.which?t.x4C:String.fromCharCode(e.which):t.x4C},i.prototype.onKeyPressed=function(e){if(r.h8C==e.keyCode&&this.dispatchWith(i.EVENT_ENTER),!(Be.nullOrUndefined(this.restrictRule)||e.ctrlKey||e.altKey||e.metaKey)){var t=i.getChar(e);r.x4C!=t&&!r.O8C===this.restrictRule.test(t)&&e.preventDefault()}},i.prototype.onKeyUp=function(e){this.container.val()!==this.text&&(this.text=this.container.val(),this.dispatchChange())},i.prototype.onInputPaste=function(e){this.container.val()!==this.text&&(this.text=this.container.val(),this.dispatchChange())},i.prototype.dispatchChange=function(){var e=this;r.F8C<this.changeDelay?this.changeDispatched&&(this.changeDispatched=!r.O8C,Be.fmSetTimeout(function(){return e._dispatchChange()},this.changeDelay)):this._dispatchChange()},i.prototype._dispatchChange=function(){this.changeDispatched=!r.F8C,this.dispatch(new s._Event(i.CHANGE_EVENT,this,this.text))},i.prototype.onFocusIn=function(){r.F8C==this.text.length&&(this.container.text(r.C4C),this.enablePrompt(!r.O8C))},i.prototype.onFocusOut=function(){this.enablePrompt(r.F8C==this.text.length)},i.prototype.getText=function(){return this.text=this.container.val()==this.prompt?this.text:this.container.val()},i.prototype.setText=function(e){this.text!=e&&(this.text=e,this.container.text(this.text),this.enablePrompt(r.F8C==this.text.length))},i.prototype.clear=function(e){void r.F8C===e&&(e=!r.F8C),this.setText(r.C4C),e&&this._dispatchChange()},i.prototype.setPrompt=function(e){e!=this.prompt&&(this.prompt=e,this.container.attr(t,this.prompt),this.enablePrompt(r.F8C==this.text.length))},i.prototype.enablePrompt=function(e){this.container.text(e?this.prompt:this.text),this.container.toggleClass(r.G3C,e)},i.prototype.getPrompt=function(){return this.prompt},i.prototype.setRestriction=function(e){this.restrictRule=e},i.prototype.getRestriction=function(){return this.restrictRule},i.prototype.setChangeDelay=function(e){this.changeDelay=e},i.prototype.getChangeDelay=function(){return this.changeDelay},i.prototype.getType=function(){return this.container.attr(r.W3C)},i.prototype.setType=function(e){this.container.attr(r.W3C,e)},i.CHANGE_EVENT=r.V3C,i.EVENT_ENTER=r.P2C,i}(F.UIComponentBase),F.UITextInput=E,O=h||(h={}),S=function(e){function t(){var t=r,i=e.call(this)||this;return i.container.display=t.y2C,i.container.hasClass(t.E2C)&&i.container.removeClass(t.E2C),i.container.addClass(t.q3C),i.selected=t.F8C,i.addEventListener(O.UIButton.CLICK_EVENT,function(){return i.onClick()}),i}return Ga(t,e),t.prototype.onClick=function(){this.getEnabled()&&(this.toggle(),this.dispatchWith(s._Event.CHANGE,this))},t.prototype.toggle=function(){var e=r;this.selected=e.O8C==this.selected?e.F8C:e.O8C,this.container.toggleClass(e.Y3C,e.O8C==this.selected)},t.prototype.setSelection=function(e){var t=r;this.selected==e||t.O8C<e||-t.O8C>e||(this.selected=e,this.container.toggleClass(t.Y3C,t.O8C==this.selected))},t.prototype.getSelection=function(){return this.selected},t}(O.UIButton),O.UIToggleButton=S,T=h||(h={}),x=function(e){var t=r,i="wdr-ui-semi-selected";function o(){var i=e.call(this)||this;return i.container.display=t.y2C,i.container.hasClass(t.q3C)&&i.container.removeClass(t.q3C),i.container.addClass("wdr-ui-checkbox"),i.labelHolder=new T.UILabel("Label"),i.container.append(i.labelHolder.container),i}return Ga(o,e),o.prototype.toggle=function(){e.prototype.toggle.call(this),this.container.toggleClass(i,-t.O8C==this.getSelection())},o.prototype.setLabel=function(e,i){void t.F8C===i&&(i=!t.O8C),t.x4C!=this.labelHolder&&this.labelHolder.setLabel(e,i)},o.prototype.getLabel=function(){return t.x4C!=this.labelHolder?this.labelHolder.getLabel():t.C4C},o.prototype.setSelection=function(r){this.getSelection()==r||t.O8C<r||-t.O8C>r||(e.prototype.setSelection.call(this,r),this.container.toggleClass(i,-t.O8C==this.getSelection()))},Object.defineProperty(o.prototype,"checked",{get:function(){return t.O8C==this.getSelection()},set:function(e){this.setSelection(e?t.O8C:t.F8C)},enumerable:!t.F8C,configurable:!t.F8C}),o.SELECTED=t.O8C,o.UNSELECTED=t.F8C,o.SEMI_SELECTED=-t.O8C,o}(T.UIToggleButton),T.UICheckBox=x,L=h||(h={}),A=function(e){var t=r;function i(){var r=e.call(this,t.r4C,"wdr-ui-divider")||this;return r.mouseMoveHandler=function(e){return r.onMouseMove(e)},r.mouseDownHandler=function(e){return r.onMouseDown(e)},r.mouseUpHandler=function(e){return r.onMouseUp(e)},r.direction=i.HORIZONTAL,r.addEventListener(t.f4C,r.mouseDownHandler),Be.fmdocument.addEventListener(t.R4C,r.mouseUpHandler),r.container.disableSelection(),r}return Ga(i,e),i.prototype.onMouseDown=function(e){this._height=this.direction==i.HORIZONTAL?this.getHeight():this.getWidth(),this._baseOffset=this.container.parent.getOffset(),Be.fmdocument.addEventListener(t.e4C,this.mouseMoveHandler),e.preventDefault(),e.stopImmediatePropagation()},i.prototype.onMouseMove=function(e){if(this.direction==i.HORIZONTAL){var r=e.clientY-this._baseOffset.top;if(this._containment&&(r<this._containment[t.O8C]||r>this._containment[t.b8C]))return;this.container.css(t.b2C,r-this._height/t.M8C+t.y4C),this.dispatchWith(i.EVENT_MOVED,this,{top:r})}this.direction==i.VERTICAL&&(e=e.clientX-this._baseOffset.left,this._containment&&(e<this._containment[t.F8C]||e>this._containment[t.M8C])||(this.container.css(t.M2C,e-this._height/t.M8C+t.y4C),this.dispatchWith(i.EVENT_MOVED,this,{left:e})))},i.prototype.onMouseUp=function(e){Be.fmdocument.removeEventListener(t.e4C,this.mouseMoveHandler)},Object.defineProperty(i.prototype,"direction",{get:function(){return this._direction},set:function(e){this._direction=e,this.container.toggleClass("wdr-ui-horizontal",this._direction==i.HORIZONTAL),this.container.toggleClass("wdr-ui-vertical",this._direction==i.VERTICAL),this.container.css(t.F3C,t.O3C)},enumerable:!t.F8C,configurable:!t.F8C}),Object.defineProperty(i.prototype,"containment",{set:function(e){this._containment=e},enumerable:!t.F8C,configurable:!t.F8C}),i.HORIZONTAL=t.F8C,i.VERTICAL=t.O8C,i.EVENT_MOVED="divider_moved_event",i}(L.UIComponentBase),L.UIDivider=A,I=h||(h={}),R=function(e){var t="wdr-ui-transparent",i="wdr-ui-opaque";function o(){return e.call(this,r.r4C,"wdr-ui-modal-overlay")||this}return Ga(o,e),o.prototype.setTransparent=function(e){this.container.toggleClass(i,!r.O8C),this.container.toggleClass(t,e)},o.prototype.setOpaque=function(e){this.container.toggleClass(t,!r.O8C),this.container.toggleClass(i,e)},o}(I.UIComponentBase),I.UIModalOverlay=R,D=h||(h={}),N=D.containers||(D.containers={}),M=function(e){function t(t){return void r.F8C===t&&(t="wdr-ui-container"),e.call(this,r.r4C,t)||this}return Ga(t,e),t.prototype.removeChild=function(e){this.contains(e)&&e.container.detach()},t.prototype.contains=function(e){return Be.nullOrUndefined(e)?!r.O8C:this.container.contains(e.container)},t.prototype.getWidth=function(){return this.container.width},t.prototype.getHeight=function(){return this.container.height},t.prototype.removeAllChildren=function(){for(var e=this.container.children(),t=e.length-r.O8C;r.F8C<=t;t--)e[t].removeFromParent()},t}(D.UIComponentBase),N.UIContainer=M,P=h||(h={}),H=P.containers||(P.containers={}),U=function(e){function t(){return e.call(this,"wdr-ui-border-container")||this}return Ga(t,e),t}(H.UIContainer),H.UIBorderContainer=U,B=h||(h={}),k=B.containers||(B.containers={}),V=function(e){function t(){var t=e.call(this)||this;return t.container.addClass("wdr-ui-window"),t.hide(),t}return Ga(t,e),t.prototype.setPosition=function(e,t){this.container.offset({left:Math.floor(e),top:Math.floor(t)}),this.container.css(r.F3C,r.O3C)},t.prototype.getPosition=function(){return this.container.offset()},t}(k.UIContainer),k.UIWindow=V,z=h||(h={}),q=z.containers||(z.containers={}),G=function(e){function i(){return e.call(this,t.a3C)||this}return Ga(i,e),i}(q.UIContainer),q.UIHGroup=G,W=h||(h={}),j=W.containers||(W.containers={}),Y=function(e){function t(){return e.call(this,"wdr-ui-vgroup")||this}return Ga(t,e),t}(j.UIContainer),j.UIVGroup=Y,X=h||(h={}),K=X.containers||(X.containers={}),Q=function(e){function t(){return e.call(this,"wdr-ui-panel")||this}return Ga(t,e),t}(K.UIContainer),K.UIPanel=Q,J=h||(h={}),Z=J.containers||(J.containers={}),$=function(e){function t(t){var i=e.call(this)||this;return i._overlayClickHandler=function(){return i.onOverlayClick()},i.resizeHandler=function(e){return i.onWindowResize(e)},i.isOpaque=!r.O8C,i._modalParent=t,i.container.addClass("wdr-ui-popup"),i.hide(),i._overlay=new J.UIModalOverlay,i._overlay.addEventListener(r.H2C,i._overlayClickHandler),i._overlay.hide(),i._modalParent&&i._modalParent.addChild(i._overlay.container),i}return Ga(t,e),t.prototype.onWindowResize=function(e){var t=this;e.target===window&&(this.container.requestAnimationFrame(function(){return t.centerPosition()}),this.addLayoutClasses())},t.prototype.onOverlayClick=function(){this.close()},t.prototype.open=function(){Be.fmwindow.addEventListener("resize",this.resizeHandler),this._overlay.show(),this._overlay.container.toggleClass("fm-ui-opaque",this.isOpaque),this.show(),this.centerPosition(),this.dispatchWith(s._Event.OPENED),this.addLayoutClasses()},t.prototype.close=function(){Be.fmwindow.removeEventListener("resize",this.resizeHandler),this._overlay.hide(),this.hide(),this.dispatchWith(s._Event.CLOSED)},t.prototype.centerPosition=function(){var e=r;if(i=this._modalParent){var t=Math.max(e.F8C,(i.getWidth(!e.F8C)-this.container.getWidth(!e.F8C)-e.M8C)/e.M8C),i=Math.max(e.F8C,(i.getHeight(!e.F8C)-this.container.getHeight(!e.F8C)-e.M8C)/e.M8C);this.setPosition(t,i)}},Object.defineProperty(t.prototype,"overlay",{get:function(){return this._overlay},enumerable:!r.F8C,configurable:!r.F8C}),t}(Z.UIWindow),Z.UIPopup=$,ee=h||(h={}),te=ee.containers||(ee.containers={}),ie=function(e){function t(){return e.call(this,"wdr-ui-toolbar")||this}return Ga(t,e),t}(te.UIContainer),te.UIToolbar=ie,re=h||(h={}),oe=re.containers||(re.containers={}),se=function(e){function t(){var t=e.call(this,"wdr-ui-toolbar-mobile")||this;return t.headerDisplay=new re.UILabel,t.headerDisplay.addClass("wdr-ui-header-display"),t.addChild(t.headerDisplay),t}return Ga(t,e),t.prototype.setHeader=function(e){this.header!=e&&(this.header=e,this.headerDisplay.setLabel(e))},t.prototype.getHeader=function(){return this.header},t.prototype.setLeftItem=function(e){this.leftItem!=e&&(r.x4C!=this.leftItem&&this.leftItem.removeFromParent(),this.leftItem=e,r.x4C!=this.leftItem&&(this.leftItem.addClass("wdr-ui-left"),this.addChild(this.leftItem)))},t.prototype.setRightItem=function(e){this.rightItem!=e&&(r.x4C!=this.rightItem&&this.rightItem.removeFromParent(),this.rightItem=e,r.x4C!=this.rightItem&&(this.rightItem.addClass("wdr-ui-right"),this.addChild(this.rightItem)))},t}(oe.UIContainer),oe.UIToolbarMobile=se,ne=h||(h={}),ae=ne.dataProviders||(ne.dataProviders={}),le=function(){function e(){this.items=[],this.allItems=[]}return e.prototype.setItems=function(e){this.allItems=e},e.prototype.getItems=function(e,t){if(r.F8C>e||t>this.allItems.length+r.O8C)return[];this.items.length=r.F8C;for(var i=e;i<t;i++)this.items.push(this.allItems[i]);return this.items},e.prototype.getLength=function(){return this.allItems.length},e}(),ae.SmartDataProvider=le,he=h||(h={}),ce=he.lists||(he.lists={}),de=function(e){var i=r;function o(){var r=e.call(this,t.I3C,"wdr-ui-list")||this;return r.rowHeight=Be.browserVersion().isMobile?o.DEFAULT_ROW_HEIGHT_MOBILE:o.DEFAULT_ROW_HEIGHT,r.selectedItems=[],r.selectedIndices=[],r.markSelected=!i.O8C,r.useCache=!i.F8C,r._allowMultipleSelection=!i.O8C,r.dataProvider=[],r.itemsCache=[],r.visibleItems=[],r.labelField=t.m3C,r.itemRendererFactory=r.defaultItemRendererFactory,r.selectedItem=i.x4C,r.selectedIndex=-i.O8C,r.container.addEventListener(i.H2C,function(e){return r.onItemClick(e)}),r}return Ga(o,e),o.prototype.getRowHeight=function(){return i.F8C<this.visibleItems.length?this.visibleItems[i.F8C].getHeight():this.rowHeight},o.prototype.getStartIdx=function(){return i.F8C},o.prototype.getRowCount=function(){return this.dataProvider.length},o.prototype.draw=function(){this.isInvalid(t.Z3C)&&this.drawItems(),this.validate()},o.prototype.drawItems=function(){var e=this,t=this.container.getScrollTop();this.removeAllItems();for(var r,o=this.getDataProvider(),s=i.F8C;s<o.length;s++)r=this.getItem(o[s],s),this.addItem(r);this.container.setScrollTop(t),this.container.requestAnimationFrame(function(){i.F8C<e.visibleItems.length&&(e.rowHeight=e.visibleItems[i.F8C].getHeight())})},o.prototype.getItem=function(e,t){var r;return this.useCache&&i.F8C<this.itemsCache.length?((r=this.itemsCache.pop()).setData(e),r.setIndex(t)):(r=this.itemRendererFactory(e,t)).setLabelField(this.labelField),r},o.prototype.addItem=function(e){this.visibleItems.push(e),this.addChild(e)},o.prototype.removeAllItems=function(){for(;i.F8C<this.visibleItems.length;)this._removeItem(this.visibleItems.pop())},o.prototype.removeItem=function(e){for(var t=i.F8C;t<this.visibleItems.length;t++)if(this.visibleItems[t]===e){this.visibleItems.splice(t,i.O8C);break}this._removeItem(e)},o.prototype._removeItem=function(e){i.x4C!=this.container.find(e.container.element.nodeName)&&e.container.remove()},o.prototype.onItemClick=function(e){if(e=he.UIElement.convert(e.target).closest(t.y3C),i.x4C!=e){e=parseInt(e.attr(t.d3C));var r=this.getStartIdx()+e,o=this.selectedItem,n=this.selectedIndex;this.setSelectedIndex(e),this.dispatchWith(s._Event.CHANGE,this,{selectedItem:this.selectedItem,selectedIndex:this.selectedIndex,realIndex:r,prevItem:o,prevIndex:n})}},o.prototype.getDataProvider=function(){return this.dataProvider},o.prototype.setDataProvider=function(e,r){void i.F8C===r&&(r=!i.F8C),this.dataProvider=e,r&&this.invalidate(t.Z3C)},o.prototype.getLabelField=function(){return this.labelField},o.prototype.setLabelField=function(e){this.labelField!=e&&(this.labelField=e,this.invalidate(t.Z3C))},o.prototype.setItemRendererFactory=function(e){this.itemRendererFactory=e,this.invalidate(t.Z3C)},o.prototype.validateItemAt=function(e){-i.O8C<e&&e<this.visibleItems.length&&this.visibleItems[e].validateNow()},o.prototype.validateItem=function(e,t){void i.F8C===t&&(t=i.C4C);for(var r,o=i.F8C;o<this.visibleItems.length;o++)if(r=this.visibleItems[o].getData(),i.F8C==t.length&&r===e||i.F8C<t.length&&r.hasOwnProperty(t)&&r[t]==e[t]){this.visibleItems[o].validateNow();break}},o.prototype.getSelectedIndex=function(){return this.selectedIndex},o.prototype.setSelectedIndex=function(e){var t=this.getDataProvider();-i.O8C<e&&e<t.length?this.updateSelectedItem(t[e],e):this.updateSelectedItem(i.x4C,-i.O8C)},o.prototype.getSelectedItem=function(){return this.selectedItem},o.prototype.setSelectedItem=function(e,t){var r=this.getDataProvider();if(Be.nullOrUndefined(e)||Be.nullOrEmpty(t))-i.O8C<r.indexOf(e)&&this.updateSelectedItem(e,r.indexOf(e));else for(var o=i.F8C;o<r.length;o++)if(!Be.nullOrUndefined(r[o])&&r[o][t]==e[t]){this.updateSelectedItem(r[o],o);break}},o.prototype.updateSelectedItem=function(e,t){if(this.allowMultipleSelection){var r=-i.O8C<this.selectedIndices.indexOf(t);!(r=!r)&&i.M8C>this.selectedIndices.length||(r?(this.selectedIndices.push(t),this.selectedItems.push(e)):(this.selectedIndices.splice(this.selectedIndices.indexOf(t),i.O8C),this.selectedItems.splice(this.selectedItems.indexOf(e),i.O8C)),this.markSelected&&(e.isSelected=r,this.validateItemAt(t)))}else this.markSelected&&i.x4C!=this.selectedItem&&(this.selectedItem.isSelected=!i.O8C,this.validateItemAt(this.selectedIndex)),this.selectedItem=e,this.selectedIndex=t,this.markSelected&&i.x4C!=this.selectedItem&&(this.selectedItem.isSelected=!i.F8C,this.validateItemAt(this.selectedIndex))},o.prototype.defaultItemRendererFactory=function(e,t){var i=new he.renderers.UIItemRenderer;return i.setData(e),i.setIndex(t),i},o.prototype.getMinHeight=function(){return this.getRowHeight()},o.prototype.getMaxHeight=function(){return this.getRowHeight()*this.getDataProvider().length},Object.defineProperty(o.prototype,t.S3C,{get:function(){return this._allowMultipleSelection},set:function(e){this._allowMultipleSelection=e},enumerable:!i.F8C,configurable:!i.F8C}),o.prototype.getSelectedIndices=function(){return this.selectedIndices},o.prototype.setSelectedIndices=function(e){this.selectedIndices=e,this.selectedItems.length=i.F8C,e=this.getDataProvider();for(var t=i.F8C;t<e.length;t++)-i.O8C<this.selectedIndices.indexOf(t)?(this.selectedItems.push(e[t]),this.markSelected&&(e[t].isSelected=!i.F8C,this.validateItemAt(t))):this.markSelected&&(e[t].isSelected=!i.O8C,this.validateItemAt(t))},o.prototype.getSelectedItems=function(){return this.selectedItems},o.prototype.setSelectedItems=function(e){this.selectedItems=e,this.selectedIndices.length=i.F8C,e=this.getDataProvider();for(var t=i.F8C;t<e.length;t++)-i.O8C<this.selectedItems.indexOf(e[t])?(this.selectedIndices.push(t),this.markSelected&&(e[t].isSelected=!i.F8C,this.validateItemAt(t))):this.markSelected&&(e[t].isSelected=!i.O8C,this.validateItemAt(t))},o.prototype.droppable=function(e){this.container.droppable(e,this)},o.DEFAULT_ROW_HEIGHT=i.E8C,o.DEFAULT_ROW_HEIGHT_MOBILE=i.T8C,o}(he.UIComponentBase),ce.UIList=de,ue=h||(h={}),pe=ue.lists||(ue.lists={}),Ce=function(e){var i=r;function o(){var t=e.call(this,i.r4C,"wdr-ui-dropdown")||this;return t.prompt="Choose item",t.mouseHandler=function(e){return t.handleMouse(e)},t._allowMultipleSelection=!i.O8C,t.container.display=i.y2C,t.dropDownBtn=new pe.UIDropDownButton,t.dropDownBtn.addEventListener(s._Event.CHANGE,function(){return t.onBtnChange()}),t.dropDownListWrap=new ue.UIComponentBase(i.r4C,"wdr-ui-dropdown-list"),t.dropDownListWrap.hide(),t.dropDownList=new pe.UIList,t.dropDownList.markSelected=!i.F8C,t.dropDownList.setItemRendererFactory(t.itemRendererFactory),t.dropDownList.addEventListener(s._Event.CHANGE,function(e){return t.onListChange(e)}),t.dropDownListWrap.addChild(t.dropDownList),t.addChild(t.dropDownBtn),t.addChild(t.dropDownListWrap),t}return Ga(o,e),o.prototype.itemRendererFactory=function(e,t){var i=new ue.renderers.SelectItemRenderer;return i.setData(e),i.setIndex(t),i},o.prototype.onListChange=function(e){this.enablePrompt(i.x4C==e.data.selectedItem),this.dispatchWith(s._Event.CHANGE,this,e.data),this.allowMultipleSelection||this.close()},o.prototype.onBtnChange=function(){this.dropDownBtn.getSelection()?this.open():this.close()},o.prototype.enablePrompt=function(e){var t=this.dropDownList.getSelectedItem();t=e||this.allowMultipleSelection||i.x4C==t?this.prompt:t[this.getLabelField()],this.dropDownBtn.setLabel(t),this.container.toggleClass(i.G3C,e)},o.prototype.setPrompt=function(e){this.prompt!==e&&(this.prompt=e,this.enablePrompt(!i.F8C))},o.prototype.getPrompt=function(){return this.prompt},o.prototype.open=function(){this.getEnabled()&&(this.dropDownListWrap.show(),this.dropDownList.setWidth(this.dropDownBtn.getWidth(!i.F8C)),this.dropDownBtn.setSelection(i.O8C),document.body.addEventListener(i.f4C,this.mouseHandler))},o.prototype.handleMouse=function(e){i.x4C==ue.UIElement.convert(e.target).closest(".fm-ui-dropdown")&&(document.body.removeEventListener(i.f4C,this.mouseHandler),this.close())},o.prototype.close=function(){this.getEnabled()&&(this.dropDownListWrap.hide(),this.dropDownBtn.setSelection(i.F8C),document.body.removeEventListener(i.R4C,this.mouseHandler))},o.prototype.getDataProvider=function(){return this.dropDownList.getDataProvider()},o.prototype.setDataProvider=function(e){this.dropDownList.setDataProvider(e)},o.prototype.getLabelField=function(){return this.dropDownList.getLabelField()},o.prototype.setLabelField=function(e){this.dropDownList.setLabelField(e)},o.prototype.setItemRendererFactory=function(e){this.dropDownList.setItemRendererFactory(e)},o.prototype.validateNow=function(){this.dropDownList.validateNow()},o.prototype.validateItemAt=function(e){this.dropDownList.validateItemAt(e)},o.prototype.getSelectedIndex=function(){return this.dropDownList.getSelectedIndex()},o.prototype.setSelectedIndex=function(e){this.dropDownList.setSelectedIndex(e),this.enablePrompt(i.x4C==this.dropDownList.getSelectedItem())},o.prototype.getSelectedIndices=function(){return this.dropDownList.getSelectedIndices()},o.prototype.setSelectedIndices=function(e){this.dropDownList.setSelectedIndices(e),this.enablePrompt(!i.F8C)},o.prototype.getSelectedItem=function(){return this.dropDownList.getSelectedItem()},o.prototype.setSelectedItem=function(e,t){this.dropDownList.setSelectedItem(e,t),this.enablePrompt(i.x4C==this.dropDownList.getSelectedItem())},o.prototype.getSelectedItems=function(){return this.dropDownList.getSelectedItems()},o.prototype.setSelectedItems=function(e){this.dropDownList.setSelectedItems(e),this.enablePrompt(!i.F8C)},o.prototype.show=function(){e.prototype.show.call(this)},o.prototype.getRowHeight=function(){return this.dropDownList.getRowHeight()},o.prototype.getRowCount=function(){return this.dropDownList.getRowCount()},o.prototype.validateItem=function(e,t){},o.prototype.getMinHeight=function(){return i.F8C},o.prototype.getMaxHeight=function(){return i.F8C},Object.defineProperty(o.prototype,t.S3C,{get:function(){return this._allowMultipleSelection},set:function(e){var t="wdr-ui-dropdown-multiple-selection-list";this._allowMultipleSelection=e,this.dropDownList.allowMultipleSelection=e,this._allowMultipleSelection?this.dropDownList.container.addClass(t):this.dropDownList.container.removeClass(t)},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(o.prototype,"markSelected",{set:function(e){this.dropDownList.markSelected=e},enumerable:!i.F8C,configurable:!i.F8C}),o}(ue.UIComponentBase),pe.UIDropDownList=Ce,fe=h||(h={}),me=fe.lists||(fe.lists={}),ge=function(e){function i(){var i=e.call(this)||this;return i.addClass("wdr-ui-vlist"),i._list=new me.UIList,i.addChild(i._list),i._placeholder=new fe.UIComponentBase(r.r4C,"wdr-ui-vlist-placeholder"),i.addChild(i._placeholder),i.addEventListener(t.V6C,function(){return i.onScroll()}),i}return Ga(i,e),i.prototype.onScroll=function(){this.invalidate(t.Z3C)},i.prototype.draw=function(){if(this._placeholder.setHeight(Math.min(this.getMaxHeight(),i.MAX_HEIGHT)),this.isInvalid(t.Z3C)){this._list.setDataProvider(this.getDataProvider());var e=this.getStartIdx()*this.getRowHeight()*this.getScale()-this.getScaleFix();this._list.container.top=Math.min(e,this._placeholder.getHeight()-this._list.container.height)}this.validate()},i.prototype.getScale=function(){return this.getMaxHeight()>i.MAX_HEIGHT?i.MAX_HEIGHT/this.getMaxHeight():r.O8C},i.prototype.getStartIdx=function(){return r.O8C!=this.getScale()?Math.floor((this.getScrollPosition()+this.getScaleFix())/this.getScale()/this.getRowHeight()):Math.floor(this.getScrollPosition()/this.getRowHeight())},i.prototype.getScaleFix=function(){return r.O8C!=this.getScale()?(this.getHeight()/this.getScale()-this.getHeight())*(this.getScrollPosition()/i.MAX_HEIGHT)*this.getScale():r.F8C},Object.defineProperty(i.prototype,t.S3C,{get:function(){return this._list.allowMultipleSelection},set:function(e){this._list.allowMultipleSelection=e},enumerable:!r.F8C,configurable:!r.F8C}),i.prototype.getLabelField=function(){return this._list.getLabelField()},i.prototype.setLabelField=function(e){this._list.setLabelField(e)},i.prototype.setItemRendererFactory=function(e){this._list.setItemRendererFactory(e)},i.prototype.validateItemAt=function(e){this._list.validateItemAt(e)},i.prototype.validateItem=function(e,t){void r.F8C===t&&(t=r.C4C),this._list.validateItem(e,t)},i.prototype.getRowHeight=function(){return r.C8C},i.prototype.getRowCount=function(){return r.F8C<this.getRowHeight()?Math.ceil(this.getHeight()/this.getRowHeight())+r.O8C:r.F8C},i.prototype.getSelectedIndex=function(){return this._list.getSelectedIndex()},i.prototype.setSelectedIndex=function(e){this._list.setSelectedIndex(e)},i.prototype.getSelectedIndices=function(){return this._list.getSelectedIndices()},i.prototype.setSelectedIndices=function(e){this._list.setSelectedIndices(e)},i.prototype.getSelectedItem=function(){return this._list.getSelectedItem()},i.prototype.setSelectedItem=function(e,t){this._list.setSelectedItem(e,t)},i.prototype.getSelectedItems=function(){return this._list.getSelectedItems()},i.prototype.setSelectedItems=function(e){this._list.setSelectedItems(e)},i.prototype.getMinHeight=function(){return this._list.getRowHeight()},i.prototype.getMaxHeight=function(){return this.getRowHeight()*this.getSmartDataProvider().getLength()},i.prototype.getSmartDataProvider=function(){return this.smartDataProvider},i.prototype.setSmartDataProvider=function(e){this.smartDataProvider=e},i.prototype.getScrollPosition=function(){return this.container.getScrollTop()},i.prototype.setScrollPosition=function(e){this.container.setScrollTop(e)},i.prototype.setDataProvider=function(e){this.getSmartDataProvider()&&(this.getSmartDataProvider().setItems(e),this.setScrollPosition(r.F8C),this.invalidate(t.Z3C))},i.prototype.getDataProvider=function(){var e=this.getStartIdx(),t=e+this.getRowCount();return this.getSmartDataProvider()?this.getSmartDataProvider().getItems(e,t):[]},i.MAX_HEIGHT=t.l6C,i}(fe.UIComponentBase),me.UIVirtualList=ge,ye=h||(h={}),_e=ye.lists||(ye.lists={}),ve=function(e){function t(){var t=e.call(this)||this;return t.addClass("wdr-ui-dropdown-btn"),t.labelDisplay=new ye.UILabel,t.addChild(t.labelDisplay),t}return Ga(t,e),t.prototype.setLabel=function(e){this.labelDisplay.setLabel(e)},t}(ye.UIToggleButton),_e.UIDropDownButton=ve,be=h||(h={}),we=be.renderers||(be.renderers={}),Fe=function(e){function i(){var i=e.call(this,t.y3C)||this;return i.labelField=t.m3C,i}return Ga(i,e),i.prototype.getData=function(){return this.data},i.prototype.setData=function(e){r.x4C!=e&&(this.data=e,this.invalidate(t.Z3C))},i.prototype.getIndex=function(){return parseInt(this.container.attr(t.d3C))},i.prototype.setIndex=function(e){this.container.attr(t.d3C,e)},i.prototype.getLabelField=function(){return this.labelField},i.prototype.setLabelField=function(e){this.labelField!=e&&(this.labelField=e,this.invalidate(t.Z3C))},i.prototype.getLabelFunction=function(){return this.labelFunction},i.prototype.setLabelFunction=function(e){this.labelFunction!=e&&(this.labelFunction=e,this.invalidate(t.Z3C))},i.prototype.draw=function(){this.isInvalid(t.Z3C)&&this.container.text(this.data[this.labelField]),this.validate()},i}(be.UIComponentBase),we.UIItemRenderer=Fe,Ee=h||(h={}),Oe=Ee.renderers||(Ee.renderers={}),Se=function(e){function t(){return e.call(this)||this}return Ga(t,e),t.prototype.draw=function(){var e=r,t=this.getData();e.x4C==this.label&&(this.label=new Ee.UILabel,this.label.setId("#wdr-text-display"),this.container.append(this.label.container)),this.label.setLabel(t[this.getLabelField()],!e.F8C),this.container.toggleClass(e.Y3C,!e.F8C===t.isSelected),this.container.toggleClass("wdr-not-selected",!e.F8C!==t.isSelected)},t}(Oe.UIItemRenderer),Oe.SelectItemRenderer=Se,Te=h||(h={}),xe=Te.resizable||(Te.resizable={}),Le=function(){function e(e,t){var i=this;this._mouseDownHandler=function(e){return i.onMouseDown(e)},this._mouseUpHandler=function(e){return i.onMouseUp(e)},this._mouseMoveHandler=function(e){return i.onMouseMove(e)},this.target=e,this.options=t,this.createHandles()}return e.prototype.createHandles=function(){for(var e=r.F8C;e<this.options.sides.length;e++)this.createHandle(this.options.sides[e])},e.prototype.createHandle=function(e){var t=new Te.UIElement(r.r4C,"fm-resizable-handle");return t.addClass("fm-"+e),t.addEventListener(r.f4C,this._mouseDownHandler),this.target.addChild(t),t},e.prototype.onMouseDown=function(e){(e=Te.UIElement.convert(e.target)).hasClass("fm-left")?this._currentSide=r.M2C:e.hasClass("fm-right")&&(this._currentSide=r.j2C),this.startResizing()},e.prototype.onMouseUp=function(e){this.onResize(e.clientX,e.clientY),this.stopResizing()},e.prototype.onMouseMove=function(e){this._boundingRect&&(e.clientX<this._boundingRect.left||e.clientX>this._boundingRect.right||e.clientY<this._boundingRect.top||e.clientY>this._boundingRect.bottom)?this.onMouseUp(e):this.onResize(e.clientX,e.clientY)},e.prototype.onResize=function(e,t){var i={left:this._originalPosition.left,top:this._originalPosition.top},o={width:this._originalSize.width,height:this._originalSize.height};r.M2C==this._currentSide&&(i.left=e,o.width+=this._originalPosition.left-i.left),r.j2C==this._currentSide&&(o.width=e-this._originalPosition.left),this.options.resize&&this.options.resize({side:this._currentSide,originalPosition:this._originalPosition,originalSize:this._originalSize,position:i,size:o})},e.prototype.startResizing=function(){var e=r;document.addEventListener(e.e4C,this._mouseMoveHandler),document.addEventListener(e.R4C,this._mouseUpHandler),this._originalSize={width:this.target.getWidth(!e.F8C),height:this.target.getHeight(!e.F8C)},this._originalPosition={left:this.target.getOffset().left,top:this.target.getOffset().top},this._boundingRect=this.options.containtment?this.options.containtment.getBoundingClientRect():e.x4C},e.prototype.stopResizing=function(){document.removeEventListener(r.e4C,this._mouseMoveHandler),document.removeEventListener(r.R4C,this._mouseUpHandler)},e.prototype.dispose=function(){document.removeEventListener(r.e4C,this._mouseMoveHandler),document.removeEventListener(r.R4C,this._mouseUpHandler)},e}(),xe.ResizableHelper=Le,Ae=h||(h={}),Ie=Ae._utils||(Ae._utils={}),Re=function(){function e(e,i){void r.F8C===i&&(i=t.N6C);var o=this;this.touchStartHandler=function(e){return o.onTouchStart(e)},this.touchEndHandler=function(e){return o.onTouchEnd(e)},this.target=e,this.delay=i}return e.prototype.listen=function(e){this.handler=e,this.target.addEventListener(r.i4C,this.touchStartHandler),this.target.addEventListener(r.A4C,this.touchEndHandler)},e.prototype.stop=function(){this.target.removeEventListener(r.i4C,this.touchStartHandler),this.target.removeEventListener(r.A4C,this.touchEndHandler)},e.prototype.onTouchStart=function(e){var t=this;this.timer=Be.fmSetTimeout(function(){return t.callHandler(e)},this.delay)},e.prototype.onTouchEnd=function(e){this.timer&&Be.fmClearTimeout(this.timer)},e.prototype.callHandler=function(e){this.handler(e,e&&r.F8C<e.changedTouches.length?e.changedTouches[r.F8C]:r.x4C)},e}(),Ie.LongPressListener=Re,function(e){var t="Seeking past EOF",i="Seeking past start of the buffer",o=function(){var e=r;function t(i,r,o){void e.F8C===r&&(r=e.F8C),void e.F8C===o&&(o=t.LITTLE_ENDIAN),this._dynamicSize=!e.F8C,this._byteLength=e.F8C,this._byteOffset=r,this.buffer=i,this.position=e.F8C,this.endianness=o}return Object.defineProperty(t.prototype,"byteOffset",{get:function(){return this._byteOffset},set:function(e){this._byteOffset=e,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(t.prototype,"byteLength",{get:function(){return this._byteLength-this._byteOffset},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(t.prototype,"buffer",{get:function(){return this._trimAlloc(),this._buffer},set:function(t){this._buffer=t,this._dataView=e.F8C==this._byteOffset?new DataView(this._buffer):new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(t.prototype,"dataView",{get:function(){return this._dataView},set:function(e){this._byteOffset=e.byteOffset,this._buffer=e.buffer,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._byteOffset+e.byteLength},enumerable:!e.F8C,configurable:!e.F8C}),t.prototype.seek=function(t){t=Math.max(e.F8C,Math.min(this.byteLength,t)),this.position=isNaN(t)||!isFinite(t)?e.F8C:t},t.prototype.writeString=function(e){this.writeUint8Array(s.encode(e))},t.prototype.writeUint32=function(t,i){void e.F8C===i&&(i=e.x4C),this._realloc(e.j8C),this._dataView.setUint32(this.position,t,e.x4C==i?this.endianness:i),this.position+=e.j8C},t.prototype.writeUint8=function(t){this._realloc(e.O8C),this._dataView.setUint8(this.position,t),this.position+=e.O8C},t.prototype.writeUint8Array=function(t){if(this._realloc(e.O8C*t.length),t instanceof Uint8Array&&e.F8C==this.byteOffset+this.position%t.BYTES_PER_ELEMENT)this.memcpy(this._buffer,this.byteOffset+this.position,t.buffer,e.F8C,t.byteLength),this.mapUint8Array(t.length);else for(var i=e.F8C;i<t.length;i++)this.writeUint8(t[i])},t.prototype.readString=function(e,t){return n.decode(this.mapUint8Array(e))},t.prototype.readUint32=function(){var t=this._dataView.getUint32(this.position,this.endianness);return this.position+=e.j8C,t},t.prototype.readUint8=function(){var t=this._dataView.getUint8(this.position);return this.position+=e.O8C,t},t.prototype.readUint8Array=function(t){void e.F8C===t&&(t=-e.O8C),t=e.F8C>t?this.byteLength-this.position:t;var i=new Uint8Array(t);return this.memcpy(i.buffer,e.F8C,this.buffer,this.byteOffset+this.position,t*i.BYTES_PER_ELEMENT),this.position+=i.byteLength,i},t.prototype.mapUint8Array=function(t){this._realloc(e.O8C*t);var i=new Uint8Array(this._buffer,this.byteOffset+this.position,t);return this.position+=e.O8C*t,i},t.prototype._realloc=function(t){if(this._dynamicSize)if((t=this._byteOffset+this.position+t)<=(i=this._buffer.byteLength))t>this._byteLength&&(this._byteLength=t);else{for(e.O8C>i&&(i=e.O8C);t>i;)i*=e.M8C;var i=new ArrayBuffer(i),r=new Uint8Array(this._buffer);new Uint8Array(i,e.F8C,r.length).set(r),this.buffer=i,this._byteLength=t}},t.prototype._trimAlloc=function(){if(this._byteLength!=this._buffer.byteLength){var t=new ArrayBuffer(this._byteLength),i=new Uint8Array(t),r=new Uint8Array(this._buffer,e.F8C,i.length);i.set(r),this.buffer=t}},t.prototype.memcpy=function(e,t,i,r,o){e=new Uint8Array(e,t,o),i=new Uint8Array(i,r,o),e.set(i)},t.BIG_ENDIAN=!e.O8C,t.LITTLE_ENDIAN=!e.F8C,t}();e.DataStream=o;var s=function(){function e(){}return e.encode=function(t){t=t?String(t):r.C4C;var i,o=[],s=new c(o);for(t=new d(t),r.x4C==e.encoder&&(e.encoder=new l);t.get()!==e.EOF_code_point;)e.encoder.encode(s,t);do{i=e.encoder.encode(s,t)}while(i!==e.EOF_byte);return new Uint8Array(o)},e.EOF_byte=-r.O8C,e.EOF_code_point=-r.O8C,e}();e.TextEncoder=s;var n=function(){function e(){}return e.decode=function(t){var i=r;t||(t=new Uint8Array(i.F8C)),t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),t=new h(t);var o,s=new u;for(i.x4C==e.decoder&&(e.decoder=new a);t.get()!==e.EOF_byte;)o=e.decoder.decode(t),i.x4C!==o&&o!==e.EOF_code_point&&s.emit(o);do{o=e.decoder.decode(t),i.x4C!==o&&o!==e.EOF_code_point&&s.emit(o)}while(o!==e.EOF_code_point);return s.str()},e.EOF_byte=-r.O8C,e.EOF_code_point=-r.O8C,e}();e.TextDecoder=n;var a=function(){function e(){this.EOF_code_point=this.EOF_byte=-r.O8C,this.utf8_lower_boundary=this.utf8_bytes_seen=this.utf8_bytes_needed=this.utf8_code_point=r.F8C}return e.prototype.decode=function(e){var t=r,i=e.get();if(i===this.EOF_byte)return this.EOF_code_point;if(e.offset(t.O8C),t.F8C===this.utf8_bytes_needed){if(this.inRange(i,t.F8C,t.t0C))return i;if(this.inRange(i,194,223))this.utf8_bytes_needed=t.O8C,this.utf8_lower_boundary=t.c0C,this.utf8_code_point=i-t.e0C;else if(this.inRange(i,t.f0C,239))this.utf8_bytes_needed=t.M8C,this.utf8_lower_boundary=t.V4C,this.utf8_code_point=i-t.f0C;else{if(!this.inRange(i,240,244))return this.EOF_code_point;this.utf8_bytes_needed=t.b8C,this.utf8_lower_boundary=65536,this.utf8_code_point=i-240}return this.utf8_code_point*=Math.pow(t.N0C,this.utf8_bytes_needed),t.x4C}return this.inRange(i,t.c0C,t.a0C)?(this.utf8_bytes_seen+=t.O8C,this.utf8_code_point+=(i-t.c0C)*Math.pow(t.N0C,this.utf8_bytes_needed-this.utf8_bytes_seen),this.utf8_bytes_seen!==this.utf8_bytes_needed?t.x4C:(e=this.utf8_code_point,i=this.utf8_lower_boundary,this.utf8_lower_boundary=this.utf8_bytes_seen=this.utf8_bytes_needed=this.utf8_code_point=t.F8C,this.inRange(e,i,1114111)&&!this.inRange(e,55296,57343)?e:this.EOF_code_point)):(this.utf8_lower_boundary=this.utf8_bytes_seen=this.utf8_bytes_needed=this.utf8_code_point=t.F8C,e.offset(-t.O8C),this.EOF_code_point)},e.prototype.inRange=function(e,t,i){return t<=e&&e<=i},e}();e.UTF8Decoder=a;var l=function(){function e(){this.EOF_code_point=this.EOF_byte=-r.O8C}return e.prototype.inRange=function(e,t,i){return t<=e&&e<=i},e.prototype.div=function(e,t){return Math.floor(e/t)},e.prototype.encode=function(e,t){var i,o,s=r,n=t.get();if(n===this.EOF_code_point)return this.EOF_byte;if(t.offset(s.O8C),this.inRange(n,55296,57343))return this.EOF_code_point;if(this.inRange(n,s.F8C,s.t0C))return e.emit(n);for(this.inRange(n,s.c0C,2047)?(i=s.O8C,o=s.e0C):this.inRange(n,s.V4C,65535)?(i=s.M8C,o=s.f0C):this.inRange(n,65536,1114111)&&(i=s.b8C,o=240),o=e.emit(this.div(n,Math.pow(s.N0C,i))+o);s.F8C<i;)o=this.div(n,Math.pow(s.N0C,i-s.O8C)),o=e.emit(s.c0C+o%s.N0C),i-=s.O8C;return o},e}();e.UTF8Encoder=l;var h=function(){function e(e){this.EOF_byte=-r.O8C,this.pos=r.F8C,this.bytes=e}return e.prototype.get=function(){return this.pos>=this.bytes.length?this.EOF_byte:Number(this.bytes[this.pos])},e.prototype.offset=function(e){if(this.pos+=e,r.F8C>this.pos)throw Error(i);if(this.pos>this.bytes.length)throw Error(t)},e.prototype.match=function(e){var t,i=r;if(e.length>this.pos+this.bytes.length)return!i.O8C;for(t=i.F8C;t<e.length;t+=i.O8C)if(Number(this.bytes[this.pos+t])!==e[t])return!i.O8C;return!i.F8C},e}();e.ByteInputStream=h;var c=function(){function e(e){this.EOF_byte=-r.O8C,this.pos=r.F8C,this.bytes=e}return e.prototype.emit=function(e){var t,i=this.EOF_byte;for(t=r.F8C;t<arguments.length;++t)i=Number(arguments[t]),this.bytes[this.pos++]=i;return i},e}();e.ByteOutputStream=c;var d=function(){function e(e){this.pos=r.F8C,this.EOF_code_point=-r.O8C,this._str=e,this.cps=this.getCps(this._str)}return e.prototype.getCps=function(e){for(var t=r,i=[],o=t.F8C,s=e.length;o<e.length;){var n=e.charCodeAt(o);if(this.inRange(n,55296,57343))if(this.inRange(n,56320,57343))i.push(65533);else if(o===s-t.O8C)i.push(65533);else{var a=e.charCodeAt(o+t.O8C);this.inRange(a,56320,57343)?(n&=1023,a&=1023,o+=t.O8C,i.push(65536+(n<<t.L8C)+a)):i.push(65533)}else i.push(n);o+=t.O8C}return i},e.prototype.inRange=function(e,t,i){return t<=e&&e<=i},e.prototype.offset=function(e){if(this.pos+=e,r.F8C>this.pos)throw Error(i);if(this.pos>this.cps.length)throw Error(t)},e.prototype.get=function(){return this.pos>=this.cps.length?this.EOF_code_point:this.cps[this.pos]},e}();e.CodePointInputStream=d;var u=function(){function e(){this._str=r.C4C}return e.prototype.str=function(){return this._str},e.prototype.emit=function(e){65535>=e?this._str+=String.fromCharCode(e):(e-=65536,this._str+=String.fromCharCode(55296+(e>>r.L8C&1023)),this._str+=String.fromCharCode(56320+(1023&e)))},e}();e.CodePointOutputStream=u}(De||(De={})),Me=Ne||(Ne={}),Pe=function(e){function i(){var t=e.call(this)||this;return t.connected=!r.O8C,t}return Ga(i,e),i.prototype.load=function(e){var i=this;this.url=e,this.connected=!r.O8C,this.close(),this.xhr=new XMLHttpRequest,this.xhr.open(t.M6C,e,!r.F8C),this.xhr.responseType="arraybuffer",this.xhr.onload=function(e){return i.onComplete(e)},this.xhr.onprogress=function(e){return i.onProgress(e)},this.xhr.onerror=function(e){return i.onError(e)},this.xhr.onreadystatechange=function(e){return i.onReadyStateChange(e)},this.xhr.send()},i.prototype.onComplete=function(e){this.response=this.xhr.response,this.dispatch(new s._Event(s._Event.COMPLETE,this))},i.prototype.onProgress=function(e){this.dispatch(e)},i.prototype.onError=function(e){this.dispatch(e)},i.prototype.onReadyStateChange=function(e){var t=r;t.x4C!=this.xhr&&t.j8C===this.xhr.readyState&&t.A0C!==this.xhr.status&&this.dispatch(new s._Event(s._Event.ERROR,this,this.xhr.statusText)),t.x4C!=this.xhr&&t.b8C>this.xhr.readyState&&!this.connected&&(this.connected=!t.F8C,this.dispatch(new s._Event(s._Event.CONNECTED)))},i.prototype.close=function(){r.x4C!=this.xhr&&this.xhr.abort()},i.prototype.dispose=function(){var e=r;this.response=e.x4C,e.x4C!=this.xhr&&(this.xhr.onload=e.x4C,this.xhr.onprogress=e.x4C,this.xhr.onerror=e.x4C,this.xhr.onreadystatechange=e.x4C),this.xhr=e.x4C},i}(s.EventDispatcher),Me.URLBinaryLoader=Pe,function(e){var i=function(e){function t(){var t=r,i=e.call(this)||this;return i.dataType=o.TEXT,i.contentType=n.TEXT_PLAIN,i.requestMethod=a.GET,i.connected=!t.O8C,i.withCredentials=!t.O8C,i._lastProgressTriggered=t.F8C,i._lastEvent=t.x4C,i.progressInterval=t.F8C,i.requestHeaders=[],i.data={},i._bytesLoaded=t.F8C,i}return Ga(t,e),t.prototype.load=function(e,t){var i=r,o=this;void i.F8C===t&&(t=i.x4C),this.url=e,this._bytesLoaded=i.F8C,this.connected=!i.O8C,this.processRequestHeader(t),this.close(),this.xhr=new XMLHttpRequest,this.xhr.open(this.requestMethod,this.url,!i.F8C),this.xhr.onerror=function(e){return o.onError(e)},this.xhr.onreadystatechange=function(e){return o.onReadyStateChange(e)},this.xhr.onprogress=function(e){return o.onProgress(e)},this.xhr.setRequestHeader("Content-type",this.contentType);for(var s=i.F8C;s<this.requestHeaders.length;s++)this.xhr.setRequestHeader(this.requestHeaders[s].header,this.requestHeaders[s].value);this.xhr.send(this.data)},t.prototype.processRequestHeader=function(e){if(this.requestHeaders=[],r.x4C!=e)for(var t in e)this.requestHeaders.push(new l(t,e[t]))},t.prototype.getBytesLoaded=function(){return this._bytesLoaded},t.prototype.success=function(){this.response=this.xhr.response||this.xhr.responseText,this._bytesLoaded=this._lastEvent?this._lastEvent.loaded:this.response.length,this.dispatch(new s._Event(s._Event.COMPLETE,this))},t.prototype.onReadyStateChange=function(e){var t=r;t.x4C!=this.xhr&&t.j8C===this.xhr.readyState&&(t.A0C===this.xhr.status?this.success():this.dispatch(new s._Event(s._Event.ERROR,this,this.xhr.statusText))),t.x4C!=this.xhr&&t.b8C>this.xhr.readyState&&!this.connected&&(this.connected=!t.F8C,this.dispatch(new s._Event(s._Event.CONNECTED)))},t.prototype.onProgress=function(e){Be.getTimer()-this._lastProgressTriggered>this.progressInterval?(this.response=this.xhr.response||this.xhr.responseText,this._bytesLoaded=e.loaded,this.dispatch(e),this._lastProgressTriggered=Be.getTimer(),this._lastEvent=r.x4C):this._lastEvent=e},t.prototype.onError=function(e){this.dispatch(new s._Event(s._Event.ERROR,this))},t.prototype.close=function(){r.x4C!=this.xhr&&(this.xhr.onprogress=r.x4C,this.xhr.onreadystatechange=r.x4C,this.xhr.abort())},t.prototype.dispose=function(){var e=r;this.data=this.response=e.x4C,this.requestHeaders=[],e.x4C!=this.xhr&&(this.xhr.onprogress=e.x4C,this.xhr.onreadystatechange=e.x4C),this._lastProgressTriggered=this._lastEvent=this.xhr=e.x4C},t}(s.EventDispatcher);e.URLStream=i;var o=function(){function e(){}return e.TEXT=r.p3C,e.XML="xml",e.HTML=t.o6C,e.JSON=t.n6C,e}();e.DataType=o;var n=function(){function e(){}return e.TEXT_PLAIN="text/plain",e.TEXT_XML=t.c6C,e.APPLICATION_JSON="application/json",e.APPLICATION_URLENCODED="application/x-www-form-urlencoded",e}();e.ContentType=n;var a=function(){function e(){}return e.POST="POST",e.GET=t.M6C,e}();e.URLRequestMethod=a;var l=function(e,t){this.header=e,this.value=t};e.URLRequestHeader=l,i=function(){function e(){this.data={}}return e.prototype.toString=function(){var e,i=[];for(e in this.data)i.push(e+t.h6C+this.data[e]);return i.join(t.R6C)},e}(),e.URLVariables=i}(Ne||(Ne={})),function(e){var i=function(e){function i(){var t=e.call(this)||this;return t.dialogOpened=!r.O8C,document.body.onfocus=function(){return t.onFocus()},t}return Ga(i,e),i.prototype.browse=function(e){var i=r,o=this;void i.F8C===e&&(e=[]),this.input=document.createElement(i.o2C),this.input.setAttribute(i.W3C,t.A6C),this.input.style.display=i.n2C,document.body.appendChild(this.input),this.input.setAttribute("accept",e.join(t.k6C)),this.input.addEventListener("change",function(){return o.onChange()}),this.dialogOpened=!i.F8C,this.input.click()},i.prototype.onChange=function(){this.dialogOpened=!r.O8C,Be.nullOrUndefined(this.input.files)||Be.nullOrUndefined(this.input.files[r.F8C])||(this.file=this.input.files[r.F8C],this.dispatchWith(s._Event.SELECT))},i.prototype.onFocus=function(){var e=this;this.dialogOpened&&Be.fmSetTimeout(function(){(Be.nullOrUndefined(e.input.files)||Be.nullOrUndefined(e.input.files[r.F8C]))&&e.dispatchWith(s._Event.CANCEL),e.dialogOpened=!r.O8C},r.m0C)},i.prototype.load=function(e){var t=this;void r.F8C===e&&(e=o.TEXT),r.x4C!=this.file&&(this.reader=new FileReader,this.reader.onload=function(e){return t.onLoad(e)},this.reader.onprogress=function(e){return t.onProgress(e)},this.reader.onerror=function(e){return t.onError(e)},e==o.ARRAY_BUFFER?this.reader.readAsArrayBuffer(this.file):this.reader.readAsText(this.file))},i.prototype.onLoad=function(e){this.response=this.reader.result,this.dispatch(new s._Event(s._Event.COMPLETE,this))},i.prototype.onProgress=function(e){this.dispatch(e)},i.prototype.onError=function(e){this.dispatch(e)},i.prototype.dispose=function(){this.reader=this.file=this.response=r.x4C},i}(s.EventDispatcher);e.FileReference=i;var o=function(){function e(){}return e.TEXT="TEXT",e.ARRAY_BUFFER="ARRAY_BUFFER",e}();e.ReadMethod=o}(Ne||(Ne={})),function(e){var i=function(){var e=r;function i(){}return Object.defineProperty(i.prototype,"item",{get:function(){return this[e.F8C]},enumerable:!e.F8C,configurable:!e.F8C}),i.prototype.find=function(t){return void e.F8C===this.item?this:this.item.find(t)},i.prototype.text=function(){return void e.F8C===this.item?e.C4C:this.item.text()},i.prototype.attr=function(t,i){return void e.F8C===this.item?void e.F8C:i?this.item.attr(t,i):this.item.attr(t)},i.prototype.children=function(){for(var t=new i,r=e.F8C;void e.F8C!==this[r];)t[r++]=o.convert(this[r]);return t},i.prototype.push=function(e){return this[this.length]=e,this},Object.defineProperty(i.prototype,t.H6C,{get:function(){for(var t=e.F8C;void e.F8C!==this[t];)t++;return t},enumerable:!e.F8C,configurable:!e.F8C}),i}();e.XMLNodeList=i;var o=function(e){function o(){return r.x4C!==e&&e.apply(this,arguments)||this}return Ga(o,e),o.prototype.text=function(e){return e||!r.O8C===e?(this.textContent=e.toString(),this):e=Be.nullOrUndefined(this.textContent)?r.C4C:this.textContent},o.prototype.append=function(e){return Be.nullOrUndefined(e)||r.K2C==typeof e&&Be.nullOrEmpty(e)?this:((e instanceof CDATASection||r.C4C!=e.textContent)&&this.appendChild(e),this)},o.prototype.isEmpty=function(){return r.C4C==this.text()},o.prototype.find=function(e){e=this.querySelectorAll(e);for(var t=new i,s=r.F8C;s<e.length;s++)t[s]=o.convert(e[s]);return t},o.prototype.attr=function(e,t){return t||!r.O8C===t?(this.setAttribute(e,t),this):(t=this.getAttribute(e),r.x4C==t&&(t=void r.F8C),t)},o.prototype.getChildren=function(){for(var e=new i,t=this.firstElementChild;t;)t.nodeType===Node.ELEMENT_NODE&&e.push(o.convert(t)),t=t.nextElementSibling;return e},Object.defineProperty(o.prototype,t.H6C,{get:function(){return this.childNodes.length},enumerable:!r.F8C,configurable:!r.F8C}),o.convert=function(e){return e.find=o.prototype.find,e.append=o.prototype.append,e.text=o.prototype.text,e.attr=o.prototype.attr,e.isEmpty=o.prototype.isEmpty,e.getChildren=o.prototype.getChildren,e},o}(Element);e.XMLNode=o;var s=function(){function e(){throw Error(t.D5C)}return e.create=function(i){if(r.x4C==i.firstChild){if(i=(new DOMParser).parseFromString(i,t.c6C),e.isParseError(i))return r.x4C;i=i.firstElementChild?i.firstElementChild:i.firstChild}else i=i.firstChild;return o.convert(i)},e.isParseError=function(e){var t=r,i="parsererror";if(!e.getElementsByTagName(i)||!e.getElementsByTagName(i)[t.F8C])return!t.O8C;var o=e.getElementsByTagName(i)[t.F8C].namespaceURI;return t.F8C<e.getElementsByTagNameNS(o,i).length},e.cdata=function(t){return e.doc.createCDATASection(t)},e.toXMLString=function(t,i){var o=r;void o.F8C===i&&(i=!o.O8C),o.x4C==e.serializer&&(e.serializer=new XMLSerializer);var s=e.serializer.serializeToString(t);return!o.F8C==i&&(s=e.format(s)),s.trim()},e.format=function(e){var i=r,o=/xmlns\=/,s=/xmlns\:/,n=/<\?/,a=/\/>/,l=/<\//,h=/<\w/,c=/^<\/[\w:\-\.\,]+/,d=/^<[\w:\-\.\,]+/,u=/^<\/\w/,p=/^<\w/,C=/!DOCTYPE/,f=/\]>/,m=/--\x3e/,g=/<!/,y=(e=e.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").replace(/\s*xmlns\=/g,"~::~xmlns=").split("~::~")).length,_=!i.O8C,v=i.F8C,b=i.C4C,w=i.F8C,F=[t.m6C];for(w=i.F8C;i.J8C>w;w++)F.push(F[w]+"    ");for(w=i.F8C;w<y;w++)-i.O8C<e[w].search(g)?(b+=F[v]+e[w],_=!i.F8C,(-i.O8C<e[w].search(m)||-i.O8C<e[w].search(f)||-i.O8C<e[w].search(C))&&(_=!i.O8C)):-i.O8C<e[w].search(m)||-i.O8C<e[w].search(f)?(b+=e[w],_=!i.O8C):p.exec(e[w-i.O8C])&&u.exec(e[w])&&d.exec(e[w-i.O8C])[i.F8C]==c.exec(e[w])[i.F8C].replace(t.l5C,i.C4C)?(b+=e[w],_||v--):b=-i.O8C<e[w].search(h)&&-i.O8C==e[w].search(l)&&-i.O8C==e[w].search(a)?b+=_?e[w]:F[v++]+e[w]:-i.O8C<e[w].search(h)&&-i.O8C<e[w].search(l)?b+=_?e[w]:F[v]+e[w]:-i.O8C<e[w].search(l)?b+=_?e[w]:F[--v]+e[w]:-i.O8C<e[w].search(a)?b+=_?e[w]:F[v]+e[w]:-i.O8C<e[w].search(n)?b+(F[v]+e[w]):-i.O8C<e[w].search(s)||-i.O8C<e[w].search(o)?b+(F[v]+e[w]):b+e[w];return(e=(e=t.m6C==b[i.F8C]?b.slice(i.O8C):b).replace(/[\r\n\s]*<\!\[CDATA\[/g,"<![CDATA[")).replace(/]]\x3e\s*/g,"]]>")},e.doc=(new DOMParser).parseFromString("<tmp/>",t.c6C),e}();e.XML=s}(Ne||(Ne={})),He=Ne||(Ne={}),Ue=function(){function e(){}return e.print=function(e,i,o){var s=t,n=r;void n.F8C===i&&(i=n.C4C),void n.F8C===o&&(o=n.C4C);var a="printer-"+(new Date).getTime(),l=new h.UIElement("iframe").attr(s.F5C,a);l.css(n.s2C,s.O5C).css(n.O2C,s.O5C).css(n.F3C,n.O3C).css(n.M2C,s.M5C),h.UIElement.convert(document.body).append(l);var c=(a=window.frames[a]).document;c.open(),c.write("<!DOCTYPE html>"),c.write(s.j5C),c.write("<head>"),c.write(s.o5C),c.write(o),c.write(s.n5C),c.write(s.t5C),c.write(i+"body{-webkit-print-color-adjust:exact;}"),c.write("</style>"),c.write("</head>"),c.write(s.e5C),c.write(e),c.write("</body>"),c.write("</html>"),c.close(),a.focus(),a.print(),Be.fmSetTimeout(function(){l.remove()},s.A5C)},e}(),He.PrintJob=Ue,ke=Be||(Be={}),Ve="target",ze=function(e){function t(){return r.x4C!==e&&e.apply(this,arguments)||this}return Ga(t,e),t.getInstance=function(){return r.x4C==t.instance&&(t.instance=new t),t.instance},Object.defineProperty(t.prototype,Ve,{get:function(){return document},enumerable:!r.F8C,configurable:!r.F8C}),t}(qe=function(){function e(){this.listeners={}}return Object.defineProperty(e.prototype,Ve,{get:function(){return r.x4C},enumerable:!r.F8C,configurable:!r.F8C}),e.prototype.areListenersEqual=function(e,t){return e.type===t.type&&e.handler===t.handler&&e.useCapture===t.useCapture},e.prototype.hasEventListener=function(e,t){var i=r;if(ke.nullOrUndefined(this.listeners[e]))return!i.O8C;for(var o=i.F8C;o<this.listeners[e].length;o++)if(this.areListenersEqual(this.listeners[e][o],t))return!i.F8C;return!i.O8C},e.prototype.addEventListener=function(e,t,i){var r={type:e,handler:t,useCapture:i};this.hasEventListener(e,r)||(ke.nullOrUndefined(this.listeners[e])&&(this.listeners[e]=[]),this.listeners[e].push(r),this.target.addEventListener(e,t,i))},e.prototype.removeEventListener=function(e,i,o){for(e in i={type:e,handler:i,useCapture:o},this.listeners){for(var s=[],n=r.F8C;n<this.listeners[e].length;n++)this.areListenersEqual(this.listeners[e][n],i)?t.k5C===typeof o?this.target.removeEventListener(e,this.listeners[e][n].handler,o):this.target.removeEventListener(e,this.listeners[e][n].handler):s.push(this.listeners[e][n]);this.listeners[e]=s}},e.prototype.dispose=function(){for(var e in this.listeners)for(var t=r.F8C;t<this.listeners[e].length;t++)this.target.removeEventListener(e,this.listeners[e][t].handler,!r.F8C),this.target.removeEventListener(e,this.listeners[e][t].handler,!r.O8C);this.listeners={}},e}()),qe=function(e){function t(){return r.x4C!==e&&e.apply(this,arguments)||this}return Ga(t,e),t.getInstance=function(){return r.x4C==t.instance&&(t.instance=new t),t.instance},Object.defineProperty(t.prototype,Ve,{get:function(){return window},enumerable:!r.F8C,configurable:!r.F8C}),t}(qe),Ge=function(){function e(){}return e.dispose=function(){for(;r.F8C<e.timeouts.length;)clearTimeout(e.timeouts.pop());for(;r.F8C<e.intervals.length;)clearInterval(e.intervals.pop())},e.timeouts=[],e.intervals=[],e}(),ke.Timers=Ge,ke.fmSetTimeout=function(e,t){var i=setTimeout(e,t);return Ge.timeouts.push(i),i},ke.fmClearTimeout=function(e){clearTimeout(e),Ge.timeouts.splice(Ge.timeouts.indexOf(e),r.O8C)},ke.fmSetInterval=function(e,t){var i=setInterval(e,t);return Ge.intervals.push(i),i},ke.fmClearInterval=function(e){clearInterval(e),Ge.intervals.splice(Ge.intervals.indexOf(e),r.O8C)},ke.fmdocument=ze.getInstance(),ke.fmwindow=qe.getInstance(),We=Be||(Be={}),je=function(e){function i(t){var i=e.call(this)||this;return i._scrollListener=function(){return i.scrollListener()},i._dispatchResize=function(){return i._dispatchResize()},i._target=t,i.startListener(i._target.element),i}return Ga(i,e),i.prototype.resetTriggers=function(e){var t=r;e=(i=e.__resizeTriggers__).firstElementChild;var i=i.lastElementChild,o=e.firstElementChild;i.scrollLeft=i.scrollWidth,i.scrollTop=i.scrollHeight,o.style.width=e.offsetWidth+t.O8C+t.y4C,o.style.height=e.offsetHeight+t.O8C+t.y4C,e.scrollLeft=e.scrollWidth,e.scrollTop=e.scrollHeight},i.prototype.checkTriggers=function(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height},i.prototype.scrollListener=function(){var e=this;if(r.x4C!=this._target){var t=this._target.element;this.resetTriggers(t),t.__resizeRAF__&&this._target.cancelAnimationFrame(t.__resizeRAF__),t.__resizeRAF__=this._target.requestAnimationFrame(function(){e.checkTriggers(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,e.dispatchResize())})}},i.prototype.dispatchResize=function(){this.dispatchWith(s._Event.RESIZE)},i.prototype.startListener=function(e){e.attachEvent?e.attachEvent("onresize",this._dispatchResize):e.__resizeTriggers__||("static"==getComputedStyle(e).position&&(e.style.position=t.J5C),e.__resizeLast__={},e.__resizeListeners__=[],e.__resizeTriggers__=document.createElement(r.r4C),e.__resizeTriggers__.className="wdr-resize-triggers",e.__resizeTriggers__.innerHTML='<div class="wdr-expand-trigger"><div></div></div><div class="wdr-contract-trigger"></div>',e.appendChild(e.__resizeTriggers__),this.resetTriggers(e),e.addEventListener(t.V6C,this._scrollListener,!r.F8C))},i.prototype.stopListener=function(e){e.detachEvent?e.detachEvent("onresize",this._dispatchResize):(e.removeEventListener(t.V6C,this._scrollListener),e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__))},i.prototype.dispose=function(){this._target&&this._target.element&&this.stopListener(this._target.element),this._dispatchResize=this._scrollListener=this._target=r.x4C},i}(s.EventDispatcher),We.ResizeListener=je,Ye=Be||(Be={}),Xe=function(){function e(){}return e.isHttpURL=function(e){return r.x4C!=e&&(r.F8C==e.indexOf("http://")||r.F8C==e.indexOf("https://"))},e.isBlobURL=function(e){return r.x4C!=e&&r.F8C==e.indexOf("blob:http")},e.getUrl=function(i,o){var s=t,n=r;if(void n.F8C===o&&(o=!n.O8C),!i)return s.S5C;if(i=i.trim(),n.F8C==i.length)return s.S5C;if(e.isBlobURL(i))return i;if(o){var a=-n.O8C<i.indexOf(s.I5C)?s.R6C:s.I5C;i+=a+Math.round(Date.now()/3600)}if(e.isHttpURL(i)||n.F8C==i.indexOf(s.A6C)||s.l5C==i.substr(n.F8C,n.O8C))return i;if(-n.O8C!=i.indexOf("..")){for(a=i.split(s.l5C);".."==a[n.F8C];)n.F8C<a.length&&a.shift();i=s.l5C+a.join(s.l5C),s.l5C==i.substr(n.F8C,n.O8C)&&(i=i.substring(n.O8C))}return i},e.addTimestamp=function(e){var i=-r.O8C<e.indexOf(t.I5C)?t.R6C:t.I5C;return e+(i+Math.round(Date.now()/3600))},e}(),Ye.URLUtils=Xe,Ke=Be||(Be={}),Qe=function(){function e(){}return e.isUTCFormat=function(e){return"UTC:"==e.slice(r.F8C,r.j8C)},e.format=function(i,o){var s=r,n=!s.O8C;"UTC:"==o.slice(s.F8C,s.j8C)&&(o=o.slice(s.j8C),n=!s.F8C);var a=i[(C=n?"getUTC":"get")+"Date"](),l=i[C+t.P5C](),h=i[C+t.U7C](),c=i[C+"FullYear"](),d=i[C+"Hours"](),u=i[C+"Minutes"](),p=i[C+"Seconds"](),C=i[C+"Milliseconds"](),f=n?s.F8C:i.getTimezoneOffset(),m={d:a,dd:e.pad(a),ddd:e.i18n.dayNames[l],dddd:e.i18n.dayNames[l+s.n8C],D:a,DD:e.pad(a),DDD:e.i18n.dayNames[l],DDDD:e.i18n.dayNames[l+s.n8C],M:h+s.O8C,MM:e.pad(h+s.O8C),MMM:e.i18n.monthNames[h],MMMM:e.i18n.monthNames[h+s.e8C],yy:String(c).slice(s.M8C),yyyy:c,YY:String(c).slice(s.M8C),YYYY:c,h:d%s.e8C||s.e8C,hh:e.pad(d%s.e8C||s.e8C),H:d,HH:e.pad(d),m:u,mm:e.pad(u),s:p,ss:e.pad(p),l:e.pad(C,s.b8C),L:e.pad(s.g0C<C?Math.round(C/s.L8C):C),t:s.e8C>d?s.J2C:"p",tt:s.e8C>d?"am":"pm",T:s.e8C>d?"A":"P",TT:s.e8C>d?"AM":"PM",Z:n?"UTC":(String(i).match(e.timezone)||[s.C4C]).pop().replace(e.timezoneClip,s.C4C),o:(s.F8C<f?s.L2C:t.D7C)+e.pad(s.o0C*Math.floor(Math.abs(f)/s.Y0C)+Math.abs(f)%s.Y0C,s.j8C),S:["th","st","nd","rd"][s.b8C<a%s.L8C?s.F8C:(s.L8C!=a%s.o0C-a%s.L8C?s.O8C:s.F8C)*a%s.L8C]};return o.replace(e.token,function(e){return e in m?m[e]:e.slice(s.O8C,e.length-s.O8C)})},e.pad=function(e,i){var o=r.C4C+e;for(i=i||r.M8C;o.length<i;)o=t.O7C+o;return o},e.setDayNames=function(t,i){e.i18n.dayNames=i.concat(t)},e.setMonthNames=function(t,i){e.i18n.monthNames=i.concat(t)},e.token=/d{1,4}|D{1,4}|m{1,4}|M{1,4}|yy(?:yy)?|YY(?:YY)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,e.timezone=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,e.timezoneClip=/[^-+\dA-Z]/g,e.i18n={dayNames:"Sun Mon Tue Wed Thu Fri Sat Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(r.s4C),monthNames:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec January February March April May June July August September October November December".split(r.s4C)},e}(),Ke.DateFormat=Qe,function(e){var i=function(){function i(){}return i.toBoolean=function(e){return void r.F8C!==e&&r.x4C!==e&&(t.j7C==e.toLowerCase()||r.k2C==e.toLowerCase())},i.generateID=function(){var e=r,t=(new Date).getTime()-new Date(2012,e.M8C,e.t8C).getTime();return i.lastGeneratedID==t?t.toString(e.r8C)+(i.lastGeneratedIDSuffix++).toString():(i.lastGeneratedID=t,i.lastGeneratedIDSuffix=e.F8C,t.toString(e.r8C))},i.bind=function(t){for(var i=r,o=[],s=i.O8C;s<arguments.length;s++)o[s-i.O8C]=arguments[s];if(e.nullOrUndefined(t))return t;for(s=i.F8C;s<o.length;s++)t=t.replace(RegExp("\\{"+s+"\\}","gi"),i.x4C==o[s]?i.C4C:o[s].toString());return t},i.concat=function(e,t){var i=r;if(i.F8C==e.length)return t;var o=i.F8C<e.length?e.charCodeAt(e.length-i.O8C):-i.O8C,s=i.F8C<e.length?e.charCodeAt(e.length-i.M8C):-i.O8C,n=i.C4C;if(-i.O8C!=s&&i.c0C<s&&256>s&&!(i.a0C<s&&i.f0C>s))return n=t.charCodeAt(i.F8C),n=String.fromCharCode((s&i.A8C)<<i.e8C|(o&i.z0C)<<i.o8C|n&i.z0C),e.substr(i.F8C,e.length-i.M8C)+n+t.substr(i.O8C);if(!(i.c0C>o||256<o)){if(i.a0C<o&&i.f0C>o)return s=t.charCodeAt(i.F8C),n=String.fromCharCode((o&i.T8C)<<i.o8C|s&i.z0C),e.substr(i.F8C,e.length-i.O8C)+n+t.substr(i.O8C);if(256>o)return s=t.charCodeAt(i.F8C),n=t.charCodeAt(i.O8C),n=String.fromCharCode((o&i.A8C)<<i.e8C|(s&i.z0C)<<i.o8C|n&i.z0C),e.substr(i.F8C,e.length-i.O8C)+n+t.substr(i.M8C)}return e+t},i.toTime=function(e){var i=t,o=r;if(isNaN(e))return De.model._labels.Labels.INVALID_DATE;var s=o.C4C,n=o.F8C>e;o.F8C>e&&(e*=-o.O8C);var a=(e=Math.round(e))%o.Y0C;s=o.L8C>a?i.O7C+a:a.toString();return a=(e=(e-a)/o.Y0C)%o.Y0C,s=(o.L8C>a?i.O7C+a:a.toString())+i.t7C+s,a=(e=(e-a)/o.Y0C)%o.Z8C,s=(o.L8C>a?i.O7C+a:a.toString())+i.t7C+s,e=(e-a)/o.Z8C,o.F8C<e&&(s=e.toString()+"d "+s),n&&(s=o.L2C+s),s},i.toDate=function(i,o){if(void r.F8C===o&&(o=t.L7C),isNaN(i)||r.F8C==i)return De.model._labels.Labels.INVALID_DATE;var s=new Date(i);return isNaN(s.getTime())?r.C4C:e.DateFormat.format(s,o)},i.toDateTime=function(e,o){return void r.F8C===o&&(o=t.a7C),i.toDate(e,o)},i.isDate=function(e){var t=/\d+/;return this.matchesISODate(e)&&!isNaN(Date.parse(e))&&(r.O8C<e.match(t).length||r.O8C==e.match(t).length&&new Date(Date.parse(e)).toDateString()!=new Date(Date.parse(e.match(t)[r.F8C])).toDateString())},i.matchesISODate=function(i){return e.detectBrowser().isChrome&&!i.match(t.h7C)?!r.O8C:!r.F8C},i.fromRgbToHex=function(e){var i=r;if(o(e))return i.F8C;if(t.R7C===e.substr(i.F8C,i.O8C))return parseInt(e.substr(i.O8C),i.Q8C);"transparent"==e&&(e=t.Q7C),e=(e=e.replace(/[^\d,]/g,i.C4C)).split(t.k6C);var s=parseInt(e[i.F8C]),n=parseInt(e[i.O8C]),a=parseInt(e[i.M8C]);return i.F8C===parseInt(e[i.b8C])&&(s=n=a=255),a|n<<i.t8C|s<<i.Q8C},i.strToUint8Arr=function(e){for(var t=new Uint8Array(e.length),i=r.F8C,o=e.length;i<o;++i)t[i]=e.charCodeAt(i);return t},i.strToUint8ArrExtended=function(e){for(var t=new De.DataStream(new ArrayBuffer(e.length)),i=r.F8C,o=e.length;i<o;++i)t.writeString(e.charAt(i));return t.seek(r.F8C),t.readUint8Array(t.byteLength)},i.dataURItoUint8Arr=function(e){var o=r;return e=-o.O8C!==e.split(t.k6C)[o.F8C].indexOf("base64")?atob(e.split(t.k6C)[o.O8C]):decodeURI(e.split(t.k6C)[o.O8C]),i.strToUint8Arr(e)},i.decode2=function(e){var t,i,o,s,n,a,l=r;for(t=l.C4C,o=e.length,i=l.F8C;i<o;)switch(s=e[i++],s>>l.j8C){case l.F8C:case l.O8C:case l.M8C:case l.b8C:case l.j8C:case l.g8C:case l.o8C:case l.n8C:t+=String.fromCharCode(s);break;case l.e8C:case l.h8C:n=e[i++],t+=String.fromCharCode((s&l.T8C)<<l.o8C|n&l.z0C);break;case l.R8C:n=e[i++],a=e[i++],t+=String.fromCharCode((s&l.A8C)<<l.e8C|(n&l.z0C)<<l.o8C|(a&l.z0C)<<l.F8C)}return t},i.decode=function(e){for(var t=r.C4C,i=r.F8C;i<e.length;i++)t+=String.fromCharCode(e[i]);return decodeURIComponent(escape(t))},i.contains=function(e,t){return-r.O8C<e.toLowerCase().indexOf(t)},i.parseBool=function(e){var i=r;return i.K2C==typeof e&&(e=String(e).toLowerCase()),t.j7C===e||i.k2C===e||i.O8C===e||!i.F8C===e},i.toNumber=function(e){var i=r;return i.x4C==e?NaN:i.x2C===typeof e?e:(i.K2C!==typeof e&&(e=e.toString()),t.k6C==De.model.format.FormatManager.getFormat(i.C4C).thousandsSeparator&&(e=e.replace(/,/gi,i.C4C)),e=(e=e.replace(t.k6C,t.f7C)).replace(/[^[,|\.|\-|\d|e]]*/gi,i.C4C),parseFloat(e))},i.trim=function(e,t){var o=r;if(void o.F8C===t&&(t=o.x4C),o.x4C==e)return o.C4C;for(var s=o.F8C;i.isWhitespace(e.charAt(s),t);)++s;for(var n=e.length-o.O8C;i.isWhitespace(e.charAt(n),t);)--n;return n>=s?e.slice(s,n+o.O8C):o.C4C},i.trimLeft=function(e,t){var o=r;if(void o.F8C===t&&(t=o.x4C),o.x4C==e)return o.C4C;for(var s=o.F8C;i.isWhitespace(e.charAt(s),t);)++s;var n=e.length-o.O8C;return n>=s?e.slice(s,n+o.O8C):o.C4C},i.isWhitespace=function(e,i){var o=r;if(void o.F8C===i&&(i=o.x4C),o.x4C!=i&&e==i)return!o.O8C;switch(e){case o.s4C:case t.i7C:case t.J7C:case t.m6C:case"\f":return!o.F8C}return!o.O8C},i.isEntity=function(e){for(var t in i.entityMap)if(i.entityMap[t]==e)return!r.F8C;return!r.O8C},i.escapeHtml=function(e,t){return void r.F8C===t&&(t=!r.O8C),t?e.replace(/[<>"'\/]/g,function(e){return i.entityMap[e]}):e.replace(/[&<>"'\/]/g,function(e){return i.entityMap[e]})},i.lastGeneratedIDSuffix=r.F8C,i.entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":t.S7C,"/":"&#x2F;"},i}();function o(){for(var e=r,t=[],i=e.F8C;i<arguments.length;i++)t[i]=arguments[i];for(i=e.F8C;i<t.length;i++)if(e.Q2C===typeof t[i]||e.x4C===t[i])return!e.F8C;return!e.O8C}e.StringUtils=i,e.nullOrUndefined=o,e.nullOrEmpty=function(e){var t=r;if(o(e)||t.K2C!=typeof e||t.F8C==e.trim().length)return!t.F8C;e=e.trim();for(var i=t.F8C;i<e.length;i++)if(t.F8C!=e.charCodeAt(i))return!t.O8C;return!t.F8C},e.strEncode=function(e){return e.replace(/\|/g,"{%7C}")},e.strDecode=function(e){return e.replace(/{%7C}/g,t.m7C)}}(Be||(Be={})),Je=Be||(Be={}),Ze=function(){var e=r;function t(){}return t.sortOn=function(i,r,o,s){o>>=e.O8C;var n=e.O8C==o%e.M8C;o=o>>e.O8C>>e.O8C;var a=e.O8C==o%e.M8C;return o>>=e.O8C,o=e.O8C==o%e.M8C,a?(i=t.sortIndices(i,r,s),n&&i.reverse(),i):(o?t.sortNumeric(i,r):e.C4C==r?i.sort():i.sort(function(t,i){return t[r]==i[r]?e.F8C:t[r]>i[r]?e.O8C:-e.O8C}),n&&i.reverse(),i)},t.sort=function(i,r,o){return void e.F8C===r&&(r=e.F8C),t.sortOn(i,e.C4C,r,o)},t.sortNumeric=function(t,i){e.C4C==i?t.sort(function(t,i){return isNaN(t)?e.O8C:isNaN(i)?-e.O8C:t-i}):t.sort(function(t,r){return isNaN(t[i])?e.O8C:isNaN(r[i])?-e.O8C:t[i]-r[i]})},t.sortIndices=function(t,i,r){var o,s=[];for(o in t)s.push([t[o],parseInt(o)]);for(var n in e.C4C==i?r?s.sort(function(t,i){return r(t[e.F8C],i[e.F8C])}):s.sort(function(t,i){return t[e.F8C]==i[e.F8C]?e.F8C:t[e.F8C]>i[e.F8C]?e.O8C:-e.O8C}):r?s.sort(function(t,o){return r(t[e.F8C][i],o[e.F8C][i])}):s.sort(function(t,r){return t[e.F8C][i]==r[e.F8C][i]?e.F8C:t[e.F8C][i]>r[e.F8C][i]?e.O8C:-e.O8C}),t=[],s)t.push(s[n][e.O8C]);return t},t.find=function(t,i,r){void e.F8C===r&&(r=e.x4C);for(var o=t.length-e.O8C;-e.O8C<o;o--)if(e.x4C===r&&t[o]===i||e.x4C!==r&&t[o][r]===i)return t[o];return e.x4C},t.findIndex=function(t,i,r){void e.F8C===r&&(r=e.x4C);for(var o=t.length-e.O8C;-e.O8C<o;o--)if(e.x4C===r&&t[o]===i||e.x4C!==r&&t[o][r]===i)return o;return-e.O8C},t.insert=function(t,i,r){for(var o=e.F8C;o<i.length;o++)t.splice(r+o,e.F8C,i[o])},t.CASEINSENSITIVE=e.O8C,t.DESCENDING=e.M8C,t.UNIQUESORT=e.j8C,t.RETURNINDEXEDARRAY=e.t8C,t.NUMERIC=e.Q8C,t}(),Je.ArrayUtils=Ze,$e=Be||(Be={}),et=function(){function e(){this.values={},this.keys=[]}return e.prototype.addItem=function(e,t){void r.F8C===this.values[e]&&this.keys.push(e),this.values[e]=t},e.prototype.addUniqueItem=function(e,t){this.keys.push(e),this.values[e]=t},e.prototype.unshift=function(e,t){this.keys.unshift(e),this.values[e]=t},e.prototype.setItemAt=function(e,t,i){this.keys[i]=e,this.values[e]=t},e.prototype.addItemAt=function(e,t,i){r.x4C!=this.getItem(e)&&this.removeItem(e),this.keys.splice(i,r.F8C,e),this.values[e]=t},e.prototype.removeItem=function(e){r.x4C!=this.getItem(e)&&(this.keys.splice(this.indexOf(e),r.O8C),delete this.values[e])},e.prototype.removeItemAt=function(e){var t=this.getKeyAt(e);r.x4C!=t&&(this.keys.splice(e,r.O8C),delete this.values[t])},Object.defineProperty(e.prototype,t.H6C,{get:function(){return this.keys.length},set:function(e){},enumerable:!r.F8C,configurable:!r.F8C}),e.prototype.indexOf=function(e){return this.keys.indexOf(e)},e.prototype.keyExists=function(e){return r.x4C!=this.values[e]},e.prototype.getItem=function(e){return this.values[e]},e.prototype.getItemAt=function(e){return this.getItem(this.keys[e])},e.prototype.getKeyAt=function(e){return this.keys[e]},e.prototype.moveItemAt=function(e,t){this.keys.splice(t,r.F8C,this.keys.splice(e,r.O8C)[r.F8C])},e.prototype.slice=function(t,i){var o=r;void o.F8C===t&&(t=o.F8C),void o.F8C===i&&(i=o.F8C),o.F8C==i&&(i=this.length-t);for(var s=new e,n=o.F8C;n<i;n++)this.length>n+t&&($e.nullOrUndefined(this.getItemAt(n+t))||s.addItem(this.getKeyAt(n+t),this.getItemAt(n+t)));return s},e.prototype.concat=function(t,i){var o=r;if(void o.F8C===i&&(i=!o.F8C),!i)return this._concat(t),o.x4C;var s,n=new e;for(s=o.F8C;s<this.length;s++)n.addItem(this.getKeyAt(s),this.getItemAt(s));for(s=o.F8C;s<t.length;s++)n.addItem(t.getKeyAt(s),t.getItemAt(s));return n},e.prototype._concat=function(e){var t,i=e.length;for(t=r.F8C;t<i;t++)this.addItem(e.getKeyAt(t),e.getItemAt(t))},e.prototype.splice=function(t,i){var o=r;void o.F8C===i&&(i=o.F8C);var s=new e;t+i>this.length&&(i=this.length-t),o.O8C>i&&(i=this.length);for(var n=o.F8C;n<this.length;n++)(n<t||n>=t+i)&&s.addItem(this.getKeyAt(n),this.getItemAt(n));return s},e.prototype.reverse=function(){var t,i=new e;for(t=this.length-r.O8C;-r.O8C<t;t--)i.addItem(this.getKeyAt(t),this.getItemAt(t));return i},e.prototype.toArray=function(e){var t=r;if(void t.F8C===e&&(e=!t.O8C),e)return this.keys.slice(t.F8C);e=[];for(var i=t.F8C;i<this.length;i++)e.push(this.getItemAt(i));return e},e.prototype.toKeyArray=function(e){var t=r;if(void t.F8C===e&&(e=!t.O8C),e)return this.keys.slice(t.F8C);e=[];for(var i=t.F8C;i<this.length;i++)e.push(this.getKeyAt(i));return e},e.fromArray=function(t){for(var i=new e,o=r.F8C;o<t.length;o++)i.addItem(o.toString(),t[o]);return i},e.convert=function(t,i){for(var o=new e,s=r.F8C;s<t.length;s++)o.addItem(t[s][i],t[s]);return o},e.prototype.toString=function(){var e,i=[];for(e in this.keys){var r=t.w7C+e+": "+this.getItem(e)+t.C7C;i.push(r)}return i.join(t.P7C)},e}(),$e.AssociativeArray=et,tt=Be||(Be={}),it=function(){function e(){this.quotes=[]}return e.prototype.parse=function(e){var i=t,o=r,s=/(\W)[\'|\"][^\'|^\"]*[\'|\"]/i,n=/(\w\w\w\()[\'|\"][^\'|^\"]*[\'|\"]/i;try{this.quotes=[];for(var a=[],l=!o.O8C,h=o.C4C,c=o.F8C;c<e.length;c++){var d=e.charAt(c);i.U9Q==d||i.v9Q==d?(l&&(this.quotes.push(h),a.push(d),h=o.C4C),l=!l):l&&(h+=d)}e="  "+e;var u;for(c=o.F8C;c<this.quotes.length;c++)if(i.W9Q!=this.quotes[c].toLowerCase()){var p=a[c]+this.quotes[c]+a[c],C=e.substring(o.F8C,e.indexOf(p)+p.length+o.M8C);if((u=n).test(C))e=e.replace(p,"@"+c);else{u=s;var f=(-o.O8C!=C.indexOf("#value")||-o.O8C!=C.indexOf("#updateDifference")||-o.O8C!=C.indexOf("#updatePercent"))&&-o.O8C!=C.indexOf("if(");u.test(C)&&!f?e=e.replace(p,"sum(@"+c+i.z9Q):(u=s,e=e.replace(p,"@"+c))}}u=/\#value/g,e=e.replace(u,"value()"),u=/\#updateDifference/g,e=e.replace(u,"updateDifference()"),u=/\#updatePercent/g,e=(e=e.replace(u,"updatePercent()")).toLocaleLowerCase();var m=(m=this._parse(e))[o.O8C][o.F8C]}catch(e){return r.x4C}return m},e.prototype._parse=function(e){for(var i=t,o=r,s=[],n=o.C4C,a=e.length,l=o.F8C;l<e.length;l++){var h=e.charAt(l);if(i.K9Q==h)n+="$"+s.length+i.F9Q,h=this._parse(e.slice(l+o.O8C)),s.push(h[o.O8C]),l=l+h[o.F8C]+o.O8C;else{if(i.z9Q==h){a=l;break}n+=h}}for(e=[],n=n.split(i.k6C),l=o.F8C;l<n.length;l++)e.push(this._parseOperands(n[l],s));return[a,e]},e.prototype._parseOperands=function(e,i){for(var o=t,s=r,n=[[" or "," and "],"== != >= <= = > <".split(s.s4C),[s.L2C,o.D7C],[o.l5C,o.j9Q],[o.g9Q]],a=s.F8C;a<n.length;a++){var l=Number.MIN_VALUE,h=n[a][s.F8C];if(s.b8C==a){l=e.indexOf(n[a][s.F8C]);var c=e.indexOf(n[a][s.O8C]);-s.O8C!=l&&-s.O8C!=c?h=l<c?n[a][s.F8C]:n[a][s.O8C]:-s.O8C!=l?h=n[a][s.F8C]:-s.O8C!=c&&(h=n[a][s.O8C])}else for(c=s.F8C;c<n[a].length;c++){var d=e.indexOf(n[a][c]);-s.O8C!=d&&d>=l&&(l=d+(h=n[a][c]).length)}if(l=e.split(h),s.M8C<l.length&&(c=l[l.length-s.O8C],l.pop(),l=[l.join(h),c]),s.M8C==l.length)return[h.trim(),[this._parseOperands(l[s.F8C],i),this._parseOperands(l[s.O8C],i)],!s.F8C]}return this._parseElements(e,i)},e.prototype._parseElements=function(e,i){var o=t,s=r;if(e=e.trim(),-s.O8C!=e.indexOf("$")){var n=(a=e.split("$"))[s.F8C],a=parseInt(a[s.O8C]);if(s.F8C<n.length){var l=s.K2C!=typeof i[a][s.F8C];return(o.o9Q==n||o.n9Q==n)&&s.O8C<i[a].length&&(l=!s.F8C,s.K2C==typeof i[a][s.F8C]&&(i[a][s.F8C]=[o.t9Q,[i[a][s.F8C]],!s.O8C]),s.K2C==typeof i[a][s.O8C]&&(i[a][s.O8C]=[o.t9Q,[i[a][s.O8C]],!s.O8C])),[n,i[a],l]}return i[a][s.F8C]}return-s.O8C!=e.indexOf("@")?(n=parseInt(e.slice(s.O8C)),this.quotes[n]):o.W9Q==e.toLowerCase()||o.W9Q==e.substring(s.O8C,e.length-s.O8C).toLowerCase()?o.W9Q:(n=parseFloat(e),isNaN(n)?s.F8C:n)},e}(),tt.Lexer=it,rt=Be||(Be={}),ot=function(){var e=r;function t(){}return Object.defineProperty(t,"isMac",{get:function(){return/Mac/i.test(navigator.platform)},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(t,"isWin",{get:function(){return/Win/i.test(navigator.platform)},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(t,"isIOS",{get:function(){var e=/(iPhone|iPod|iPad)/i;return e.test(navigator.platform)||e.test(navigator.userAgent)},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(t,"isAnd",{get:function(){return/Android/i.test(navigator.userAgent)},enumerable:!e.F8C,configurable:!e.F8C}),t}(),rt.OSUtil=ot,st=Be||(Be={}),nt=function(){function e(){}return e.isEmptyObject=function(e){for(var t in e)if(!st.nullOrUndefined(e[t]))return!r.O8C;return!r.F8C},e.deepCopy=function(t){if(t instanceof Array)return e.deepCopyArray(t);var i,r={};for(i in t)r[i]="object"!=typeof t[i]?t[i]:e.deepCopy(t[i]);return r},e.deepCopyArray=function(t){for(var i=[],o=r.F8C;o<t.length;o++)i[o]="object"!=typeof t[o]?t[o]:e.deepCopy(t[o]);return i},e}(),st.ObjectUtils=nt,function(e){var i=function(){function e(){throw Error(t.D5C)}return e.dispose=function(){e.queue=[],e.instance=r.x4C,e.runningThread=r.x4C},e.addTask=function(t,i,o,s){var n=r;void n.F8C===o&&(o=n.x4C),void n.F8C===s&&(s=n.x4C),e.queue.push({taskFunction:t,context:i,args:o,completeCallback:s}),n.x4C==e.runningThread&&e.run()},e.run=function(){e.runningThread=new o(e.queue.shift(),function(){return e.onTaskComplete()}),e.runningThread.run()},e.pause=function(){r.x4C!=e.runningThread&&e.runningThread.stop()},e.resume=function(){r.x4C!=e.runningThread?e.runningThread.run():r.F8C<e.queue.length&&e.run()},e.onTaskComplete=function(){e.runningThread=r.x4C,r.F8C<e.queue.length&&this.run()},e.cancel=function(){r.x4C!=e.runningThread&&(e.runningThread.stop(),e.runningThread=r.x4C),e.queue=[]},e.isRunning=function(){return r.x4C!=e.runningThread},e.adjustTaskSize=function(e,t){var i=r;return i.L8C<e-i.V0C?t=Math.floor(.95*t):-i.L8C>e-i.V0C&&(t=Math.floor(1.05*t)),Math.max(i.g8C,t)},e.queue=[],e}();e.ThreadManager=i;var o=function(){function t(e,t){var i=r;void i.F8C===t&&(t=i.x4C),this.delay=i.O8C,this.isComplete=!i.O8C,this.task=e,this.completeCallback=t}return t.prototype.run=function(){var t=this;this.currentTimeout=e.fmSetTimeout(function(){return t.doTask()},this.delay)},t.prototype.stop=function(){e.fmClearTimeout(this.currentTimeout)},t.prototype.doTask=function(){var t=this;this.isComplete=this.task.taskFunction.call(this.task.context,this.task.args),!r.F8C==this.isComplete?this.onComplete():this.currentTimeout=e.fmSetTimeout(function(){return t.doTask()},this.delay)},t.prototype.onComplete=function(){r.x4C!=this.completeCallback&&this.completeCallback(),r.x4C!=this.task.completeCallback&&this.task.completeCallback()},t.prototype.dispose=function(){this.stop(),this.completeCallback=this.task=r.x4C},t}()}(Be||(Be={})),function(e){function i(){var e=r,i=/edge/,o=/chrome/,s=navigator.userAgent.toLowerCase(),n={};if(n.isFirefox=/mozilla/.test(s)&&/firefox/.test(s),n.isChrome=/webkit/.test(s)&&o.test(s)&&!i.test(s),n.isEdge=i.test(s),n.isSafari=/applewebkit/.test(s)&&/safari/.test(s)&&!o.test(s),n.isOpera=/opera/.test(s),n.isMsie=/msie/.test(s),n.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i.test(s)||/iPad|iPhone|iPod|BlackBerry/i.test(navigator.platform),n.version=NaN,n.isMsie||n.isFirefox||n.isChrome||n.isSafari||n.isOpera||!/trident/.test(s)||(n.isMsie=!e.F8C,n.version=e.a8C),isNaN(n.version))for(var a=["chrome","firefox","msie","safari","opera"],l=e.F8C;l<a.length;l++)try{n.version=parseInt(s.match(RegExp(t.K9Q+a[l]+")( |/)([0-9]+)"))[e.b8C]);break}catch(e){}return n}e.browserVersion=function(){return i()},e.detectBrowser=i,e.isFullscreen=function(){var e=r;return e.x4C!=document.fullscreenElement||e.x4C!=document.mozFullScreenElement||e.x4C!=document.webkitFullscreenElement||e.x4C!=document.msFullscreenElement},e.isHTML5Supported=function(){var e=r;try{var t;if(t=void e.F8C!==ArrayBuffer){var i;if(i=void e.F8C!==DataView){var o;if(o=void e.F8C!==Uint8Array){var s;if(window.chrome&&navigator.userAgent.match(/chrome.\d*/gi)){var n=navigator.userAgent.match(/chrome.\d*/gi)[e.F8C];s=e.e8C<=parseInt(n.replace(/[^\d]/g,e.C4C))}else s=!e.F8C;o=s&&(window.opera?e.A8C<=window.opera.version():!e.F8C)&&(navigator.userAgent.match("Safari/")?!navigator.userAgent.match("Version/5.")&&!navigator.userAgent.match("Version/6.0"):!e.F8C)}i=o}t=i}return t}catch(t){return!e.O8C}},e.getCookie=function(e){var i=t,o=r,s=document.cookie,n=s.indexOf(o.s4C+e+i.h6C);return-o.O8C==n&&(n=s.indexOf(e+i.h6C)),-o.O8C==n?s=o.x4C:(n=s.indexOf(i.h6C,n)+o.O8C,e=s.indexOf(i.F9Q,n),-o.O8C==e&&(e=s.length),s=decodeURI(s.substring(n,e))),s},e.setCookie=function(e,i){var r=new Date;r.setDate(r.getDate()+1825),i=encodeURI(i)+"; expires="+r.toUTCString(),document.cookie=e+t.h6C+i},e.isLandscapeOrientation=function(){return screen.orientation&&-r.O8C<screen.orientation.type.indexOf(t.y9Q)},e.isPortraitOrientation=function(){return screen.orientation&&-r.O8C<screen.orientation.type.indexOf(t.Y1Q)},e.viewportWidth=function(){return Math.max(document.documentElement.clientWidth)},e.viewportHeight=function(){return Math.max(document.documentElement.clientHeight)}}(Be||(Be={})),function(e){var i=function(t){var i=r;function n(e,r){void i.F8C===r&&(r=i.F8C);var o=t.call(this)||this;return o._currentCount=i.F8C,o._delay=i.F8C,o._repeatCount=i.F8C,o._running=!i.O8C,o._delay=e,o._repeatCount=r,o}return Ga(n,t),n.prototype.onTimer=function(){this._currentCount++,this.dispatch(new s._Event(o.TIMER)),i.F8C<this._repeatCount&&this._currentCount>=this._repeatCount&&(this.stop(),this.dispatch(new s._Event(o.TIMER_COMPLETE)))},n.prototype.start=function(){var t=this;this._running||(this._intervalId=e.fmSetInterval(function(){return t.onTimer()},this._delay),this._running=!i.F8C)},n.prototype.stop=function(){this._running&&!e.nullOrUndefined(this._intervalId)&&(e.fmClearInterval(this._intervalId),this._running=!i.O8C)},n.prototype.reset=function(){this._currentCount=i.F8C,this.stop()},Object.defineProperty(n.prototype,"currentCount",{get:function(){return this._currentCount},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,"running",{get:function(){return this._running},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,"repeatCount",{get:function(){return this._repeatCount},set:function(e){this._repeatCount=e,this._currentCount>=this._repeatCount&&this.stop()},enumerable:!i.F8C,configurable:!i.F8C}),n}(s.EventDispatcher);e.Timer=i;var o=function(){function e(){}return e.TIMER="timer",e.TIMER_COMPLETE="complete",e}();e.TimerEvent=o,e.getTimer=function(){return r.Q2C!==typeof performance&&t.x1Q===typeof window.performance.now?performance.now():(new Date).getTime()}}(Be||(Be={})),function(e){var i=function(i){function s(o){var n=t,a=r,l=i.call(this)||this;if(l._isFocused=!a.O8C,l._keydownHandler=function(e){return l.onKeyDown(e)},l.inputKeyUpHandler=function(e){return l.onInputKeyUp(e)},a.x4C!=s._instance)throw Error("KeyboardListener is singleton");return l.target=o,e.browserVersion().isMobile||(e.fmdocument.addEventListener(n.F1Q,l._keydownHandler),l._inputContainer=new h.UIElement(a.r4C),l._inputContainer.attr(a.G2C,"pivot-hiddenInputContainer"),l._inputContainer.css(a.F3C,"fixed").css(a.M2C,"0px").css(a.b2C,"0px").css(a.E4C,n.O7C).css(a.s2C,"0px").css(a.O2C,"0px"),l._inputContainer.hide(),l._input=new h.UITextArea,l._input.setId("pivot-hiddenInput"),l._input.container.css(a.s2C,n.O5C).css(a.O2C,n.O5C).css(a.V2C,"0px"),l._input.addEventListener(a.X3C,function(){l._isFocused=!r.F8C}),l._input.addEventListener(a.B3C,function(){l._isFocused=!r.O8C}),l._inputContainer.append(l._input.container),o.append(l._inputContainer)),l}return Ga(s,i),s.getInstance=function(){return r.x4C==s._instance&&(s._instance=new s(De._view.PivotView.stage.container)),s._instance},Object.defineProperty(s.prototype,"isFocused",{get:function(){return this._isFocused},enumerable:!r.F8C,configurable:!r.F8C}),s.prototype.onKeyDown=function(e){var t=new o(o.KEY_DOWN);t.keyCode=e.keyCode,t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,this.dispatch(t)},s.prototype.onInputKeyUp=function(e){this._inputContainer.hide(),this._input.setText(r.C4C),this._input.container.blur(),this._input.removeEventListener(r.r2C,this.inputKeyUpHandler)},s.prototype.copy=function(e){this._inputContainer.show(),this._input.setText(e),this._input.container.focus(),this._input.selectAll(),this._input.container.focus(),this._input.addEventListener(r.r2C,this.inputKeyUpHandler)},s}(s.EventDispatcher);e.KeyboardListener=i;var o=function(e){function t(t){return e.call(this,t)||this}return Ga(t,e),t.KEY_DOWN="event_keydown",t}(s._Event);e.KeyboardEvent=o}(Be||(Be={})),(at=De||(De={})).debug=function(){for(var e=r,t=[],i=e.F8C;i<arguments.length;i++)t[i]=arguments[i];if(e.x4C!=console&&e.x4C!=console.log)for(i=Be.browserVersion().isFirefox&&Be.browserVersion().isMobile?e.F8C:e.O8C;i<t.length;i++);},at.stackTrace=function(){var e=Error();return e&&e.stack?e.stack.substr(77):r.C4C},function(e){e.uialert=function(i,o,s,n,a,l){var h=r;void h.F8C===o&&(o=h.C4C),void h.F8C===s&&(s=t.ALERT),void h.F8C===n&&(n=h.x4C),void h.F8C===a&&(a=h.x4C),void h.F8C===l&&(l=!h.O8C),e._view.AlertView.getInstance().openView(i,o,s,n,a,l)};var t=function(){function e(){}return e.ALERT="alert",e.CONFIRMATION="confirmation",e.ERROR="error",e.INFO="info",e}();e.AlertType=t}(De||(De={})),(lt=De||(De={})).preloader=function(e,t,i,o,s){void r.F8C===e&&(e=!r.F8C),lt._view.Preloader.getInstance().show(e,t,i,o,s)},ht=De||(De={}),ct=ht.model||(ht.model={}),dt=function(e){function i(){var o=e.call(this)||this;if(r.x4C!=i.instance)throw Error(t.D5C);return o.cube_=ht.data_.Cube.getInstance(),o.state_=new ct._state.StateManager,o}return Ga(i,e),i.getInstance=function(){return r.x4C==this.instance&&(this.instance=new i),this.instance},i.prototype.init=function(e){i.id=e.id?e.id:r.C4C,ct.JavaScriptHandlers.setHandlers(e),ct._labels.LabelsManager.getInstance().reset(),ht._view.grid.vo.GridCell.customizeCellFunction=e.customizeCell,this.state_.init(e)},i.prototype.open=function(){this.state_.open()},i.prototype.load=function(e){this.state_.load(e)},i.prototype.save=function(e,t,i,o,s){var n=r;return void n.F8C===t&&(t=n.x4C),void n.F8C===s&&(s=!n.O8C),this.state_.save(e,t,i,o,s)},i.prototype.setReport=function(e){this.state_.setReport(e)},i.prototype.getReport=function(e){return void r.F8C===e&&(e={}),this.state_.getReport(e)},i.prototype.clear=function(){this.state_.clear()},i.prototype.checkDataObject=function(e){var t={};return Be.nullOrUndefined(e.dataSourceType)||(t.dataSourceType=e.dataSourceType),Be.nullOrUndefined(e.filename)||(t.filename=e.filename),Be.nullOrUndefined(e.requestHeader)||(t.requestHeader=e.requestHeader),Be.nullOrUndefined(e.fieldSeparator)||(t.fieldSeparator=e.fieldSeparator),Be.nullOrUndefined(e.recordsetDelimiter)||(t.recordsetDelimiter=e.recordsetDelimiter),Be.nullOrUndefined(e.browseForFile)||(t.browseForFile=e.browseForFile),Be.nullOrUndefined(e.data)||(t.data=e.data),Be.nullOrUndefined(e.ignoreQuotedLineBreaks)||(t.ignoreQuotedLineBreaks=e.ignoreQuotedLineBreaks),Be.nullOrUndefined(e.hash)||(t.hash=e.hash),Be.nullOrUndefined(e.username)||(t.username=e.username),Be.nullOrUndefined(e.password)||(t.password=e.password),t},i.prototype.connectTo=function(e){this.state_.connectTo(this.checkDataObject(e))},i.prototype.updateData=function(e,t){t.partial?this.state_.updateDataPartial(e.data,t):this.state_.updateData(this.checkDataObject(e),t)},i.prototype.getData=function(e,i,o){if(r.x4C!=o&&ht.Pivot.instance.on(t.L1Q,function(){ht.Pivot.instance.getData(e,o)}),r.x4C!=e&&r.x4C!=e.slice){var s=e.slice instanceof ht.data_._structure.Slice?e.slice:ht.data_._structure.Slice.fromObject(ct.report.SliceValueObject.fromObject(e.slice),this.cube_.structure_);ct.integration.IntegrationDataManager.getInstance().selectData(s,i)}else i((s=ct.integration.IntegrationDataManager.getInstance().getData()).toObject())},i.prototype.getAllConditions=function(){return ct.condition.ConditionManager.getObjects()},i.prototype.getCondition=function(e){return(e=ct.condition.ConditionManager.get(e))?e.toObject():r.x4C},i.prototype.addCondition=function(e){ct.condition.ConditionManager.add(ct.condition.vo.ConditionValueObject.fromObject(e))},i.prototype.removeCondition=function(e){ct.condition.ConditionManager.remove(e)},i.prototype.removeAllConditions=function(){ct.condition.ConditionManager.removeAll()},i.prototype.addCalculatedMeasure=function(e){this.cube_.addCalculatedMeasure(e)},i.prototype.removeCalculatedMeasure=function(e){this.cube_.removeCalculatedMeasure(e)},i.prototype.removeAllCalculatedMeasures=function(){this.cube_.removeAllCalculatedMeasures()},i.prototype.expandAllData=function(e){void r.F8C===e&&(e=!r.F8C),this.cube_.slice_.expandAll=!r.F8C,this.cube_.slice_.drillAll=e,this.cube_.slice_.clearExpands(),this.cube_.slice_.clearDrills(),ht.data_.dataprovider_.DataProviderFactory.dispose(),this.refresh()},i.prototype.expandData=function(e){this.dataProvider_.expandData(e)},i.prototype.collapseAllData=function(){this.cube_.slice_.expandAll=!r.O8C,this.cube_.slice_.drillAll=!r.O8C,this.cube_.slice_.columnAxis.expandedTuples=[],this.cube_.slice_.columnAxis.drilledTuples=[],this.cube_.slice_.rowAxis.expandedTuples=[],this.cube_.slice_.rowAxis.drilledTuples=[],ht.data_.dataprovider_.DataProviderFactory.dispose(),this.refresh()},i.prototype.collapseData=function(e){this.dataProvider_.collapseData(e)},i.prototype.setOptions=function(e){r.x4C!=e.localSettingsUrl&&delete e.localSettingsUrl,r.x4C!=e.zoom&&delete e.zoom,ct._options.OptionsManager.setOptions(e,!r.O8C)},i.prototype.print=function(e){ct.printing.PrintingManager.getInstance().print(e)},i.prototype.exportTo=function(e,t,i){var o=r;void o.F8C===t&&(t=o.x4C),void o.F8C===i&&(i=o.x4C),ct._export.ExportManager.exportTo(e,t,i)},i.prototype.getFilter=function(e){var t=r;if(t.x4C==this.cube_||t.x4C==this.cube_.structure_)return[];var i=[];if((e=this.cube_.structure_.allHierarchies(!t.O8C).getItem(e))&&e.hasFilter())for(var o=e.filter,s=t.F8C;s<o.length;s++){var n=o.getItemAt(s);i.push({caption:n.caption,uniqueName:n.uniqueName,hierarchyName:e.uniqueName,parentMember:n.parent.uniqueName})}return i},i.prototype.getFilterProperties=function(e){var i=r;if(i.x4C==this.cube_||i.x4C==this.cube_.structure_)return[];var o={};if(o.type=ht.data_.consts.FilterType.NONE,o.members=[],(e=this.cube_.structure_.allHierarchies(!i.O8C).getItem(e))&&e.hasFilter()){if(e.hasMembersFilter()){o.type=t.a1Q;for(var s=e.filterMembers,n=i.F8C;n<s.length;n++){var a=s.getItemAt(n);o.members.push({caption:a.caption,uniqueName:a.uniqueName,hierarchyName:e.uniqueName,parentMember:a.parent.uniqueName})}}e.hasValuesFilter()&&(o.type=e.filterType,o.quantity=e.filterQuantity,o.measure=e.filterMeasureName,o.measureName=e.filterMeasureName)}return o},i.prototype.setFilter=function(e,t,i){if(void r.F8C===i&&(i=!r.O8C),e=this.cube_.structure_.allHierarchies(!r.O8C).getItem(e)){var o={};o.members=t,o.negation=i,ht.data_._structure.GenericHierarchy.filterFromObject(o,e),ct.JavaScriptHandlers.getInstance().dispatch(new ct.APIEvent(ct.JavaScriptHandlers.REPORT_CHANGE)),this.cube_.filter()}},i.prototype.clearFilter=function(e){(e=this.cube_.structure_.allHierarchies(!r.O8C).getItem(e))&&(e.clearFilter(),this.cube_.select())},i.prototype.getRows=function(){if(r.x4C==this.cube_||r.x4C==this.cube_.slice_)return[];for(var e=this.cube_.slice_.rows,t=[],i=r.F8C;i<e.length;i++){var o=e.getItemAt(i);t.push({caption:o.caption,uniqueName:o.uniqueName,sort:o.sortName,folder:o.folder})}return t},i.prototype.getColumns=function(){if(r.x4C==this.cube_||r.x4C==this.cube_.slice_)return[];for(var e=this.cube_.slice_.columns,t=[],i=r.F8C;i<e.length;i++){var o=e.getItemAt(i);t.push({caption:o.caption,uniqueName:o.uniqueName,sort:o.sortName,folder:o.folder})}return t},i.prototype.getPages=function(){if(r.x4C==this.cube_||r.x4C==this.cube_.slice_)return[];for(var e=this.cube_.slice_.pages,t=[],i=r.F8C;i<e.length;i++){var o=e.getItemAt(i);t.push({caption:o.caption,uniqueName:o.uniqueName,sort:o.sortName,folder:o.folder})}return t},i.prototype.getMeasures=function(){var e=r;if(e.x4C==this.cube_||e.x4C==this.cube_.slice_)return[];var t,i,o,s=[];if(ct._options.OptionsManager.flatView){var n=this.cube_.slice_.flatten();for(t=e.F8C;t<n.length;t++)i=n.getItemAt(t),(i=this.cube_.structure_.hierarchyToMeasure(i.uniqueName))&&((o=ht.data_._structure.GenericMeasure.toObject(i)).availableAggregations=[],o.availableAggregationsCaptions=[],o.caption=o.grandTotalCaption=i.originalCaption,s.push(o))}else for(n=this.cube_.slice_.measures_,t=e.F8C;t<n.length;t++){i=n.getItemAt(t),o=ht.data_._structure.GenericMeasure.toObject(i);var a=i.availableAggregations;e.F8C!=i.availableAggregations.length||i.calculated||(a=ht.data_.consts.AggregationName.ALL_AGGREGATIONS),o.availableAggregations=a,o.availableAggregationsCaptions=ht.data_.consts.AggregationName.aggregationCaptions(a),s.push(o)}return s},i.prototype.getAllMeasures=function(){var e=r;if(e.x4C==this.cube_||e.x4C==this.cube_.structure_)return[];for(var t=this.cube_.structure_.measures_,i=[],o=e.F8C;o<t.length;o++){var s=t.getItemAt(o),n=ht.data_._structure.GenericMeasure.toObject(s);if(ct._options.OptionsManager.flatView)n.availableAggregations=[],n.availableAggregationsCaptions=[],n.caption=n.grandTotalCaption=s.originalCaption;else{var a=s.availableAggregations;e.F8C!=s.availableAggregations.length||s.calculated||(a=ht.data_.consts.AggregationName.ALL_AGGREGATIONS),n.availableAggregations=a,n.availableAggregationsCaptions=ht.data_.consts.AggregationName.aggregationCaptions(a)}i.push(n)}return i},i.prototype.replaceHierarchyCaption=function(e){this.cube_.structure_.allHierarchies(!r.O8C).getItem(e.name).label=e.caption},i.prototype.getAllHierarchies=function(){var e=r;if(e.x4C==this.cube_||e.x4C==this.cube_.structure_)return[];for(var t=this.cube_.structure_.allHierarchies(!e.O8C),i=[],o=e.F8C;o<t.length;o++){var s=t.getItemAt(o);i.push({caption:s.caption,uniqueName:s.uniqueName,folder:s.folder})}return i},i.prototype.sortValues=function(e,t,i,o){e=this.cube_.slice_.axes.getItem(e),r.x4C!=e&&((o=this.cube_.structure_.measures_.getItem(o))&&(e.sortType=t,e.sortTuple=i,e.sortMeasure=o),this.cube_.sort())},i.prototype.setSort=function(e,t){var i=this.cube_.structure_.allHierarchies(!r.O8C).getItem(e);if(i){var o=this.cube_.slice_.axes.getItem(ht.data_.consts.AxisName.COLUMNS_AXIS),s=this.cube_.slice_.axes.getItem(ht.data_.consts.AxisName.ROWS_AXIS);-r.O8C!=o.hierarchies.indexOf(i.uniqueName)?this.cube_.clearSortValues(s):-r.O8C!=s.hierarchies.indexOf(i.uniqueName)&&this.cube_.clearSortValues(o),i.sortName=t,ct._options.OptionsManager.flatView&&(this.dataProvider_.columnSortType=t,this.dataProvider_.columnSortTuple=this.dataProvider_.getColumnTupleByName(i.uniqueName),this.dataProvider_.columnSortMeasure=this.cube_.structure_.hierarchyToMeasure(i.uniqueName))}this.cube_.select()},i.prototype.getSort=function(e){var t=r;return t.x4C==this.cube_||t.x4C==this.cube_.structure_?t.C4C:(e=this.cube_.structure_.allHierarchies(!t.O8C).getItem(e),t.x4C!=e?e.sortName:t.C4C)},i.prototype.setTopX=function(e,t,i){e=this.cube_.structure_.allHierarchies(!r.O8C).getItem(e);var o=ct._options.OptionsManager.flatView?this.cube_.structure_.measures_.getItem(i):this.cube_.slice_.measures_.getItem(i);e&&o&&!e.isMeasures&&(e.filterType=ht.data_.consts.FilterType.TOP,e.filterQuantity=t,e.filterMeasureName=i,e.sortName=ht.data_.consts.SortType.UNSORTED,t=this.cube_.slice_.findAxis(ht.data_.consts.AxisName.ROWS_AXIS),i=this.cube_.slice_.findAxis(ht.data_.consts.AxisName.COLUMNS_AXIS),-r.O8C!=t.hierarchies.indexOf(e.uniqueName)&&(i.sortTuple=[],i.sortType=ht.data_.consts.SortType.DESC,i.sortMeasure=this.cube_.slice_.measures_.getItem(e.filterMeasureName)),-r.O8C!=i.hierarchies.indexOf(e.uniqueName)&&(t.sortTuple=[],t.sortType=ht.data_.consts.SortType.DESC,t.sortMeasure=this.cube_.slice_.measures_.getItem(e.filterMeasureName))),this.cube_.filter()},i.prototype.setBottomX=function(e,t,i){e=this.cube_.structure_.allHierarchies(!r.O8C).getItem(e);var o=ct._options.OptionsManager.flatView?this.cube_.structure_.measures_.getItem(i):this.cube_.slice_.measures_.getItem(i);e&&o&&!e.isMeasures&&(e.filterType=ht.data_.consts.FilterType.BOTTOM,e.filterQuantity=t,e.filterMeasureName=i,e.sortName=ht.data_.consts.SortType.UNSORTED,t=this.cube_.slice_.findAxis(ht.data_.consts.AxisName.ROWS_AXIS),i=this.cube_.slice_.findAxis(ht.data_.consts.AxisName.COLUMNS_AXIS),-r.O8C!=t.hierarchies.indexOf(e.uniqueName)&&(i.sortTuple=[],i.sortType=ht.data_.consts.SortType.ASC,i.sortMeasure=this.cube_.slice_.measures_.getItem(e.filterMeasureName)),-r.O8C!=i.hierarchies.indexOf(e.uniqueName)&&(t.sortTuple=[],t.sortType=ht.data_.consts.SortType.ASC,t.sortMeasure=this.cube_.slice_.measures_.getItem(e.filterMeasureName))),this.cube_.filter()},i.prototype.getMembers=function(e,t,i){var o=r;return o.x4C==this.cube_||o.x4C==this.cube_.structure_?[]:(t=[],(e=this.cube_.structure_.allHierarchies(!o.O8C).getItem(e))&&(t=this.getAllChildren(e.allMember),o.x4C!=i&&i(t)),t)},i.prototype.getChildrenByMember=function(e,t){for(var i=r.C4C==t?e.allMember.children:e.findMember(t).children,o=[],s=r.F8C;s<i.length;s++){var n=i.getItemAt(s),a=n.level.num==n.hierarchy_.levels_.length-r.O8C;n.uniqueName!=e.allMemberName&&o.push({caption:n.caption,uniqueName:n.uniqueName,hierarchyName:e.uniqueName,parentMember:n.parent.isAll?"(All)":n.parent.uniqueName,isLeaf:a})}return o},i.prototype.getAllChildren=function(e){var t=r;e=e.hierarchy_.sortChildren(e,!t.O8C);for(var i=[],o=t.F8C;o<e.length;o++){var s=e.getItemAt(o),n=s.level.num==s.hierarchy_.levels_.length-t.O8C,a=[];t.O8C==s.children.length&&s.children.getItemAt(t.F8C).caption==ct._labels.Labels.MEMBER_BLANK||(a=this.getAllChildren(s)),i.push({caption:s.caption,uniqueName:s.uniqueName,hierarchyName:s.hierarchy_.uniqueName,children:a,parentMember:s.parent.isAll?"(All)":s.parent.uniqueName,isLeaf:n})}return i},i.prototype.runQuery=function(e){this.state_.runQuery(e)},i.prototype.getOptions=function(){return ct._options.OptionsManager.getOptions(!r.F8C,!r.F8C).toObject()},i.prototype.getFormat=function(e){return((e=this.cube_&&this.cube_.structure_?this.cube_.structure_.findMeasure(e):r.x4C)?e.getFormat():ct.format.FormatManager.getFormat(r.C4C)).toObject(!r.F8C)},i.prototype.setFormat=function(e,i){var o=r;e.hasOwnProperty(t.F5C)||(e.name=Be.StringUtils.generateID());try{ct.format.FormatManager.setFormat(e)}catch(e){return void ht.uialert("Can't add format. Component's configuration requires more parameters.")}try{var s=this.cube_.structure_.findMeasure(i);if(s&&(s.format=e.name),o.C4C!=e.name&&(o.C4C==i||o.x4C==i))for(var n=o.F8C;n<this.cube_.structure_.measures_.length;n++)(s=this.cube_.structure_.measures_.getItemAt(n)).format=e.name}catch(e){ht.uialert("List of measures is empty. There is nothing to format.")}},i.prototype.refresh=function(){this.cube_.filter()},i.prototype.dispose=function(){ht.data_.dataprovider_.DataProviderFactory.dispose(),this.cube_&&this.cube_.dispose(),this.state_&&this.state_.dispose(),this.dataProvider_=this.state_=this.cube_=r.x4C,i.instance=r.x4C},i.id="WebDataRocks",i}(s.EventDispatcher),ct.PivotModel=dt,ut=De||(De={}),pt=ut.model||(ut.model={}),Ct=function(e,t){void r.F8C===t&&(t=r.x4C),this.type=e,this.data=t},pt.APIEvent=Ct,Ct=function(e){var i=t;function o(){var t=e.call(this)||this;if(r.x4C!=o.instance)throw Error(i.D5C);return t}return Ga(o,e),o.getInstance=function(){return r.x4C==o.instance&&(o.instance=new o),o.instance},o.dispose=function(){o.instance=r.x4C},o.toTypes=function(e){return o.isValidType(e)?e:r.C4C},o.isValidType=function(e){return-r.O8C<o.types.indexOf(e)},o.prototype.addEventListener=function(t,i,s){void r.F8C===s&&(s=r.F8C),t=o.toTypes(t),o.isValidType(t)&&e.prototype.addEventListener.call(this,t,i,s)},o.prototype.removeEventListener=function(t,i){t=o.toTypes(t),o.isValidType(t)&&e.prototype.removeEventListener.call(this,t,i)},o.setHandlers=function(e){o.setHandler(o.READY,e[o.READY]),o.setHandler(o.OPENING_REPORT_FILE,e[o.OPENING_REPORT_FILE]),o.setHandler(o.LOADING_REPORT_FILE,e[o.LOADING_REPORT_FILE]),o.setHandler(o.REPORT_FILE_LOADED,e[o.REPORT_FILE_LOADED]),o.setHandler(o.REPORT_FILE_ERROR,e[o.REPORT_FILE_ERROR]),o.setHandler(o.REPORT_FILE_CANCELLED,e[o.REPORT_FILE_CANCELLED]),o.setHandler(o.REPORT_CHANGE,e[o.REPORT_CHANGE]),o.setHandler(o.LOADING_DATA,e[o.LOADING_DATA]),o.setHandler(o.DATA_LOADED,e[o.DATA_LOADED]),o.setHandler(o.DATA_ERROR,e[o.DATA_ERROR]),o.setHandler(o.DATA_FILE_CANCELLED,e[o.DATA_FILE_CANCELLED]),o.setHandler(o.DATA_CHANGED,e[o.DATA_CHANGED]),o.setHandler(o.RUNNING_QUERY,e[o.RUNNING_QUERY]),o.setHandler(o.QUERY_COMPLETE,e[o.QUERY_COMPLETE]),o.setHandler(o.QUERY_ERROR,e[o.QUERY_ERROR]),o.setHandler(o.LOADING_LOCALIZATION,e[o.LOADING_LOCALIZATION]),o.setHandler(o.LOCALIZATION_LOADED,e[o.LOCALIZATION_LOADED]),o.setHandler(o.LOCALIZATION_ERROR,e[o.LOCALIZATION_ERROR]),o.setHandler(o.REPORT_COMPLETE,e[o.REPORT_COMPLETE]),o.setHandler(o.PRINT_START,e[o.PRINT_START]),o.setHandler(o.PRINT_COMPLETE,e[o.PRINT_COMPLETE]),o.setHandler(o.EXPORT_START,e[o.EXPORT_START]),o.setHandler(o.EXPORT_COMPLETE,e[o.EXPORT_COMPLETE]),o.setHandler(o.UPDATE,e[o.UPDATE]),o.setHandler(o.BEFORE_GRID_DRAW,e[o.BEFORE_GRID_DRAW]),o.setHandler(o.AFTER_GRID_DRAW,e[o.AFTER_GRID_DRAW]),o.setHandler(o.CELL_CLICK,e[o.CELL_CLICK]),o.setHandler(o.CELL_DOUBLE_CLICK,e[o.CELL_DOUBLE_CLICK]),o.setHandler(o.FILTER_OPEN,e[o.FILTER_OPEN]),o.setHandler(o.FILDS_LIST_OPEN,e[o.FILDS_LIST_OPEN]),o.setHandler(o.FILDS_LIST_CLOSE,e[o.FILDS_LIST_CLOSE]),o.setHandler(o.BEFORE_TOOLBAR_CREATED,e[o.BEFORE_TOOLBAR_CREATED])},o.setHandler=function(e,t){if(t){r.K2C==typeof t&&(t=o.getFunctionByName(t));var i=t;e!=o.BEFORE_TOOLBAR_CREATED&&e!=o.BEFORE_GRID_DRAW&&e!=o.AFTER_GRID_DRAW&&(i=function(){for(var e=[],i=r.F8C;i<arguments.length;i++)e[i]=arguments[i];Be.fmSetTimeout(function(){t.apply(r.x4C,e)},r.O8C)}),o.getInstance().addEventListener(e,i)}},o.getFunctionByName=function(e,t){var o=r;void o.F8C===t&&(t=window);for(var s=e.split(i.f7C),n=s.pop(),a=o.F8C;a<s.length;a++){if(o.x4C==t)return o.x4C;t=t[s[a]]}return t[n]},o.OPENING_REPORT_FILE="openingreportfile",o.LOADING_REPORT_FILE="loadingreportfile",o.REPORT_FILE_LOADED="reportfileloaded",o.REPORT_FILE_ERROR="reportfileerror",o.REPORT_FILE_CANCELLED="reportfilecancelled",o.LOADING_DATA="loadingdata",o.DATA_LOADED="dataloaded",o.DATA_ERROR="dataerror",o.DATA_FILE_CANCELLED="datafilecancelled",o.DATA_CHANGED="datachanged",o.RUNNING_QUERY="runningquery",o.QUERY_COMPLETE="querycomplete",o.QUERY_ERROR="queryerror",o.LOADING_LOCALIZATION="loadinglocalization",o.LOCALIZATION_LOADED="localizationloaded",o.LOCALIZATION_ERROR="localizationerror",o.REPORT_COMPLETE="reportcomplete",o.REPORT_CHANGE="reportchange",o.EXPORT_START="exportstart",o.EXPORT_COMPLETE=i.v8Q,o.PRINT_START="printstart",o.PRINT_COMPLETE=i.W8Q,o.READY="ready",o.UPDATE=i.L1Q,o.BEFORE_GRID_DRAW=i.l8Q,o.AFTER_GRID_DRAW=i.p8Q,o.CELL_CLICK="cellclick",o.CELL_DOUBLE_CLICK="celldoubleclick",o.FILTER_OPEN="filteropen",o.FILDS_LIST_OPEN="fieldslistopen",o.FILDS_LIST_CLOSE="fieldslistclose",o.BEFORE_TOOLBAR_CREATED="beforetoolbarcreated",o.types=[o.READY,o.OPENING_REPORT_FILE,o.LOADING_REPORT_FILE,o.REPORT_FILE_LOADED,o.REPORT_FILE_ERROR,o.REPORT_FILE_CANCELLED,o.LOADING_DATA,o.DATA_LOADED,o.DATA_ERROR,o.DATA_FILE_CANCELLED,o.DATA_CHANGED,o.RUNNING_QUERY,o.QUERY_COMPLETE,o.QUERY_ERROR,o.LOADING_LOCALIZATION,o.LOCALIZATION_LOADED,o.LOCALIZATION_ERROR,o.REPORT_COMPLETE,o.REPORT_CHANGE,o.PRINT_START,o.PRINT_COMPLETE,o.EXPORT_START,o.EXPORT_COMPLETE,o.UPDATE,o.BEFORE_GRID_DRAW,o.AFTER_GRID_DRAW,o.CELL_CLICK,o.CELL_DOUBLE_CLICK,o.FILTER_OPEN,o.FILDS_LIST_OPEN,o.FILDS_LIST_CLOSE,o.BEFORE_TOOLBAR_CREATED],o}(s.EventDispatcher),pt.JavaScriptHandlers=Ct,ft=De||(De={}),mt=ft.model||(ft.model={}),gt=function(){function e(){}return e.valid=function(e){var t=r;return void t.F8C==e?!t.F8C:(e=e.toLowerCase(),-t.O8C==e.indexOf("<script")&&-t.O8C==e.indexOf("javascript:")&&-t.O8C==e.indexOf("<iframe")&&-t.O8C==e.indexOf("<object")&&-t.O8C==e.indexOf("expression(")&&-t.O8C==e.indexOf("onmouseover")&&-t.O8C==e.indexOf("onerror"))},e.validate=function(e,t){return void r.F8C===t&&(t=!r.O8C),Be.StringUtils.escapeHtml(e,t)},e}(),mt.XSSCheck=gt,yt=De||(De={}),_t=yt.model||(yt.model={}),vt=_t.integration||(_t.integration={}),bt=function(){function e(){}return e.getInstance=function(){return r.x4C==e.instance&&(e.instance=new e),e.instance},e.dispose=function(){e.instance=r.x4C},e.prototype.getData=function(){var e=yt.data_.dataprovider_.DataProviderFactory.getDataProvider();return this.composeData(e)},e.prototype.selectData=function(e,t){var i=yt.data_.Cube.getInstance(),r=yt.data_.LocalDataStorage.clone(i.localDataStorage);r.slice_=e,r.filter(),r.select(),(i=new yt.data_.dataprovider_.ChartDataProvider).reset(),i.dataStorage=r,i.slice=e,i.load(),t((r=this.composeData(i)).toObject()),i.reset()},e.prototype.composeData=function(e){var i=r,o=new vt.OutputDataValueObject;if(void i.F8C==e.slice)return o;o.slice=e.slice.toObject(),o.meta={vAmount:e.slice.measures_.length,formats:[]};var s=i.F8C,n=i.F8C;if(e.dataLoaded&&!e.isEmpty){var a,l;a=i.k2C==_t._options.OptionsManager.showGrandTotals||t.M8Q==_t._options.OptionsManager.showGrandTotals?e.dataWidth-i.O8C:e.dataWidth,l=i.k2C==_t._options.OptionsManager.showGrandTotals||t.b8Q==_t._options.OptionsManager.showGrandTotals?e.dataHeight-i.O8C:e.dataHeight;var h,c,d,u=NaN,p=i.C4C;p=i.C4C,o.data=[],h=[],c=[],d={};for(var C=i.F8C;C<e.measures.length;C++){u=e.measures.getItemAt(C),o.meta["v"+C+"Name"]=u.caption;var f=_t.PivotModel.getInstance().getFormat(u.uniqueName);o.meta.formats.push(f),u=e.getValue(h,c,u),d["v"+C]=u}for(o.data.push(d),f=i.F8C;f<l;f++){for(d={},h=e.getRowTuple(f),s=Math.max(s,h.length),c=[],C=e.rowsOnly,u=i.F8C;u<h.length;u++){var m=u,g=(p=C.getItemAt(m),h[u]);g=p.members.getItemAt(g),o.meta["r"+m+"Name"]=p.caption,p=this.getDataFromMember(g),d["r"+m]=p}for(C=i.F8C;C<e.measures.length;C++)u=e.measures.getItemAt(C),u=e.getValue(h,c,u),d["v"+C]=u;o.data.push(d)}for(var y=i.F8C;y<a;y++){for(d={},h=[],c=e.getColumnTuple(y),n=Math.max(n,c.length),C=e.columnsOnly,u=i.F8C;u<c.length;u++)m=u,p=C.getItemAt(m),g=c[u],g=p.members.getItemAt(g),o.meta["c"+m+"Name"]=p.caption,p=this.getDataFromMember(g),d["c"+m]=p;for(C=i.F8C;C<e.measures.length;C++)u=e.measures.getItemAt(C),u=e.getValue(h,c,u),d["v"+C]=u;o.data.push(d)}for(f=i.F8C;f<l;f++)for(h=e.getRowTuple(f),s=Math.max(s,h.length),y=i.F8C;y<a;y++){for(c=e.getColumnTuple(y),n=Math.max(n,c.length),d={},C=e.rowsOnly,u=i.F8C;u<h.length;u++)m=u,p=C.getItemAt(m),g=h[u],g=p.members.getItemAt(g),p=this.getDataFromMember(g),d["r"+m]=p;for(C=e.columnsOnly,u=i.F8C;u<c.length;u++)m=u,p=C.getItemAt(m),g=c[u],g=p.members.getItemAt(g),p=this.getDataFromMember(g),d["c"+m]=p;for(C=i.F8C;C<e.measures.length;C++)u=e.measures.getItemAt(C),u=e.getValue(h,c,u),d["v"+C]=u;o.data.push(d)}}return o.meta.rAmount=s,o.meta.cAmount=n,o},e.prototype.getDataFromMember=function(e){return e.level.type==yt.data_.types.LevelType.NUMBER||e.level.type==yt.data_.types.LevelType.TIME?e.levelOrdinal:e.level.type==yt.data_.types.LevelType.TIME_DATE?Date.parse(e.caption):e.level.type==yt.data_.types.LevelType.DAY?isNaN(parseFloat(e.caption))?e.caption:parseFloat(e.caption):e.caption},e}(),vt.IntegrationDataManager=bt,wt=De||(De={}),Ft=wt.model||(wt.model={}),Et=Ft.integration||(Ft.integration={}),Ot=function(){function e(){this.slice={},this.meta={},this.data=[]}return e.prototype.toObject=function(){var e,i={};for(e in this)t.t8Q!=e&&t.x1Q!==typeof this[e]&&(i[e]=this[e]);return i},e}(),Et.OutputDataValueObject=Ot,St=De||(De={}),Tt=St.model||(St.model={}),xt=Tt._labels||(Tt._labels={}),Lt=function(){function e(){}return e.DEFAULT_EXPORT_TITLE="WebDataRocks Reporting Tool",e}(),xt.Labels=Lt,At=De||(De={}),It=At.model||(At.model={}),Rt=It._labels||(It._labels={}),Dt=function(){function e(){}return e.prototype.load=function(e,i,o){var s=this;this.successHandler=i,this.errorHandler=o,this.xhr=new XMLHttpRequest,this.xhr.open(t.M6C,e,!r.F8C),this.xhr.onerror=function(e){return s.onError(e)},this.xhr.onreadystatechange=function(e){return s.onReadyStateChange(e)},this.xhr.send()},e.prototype.onReadyStateChange=function(e){r.x4C!=this.xhr&&r.j8C===this.xhr.readyState&&(r.A0C===this.xhr.status?this.success():this.errorHandler())},e.prototype.success=function(){this.xhr.response&&r.x4C==this.xhr.response.error?r.x4C!=this.successHandler&&this.onLoaded(this.xhr.response):this.errorHandler&&this.errorHandler()},e.prototype.onError=function(e){r.x4C!=this.errorHandler&&this.errorHandler()},e.prototype.onLoaded=function(e){try{var t=JSON.parse(e);this.successHandler(Rt.LabelsValueObject.fromObject(t))}catch(e){console.error(e),this.errorHandler()}},e}(),Rt.LabelsLoader=Dt,Nt=De||(De={}),Mt=Nt.model||(Nt.model={}),Pt=Mt._labels||(Mt._labels={}),Ht=function(){function e(){if(r.x4C!=e.instance)throw Error(t.D5C);this.defaults=new Pt.LabelsValueObject,this.defaults.setDefaults()}return e.getInstance=function(){return r.x4C==e.instance&&(e.instance=new e),e.instance},e.dispose=function(){var t=r;Pt.Labels.MONTHS_LABELS=t.x4C,Pt.Labels.MONTHS_LABELS_SHORT=t.x4C,Pt.Labels.WEEKDAYS_LABELS=t.x4C,Pt.Labels.WEEKDAYS_LABELS_SHORT=t.x4C,Pt.Labels.QUARTER_LABELS=t.x4C,e.instance.defaults=t.x4C,e.instance.globals=t.x4C,e.instance.reports=t.x4C,e.instance=t.x4C},e.prototype.getReportLocalization=function(){return this.reports},e.prototype.setReportLocalization=function(e){this.reports!=e&&(this.reports=e,this.updateLabels())},e.prototype.updateLabels=function(){Pt.Labels.FIELDS_LIST_FLAT_HIERARCHY_BOX=this.getLabel("fieldsList/flatHierarchyBox"),Pt.Labels.FIELDS_LIST_HIERARCHY_BOX=this.getLabel("fieldsList/hierarchyBox"),Pt.Labels.FIELDS_LIST_FILTER_BOX=this.getLabel("fieldsList/filterBox"),Pt.Labels.FIELDS_LIST_ROW_BOX=this.getLabel("fieldsList/rowBox"),Pt.Labels.FIELDS_LIST_COLUMN_BOX=this.getLabel("fieldsList/columnBox"),Pt.Labels.FIELDS_LIST_MEASURE_BOX=this.getLabel("fieldsList/measureBox"),Pt.Labels.FIELDS_LIST_VALUES=this.getLabel("fieldsList/values"),Pt.Labels.FIELDS_LIST_ADD_CALCULATED_MEASURE=this.getLabel("fieldsList/addCalculatedMeasure"),Pt.Labels.FIELDS_LIST_EXPAND_ALL=this.getLabel("fieldsList/expandAll"),Pt.Labels.FIELDS_LIST_COLLAPSE_ALL=this.getLabel("fieldsList/collapseAll"),Pt.Labels.FIELDS_LIST_FORMULAS_GROUP_NAME=this.getLabel("fieldsList/formulasGroupName"),Pt.Labels.FIELDS_LIST_ALL_FIELDS=this.getLabel("fieldsList/allFields"),Pt.Labels.FIELDS_LIST_ROWS=this.getLabel("fieldsList/rows"),Pt.Labels.FIELDS_LIST_COLUMNS=this.getLabel("fieldsList/columns"),Pt.Labels.FIELDS_LIST_FILTERS=this.getLabel("fieldsList/filters"),Pt.Labels.FIELDS_LIST_DROP_FIELD=this.getLabel("fieldsList/dropField"),Pt.Labels.FIELDS_LIST_TITLE=this.getLabel("fieldsList/title"),Pt.Labels.FIELDS_LIST_SUBTITLE=this.getLabel("fieldsList/subtitle"),Pt.Labels.FILTER_ALL=this.getLabel("filter/all"),Pt.Labels.FILTER_MULTIPLE_ITEMS=this.getLabel("filter/multipleItems"),Pt.Labels.FILTER_SELECT_ALL=this.getLabel("filter/selectAll"),Pt.Labels.FILTER_SELECT_ALL_RESULTS=this.getLabel("filter/selectAllResults"),Pt.Labels.FILTER_TOP=this.getLabel("filter/top"),Pt.Labels.FILTER_BOTTOM=this.getLabel("filter/bottom"),Pt.Labels.FILTER_ASC_SORT=this.getLabel("filter/ascSort"),Pt.Labels.FILTER_DESC_SORT=this.getLabel("filter/descSort"),Pt.Labels.FILTER_TOP_X=this.getLabel("filter/topX"),Pt.Labels.FILTER_TOP_X_CLEAR=this.getLabel("filter/clearTopX"),Pt.Labels.FILTER_SEARCH=this.getLabel("filter/search"),Pt.Labels.FILTER_AMOUNT_SELECTED=this.getLabel("filter/amountSelected"),Pt.Labels.FILTER_AMOUNT_FOUND=this.getLabel("filter/amountFound"),Pt.Labels.FILTER_SORT=this.getLabel("filter/sort"),Pt.Labels.DRILL_THROUGH_TITLE=this.getLabel("drillThrough/title"),Pt.Labels.DRILL_THROUGH_ROW=this.getLabel("drillThrough/row"),Pt.Labels.DRILL_THROUGH_COLUMN=this.getLabel("drillThrough/column"),Pt.Labels.DRILL_THROUGH_VALUE=this.getLabel("drillThrough/value"),Pt.Labels.CALCULATED_VIEW_TITLE=this.getLabel("calculatedView/title"),Pt.Labels.CALCULATED_VIEW_MEASURE_BOX=this.getLabel("calculatedView/measureBox"),Pt.Labels.CALCULATED_VIEW_MEASURE_NAME=this.getLabel("calculatedView/measureName"),Pt.Labels.CALCULATED_VIEW_FORMULA=this.getLabel("calculatedView/formula"),Pt.Labels.CALCULATED_VIEW_FORMULA_PROMPT=this.getLabel("calculatedView/formulaPrompt"),Pt.Labels.CALCULATED_VIEW_CALCULATE_INDI_VALUES=this.getLabel("calculatedView/calculateIndividualValues"),Pt.Labels.CALCULATED_VIEW_REMOVE_VALUE=this.getLabel("calculatedView/removeValue"),Pt.Labels.CALCULATED_VIEW_REMOVE_VALUE_TITLE=this.getLabel("calculatedView/removeValueTitle"),Pt.Labels.CALCULATED_VIEW_REMOVE_VALUE_MESSAGE=this.getLabel("calculatedView/removeValueMessage"),Pt.Labels.CALCULATED_VIEW_HEADER=this.getLabel("calculatedView/header"),Pt.Labels.CALCULATED_VIEW_ALL_VALUES=this.getLabel("calculatedView/allValues"),Pt.Labels.GRID_TOTAL=this.getLabel("grid/total"),Pt.Labels.GRID_TOTALS=this.getLabel("grid/totals"),Pt.Labels.GRID_GRAND_TOTAL=this.getLabel("grid/grandTotal"),Pt.Labels.MEMBER_BLANK=this.getLabel("grid/blankMember"),Pt.Labels.INVALID_DATE=this.getLabel("grid/dateInvalidCaption"),Pt.Labels.TOOLTIPS_ROW=this.getLabel("tooltips/row"),Pt.Labels.TOOLTIPS_COLUMN=this.getLabel("tooltips/column"),Pt.Labels.TOOLTIPS_HEADER_RESIZE=this.getLabel("tooltips/headerResize"),Pt.Labels.TOOLTIPS_HEADER_FIT=this.getLabel("tooltips/headerFit"),Pt.Labels.TOOLTIPS_FILTER_ICON=this.getLabel("tooltips/filterIcon"),Pt.Labels.TOOLTIPS_FILTERED=this.getLabel("tooltips/filtered"),Pt.Labels.TOOLTIPS_EXPAND_ICON=this.getLabel("tooltips/expandIcon"),Pt.Labels.TOOLTIPS_COLLAPSE_ICON=this.getLabel("tooltips/collapseIcon"),Pt.Labels.TOOLTIPS_DRILL_DOWN=this.getLabel("tooltips/drillDown"),Pt.Labels.TOOLTIPS_DRILL_UP=this.getLabel("tooltips/drillUp"),Pt.Labels.TOOLTIPS_SORT_ICON=this.getLabel("tooltips/sortIcon"),Pt.Labels.TOOLTIPS_SORTED_DESC=this.getLabel("tooltips/sortedDescIcon"),Pt.Labels.TOOLTIPS_SORTED_ASC=this.getLabel("tooltips/sortedAscIcon"),Pt.Labels.TOOLTIPS_CLOSE=this.getLabel("tooltips/close"),Pt.Labels.SUM_CAPTION=this.getLabel("aggregations/sum/caption"),Pt.Labels.SUM_TOTAL_CAPTION=this.getLabel("aggregations/sum/totalCaption"),Pt.Labels.SUM_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/sum/grandTotalCaption"),Pt.Labels.COUNT_CAPTION=this.getLabel("aggregations/count/caption"),Pt.Labels.COUNT_TOTAL_CAPTION=this.getLabel("aggregations/count/totalCaption"),Pt.Labels.COUNT_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/count/grandTotalCaption"),Pt.Labels.DISTINCT_COUNT_CAPTION=this.getLabel("aggregations/distinctCount/caption"),Pt.Labels.DISTINCT_COUNT_TOTAL_CAPTION=this.getLabel("aggregations/distinctCount/totalCaption"),Pt.Labels.DISTINCT_COUNT_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/distinctCount/grandTotalCaption"),Pt.Labels.DIFFERENCE_CAPTION=this.getLabel("aggregations/difference/caption"),Pt.Labels.DIFFERENCE_TOTAL_CAPTION=this.getLabel("aggregations/difference/totalCaption"),Pt.Labels.DIFFERENCE_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/difference/grandTotalCaption"),Pt.Labels.PERCENT_DIFFERENCE_CAPTION=this.getLabel("aggregations/percentDifference/caption"),Pt.Labels.PERCENT_DIFFERENCE_TOTAL_CAPTION=this.getLabel("aggregations/percentDifference/totalCaption"),Pt.Labels.PERCENT_DIFFERENCE_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/percentDifference/grandTotalCaption"),Pt.Labels.AVERAGE_CAPTION=this.getLabel("aggregations/average/caption"),Pt.Labels.AVERAGE_TOTAL_CAPTION=this.getLabel("aggregations/average/totalCaption"),Pt.Labels.AVERAGE_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/average/grandTotalCaption"),Pt.Labels.PRODUCT_CAPTION=this.getLabel("aggregations/product/caption"),Pt.Labels.PRODUCT_TOTAL_CAPTION=this.getLabel("aggregations/product/totalCaption"),Pt.Labels.PRODUCT_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/product/grandTotalCaption"),Pt.Labels.MIN_CAPTION=this.getLabel("aggregations/min/caption"),Pt.Labels.MIN_TOTAL_CAPTION=this.getLabel("aggregations/min/totalCaption"),Pt.Labels.MIN_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/min/grandTotalCaption"),Pt.Labels.MAX_CAPTION=this.getLabel("aggregations/max/caption"),Pt.Labels.MAX_TOTAL_CAPTION=this.getLabel("aggregations/max/totalCaption"),Pt.Labels.MAX_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/max/grandTotalCaption"),Pt.Labels.PERCENT_CAPTION=this.getLabel("aggregations/percent/caption"),Pt.Labels.PERCENT_TOTAL_CAPTION=this.getLabel("aggregations/percent/totalCaption"),Pt.Labels.PERCENT_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/percent/grandTotalCaption"),Pt.Labels.PERCENT_COLUMN_CAPTION=this.getLabel("aggregations/percentOfColumn/caption"),Pt.Labels.PERCENT_COLUMN_TOTAL_CAPTION=this.getLabel("aggregations/percentOfColumn/totalCaption"),Pt.Labels.PERCENT_COLUMN_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/percentOfColumn/grandTotalCaption"),Pt.Labels.PERCENT_ROW_CAPTION=this.getLabel("aggregations/percentOfRow/caption"),Pt.Labels.PERCENT_ROW_TOTAL_CAPTION=this.getLabel("aggregations/percentOfRow/totalCaption"),Pt.Labels.PERCENT_ROW_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/percentOfRow/grandTotalCaption"),Pt.Labels.INDEX_CAPTION=this.getLabel("aggregations/index/caption"),Pt.Labels.INDEX_TOTAL_CAPTION=this.getLabel("aggregations/index/totalCaption"),Pt.Labels.INDEX_GRAND_TOTAL_CAPTION=this.getLabel("aggregations/index/grandTotalCaption"),Pt.Labels.NONE_CAPTION=this.getLabel("aggregations/none/caption"),Pt.Labels.ERROR=this.getLabel("messages/error"),Pt.Labels.WARNING=this.getLabel("messages/warning"),Pt.Labels.LIMITATION=this.getLabel("messages/limitation"),Pt.Labels.BROWSE=this.getLabel("messages/browse"),Pt.Labels.CONFIRMATION=this.getLabel("messages/confirmation"),Pt.Labels.REPORT_FILE_TYPE=this.getLabel("messages/reportFileType"),Pt.Labels.MESSAGE_LOADING=this.getLabel("messages/loading"),Pt.Labels.MESSAGE_LOADING_CONFIGURATION=this.getLabel("messages/loadingConfiguration"),Pt.Labels.MESSAGE_LOADING_DATA=this.getLabel("messages/loadingData"),Pt.Labels.MESSAGE_LOADING_WAITING=this.getLabel("messages/waiting"),Pt.Labels.MESSAGE_LOADING_PROGRESS=this.getLabel("messages/progress"),Pt.Labels.MESSAGE_LOADING_PROGRESS_UNKNOWN=this.getLabel("messages/progressUnknown"),Pt.Labels.MESSAGE_ANALYZING_DATA=this.getLabel("messages/analyzing"),Pt.Labels.MESSAGE_ANALYZING_PROGRESS=this.getLabel("messages/analyzingProgress"),Pt.Labels.MESSAGE_ANALYZING_RECORDS=this.getLabel("messages/analyzingRecords"),Pt.Labels.MESSAGE_SAVING=this.getLabel("messages/saving"),Pt.Labels.MESSAGE_LOADING_DIMENSIONS=this.getLabel("messages/loadingDimensions"),Pt.Labels.MESSAGE_LOADING_HIERARCHIES=this.getLabel("messages/loadingHierarchies"),Pt.Labels.MESSAGE_LOADING_MEASURES=this.getLabel("messages/loadingMeasures"),Pt.Labels.MESSAGE_LOADING_MEMBERS=this.getLabel("messages/loadingMembers"),Pt.Labels.MESSAGE_LOADING_LEVELS=this.getLabel("messages/loadingLevels"),Pt.Labels.MESSAGE_FULLSCREEN=this.getLabel("messages/fullscreen"),Pt.Labels.MESSAGE_EXPORT_COMPLETE=this.getLabel("messages/exportComplete"),Pt.Labels.MESSAGE_EXPORT_PROGRESS=this.getLabel("messages/exportProgress"),Pt.Labels.MESSAGE_EXPORT_ERROR=this.getLabel("messages/exportError"),Pt.Labels.MESSAGE_GENERATING_PDF=this.getLabel("messages/generatingPDF"),Pt.Labels.MESSAGE_PLEASE_WAIT=this.getLabel("messages/pleaseWait"),Pt.Labels.MESSAGE_PAGES_WERE_GENERATED=this.getLabel("messages/pagesWereGenerated"),Pt.Labels.MESSAGE_UPLOADING=this.getLabel("messages/uploading"),Pt.Labels.MESSAGE_CANT_SAVE_FILE=this.getLabel("messages/cantSaveFile"),Pt.Labels.MESSAGE_CANT_WRITE_TO_CLIPBOARD=this.getLabel("messages/cantSaveToClipboard"),Pt.Labels.MESSAGE_SAVE_REPORT_TO_FILE=this.getLabel("messages/saveReportToFile"),Pt.Labels.MESSAGE_LOAD_REPORT_FROM_FILE=this.getLabel("messages/loadReportFromFile"),Pt.Labels.MESSAGE_INPUT_NEW_NAME=this.getLabel("messages/inputNewName"),Pt.Labels.MESSAGE_INPUT_REPORT_NAME=this.getLabel("messages/inputReportName"),Pt.Labels.MESSAGE_INVALID_DATASOURCE=this.getLabel("messages/invalidDataSource"),Pt.Labels.MESSAGE_DATA_STREAM_ERROR=this.getLabel("messages/dataStreamError"),Pt.Labels.MESSAGE_UNABLE_TO_OPEN_FILE=this.getLabel("messages/unableToOpenFile"),Pt.Labels.MESSAGE_DOUBLE_FILE_BROWSING_SESSION=this.getLabel("messages/unableTwoFileBrowsingSessions"),Pt.Labels.MESSAGE_INAPPROPRIATE_FILE_FORMAT=this.getLabel("messages/inappropriateFileFormat"),Pt.Labels.MESSAGE_INVALID_JSON_DATA=this.getLabel("messages/invalidJSONdata"),Pt.Labels.MESSAGE_WRONG_FORMULA_FORMAT=this.getLabel("messages/wrongFormulaFormat"),Pt.Labels.MESSAGE_EXCEL_PDF_EXPORT_LIMITATION=this.getLabel("messages/excelPdfExportLimitation"),Pt.Labels.MESSAGE_EXPORT_LIMITATION=this.getLabel("messages/excelExportLimitation"),Pt.Labels.MESSAGE_NO_DATA_AVAILABLE=this.getLabel("messages/noDataAvailable"),Pt.Labels.MESSAGE_SAVE_DATA_TO_FILE=this.getLabel("messages/saveDataToFile"),Pt.Labels.MESSAGE_DATA_WAS_UPDATED=this.getLabel("messages/dataWasUpdated"),Pt.Labels.MESSAGE_OCSV_INCOMPATIBLE=this.getLabel("messages/ocsvIncompatible"),Pt.Labels.MESSAGE_UNKNOWN_ERROR=this.getLabel("messages/unknownError"),Pt.Labels.MESSAGE_INVALID_REPORT_FORMAT=this.getLabel("messages/invalidReportFormat"),Pt.Labels.MESSAGE_CSV_HEADER_PARSING_ERROR=this.getLabel("messages/csvHeaderParsingError"),Pt.Labels.MESSAGE_TOO_MANY_COLUMNS_IN_CLASSIC_MODE=this.getLabel("messages/tooManyColumnsInClassicMode"),Pt.Labels.MESSAGE_CANT_EXPAND=this.getLabel("messages/cantExpand"),Pt.Labels.MESSAGE_CANT_EXPAND_TITLE=this.getLabel("messages/cantExpandTitle"),Pt.Labels.MESSAGE_NO_GOOGLE_CLIENT_KEY=this.getLabel("messages/noGoogleClientKey"),Pt.Labels.BUTTON_OK=this.getLabel("buttons/ok"),Pt.Labels.BUTTON_APPLY=this.getLabel("buttons/apply"),Pt.Labels.BUTTON_CANCEL=this.getLabel("buttons/cancel"),Pt.Labels.BUTTON_SAVE=this.getLabel("buttons/save"),Pt.Labels.BUTTON_CLEAR=this.getLabel("buttons/clear"),Pt.Labels.BUTTON_SELECT=this.getLabel("buttons/select"),Pt.Labels.BUTTON_YES=this.getLabel("buttons/yes"),Pt.Labels.BUTTON_NO=this.getLabel("buttons/no"),Pt.Labels.CONTEXT_MENU_CLEAR_SORTING=this.getLabel("contextMenu/clearSorting"),Pt.Labels.CONTEXT_MENU_COLLAPSE=this.getLabel("contextMenu/collapse"),Pt.Labels.CONTEXT_MENU_DRILL_THROUGH=this.getLabel("contextMenu/drillThrough"),Pt.Labels.CONTEXT_MENU_EXPAND=this.getLabel("contextMenu/expand"),Pt.Labels.CONTEXT_MENU_OPEN_FILTER=this.getLabel("contextMenu/openFilter"),Pt.Labels.CONTEXT_MENU_SORT_COLUMN_ASC=this.getLabel("contextMenu/sortColumnAsc"),Pt.Labels.CONTEXT_MENU_SORT_COLUMN_DESC=this.getLabel("contextMenu/sortColumnDesc"),Pt.Labels.CONTEXT_MENU_SORT_ROW_ASC=this.getLabel("contextMenu/sortRowAsc"),Pt.Labels.CONTEXT_MENU_SORT_ROW_DESC=this.getLabel("contextMenu/sortRowDesc"),Pt.Labels.YEAR=this.getLabel("date/year"),Pt.Labels.QUARTER=this.getLabel("date/quarter"),Pt.Labels.MONTH=this.getLabel("date/month"),Pt.Labels.DAY=this.getLabel("date/day"),Pt.Labels.QUARTER_LABELS=[this.getLabel("quarters/q1"),this.getLabel("quarters/q2"),this.getLabel("quarters/q3"),this.getLabel("quarters/q4")],Pt.Labels.MONTHS_LABELS=[this.getLabel("months/january"),this.getLabel("months/february"),this.getLabel("months/march"),this.getLabel("months/april"),this.getLabel("months/may"),this.getLabel("months/june"),this.getLabel("months/july"),this.getLabel("months/august"),this.getLabel("months/september"),this.getLabel("months/october"),this.getLabel("months/november"),this.getLabel("months/december")],Pt.Labels.MONTHS_LABELS_SHORT=[this.getLabel("monthsShort/january"),this.getLabel("monthsShort/february"),this.getLabel("monthsShort/march"),this.getLabel("monthsShort/april"),this.getLabel("monthsShort/may"),this.getLabel("monthsShort/june"),this.getLabel("monthsShort/july"),this.getLabel("monthsShort/august"),this.getLabel("monthsShort/september"),this.getLabel("monthsShort/october"),this.getLabel("monthsShort/november"),this.getLabel("monthsShort/december")],Pt.Labels.WEEKDAYS_LABELS=[this.getLabel("weekdays/first"),this.getLabel("weekdays/second"),this.getLabel("weekdays/third"),this.getLabel("weekdays/fourth"),this.getLabel("weekdays/fifth"),this.getLabel("weekdays/sixth"),this.getLabel("weekdays/seventh")],Pt.Labels.WEEKDAYS_LABELS_SHORT=[this.getLabel("weekdaysShort/first"),this.getLabel("weekdaysShort/second"),this.getLabel("weekdaysShort/third"),this.getLabel("weekdaysShort/fourth"),this.getLabel("weekdaysShort/fifth"),this.getLabel("weekdaysShort/sixth"),this.getLabel("weekdaysShort/seventh")],Be.DateFormat.setDayNames(Pt.Labels.WEEKDAYS_LABELS,Pt.Labels.WEEKDAYS_LABELS_SHORT),Be.DateFormat.setMonthNames(Pt.Labels.MONTHS_LABELS,Pt.Labels.MONTHS_LABELS_SHORT)},e.prototype.getLabel=function(e){var t=r;if(!t.O8C==Be.nullOrUndefined(this.reports)){var i=this.reports.getLabel(e);if(!t.O8C==Be.nullOrUndefined(i))return i}return!t.O8C==Be.nullOrUndefined(this.globals)&&(i=this.globals.getLabel(e),!t.O8C==Be.nullOrUndefined(i))?i:this.defaults.getLabel(e)},e.prototype.reset=function(){this.reports=r.x4C,this.updateLabels()},e.prototype.load=function(e,t,i){var o=r,s=this;void o.F8C===i&&(i=!o.O8C);try{o.K2C==typeof e&&!o.O8C==Be.nullOrEmpty(e)?(new Pt.LabelsLoader).load(Be.URLUtils.getUrl(e,!o.F8C),function(e){s.onLoadingComplete(e,i),o.x4C!=t&&t(!o.F8C)},function(){o.x4C!=t&&t(!o.O8C)}):(e instanceof Object?this.onLoadingComplete(Pt.LabelsValueObject.fromObject(e),i):this.reset(),o.x4C!=t&&t(!o.F8C))}catch(e){console.error(e),o.x4C!=t&&t(!o.O8C)}},e.prototype.onLoadingComplete=function(e,t){void r.F8C===t&&(t=!r.O8C),t?this.globals=e:this.reports=e,this.updateLabels()},e.prototype.generateLocalization=function(){var e=new Pt.LabelsValueObject;return e.setDefaults(),e.merge(this.globals),e.toObject()},e.prototype.getCurrentLocalization=function(){var e=new Pt.LabelsValueObject;return e.setDefaults(),e.merge(this.globals),this.reports&&e.merge(this.reports),e},e}(),Pt.LabelsManager=Ht,Ut=De||(De={}),Bt=Ut.model||(Ut.model={}),kt=Bt._labels||(Bt._labels={}),Vt=function(){function e(){var e=r;this.fieldsList={flatHierarchyBox:e.x4C,hierarchyBox:e.x4C,filterBox:e.x4C,rowBox:e.x4C,columnBox:e.x4C,measureBox:e.x4C,values:e.x4C,addCalculatedMeasure:e.x4C,expandAll:e.x4C,collapseAll:e.x4C,formulasGroupName:e.x4C,allFields:e.x4C,rows:e.x4C,columns:e.x4C,filters:e.x4C,dropField:e.x4C,title:e.x4C,subtitle:e.x4C},this.filter={all:e.x4C,multipleItems:e.x4C,selectAll:e.x4C,selectAllResults:e.x4C,top:e.x4C,bottom:e.x4C,ascSort:e.x4C,descSort:e.x4C,topX:e.x4C,clearTopX:e.x4C,measuresPrompt:e.x4C,search:e.x4C,amountSelected:e.x4C,amountFound:e.x4C,sort:e.x4C},this.drillThrough={title:e.x4C,row:e.x4C,column:e.x4C,value:e.x4C},this.calculatedView={title:e.x4C,measureBox:e.x4C,measureName:e.x4C,formula:e.x4C,formulaPrompt:e.x4C,calculateIndividualValues:e.x4C,removeValue:e.x4C,removeValueTitle:e.x4C,removeValueMessage:e.x4C,header:e.x4C,allValues:e.x4C},this.grid={total:e.x4C,totals:e.x4C,grandTotal:e.x4C,blankMember:e.x4C,dateInvalidCaption:e.x4C},this.tooltips={row:e.x4C,column:e.x4C,headerResize:e.x4C,headerFit:e.x4C,filterIcon:e.x4C,filtered:e.x4C,expandIcon:e.x4C,collapseIcon:e.x4C,drillDown:e.x4C,drillUp:e.x4C,sortIcon:e.x4C,sortedDescIcon:e.x4C,sortedAscIcon:e.x4C,close:e.x4C},this.aggregations={sum:{caption:e.x4C,totalCaption:e.x4C,grandTotalCaption:e.x4C},count:{caption:e.x4C,totalCaption:e.x4C,grandTotalCaption:e.x4C},distinctCount:{caption:e.x4C,totalCaption:e.x4C,grandTotalCaption:e.x4C},difference:{caption:e.x4C,totalCaption:e.x4C,grandTotalCaption:e.x4C},percentDifference:{caption:e.x4C,totalCaption:e.x4C,grandTotalCaption:e.x4C},average:{caption:e.x4C,totalCaption:e.x4C,grandTotalCaption:e.x4C},product:{caption:e.x4C,totalCaption:e.x4C,grandTotalCaption:e.x4C},min:{caption:e.x4C,totalCaption:e.x4C,grandTotalCaption:e.x4C},max:{caption:e.x4C,totalCaption:e.x4C,grandTotalCaption:e.x4C},percent:{caption:e.x4C,totalCaption:e.x4C,grandTotalCaption:e.x4C},percentOfColumn:{caption:e.x4C,totalCaption:e.x4C,grandTotalCaption:e.x4C},percentOfRow:{caption:e.x4C,totalCaption:e.x4C,grandTotalCaption:e.x4C},index:{caption:e.x4C,totalCaption:e.x4C,grandTotalCaption:e.x4C},none:{caption:e.x4C}},this.messages={error:e.x4C,warning:e.x4C,limitation:e.x4C,browse:e.x4C,confirmation:e.x4C,reportFileType:e.x4C,loading:e.x4C,loadingConfiguration:e.x4C,loadingData:e.x4C,waiting:e.x4C,progress:e.x4C,progressUnknown:e.x4C,analyzing:e.x4C,analyzingProgress:e.x4C,analyzingRecords:e.x4C,saving:e.x4C,loadingDimensions:e.x4C,loadingHierarchies:e.x4C,loadingMeasures:e.x4C,loadingMembers:e.x4C,loadingLevels:e.x4C,loadingProperties:e.x4C,fullscreen:e.x4C,exportComplete:e.x4C,exportProgress:e.x4C,exportError:e.x4C,generatingPDF:e.x4C,pleaseWait:e.x4C,pagesWereGenerated:e.x4C,uploading:e.x4C,cantSaveFile:e.x4C,cantSaveToClipboard:e.x4C,saveReportToFile:e.x4C,loadReportFromFile:e.x4C,inputNewName:e.x4C,inputReportName:e.x4C,invalidDataSource:e.x4C,dataStreamError:e.x4C,unableToOpenFile:e.x4C,unableTwoFileBrowsingSessions:e.x4C,noGoogleClientKey:e.x4C,inappropriateFileFormat:e.x4C,invalidJSONdata:e.x4C,wrongFormulaFormat:e.x4C,excelPdfExportLimitation:e.x4C,excelExportLimitation:e.x4C,noDataAvailable:e.x4C,saveDataToFile:e.x4C,dataWasUpdated:e.x4C,ocsvIncompatible:e.x4C,unknownError:e.x4C,invalidReportFormat:e.x4C,csvHeaderParsingError:e.x4C,tooManyColumnsInClassicMode:e.x4C,cantExpand:e.x4C,cantExpandTitle:e.x4C},this.buttons={ok:e.x4C,apply:e.x4C,cancel:e.x4C,save:e.x4C,clear:e.x4C,select:e.x4C,yes:e.x4C,no:e.x4C},this.contextMenu={clearSorting:e.x4C,collapse:e.x4C,drillThrough:e.x4C,expand:e.x4C,openFilter:e.x4C,sortColumnAsc:e.x4C,sortColumnDesc:e.x4C,sortRowAsc:e.x4C,sortRowDesc:e.x4C},this.date={year:e.x4C,quarter:e.x4C,month:e.x4C,day:e.x4C},this.quarters={q1:e.x4C,q2:e.x4C,q3:e.x4C,q4:e.x4C},this.months={january:e.x4C,february:e.x4C,march:e.x4C,april:e.x4C,may:e.x4C,june:e.x4C,july:e.x4C,august:e.x4C,september:e.x4C,october:e.x4C,november:e.x4C,december:e.x4C},this.monthsShort={january:e.x4C,february:e.x4C,march:e.x4C,april:e.x4C,may:e.x4C,june:e.x4C,july:e.x4C,august:e.x4C,september:e.x4C,october:e.x4C,november:e.x4C,december:e.x4C},this.weekdays={first:e.x4C,second:e.x4C,third:e.x4C,fourth:e.x4C,fifth:e.x4C,sixth:e.x4C,seventh:e.x4C},this.weekdaysShort={first:e.x4C,second:e.x4C,third:e.x4C,fourth:e.x4C,fifth:e.x4C,sixth:e.x4C,seventh:e.x4C},this.toolbar={connect:e.x4C,connect_local_csv:e.x4C,connect_local_json:e.x4C,connect_remote_csv:e.x4C,connect_remote_csv_mobile:e.x4C,connect_google_drive:e.x4C,open:e.x4C,local_report:e.x4C,remote_report:e.x4C,remote_report_mobile:e.x4C,save:e.x4C,save_json:e.x4C,load_json:e.x4C,grid:e.x4C,grid_flat:e.x4C,grid_classic:e.x4C,grid_compact:e.x4C,format:e.x4C,format_cells:e.x4C,format_cells_mobile:e.x4C,conditional_formatting:e.x4C,conditional_formatting_mobile:e.x4C,options:e.x4C,fullscreen:e.x4C,minimize:e.x4C,export:e.x4C,export_print:e.x4C,export_html:e.x4C,export_csv:e.x4C,export_excel:e.x4C,export_image:e.x4C,export_pdf:e.x4C,fields:e.x4C,ok:e.x4C,apply:e.x4C,done:e.x4C,cancel:e.x4C,value:e.x4C,delete:e.x4C,if:e.x4C,then:e.x4C,open_remote_csv:e.x4C,csv:e.x4C,open_remote_report:e.x4C,choose_value:e.x4C,text_align:e.x4C,align_left:e.x4C,align_right:e.x4C,none:e.x4C,space:e.x4C,thousand_separator:e.x4C,decimal_separator:e.x4C,decimal_places:e.x4C,currency_symbol:e.x4C,currency_align:e.x4C,null_value:e.x4C,is_percent:e.x4C,true_value:e.x4C,false_value:e.x4C,conditional:e.x4C,add_condition:e.x4C,less_than:e.x4C,less_than_or_equal:e.x4C,greater_than:e.x4C,greater_than_or_equal:e.x4C,equal_to:e.x4C,not_equal_to:e.x4C,between:e.x4C,is_empty:e.x4C,all_values:e.x4C,and:e.x4C,and_symbole:e.x4C,cp_text:e.x4C,cp_highlight:e.x4C,layout_options:e.x4C,layout:e.x4C,compact_view:e.x4C,classic_view:e.x4C,flat_view:e.x4C,grand_totals:e.x4C,grand_totals_off:e.x4C,grand_totals_on:e.x4C,grand_totals_on_rows:e.x4C,grand_totals_on_columns:e.x4C,subtotals:e.x4C,subtotals_off:e.x4C,subtotals_on:e.x4C,subtotals_on_rows:e.x4C,subtotals_on_columns:e.x4C,choose_page_orientation:e.x4C,landscape:e.x4C,portrait:e.x4C,message_error:e.x4C,message_no_google_client_id:e.x4C}}return e.prototype.setDefaults=function(){var e=t,i="Conditional",o="% Difference of {0}",s="Difference of {0}",n="Index of {0}",a="Click to sort Desc",l="All values",h="Choose value",c="Add calculated value";this.fieldsList.flatHierarchyBox="Select and arrange columns",this.fieldsList.hierarchyBox="Drag Dimensions",this.fieldsList.filterBox="Drop & Arrange Report Filter",this.fieldsList.rowBox="Drop & Arrange Rows",this.fieldsList.columnBox="Drop & Arrange Columns",this.fieldsList.measureBox="Drop & Arrange Values",this.fieldsList.values="Values",this.fieldsList.allFields="All Fields",this.fieldsList.rows="Rows",this.fieldsList.columns="Columns",this.fieldsList.filters="Report Filters",this.fieldsList.dropField="Drop field here",this.fieldsList.addCalculatedMeasure=c,this.fieldsList.expandAll="Expand All",this.fieldsList.collapseAll="Collapse All",this.fieldsList.formulasGroupName="Calculated Values",this.fieldsList.title="Fields",this.fieldsList.subtitle="Drag and drop fields to arrange",this.filter.ascSort="Az",this.filter.descSort="zA",this.filter.topX="Top 10",this.filter.clearTopX="Clear",this.filter.top="Top",this.filter.bottom="Bottom",this.filter.measuresPrompt=h,this.filter.search="Search",this.filter.selectAll="Select All",this.filter.selectAllResults="Select All Results",this.filter.amountSelected="{0} of {1} selected",this.filter.amountFound="{0} of {1} found are selected",this.filter.multipleItems="Multiple Items",this.filter.all=e.g6Q,this.filter.sort="Sort:",this.drillThrough.title="Details",this.drillThrough.row="Row: <b>{0}</b>",this.drillThrough.column="Column: <b>{0}</b>",this.drillThrough.value="{0}: <b>{1}</b>",this.calculatedView.title="Calculated Value",this.calculatedView.measureBox="Drag values to formula",this.calculatedView.measureName="Value name",this.calculatedView.formula="Formula",this.calculatedView.formulaPrompt="Drop values and edit formula here",this.calculatedView.calculateIndividualValues="Calculate individual values",this.calculatedView.removeValue="Remove",this.calculatedView.removeValueTitle="Remove {0}?",this.calculatedView.removeValueMessage="Are you sure you want to remove this calculated value?",this.calculatedView.header=c,this.calculatedView.allValues=l,this.grid.total="Total",this.grid.totals="Totals",this.grid.grandTotal="Grand Total",this.grid.blankMember="(blank)",this.grid.dateInvalidCaption="Invalid date",this.tooltips.row="Row:",this.tooltips.column="Column:",this.tooltips.headerResize="Drag to resize",this.tooltips.headerFit="Double click to fit",this.tooltips.filterIcon="Click to filter",this.tooltips.filtered="Filtered",this.tooltips.expandIcon="Click to expand",this.tooltips.collapseIcon="Click to collapse",this.tooltips.drillDown="Click to drill down",this.tooltips.drillUp="Click to drill up",this.tooltips.sortIcon=a,this.tooltips.sortedDescIcon="Click to sort Asc",this.tooltips.sortedAscIcon=a,this.tooltips.close="Click to close",this.aggregations.sum.caption="Sum",this.aggregations.sum.totalCaption="Sum of {0}",this.aggregations.sum.grandTotalCaption="Total Sum of {0}",this.aggregations.count.caption="Count",this.aggregations.count.totalCaption="Count of {0}",this.aggregations.count.grandTotalCaption="Total Count of {0}",this.aggregations.distinctCount.caption="Distinct Count",this.aggregations.distinctCount.totalCaption="Distinct Count of {0}",this.aggregations.distinctCount.grandTotalCaption="Total Distinct Count of {0}",this.aggregations.average.caption="Average",this.aggregations.average.totalCaption="Average of {0}",this.aggregations.average.grandTotalCaption="Total Average of {0}",this.aggregations.product.caption="Product",this.aggregations.product.totalCaption="Product of {0}",this.aggregations.product.grandTotalCaption="Total Product of {0}",this.aggregations.min.caption="Min",this.aggregations.min.totalCaption="Min of {0}",this.aggregations.min.grandTotalCaption="Total Min of {0}",this.aggregations.max.caption="Max",this.aggregations.max.totalCaption="Max of {0}",this.aggregations.max.grandTotalCaption="Total Max of {0}",this.aggregations.percent.caption="% of Grand Total",this.aggregations.percent.totalCaption="% of Grand Total of {0}",this.aggregations.percent.grandTotalCaption="Total % of Grand Total of {0}",this.aggregations.percentOfColumn.caption="% of Column",this.aggregations.percentOfColumn.totalCaption="% of Column of {0}",this.aggregations.percentOfColumn.grandTotalCaption="Total % of Column of {0}",this.aggregations.percentOfRow.caption="% of Row",this.aggregations.percentOfRow.totalCaption="% of Row of {0}",this.aggregations.percentOfRow.grandTotalCaption="Total % of Row of {0}",this.aggregations.index.caption="Index",this.aggregations.index.totalCaption=n,this.aggregations.index.grandTotalCaption=n,this.aggregations.difference.caption="Difference",this.aggregations.difference.totalCaption=s,this.aggregations.difference.grandTotalCaption=s,this.aggregations.percentDifference.caption="% Difference",this.aggregations.percentDifference.totalCaption=o,this.aggregations.percentDifference.grandTotalCaption=o,this.aggregations.none.caption="No Calculation",this.messages.error="Error!",this.messages.warning="Warning!",this.messages.limitation=e.S5Q,this.messages.browse="Browse",this.messages.confirmation="Confirmation",this.messages.reportFileType="WebDataRocks report file",this.messages.loading="Loading...",this.messages.loadingConfiguration=r.C4C,this.messages.loadingData="Loading data...",this.messages.uploading="Uploading...",this.messages.waiting="Waiting for the response {0} sec.",this.messages.progress="{0}K",this.messages.progressUnknown="loaded {0}K",this.messages.analyzing="Analyzing data...",this.messages.analyzingProgress="{0} records of {1} ({2}%)",this.messages.analyzingRecords="{0} records",this.messages.saving="Saving...",this.messages.loadingDimensions="Loading dimensions...",this.messages.loadingHierarchies="Loading hierarchies...",this.messages.loadingMeasures="Loading measures...",this.messages.loadingMembers="Loading members...",this.messages.loadingLevels="Loading levels...",this.messages.fullscreen="Open report in full screen?",this.messages.exportComplete='Export data is created, please click "Save" button to save the _data.',this.messages.generatingPDF="Generating PDF",this.messages.pleaseWait="Please wait.",this.messages.pagesWereGenerated="pages were generated.",this.messages.exportProgress="Export in progress...",this.messages.exportError="Failed to export. An unexpected error occurred.",this.messages.cantSaveFile="Cannot save file.",this.messages.cantSaveToClipboard="Error: Cannot write to the clipboard.",this.messages.saveReportToFile='Report is ready to be saved to file, please click "Save" button to save the report.',this.messages.saveDataToFile='Data is ready to be saved to file, please click "Save" button to save the file.',this.messages.loadReportFromFile="Select report file to be loaded.",this.messages.inputNewName="Input new name",this.messages.inputReportName="Please input report name",this.messages.dataStreamError="Stream error occurred while loading '{0}'",this.messages.unableToOpenFile="Unable to open file {0}.<br/><br/>It seems that this file doesn't exist or 'Access-Control-Allow-Origin' header is absent in the resource requested.",this.messages.unableTwoFileBrowsingSessions="Browse file dialog is already opened.",this.messages.noGoogleClientKey="Please enter Google Client Key in index.html file.",this.messages.wrongFormulaFormat="Wrong formula format. Please check.",this.messages.inappropriateFileFormat="The data file is of inappropriate format.",this.messages.invalidJSONdata="JSON data is invalid.",this.messages.excelPdfExportLimitation="Export to Microsoft Excel or PDF is not available in the current edition.",this.messages.excelExportLimitation="Export is not available in the current edition.",this.messages.noDataAvailable="Data source is empty. Please check the CSV file.",this.messages.csvHeaderParsingError="CSV header parsing error.",this.messages.dataWasUpdated="Data source has been updated on the server. Refresh the report?",this.messages.ocsvIncompatible="Unable to read data source. It seems that OCSV file was compressed with a newer version. Please update the component to version {0} or newer.",this.messages.unknownError="Unknown error occurred.",this.messages.invalidReportFormat="Invalid report format or access to file is denied.",this.messages.tooManyColumnsInClassicMode="Too many columns for classic form. Switched layout to compact form.",this.messages.cantExpand="Some fields cannot be expanded. Please narrow down the data set.",this.messages.cantExpandTitle="Data set is too large",this.buttons.ok="OK",this.buttons.apply="Apply",this.buttons.cancel="Cancel",this.buttons.save="Save",this.buttons.clear="Clear",this.buttons.select="Select",this.buttons.yes="Yes",this.buttons.no="No",this.contextMenu.drillThrough="Drill through",this.contextMenu.openFilter="Open filter",this.contextMenu.collapse="Collapse",this.contextMenu.expand="Expand",this.contextMenu.sortRowDesc="Sort row desc",this.contextMenu.sortRowAsc="Sort row asc",this.contextMenu.clearSorting="Clear sorting",this.contextMenu.sortColumnDesc="Sort column desc",this.contextMenu.sortColumnAsc="Sort column asc",this.date.year=e.X9B,this.date.quarter="Quarter",this.date.month=e.U7C,this.date.day=e.P5C,this.quarters.q1="Quarter 1",this.quarters.q2="Quarter 2",this.quarters.q3="Quarter 3",this.quarters.q4="Quarter 4",this.months.january="January",this.months.february="February",this.months.march="March",this.months.april="April",this.months.may="May",this.months.june="June",this.months.july="July",this.months.august="August",this.months.september="September",this.months.october="October",this.months.november="November",this.months.december="December",this.monthsShort.january="Jan",this.monthsShort.february="Feb",this.monthsShort.march="Mar",this.monthsShort.april="Apr",this.monthsShort.may="May",this.monthsShort.june="Jun",this.monthsShort.july="Jul",this.monthsShort.august="Aug",this.monthsShort.september="Sep",this.monthsShort.october="Oct",this.monthsShort.november="Nov",this.monthsShort.december="Dec",this.weekdays.first="Sunday",this.weekdays.second="Monday",this.weekdays.third="Tuesday",this.weekdays.fourth="Wednesday",this.weekdays.fifth="Thursday",this.weekdays.sixth="Friday",this.weekdays.seventh="Saturday",this.weekdaysShort.first="Sun",this.weekdaysShort.second="Mon",this.weekdaysShort.third="Tue",this.weekdaysShort.fourth="Wed",this.weekdaysShort.fifth="Thu",this.weekdaysShort.sixth="Fri",this.weekdaysShort.seventh="Sat",this.toolbar.connect="Connect",this.toolbar.connect_local_csv="To local CSV",this.toolbar.connect_local_json="To local JSON",this.toolbar.connect_google_drive="To Google Drive",this.toolbar.connect_remote_csv="To remote CSV",this.toolbar.connect_remote_csv_mobile="CSV",this.toolbar.open="Open",this.toolbar.local_report="Local report",this.toolbar.remote_report="Remote report",this.toolbar.remote_report_mobile="Report",this.toolbar.save="Save",this.toolbar.load_json="JSON report",this.toolbar.grid="Grid",this.toolbar.grid_flat="Flat",this.toolbar.grid_classic="Classic",this.toolbar.grid_compact="Compact",this.toolbar.format="Format",this.toolbar.format_cells="Format cells",this.toolbar.format_cells_mobile="Format",this.toolbar.conditional_formatting="Conditional formatting",this.toolbar.conditional_formatting_mobile=i,this.toolbar.options="Options",this.toolbar.fullscreen="Fullscreen",this.toolbar.minimize="Minimize",this.toolbar[e.M1B]="Export",this.toolbar.export_print="Print",this.toolbar.export_html="To HTML",this.toolbar.export_csv="To CSV",this.toolbar.export_excel="To Excel",this.toolbar.export_image="To Image",this.toolbar.export_pdf="To PDF",this.toolbar.fields="Fields",this.toolbar.ok="OK",this.toolbar.apply="Apply",this.toolbar.done="Done",this.toolbar.cancel="Cancel",this.toolbar.value="Value",this.toolbar[e.e1B]="Delete",this.toolbar[e.R1B]="If",this.toolbar.then="Then",this.toolbar.open_remote_csv="Open remote CSV",this.toolbar.csv="CSV",this.toolbar.credentials="credentials",this.toolbar.username="Username",this.toolbar.password="Password",this.toolbar.open_remote_report="Open remote report",this.toolbar.choose_value=h,this.toolbar.text_align="Text align",this.toolbar.align_left=r.M2C,this.toolbar.align_right=r.j2C,this.toolbar.none="None",this.toolbar.space="(Space)",this.toolbar.thousand_separator="Thousand separator",this.toolbar.decimal_separator="Decimal separator",this.toolbar.decimal_places="Decimal places",this.toolbar.currency_symbol="Currency symbol",this.toolbar.currency_align="Currency align",this.toolbar.null_value="Null value",this.toolbar.is_percent="Format as percent",this.toolbar.true_value=e.j7C,this.toolbar.false_value=e.C1B,this.toolbar.conditional=i,this.toolbar.add_condition="Add condition",this.toolbar.less_than="Less than",this.toolbar.less_than_or_equal="Less than or equal to",this.toolbar.greater_than="Greater than",this.toolbar.greater_than_or_equal="Greater than or equal to",this.toolbar.equal_to="Equal to",this.toolbar.not_equal_to="Not equal to",this.toolbar.between="Between",this.toolbar.is_empty="Empty",this.toolbar.all_values=l,this.toolbar.and=e.B8B,this.toolbar.and_symbole=e.R6C,this.toolbar.cp_text="Text",this.toolbar.cp_highlight="Highlight",this.toolbar.layout_options="Layout options",this.toolbar.layout="Layout",this.toolbar.compact_view="Compact form",this.toolbar.classic_view="Classic form",this.toolbar.flat_view="Flat form",this.toolbar.grand_totals="Grand totals",this.toolbar.grand_totals_off="Do not show grand totals",this.toolbar.grand_totals_on="Show grand totals",this.toolbar.grand_totals_on_rows="Show for rows only",this.toolbar.grand_totals_on_columns="Show for columns only",this.toolbar.subtotals="Subtotals",this.toolbar.subtotals_off="Do not show subtotals",this.toolbar.subtotals_on="Show subtotals",this.toolbar.subtotals_on_rows="Show subtotal rows only",this.toolbar.subtotals_on_columns="Show subtotal columns only",this.toolbar.choose_page_orientation="Choose page orientation",this.toolbar.landscape="Landscape",this.toolbar.portrait="Portrait",this.toolbar.message_error=this.messages.error,this.toolbar.message_no_google_client_id=this.messages.noGoogleClientKey},e.prototype.getLabel=function(e){var i=r;return e=e.split(t.l5C),i.O8C==e.length?this[e[i.F8C]]:i.M8C!=e.length||Be.nullOrUndefined(this[e[i.F8C]])||Be.nullOrUndefined(this[e[i.F8C]][e[i.O8C]])?i.b8C!=e.length||Be.nullOrUndefined(this[e[i.F8C]])||Be.nullOrUndefined(this[e[i.F8C]][e[i.O8C]])||Be.nullOrUndefined(this[e[i.F8C]][e[i.O8C]][e[i.M8C]])?i.x4C:this[e[i.F8C]][e[i.O8C]][e[i.M8C]]:this[e[i.F8C]][e[i.O8C]]},e.prototype.merge=function(t){e.nodeFromObject(t,this)},e.prototype.toObject=function(){var e,t={};for(e in this)this[e]instanceof Function||Be.nullOrUndefined(this[e])||(t[e]=this[e]);return JSON.stringify(t,r.x4C,r.M8C)},e.fromObject=function(t){var i=new e;return e.nodeFromObject(t,i),i},e.nodeFromObject=function(t,i){if(!Be.nullOrUndefined(t)&&!Be.nullOrUndefined(i)&&t instanceof Object)for(var o in t){var s=t[o];Be.nullOrUndefined(s)||(r.K2C==typeof s?i[o]=s:s instanceof Object&&e.nodeFromObject(s,i[o]))}},e}(),kt.LabelsValueObject=Vt,zt=De||(De={}),function(e){var t=function(){function e(){}return e.REPORT_FILE_LOADED="load",e.REPORT_FILE_FAILED="fail",e.REPORT_FILE_CANCELLED="cancel",e}();e.ReportEvent=t;var i=function(e){function i(i){var r=e.call(this,t.REPORT_FILE_LOADED)||this;return r.report=i,r}return Ga(i,e),i}(s._Event);e.ReportFileLoadedEvent=i,i=function(e){function i(i){var r=e.call(this,t.REPORT_FILE_FAILED)||this;return r.message=i,r}return Ga(i,e),i}(s._Event),e.ReportFileFailedEvent=i}((qt=zt.model||(zt.model={})).report||(qt.report={})),Gt=De||(De={}),Wt=Gt.model||(Gt.model={}),jt=Wt.report||(Wt.report={}),Yt=function(e){function i(){var i=e.call(this)||this;return i.defaultFilename=t.R8B,i}return Ga(i,e),i.prototype.open=function(){var e=this;this.localReportLoader=new jt.LocalReportLoader,this.localReportLoader.addEventListener(jt.ReportEvent.REPORT_FILE_LOADED,function(t){return e.onReportFileLoaded(t)}),this.localReportLoader.addEventListener(jt.ReportEvent.REPORT_FILE_FAILED,function(t){return e.onReportFileFailed(t)}),this.localReportLoader.addEventListener(jt.ReportEvent.REPORT_FILE_CANCELLED,function(){return e.onReportFileCancelled()}),this.localReportLoader.load()},i.prototype.load=function(e){var t=this;Gt.preloader(!r.F8C,Wt._labels.Labels.MESSAGE_LOADING),this.urlReportLoader=new jt.UrlReportLoader,this.urlReportLoader.addEventListener(jt.ReportEvent.REPORT_FILE_LOADED,function(e){return t.onReportFileLoaded(e)}),this.urlReportLoader.addEventListener(jt.ReportEvent.REPORT_FILE_FAILED,function(e){return t.onReportFileFailed(e)}),this.urlReportLoader.load(Be.URLUtils.addTimestamp(e))},i.prototype.cancel=function(){this.localReportLoader&&(this.localReportLoader.removeAllEventListeners(jt.ReportEvent.REPORT_FILE_LOADED),this.localReportLoader.removeAllEventListeners(jt.ReportEvent.REPORT_FILE_FAILED),this.localReportLoader=r.x4C),this.urlReportLoader&&(this.urlReportLoader.removeAllEventListeners(jt.ReportEvent.REPORT_FILE_LOADED),this.urlReportLoader.removeAllEventListeners(jt.ReportEvent.REPORT_FILE_FAILED),this.urlReportLoader=r.x4C),this.removeAllEventListeners(jt.ReportEvent.REPORT_FILE_LOADED),this.removeAllEventListeners(jt.ReportEvent.REPORT_FILE_FAILED)},i.prototype.onReportFileLoaded=function(e){this.dispatch(new jt.ReportFileLoadedEvent(e.report))},i.prototype.onReportFileFailed=function(e){Gt.uialert(e.message,Wt._labels.Labels.ERROR,Gt.AlertType.ERROR),this.dispatchWith(jt.ReportEvent.REPORT_FILE_FAILED)},i.prototype.onReportFileCancelled=function(){this.dispatchWith(jt.ReportEvent.REPORT_FILE_CANCELLED)},i.prototype.save=function(e,i,o,s,n,a){var l=r,h=this;void l.F8C===i&&(i=l.x4C),void l.F8C===n&&(n=!l.O8C),this.saveCallbackHandler=o,o=!l.O8C;var c=l.K2C==typeof e?e:l.x4C,d=s;switch(s=n,e instanceof Object&&(e.hasOwnProperty(t.A8B)&&(c=e.filename),e.hasOwnProperty("destination")&&(i=e.destination),e.hasOwnProperty(t.k8B)&&(d=e.url),e.hasOwnProperty("embedData")&&(s=e.embedData)),l.x4C!=c&&l.C4C!=c||(c=this.defaultFilename),a.connectionInfo.dataSourceType==Gt.data_.consts.DataSourceType.CSV&&a.options.gridType!=Gt._view.grid.GridType.FLAT&&(a.connectionInfo instanceof Gt.data_.vo.FileConnectionInfo&&a.connectionInfo.browseForFile||a.connectionInfo.embedded||s)&&((e=new Gt.data_.vo.CSVConnectionInfo).embedded=!l.F8C,a.connectionInfo=e,o=!l.F8C),i=l.x4C==i?jt.DestinationType.FILE:i.toLowerCase()){case jt.DestinationType.SERVER:o?(new Gt.data_.csv.CSVSaver).getData(function(e){return h.saveToServer(d,c,a,e)}):this.saveToServer(d,c,a);break;case jt.DestinationType.FILE:o?(new Gt.data_.csv.CSVSaver).getData(function(e){return h.saveToFile(c,a,e)}):this.saveToFile(c,a);break;default:o?(new Gt.data_.csv.CSVSaver).getData(function(e){return h.saveToFile(c,a,e)}):this.saveToFile(c,a)}return l.x4C},i.prototype.dispatchReportSaved=function(e){if(r.x4C!=this.saveCallbackHandler)try{this.saveCallbackHandler(e)}catch(e){this.saveCallbackHandler("Error! "+e)}},i.prototype.defineReportType=function(e){return JSON.stringify(e.toObject(),r.x4C,r.j8C)},i.prototype.saveToFile=function(e,i,o){void r.F8C===o&&(o=r.x4C);var s=[this.defineReportType(i)];r.x4C!=o&&(s.push(t.m6C),s.push(o));try{var n=this;Gt.uialert(Wt._labels.Labels.MESSAGE_SAVE_REPORT_TO_FILE,Wt._labels.Labels.CONFIRMATION,Gt.AlertType.CONFIRMATION,[Wt._labels.Labels.BUTTON_SAVE,Wt._labels.Labels.BUTTON_CANCEL],[function(){var t=new Blob(s,{type:"text/js;charset=utf-8"});savingAs(t,e),n.dispatchReportSaved(!r.F8C)},function(){n.dispatchReportSaved(!r.O8C)}])}catch(e){Gt.uialert(Wt._labels.Labels.MESSAGE_CANT_SAVE_FILE,Wt._labels.Labels.ERROR,Gt.AlertType.ERROR),this.dispatchReportSaved(!r.O8C)}},i.prototype.saveToServer=function(e,i,o,n){var a=r,l=this;void a.F8C===n&&(n=a.x4C),Be.nullOrEmpty(e)&&Gt.uialert("Report cannot be saved. Save report url is empty.",Wt._labels.Labels.WARNING,Gt.AlertType.ERROR);var h=new Ne.URLVariables;h.data.name=i,h.data.report=a.x4C==n?this.defineReportType(o):this.defineReportType(o)+t.m6C+n,h.data.type=t.n6C;var c=new Ne.URLStream;return c.data=h.toString(),c.contentType=Ne.ContentType.APPLICATION_URLENCODED,c.requestMethod=Ne.URLRequestMethod.POST,c.addEventListener(s._Event.COMPLETE,function(){return l.onSaveComplete(c)}),c.addEventListener(s._Event.ERROR,function(){return l.onError(c)}),c.load(e),Gt.preloader(!a.F8C,Wt._labels.Labels.MESSAGE_UPLOADING),a.x4C},i.prototype.onSaveComplete=function(e){Gt.preloader(!r.O8C),this.dispatchReportSaved(e.response)},i.prototype.onError=function(e){Gt.preloader(!r.O8C),this.dispatchReportSaved(!r.O8C),e=Wt.XSSCheck.valid(e.url)?e.url:Wt.XSSCheck.validate(e.url),Gt.uialert(Wt._labels.Labels.MESSAGE_CANT_SAVE_FILE+Be.StringUtils.bind(' (<a href="{0}">{0}</a>)',e),Wt._labels.Labels.ERROR,Gt.AlertType.ERROR)},i}(s.EventDispatcher),jt.ReportManager=Yt,Xt=De||(De={}),Kt=Xt.model||(Xt.model={}),Qt=Kt.report||(Kt.report={}),Jt=function(){function e(){this.withDefaults=!r.O8C,this.connectionInfo=new Xt.data_.vo.ConnectionInfo,this.slice=new Qt.SliceValueObject,this.options=new Kt._options.vo.OptionsValueObject,this.formats=[],this.conditions=[],this.columnSizes={},this.rowSizes={},this.columnHeaderSizes=[],this.rowHeaderSizes=[],this.rowFilterSizes=[],this.columnSizesByIdx={},this.rowSizesByIdx={},this.customFields=[],this.labels={},this.localization=r.x4C}return e.fromObject=function(t){var i=r;if(i.x4C==t)return i.x4C;t instanceof e||(t=e.toPlainObject(t));var o=new e;return o.connectionInfo=Xt.data_.vo.ConnectionInfo.fromObject(i.x4C!=t.connectionInfo?t.connectionInfo:t),o.options=Kt._options.vo.OptionsValueObject.fromObject(i.x4C!=t.options?t.options:t),o.slice=Qt.SliceValueObject.fromObject(i.x4C!=t.slice?t.slice:t,o.connectionInfo,o.options.gridType==Xt._view.grid.GridType.FLAT),i.x4C!=t.formats&&t.formats.length&&(o.formats=t.formats),i.x4C!=t.conditions&&t.conditions.length&&(o.conditions=t.conditions),i.x4C!=t.columnSizes&&i.K2C!=typeof t.columnSizes&&(o.columnSizes=t.columnSizes),i.x4C!=t.rowSizes&&i.K2C!=typeof t.rowSizes&&(o.rowSizes=t.rowSizes),i.x4C!=t.columnHeaderSizes&&i.K2C!=typeof t.columnHeaderSizes&&(o.columnHeaderSizes=t.columnHeaderSizes),i.x4C!=t.rowHeaderSizes&&i.K2C!=typeof t.rowHeaderSizes&&(o.rowHeaderSizes=t.rowHeaderSizes),i.x4C!=t.rowFilterSizes&&i.K2C!=typeof t.rowFilterSizes&&(o.rowFilterSizes=t.rowFilterSizes),i.x4C!=t.columnSizesByIdx&&(o.columnSizesByIdx=t.columnSizesByIdx),i.x4C!=t.rowSizesByIdx&&(o.rowSizesByIdx=t.rowSizesByIdx),i.x4C!=t.customFields&&(o.customFields=t.customFields),i.x4C!=t.localization&&(o.localization=t.localization),o},e.prototype.toObject=function(){var e=r,t={},i=this.connectionInfo.toObject(this.withDefaults);if(Be.ObjectUtils.isEmptyObject(i)||(t.dataSource=i),i=this.slice.toObject(this.withDefaults),Be.ObjectUtils.isEmptyObject(i)||(t.slice=i),i=this.options.toObject(),Be.ObjectUtils.isEmptyObject(i)||(t.options=i),i=this.composeConditionsObject(),e.F8C<i.length&&(t.conditions=i),e.x4C!=this.formats&&e.F8C!=this.formats.length){i=[];for(var o=!this.options.saveAllFormats&&e.g8C<this.formats.length,s=e.F8C;s<this.formats.length;s++){var n=this.formats[s];e.C4C!=n.name&&(e.x4C==this.slice.formatsInUse[n.name]||o&&!this.slice.formatsInUse[n.name])||i.push(n)}t.formats=i}return i=this.composeTableSizesObject(),Be.ObjectUtils.isEmptyObject(i)||(t.tableSizes=i),e.x4C!=this.customFields&&e.F8C!=this.customFields.length&&(t.customFields=this.customFields),e.x4C!=this.localization&&e.C4C!=this.localization&&(t.localization=this.localization),t},e.prototype.composeConditionsObject=function(){for(var e=r,t=[],i=e.F8C;i<this.conditions.length;i++){var o=this.conditions[i],s={};s.formula=o.formula,-e.O8C<o.row&&(s.row=o.row),-e.O8C<o.column&&(s.column=o.column),-e.O8C<o.isTotal&&(s.isTotal=e.O8C==o.isTotal?!e.F8C:!e.O8C),o.measure&&e.F8C<o.measure.length&&(s.measure=o.measure),o.hierarchy&&e.F8C<o.hierarchy.length&&(s.hierarchy=o.hierarchy),o.member&&e.F8C<o.member.length&&(s.member=o.member),o.format&&!Be.ObjectUtils.isEmptyObject(o.format)&&(s.format=o.format),t.push(s)}return t},e.prototype.composeTableSizesObject=function(){var e,i,o,s,n=r,a={};if(n.x4C!=this.columnHeaderSizes&&!Be.ObjectUtils.isEmptyObject(this.columnHeaderSizes)||n.x4C!=this.columnSizes&&!Be.ObjectUtils.isEmptyObject(this.columnSizes)){if(a.columns=[],n.x4C!=this.columnHeaderSizes&&!Be.ObjectUtils.isEmptyObject(this.columnHeaderSizes))for(i=n.F8C;i<this.columnHeaderSizes.length;i++)n.x4C!=this.columnHeaderSizes[i]&&a.columns.push({idx:i,width:this.columnHeaderSizes[i]});if(i=Qt.SliceValueObject.findMeasure(this.slice.columns),n.x4C!=this.columnSizes&&!Be.ObjectUtils.isEmptyObject(this.columnSizes))for(e in this.columnSizes)o=e.split(t.k6C),n.F8C<=i?(s=o.pop(),a.columns.push({tuple:o,measure:s,width:this.columnSizes[e]})):a.columns.push({tuple:o,width:this.columnSizes[e]})}if(n.x4C!=this.rowFilterSizes&&!Be.ObjectUtils.isEmptyObject(this.rowFilterSizes)||n.x4C!=this.rowHeaderSizes&&!Be.ObjectUtils.isEmptyObject(this.rowHeaderSizes)||n.x4C!=this.rowSizes&&!Be.ObjectUtils.isEmptyObject(this.rowSizes)){if(a.rows=[],n.x4C!=this.rowFilterSizes&&!Be.ObjectUtils.isEmptyObject(this.rowFilterSizes))for(i=n.F8C;i<this.rowFilterSizes.length;i++)n.x4C!=this.rowFilterSizes[i]&&a.rows.push({idx:i,height:this.rowFilterSizes[i]});if(n.x4C!=this.rowHeaderSizes&&!Be.ObjectUtils.isEmptyObject(this.rowHeaderSizes))for(i=n.F8C;i<this.rowHeaderSizes.length;i++)n.x4C!=this.rowHeaderSizes[i]&&a.rows.push({idx:i,height:this.rowHeaderSizes[i]});if(i=Qt.SliceValueObject.findMeasure(this.slice.rows),n.x4C!=this.rowSizes&&!Be.ObjectUtils.isEmptyObject(this.rowSizes))for(e in this.rowSizes)o=e.split(t.k6C),n.F8C<=i?(s=o.pop(),a.rows.push({tuple:o,measure:s,height:this.rowSizes[e]})):a.rows.push({tuple:o,height:this.rowSizes[e]})}return a},e.toPlainObject=function(e){var i=r,o={};if(void i.F8C==e)return o;if(i.x4C!=e.columnSizes&&(o.columnSizes=e.columnSizes),i.x4C!=e.rowSizes&&(o.rowSizes=e.rowSizes),i.x4C!=e.columnHeaderSizes&&(o.columnHeaderSizes=e.columnHeaderSizes),i.x4C!=e.rowHeaderSizes&&(o.rowHeaderSizes=e.rowHeaderSizes),i.x4C!=e.rowFilterSizes&&(o.rowFilterSizes=e.rowFilterSizes),i.x4C!=e.rowSizesByIdx&&(o.rowSizesByIdx=e.rowSizesByIdx),i.x4C!=e.columnSizesByIdx&&(o.columnSizesByIdx=e.columnSizesByIdx),i.x4C!=e.customFields&&(o.customFields=e.customFields),i.x4C!=e.labels&&(o.labels=e.labels),o.connectionInfo=i.x4C!=e.connectionInfo?Xt.data_.vo.ConnectionInfo.toPlainObject(e.connectionInfo):Xt.data_.vo.ConnectionInfo.toPlainObject(e),o.slice=i.x4C!=e.slice?Qt.SliceValueObject.toPlainObject(e.slice):Qt.SliceValueObject.toPlainObject(e),o.options=i.x4C!=e.options?Kt._options.vo.OptionsValueObject.toPlainObject(e.options):Kt._options.vo.OptionsValueObject.toPlainObject(e),i.x4C!=e.formats&&i.F8C<e.formats.length&&(o.formats=e.formats),i.x4C!=e.conditions&&i.F8C<e.conditions.length&&(o.conditions=e.conditions),i.x4C!=e.tableSizes){var s,n;if(i.x4C!=e.tableSizes.columns){var a=e.tableSizes.columns;for(s=i.F8C;s<a.length;s++)i.x4C!=a[s].idx&&(i.x4C==o.columnSizesByIdx&&(o.columnSizesByIdx={}),o.columnSizesByIdx[parseInt(a[s].idx)]=parseInt(a[s].width)),(i.x4C!=a[s].tuple||i.x4C!=a[s].measure)&&(i.x4C==o.columnSizes&&(o.columnSizes={}),n=i.x4C==a[s].tuple?[]:a[s].tuple.slice(),i.x4C!=a[s].measure&&n.push(a[s].measure),o.columnSizes[n.join(t.k6C)]=parseInt(a[s].width))}if(i.x4C!=e.tableSizes.rows)for(a=e.tableSizes.rows,s=i.F8C;s<a.length;s++)i.x4C!=a[s].idx&&(i.x4C==o.rowSizesByIdx&&(o.rowSizesByIdx={}),o.rowSizesByIdx[parseInt(a[s].idx)]=parseInt(a[s].height)),(i.x4C!=a[s].tuple||i.x4C!=a[s].measure)&&(i.x4C==o.rowSizes&&(o.rowSizes={}),n=i.x4C==a[s].tuple?[]:a[s].tuple.slice(),i.x4C!=a[s].measure&&n.push(a[s].measure),o.rowSizes[n.join(t.k6C)]=parseInt(a[s].height))}return i.x4C!=e.localization&&(o.localization=e.localization),o},e.prototype.merge=function(t){if(Be.nullOrUndefined(t))return this;t=e.toPlainObject(t);var i,r=e.toPlainObject(this);for(i in t)t.hasOwnProperty(i)&&("connectionInfo"==i?Xt.data_.vo.ConnectionInfo.fromObject(t.connectionInfo).isEmpty||(r[i]=t[i]):"options"==i?(this.options.mergeWith(t[i]),r[i]=Kt._options.vo.OptionsValueObject.toPlainObject(this.options)):r[i]=t[i]);return e.fromObject(r)},e}(),Qt.ReportValueObject=Jt,Zt=De||(De={}),$t=Zt.model||(Zt.model={}),ei=$t.report||($t.report={}),ti=function(e){function i(){return r.x4C!==e&&e.apply(this,arguments)||this}return Ga(i,e),i.prototype.dispatchReportLoaded=function(e){e?this.dispatch(new ei.ReportFileLoadedEvent(e)):this.dispatch(new ei.ReportFileFailedEvent($t._labels.Labels.MESSAGE_INVALID_REPORT_FORMAT))},i.prototype.parseReport=function(e){try{var i=r.O8C;return i=e.indexOf(t.d8B),JSON.parse(-r.O8C<i?e.substring(r.F8C,i):e)}catch(e){return console.error(e),r.x4C}},i.prototype.getStringByteLength=function(e){var t=new Zt.DataStream(new ArrayBuffer(r.F8C),r.F8C,Zt.DataStream.BIG_ENDIAN);return t.writeString(e),t.byteLength},i}(s.EventDispatcher),ei.ReportLoader=ti,ii=De||(De={}),ri=ii.model||(ii.model={}),oi=ri.report||(ri.report={}),si=function(e){function i(){var i=e.call(this)||this;return i.counter=r.F8C,i.embeddedStartDataSign=t.S8B,i.embeddedDataJSONStartSign=t.d8B,i}return Ga(i,e),i.prototype.load=function(e){var t=this;this.url=e,this.bytesLoaded=r.F8C,this.loader=new Ne.URLStream,this.loader.dataType=Ne.DataType.TEXT,this.loader.addEventListener(s._Event.PROGRESS,function(e){return t.onProgress(e)}),this.loader.addEventListener(s._Event.COMPLETE,function(){return t.onLoaded()}),this.loader.addEventListener(s._Event.ERROR,function(){return t.onError()}),this.loader.load(e)},i.prototype.onProgress=function(e){var i=r;e=i.F8C,i.x4C!=this.loader&&-i.O8C<(e=this.loader.response.indexOf(t.I8B))&&e+this.embeddedDataJSONStartSign.length+i.O8C<this.loader.response.length&&this.onLoaded()},i.prototype.onLoaded=function(){var e=r;if(e.x4C!=this.loader){this.loader.removeAllEventListeners(s._Event.COMPLETE);var i=this.parseReport(this.loader.response);if(i instanceof oi.ReportValueObject){if(i.connectionInfo instanceof ii.data_.vo.CSVConnectionInfo&&!e.F8C==i.connectionInfo.embedded){var o=i.connectionInfo;o.filename=this.loader.url,o.embeddedDataOffset=this.getStringByteLength(this.loader.response.substring(e.F8C,this.loader.response.indexOf(t.I8B)+e.c8C)+t.m6C),this.loader.response.indexOf(this.embeddedStartDataSign),i.connectionInfo=o}}else Be.nullOrUndefined(i)||Be.nullOrUndefined(i.dataSource)||!e.F8C!=i.dataSource.embedded||(i.dataSource.filename=this.loader.url,i.dataSource.embeddedDataOffset=this.getStringByteLength(this.loader.response.substring(e.F8C,this.loader.response.indexOf(this.embeddedDataJSONStartSign))));this.dispatchReportLoaded(i),this.dispose()}},i.prototype.onError=function(){this.loader.removeAllEventListeners(s._Event.PROGRESS),this.loader.removeAllEventListeners(s._Event.COMPLETE),this.loader.removeAllEventListeners(s._Event.ERROR);var e=ri.XSSCheck.valid(this.url)?this.url:ri.XSSCheck.validate(this.url);e=Be.StringUtils.bind(ri._labels.Labels.MESSAGE_UNABLE_TO_OPEN_FILE,e),this.dispatch(new oi.ReportFileFailedEvent(e)),this.dispose()},i.prototype.dispose=function(){r.x4C!=this.loader&&(this.loader.removeAllEventListeners(),this.loader.dispose(),this.loader=r.x4C)},i}(oi.ReportLoader),oi.UrlReportLoader=si,ni=De||(De={}),ai=ni.model||(ni.model={}),li=ai.report||(ai.report={}),hi=function(e){function i(){return e.call(this)||this}return Ga(i,e),i.prototype.load=function(){var e=this;this.file=new Ne.FileReference,this.file.addEventListener(s._Event.SELECT,function(){return e.onSelected()}),this.file.addEventListener(s._Event.COMPLETE,function(){return e.onLoaded()}),this.file.addEventListener(s._Event.CANCEL,function(){return e.onCancel()}),this.file.addEventListener(s._Event.ERROR,function(){return e.onError()}),this.file.browse([t.T8B,t.m8B])},i.prototype.onSelected=function(){r.x4C!=this.file&&this.file.load(Ne.ReadMethod.ARRAY_BUFFER)},i.prototype.onLoaded=function(){var e=r;try{var i=new ni.DataStream(this.file.response,e.F8C,ni.DataStream.BIG_ENDIAN),o=i.readString(i.byteLength),s=this.parseReport(o);if(s instanceof li.ReportValueObject){if(s.connectionInfo instanceof ni.data_.vo.CSVConnectionInfo&&!e.F8C==s.connectionInfo.embedded){var n=s.connectionInfo;n.embeddedDataToLoad=this.file.response,n.embeddedDataOffset=this.getStringByteLength(o.substring(e.F8C,o.indexOf(t.I8B)+e.c8C)+t.m6C),s.connectionInfo=n}}else Be.nullOrUndefined(s)||Be.nullOrUndefined(s.dataSource)||!e.F8C!=s.dataSource.embedded||(s.dataSource.embeddedDataToLoad=this.file.response,s.dataSource.embeddedDataOffset=this.getStringByteLength(o.substring(e.F8C,o.indexOf(t.d8B))));this.dispatchReportLoaded(s),this.dispose()}catch(e){console.error(e),this.onError()}},i.prototype.onError=function(){var e=Be.StringUtils.bind(ai._labels.Labels.MESSAGE_UNABLE_TO_OPEN_FILE,r.C4C);this.dispatch(new li.ReportFileFailedEvent(e)),this.dispose()},i.prototype.onCancel=function(){this.dispatchWith(li.ReportEvent.REPORT_FILE_CANCELLED),this.dispose()},i.prototype.dispose=function(){r.x4C!=this.file&&(this.file.removeAllEventListeners(),this.file.dispose(),this.file=r.x4C)},i}(li.ReportLoader),li.LocalReportLoader=hi,ci=De||(De={}),di=ci.model||(ci.model={}),ui=di.report||(di.report={}),pi=function(){function e(){}return e.validType=function(t){return t==e.FILE||t==e.SERVER||t==e.BINARY||t==e.PLAIN},e.FILE=t.A6C,e.SERVER="server",e.BINARY="binary",e.PLAIN="plain",e}(),ui.DestinationType=pi,Ci=De||(De={}),fi=Ci.model||(Ci.model={}),mi=fi.report||(fi.report={}),gi=function(){function e(){}return e.customFields=[],e}(),mi.CustomFieldsManager=gi,yi=De||(De={}),_i=yi.model||(yi.model={}),vi=_i.report||(_i.report={}),bi=function(){function e(){this.rows=[],this.columns=[],this.pages=[],this.measures=[],this.rowSorting={},this.columnSorting={},this.expandedRows=[],this.expandedColumns=[],this.drilledRows=[],this.drilledColumns=[],this.drillAll=this.expandAll=!r.O8C,this.flatOrder=[],this.formatsInUse={}}return e.prototype.normalizeSlice=function(t){if(r.F8C<=e.findMeasure(t.rows)){var i=e.findMeasure(t.columns);r.F8C<=i&&(t.columns[i]=t.columns[r.F8C],t.columns.shift())}},e.findMeasure=function(e){for(var t=yi.data_.Cube.MEASURES_NAME,i=r.F8C;i<e.length;i++)if(e[i].uniqueName==t)return i;return-r.O8C},e.readExpandedFromObject=function(e){for(var t,i=r,o=[],s=i.F8C;s<e.length;s++){if((t=[]).push(i.x4C!=e[s].measure?e[s].measure:i.C4C),i.x4C!=e[s].tuple)for(var n=i.F8C;n<e[s].tuple.length;n++)t.push(e[s].tuple[n]);o.push(t)}return o},e.readDrilledFromObject=function(e){for(var t,i=r,o=[],s=i.F8C;s<e.length;s++){if((t=[]).push(i.x4C!=e[s].level?e[s].level:i.C4C),t.push(i.x4C!=e[s].measure?e[s].measure:-i.O8C),i.x4C!=e[s].tuple){t.push(e[s].tuple[e[s].tuple.length-i.O8C]);for(var n=i.F8C;n<e[s].tuple.length;n++)t.push(e[s].tuple[n])}o.push(t)}return o},e.fromObject=function(t,i,o){var s=r;if(void s.F8C===i&&(i=s.x4C),void s.F8C===o&&(o=!s.O8C),s.x4C==t)return s.x4C;t instanceof e||(t=e.toPlainObject(t));var n=new e;return s.x4C!=t.measures&&t.measures.length&&(n.measures=t.measures),s.x4C==i&&_i.PivotModel.getInstance(),s.x4C!=t.pages&&t.pages.length&&(n.pages=e.hierarchiesFromObject(t.pages)),s.x4C!=t.columns&&t.columns.length&&(n.columns=e.hierarchiesFromObject(t.columns,o)),s.x4C!=t.rows&&t.rows.length&&(n.rows=e.hierarchiesFromObject(t.rows,o)),s.x4C!=t.flatOrder&&t.flatOrder.length&&(n.flatOrder=t.flatOrder),n.normalizeSlice(n),s.x4C!=t.rowSorting&&(n.rowSorting=t.rowSorting),s.x4C!=t.columnSorting&&(n.columnSorting=t.columnSorting),s.x4C!=t.expandAll&&(n.expandAll=t.expandAll),s.x4C!=t.expandedRows&&t.expandedRows.length&&(n.expandedRows=t.expandedRows),s.x4C!=t.expandedColumns&&t.expandedColumns.length&&(n.expandedColumns=t.expandedColumns),s.x4C!=t.drillAll&&(n.drillAll=t.drillAll),s.x4C!=t.drilledRows&&t.drilledRows.length&&(n.drilledRows=t.drilledRows),s.x4C!=t.drilledColumns&&t.drilledColumns.length&&(n.drilledColumns=t.drilledColumns),n},e.hierarchiesFromObject=function(e,t){void r.F8C===t&&(t=!r.O8C);for(var i=[],o=r.F8C;o<e.length;o++)for(var s in i[o]={},t&&!e[o].sort&&(e[o].sort=yi.data_.consts.SortType.UNSORTED),e[o])"sort"==s?i[o].sortName=e[o].sort:i[o][s]=e[o][s];return i},e.prototype.toObject=function(e){var t=r;void t.F8C===e&&(e=!t.O8C);var i,o={},s=[];for(i=t.F8C;i<this.pages.length;i++)s.push(this.hierarchyToJSON(this.pages[i],e));for(t.F8C<s.length&&(o.reportFilters=s),s=[],i=t.F8C;i<this.rows.length;i++)s.push(this.hierarchyToJSON(this.rows[i],e));for(t.F8C<s.length&&(o.rows=s),s=[],i=t.F8C;i<this.columns.length;i++)s.push(this.hierarchyToJSON(this.columns[i],e));for(t.F8C<s.length&&(o.columns=s),s=[],i=t.F8C;i<this.measures.length;i++)s.push(this.measureToJSON(this.measures[i],e));return t.F8C<s.length&&(o.measures=s),(t.x4C!=this.rowSorting&&t.x4C!=this.rowSorting.type&&this.rowSorting.type!=yi.data_.consts.SortType.UNSORTED||t.x4C!=this.columnSorting&&this.columnSorting.type&&this.columnSorting.type!=yi.data_.consts.SortType.UNSORTED)&&(o.sorting={},t.x4C!=this.rowSorting&&t.x4C!=this.rowSorting.type&&this.rowSorting.type!=yi.data_.consts.SortType.UNSORTED&&(o.sorting.row=this.rowSorting),t.x4C!=this.columnSorting&&this.columnSorting.type&&this.columnSorting.type!=yi.data_.consts.SortType.UNSORTED&&(o.sorting.column=this.columnSorting)),i={},(e||this.expandAll)&&(i.expandAll=this.expandAll),t.F8C<this.expandedRows.length&&(i.rows=this.expandedElementsToJSON(this.expandedRows)),t.F8C<this.expandedColumns.length&&(i.columns=this.expandedElementsToJSON(this.expandedColumns)),Be.ObjectUtils.isEmptyObject(i)||(o.expands=i),i={},(e||this.drillAll)&&(i.drillAll=this.drillAll),t.F8C<this.drilledRows.length&&(i.rows=this.drilledElementsToJSON(this.drilledRows)),t.F8C<this.drilledColumns.length&&(i.columns=this.drilledElementsToJSON(this.drilledColumns)),Be.ObjectUtils.isEmptyObject(i)||(o.drills=i),t.F8C<this.flatOrder.length&&(o.flatOrder=this.flatOrder),o},e.prototype.expandedElementsToJSON=function(e){for(var t,i,o,s=r,n=[],a=s.F8C;a<e.length;a++)t={},o=(i=e[a].slice(s.F8C)).shift(),s.F8C!=i.length&&(t.tuple=i,s.C4C!=o&&(t.measure=o),n.push(t));return n},e.prototype.drilledElementsToJSON=function(e){for(var t,i,o,s,n=r,a=[],l=n.F8C;l<e.length;l++)t={},i=(s=e[l].slice(n.F8C)).shift(),o=s.shift(),s.shift(),n.F8C!=s.length&&(t.tuple=s,n.C4C!=o&&(t.measure=o),n.C4C!=i&&(t.level=i),a.push(t));return a},e.prototype.measureToJSON=function(e,t){var i=r,o={};return o.uniqueName=e.uniqueName,i.x4C!=e.formula&&i.C4C!=e.formula?(o.formula=e.formula,e.individual&&(o.individual=!i.F8C),o.caption=e.caption):(t||e.aggregation!=yi.data_.consts.AggregationName.NONE)&&(o.aggregation=e.aggregation),(t||!i.O8C==e.active)&&(o.active=e.active),i.x4C!=e.format&&i.C4C!=e.format&&(o.format=e.format,this.formatsInUse[e.format]=e.active),i.x4C!=e.availableAggregations&&i.F8C<e.availableAggregations.length&&(o.availableAggregations=e.availableAggregations),o},e.prototype.hierarchyToJSON=function(e,i){var o=r,s={};if(s.uniqueName=e.uniqueName,o.x4C!=e.activeLevelName&&(s.levelName=e.activeLevelName),o.x4C!=e.filter&&(s.filter={},o.x4C!=e.filter.type&&e.filter.type!=yi.data_.consts.FilterType.NONE&&(s.filter={type:e.filter.type,quantity:e.filter.quantity,measure:e.filter.measure}),o.x4C!=e.filter.members)){var n=o.K2C==typeof e.filter.members?e.filter.members.split(t.k6C):e.filter.members;o.F8C<n.length&&(s.filter.members=n,!o.F8C===e.filter.negation&&(s.filter.negation=e.filter.negation))}return e.filterEnabled||(s.filterEnabled=!o.F8C),e.uniqueName!=yi.data_.Cube.MEASURES_NAME&&e.sortName&&(i||e.sortName!=yi.data_._structure.GenericHierarchy.DEFAULT_SORT_NAME)&&(s.sort=e.sortName),e.uniqueName!=yi.data_.Cube.MEASURES_NAME&&e.sortAs&&(s.sortAs=e.sortAs),s},e.toPlainObject=function(i){var o=r,s={};return void o.F8C==i?s:(o.x4C!=i.pages&&(s.pages=i.pages),o.x4C!=i.reportFilters&&(s.pages=i.reportFilters),o.x4C!=i.rows&&(s.rows=i.rows),o.x4C!=i.columns&&(s.columns=i.columns),o.x4C!=i.measures&&(s.measures=i.measures),o.x4C!=i.rowSorting&&(s.rowSorting=i.rowSorting,o.x4C!=s.rowSorting.tuple&&o.K2C==typeof s.rowSorting.tuple&&(s.rowSorting.tuple=s.rowSorting.tuple.split(t.k6C))),o.x4C!=i.sorting&&o.x4C!=i.sorting.row&&(s.rowSorting=i.sorting.row),o.x4C!=i.columnSorting&&(s.columnSorting=i.columnSorting,o.x4C!=s.columnSorting.tuple&&o.K2C==typeof s.columnSorting.tuple&&(s.columnSorting.tuple=s.columnSorting.tuple.split(t.k6C))),o.x4C!=i.sorting&&o.x4C!=i.sorting.column&&(s.columnSorting=i.sorting.column),o.x4C!=i.expandAll&&(s.expandAll=i.expandAll),o.x4C!=i.expandedRows&&(s.expandedRows=i.expandedRows),o.x4C!=i.expandedColumns&&(s.expandedColumns=i.expandedColumns),o.x4C!=i.expands&&(o.x4C!=i.expands.expandAll&&(s.expandAll=i.expands.expandAll),o.x4C!=i.expands.rows&&(s.expandedRows=e.readExpandedFromObject(i.expands.rows)),o.x4C!=i.expands.columns&&(s.expandedColumns=e.readExpandedFromObject(i.expands.columns))),o.x4C!=i.drillAll&&(s.drillAll=i.drillAll),o.x4C!=i.drilledRows&&(s.drilledRows=i.drilledRows),o.x4C!=i.drilledColumns&&(s.drilledColumns=i.drilledColumns),o.x4C!=i.drills&&(o.x4C!=i.drills.drillAll&&(s.drillAll=i.drills.drillAll),o.x4C!=i.drills.rows&&(s.drilledRows=e.readDrilledFromObject(i.drills.rows)),o.x4C!=i.drills.columns&&(s.drilledColumns=e.readDrilledFromObject(i.drills.columns))),o.x4C!=i.flatOrder&&(s.flatOrder=i.flatOrder),o.x4C!=i.slice&&(i=i.slice,o.x4C!=i.pages&&i.pages.length&&(s.pages=i.pages),o.x4C!=i.reportFilters&&i.reportFilters.length&&(s.pages=i.reportFilters),o.x4C!=i.rows&&i.rows.length&&(s.rows=i.rows),o.x4C!=i.columns&&i.columns.length&&(s.columns=i.columns),o.x4C!=i.measures&&i.measures.length&&(s.measures=i.measures),o.x4C!=i.sorting&&o.x4C!=i.sorting.row&&(s.rowSorting=i.sorting.row),o.x4C!=i.sorting&&o.x4C!=i.sorting.column&&(s.columnSorting=i.sorting.column),o.x4C!=i.expands&&(o.x4C!=i.expands.expandAll&&(s.expandAll=i.expands.expandAll),o.x4C!=i.expands.rows&&(s.expandedRows=e.readExpandedFromObject(i.expands.rows)),o.x4C!=i.expands.columns&&(s.expandedColumns=e.readExpandedFromObject(i.expands.columns))),o.x4C!=i.drills&&(o.x4C!=i.drills.drillAll&&(s.drillAll=i.drills.drillAll),o.x4C!=i.drills.rows&&(s.drilledRows=e.readDrilledFromObject(i.drills.rows)),o.x4C!=i.drills.columns&&(s.drilledColumns=e.readDrilledFromObject(i.drills.columns))),o.x4C!=i.flatOrder&&i.flatOrder.length&&(s.flatOrder=i.flatOrder)),s)},e}(),vi.SliceValueObject=bi,wi=De||(De={}),Fi=wi.model||(wi.model={}),Ei=Fi._state||(Fi._state={}),Oi=Ei.vo||(Ei.vo={}),Si=function(){function e(){this.formats=new Be.AssociativeArray,this.conditions=new Be.AssociativeArray,this.customFields=[],this.rowSizes={},this.columnSizes={},this.startTableRow=r.F8C,this.rowHeaderSizes={},this.columnHeaderSizes={},this.rowFilterSizes={},this.expandedRows=[],this.expandedColumns=[],this.drilledRows=[],this.drilledColumns=[],this.localization=r.x4C,this.labels={},this.withGlobals=this.withDefaults=!r.O8C}return e.toReport=function(e){var t,i,o=r,s=new Fi.report.ReportValueObject;if(s.withDefaults=e.withDefaults,s.connectionInfo=e._connectionInfo,e._slice){var n,a=wi.data_._structure.Axis.toObject(e._slice.findAxis(wi.data_.consts.AxisName.ROWS_AXIS)),l=wi.data_._structure.Axis.toObject(e._slice.findAxis(wi.data_.consts.AxisName.COLUMNS_AXIS));for(t=wi.data_._structure.Axis.toObject(e._slice.findAxis(wi.data_.consts.AxisName.PAGES_AXIS)),s.slice=new Fi.report.SliceValueObject,s.slice.rows=a.hierarchies,s.slice.columns=l.hierarchies,s.slice.pages=t.hierarchies,s.slice.measures=[],t=o.F8C;t<e._slice.measures_.length;t++)n=e._slice.measures_.getItemAt(t),(n=wi.data_._structure.GenericMeasure.toObject(n)).active=!o.F8C,s.slice.measures.push(n);for(t=o.F8C;t<e._structure.measures_.length;t++)n=e._structure.measures_.getItemAt(t),e._slice.measures_.keyExists(n.uniqueName)||n.hasDefaultParams()||((n=wi.data_._structure.GenericMeasure.toObject(n)).active=!o.O8C,s.slice.measures.push(n));s.slice.rowSorting=a.sort,s.slice.columnSorting=l.sort,s.slice.expandAll=e._slice.expandAll,s.slice.expandedRows=e.expandedRows,s.slice.expandedColumns=e.expandedColumns,s.slice.drillAll=e._slice.drillAll,s.slice.drilledRows=e.drilledRows,s.slice.drilledColumns=e.drilledColumns,s.slice.flatOrder=e._slice.flatOrder}for(s.options=e._options,a=[],t=o.F8C;t<e.formats.length;t++)a[t]=e.formats.getItemAt(t).toObject();for(s.formats=a,a=[],t=o.F8C;t<e.conditions.length;t++)a[t]=Fi.condition.vo.ConditionValueObject.toObject(e.conditions.getItemAt(t));for(i in s.conditions=a,s.customFields=e.customFields,s.labels=e.labels,t={},e.columnSizes)t[i]=e.columnSizes[i];for(i in s.columnSizes=t,a=[],e.columnHeaderSizes)a[t=parseInt(i)]=e.columnHeaderSizes[i];for(i in s.columnHeaderSizes=a,t={},e.rowSizes)t[i]=e.rowSizes[i];for(i in s.rowSizes=t,a=[],e.rowHeaderSizes)a[(t=parseInt(i))+e.startTableRow]=e.rowHeaderSizes[i];if(s.rowHeaderSizes=a,a=[],o.F8C!=e.startTableRow)for(i in e.rowFilterSizes)a[t=parseInt(i)]=e.rowFilterSizes[i];return s.rowFilterSizes=a,s.localization=e.localization,s},e}(),Oi.StateValueObject=Si,Ti=De||(De={}),xi=Ti.model||(Ti.model={}),Li=xi.printing||(xi.printing={}),Ai=function(){function e(){var e=this;this.MARGINS=r.y8C,this._printInProgress=!r.O8C,this.printCompletedHandler=function(){return e.onPrintCompleted()},this.footerHeight=this.headerHeight=r.F8C}return e.getInstance=function(){return r.x4C==e._instance&&(e._instance=new e),e._instance},e.dispose=function(){e._instance=r.x4C},e.prototype.print=function(e){void r.F8C===e&&(e=r.x4C),this._printInProgress||(this._printInProgress=!r.F8C,this._options=e||new xi.printing.PrintOptions,xi.PivotModel.getInstance().addEventListener(Ti.PivotEvent.PRINT_COMPLETE,this.printCompletedHandler),xi.PivotModel.getInstance().dispatchWith(Ti.PivotEvent.PRINT))},e.prototype.onPrintCompleted=function(){xi.PivotModel.getInstance().removeEventListener(Ti.PivotEvent.PRINT_COMPLETE,this.printCompletedHandler),this._printInProgress=!r.O8C},e.prototype.run=function(e,t){this.grid=e,this.dataProvider=t,this.gridLayout=r.x4C!=e?e.gridLayout:r.x4C,this.start()},e.prototype.start=function(){var e=r,t=this;this.pageNumber=e.F8C,this._pageWidth=576-e.M8C*this.MARGINS,this._pageHeight=756-e.M8C*this.MARGINS,this.pages=new h.UIElement(e.r4C),this.stylesList=[],this.rowsShift=this.columnsShift=e.F8C,Be.ThreadManager.addTask(this.generatePageColumn,this,e.x4C,function(){return t.finish()})},e.prototype.clear=function(){var e=r;this._printInProgress=!e.O8C,this.columnsShift=this.pageNumber=this.rowsShift=this.columnsShift=e.F8C,this.pages=this.printSprite=e.x4C,this.footerHeight=this.headerHeight=e.F8C},e.prototype.generatePageColumn=function(){return this.addColumn()},e.prototype.addColumn=function(){var e=r;if(e.x4C==this.printSprite)this.printSprite=this.createPage(),this.printTable=this.printSprite.find("table");else if(!(this.printSprite.getWidth(!e.F8C)<=this._pageWidth&&e.F8C!=this.columnsShift)&&(this.printSprite.getWidth(!e.F8C)>this._pageWidth&&(this.columnsShift--,this.printSprite.find("td:last-child").remove()),this.addPageToPJ(),this.printSprite=this.createPage(),this.printTable=this.printSprite.find("table"),!e.O8C==this.grid.isFlatTable)){var t=this.columnsShift;e.F8C!=this.columnsShift&&(this.columnsShift=e.F8C,this.addColumnOnPage(),this.columnsShift=t,this.columnsShift+e.O8C<=this.dataProvider.extendedDataWidth-(this.grid.isFlatTable?e.O8C:e.F8C)&&(this.columnsShift+=e.O8C))}return this.addColumnOnPage(),!e.F8C!=this.shift()?!e.O8C:(this.addPageToPJ(),!e.F8C)},e.prototype.createPage=function(){var e=r,i=new h.UIElement(e.r4C).addClass("page");if(i.css(e.F3C,e.O3C).css(e.M2C,t.M5C),e.x4C!=this._options.header){var o=this.createHeaderFooter(this._options.header);i.append(o)}var s=new h.UIElement("table");if(e.F8C==this.pageNumber&&e.F8C<xi._options.OptionsManager.gridTitle.length&&s.append(new h.UIElement(t.W0B).text(xi._options.OptionsManager.gridTitle)),i.append(s),e.x4C!=this._options.footer){var n=this.createHeaderFooter(this._options.footer);i.append(n)}return this.grid.container.append(i),this.headerHeight=e.x4C!=o?o.getHeight():e.F8C,this.footerHeight=e.x4C!=n?n.getHeight():e.F8C,i},e.prototype.createHeaderFooter=function(e){var t=new h.UIElement(r.r4C);return e=(e=e.replace(/##PAGE-NUMBER##/gi,(this.pageNumber+r.O8C).toString())).replace(/##CURRENT-DATE##/gi,(new Date).toLocaleString()),t.html(e),t},e.prototype.addPageToPJ=function(){var e=r;return this.pageNumber++,Ti.preloader(!e.F8C,xi._labels.Labels.MESSAGE_PLEASE_WAIT,this.pageNumber+e.s4C+xi._labels.Labels.MESSAGE_PAGES_WERE_GENERATED,!e.F8C),this.rowHeightSum>this._pageHeight&&(this._rowIdx--,this.printSprite.find("tr:last-child").remove()),this.printSprite.detach(),this.printSprite.css(e.F3C,e.C4C).css(e.M2C,e.C4C),this.pages.append(this.printSprite),!e.O8C},e.prototype.shift=function(){var e=r;return++this.columnsShift,this.columnsShift>this.dataProvider.extendedDataWidth-(this.grid.isFlatTable?e.O8C:e.F8C)&&(this.columnsShift=e.F8C,this.rowsShift+=this._rowIdx-this.grid.FIRST_DATA_ROW),t.N6C<=this.pageNumber||this.rowsShift>=this.dataProvider.extendedDataHeight?!e.F8C:!e.O8C},e.prototype.addColumnOnPage=function(){this.rowHeightSum=r.F8C;var e=this.grid.START_HEADERS_COLUMN+this.columnsShift,t=this._pageHeight-this.headerHeight-this.footerHeight;for(this._rowIdx=this.grid.START_TABLE_ROW;this.rowHeightSum<=t&&this._rowIdx<this.dataProvider.extendedDataHeight+this.grid.FIRST_DATA_ROW-this.rowsShift;this._rowIdx++){this.rowIndex=this._rowIdx<this.grid.FIRST_DATA_ROW?this._rowIdx:this._rowIdx+this.rowsShift;var i=this.gridLayout.getCell(this.rowIndex,e,!r.F8C,!r.F8C);if(this.rowHeightSum+=this.addCell(this._rowIdx,this.columnsShift,i),this.rowHeightSum>=t)break}},e.prototype.addCell=function(e,i,s){var n=o,a=t,l=r;for(i=this.printTable.find("tr",!l.F8C),i=l.F8C<i.length?i[e]:l.x4C;l.x4C==i;)this.printTable.append(new h.UIElement("tr")),i=this.printTable.find("tr",!l.F8C)[e];if(e=a.p0B+(s?s.getLabel():l.C4C)+a.X0B,l.x4C==s)e=Be.StringUtils.bind(e,a.B0B);else{var c=l.C4C,d=l.C4C;s.isCustomized&&(d=s.style.getStyleString(),c=s.style.getCustomClassString(),this.appendStylesList(s.style.customStyleNames)),c=s.isRowHeader?c+(a.Y0B+s.level):s.isColumnHeader?c+a.q0B:s.isFilterHeader?c+n.u0B:s.isTotal&&l.C4C!=s.getLabel()?c+n.z0B:c+n.N0B,l.C4C!=c.trim()&&(c=n.D0B+c.trim()+a.v9Q),l.C4C!=d.trim()&&(d=n.x0B+d.trim()+"maxWidth:400px'"),e=Be.StringUtils.bind(e,c+l.s4C+d)}return i.element.innerHTML+=e,i.getHeight(!l.F8C)+l.j8C},e.prototype.appendStylesList=function(e){for(var t=r.F8C;t<e.length;t++)r.F8C>this.stylesList.indexOf(e[t])&&this.stylesList.push(e[t])},e.prototype.finish=function(){var e=r;Ti.preloader(!e.F8C,xi._labels.Labels.MESSAGE_PLEASE_WAIT,"Sending pages to printer...",!e.O8C,!e.F8C),Ne.PrintJob.print(this.pages.html(),this.generateStyle(),xi._options.OptionsManager.gridTitle),Ti.preloader(!e.O8C),xi.PivotModel.getInstance().dispatchWith(Ti.PivotEvent.PRINT_COMPLETE),this.clear()},e.prototype.generateStyle=function(){var e=o,t=r,i=t.C4C,s=h.UIElement.convert(this.gridLayout.element),n=s.find(e.F0B);for(i=(i=(i=(i=(i=(i=(i=(i+=Be.StringUtils.bind("table{width:100%;border-collapse:collapse;{0}}\n",Ti._view.grid.vo.StyleValueObject.fromItemToString(s,[e.M0B,e.b0B])))+Be.StringUtils.bind("caption{{0}}\n",Ti._view.grid.vo.StyleValueObject.fromClassToString(Ti._view.grid.vo.GridStyleName.TITLE,s)))+Be.StringUtils.bind("td{white-space:nowrap;{0}}\n",Be.browserVersion().isChrome?t.C4C:"border: 1px solid #eee;"))+Be.StringUtils.bind(e.n0B,Ti._view.grid.vo.StyleValueObject.fromClassToString(Ti._view.grid.vo.GridStyleName.CELL,n)))+Be.StringUtils.bind(e.t0B,Ti._view.grid.vo.StyleValueObject.fromClassToString(Ti._view.grid.vo.GridStyleName.CELL+t.s4C+Ti._view.grid.vo.GridStyleName.TOTAL,n)))+Be.StringUtils.bind(e.c0B,Ti._view.grid.vo.StyleValueObject.fromClassToString(Ti._view.grid.vo.GridStyleName.CELL+t.s4C+Ti._view.grid.vo.GridStyleName.HEADER+t.s4C+Ti._view.grid.vo.GridStyleName.HEADER_ROW,s)))+Be.StringUtils.bind(e.L0B,Ti._view.grid.vo.StyleValueObject.fromClassToString(Ti._view.grid.vo.GridStyleName.CELL+t.s4C+Ti._view.grid.vo.GridStyleName.HEADER+t.s4C+Ti._view.grid.vo.GridStyleName.HEADER_COLUMN,s)))+Be.StringUtils.bind(e.a0B,Ti._view.grid.vo.StyleValueObject.fromClassToString(Ti._view.grid.vo.GridStyleName.CELL+t.s4C+Ti._view.grid.vo.GridStyleName.HEADER+t.s4C+Ti._view.grid.vo.GridStyleName.FILTER_HEADER,s)),n=t.O8C;t.J8C>=n;n++)i+=Be.StringUtils.bind(e.e0B,n,Ti._view.grid.vo.StyleValueObject.fromClassToString(Ti._view.grid.vo.GridStyleName.HEADER_ROW+t.s4C+Ti._view.grid.vo.GridStyleName.LEVEL+n,s,[e.h0B]));for(n=t.F8C;n<this.stylesList.length;n++)i+=Be.StringUtils.bind(e.R0B,this.stylesList[n],Ti._view.grid.vo.StyleValueObject.fromClassToString(this.stylesList[n],s));return(i=(i+".page:not(:last-child), svg { page-break-after: always; }").replace(/background-color:rgb\(33, 33, 33\)/g,"background-color:rgb(255, 255, 255)")).replace(/background-color:rgb\(66, 66, 66\)/g,"background-color:rgb(247, 247, 247)")},e}(),Li.PrintingManager=Ai,Ii=De||(De={}),Ri=Ii.model||(Ii.model={}),Di=Ri.printing||(Ri.printing={}),Ni=function(){function e(){}return e.fromObject=function(t){var i=new e;return r.x4C!=t&&(r.x4C!=t.header&&(i.header=t.header),r.x4C!=t.footer&&(i.footer=t.footer)),i},e}(),Di.PrintOptions=Ni,Mi=De||(De={}),Pi=Mi.model||(Mi.model={}),Hi=Pi._options||(Pi._options={}),Ui=function(e){var i=r,n="showReportFiltersArea",a="grandTotalsPosition",l="showAggregationLabels",h="defaultHierarchySortName",c="selectEmptyCells",d="showCalculatedValuesButton",u="dateTimePattern",p="datePattern",C="showGrandTotals",f="showTotals",m="saveAllFormats",g="showHierarchies",y="showDrillThroughConfigurator",_="showExtraTotalLabels",v="showHierarchyCaptions",b="showEmptyData",w="showDefaultSlice",F="showFilter",E="gridType",O="configuratorButton",S="configuratorActive";function T(){var i=e.call(this)||this;if(T._defaults=new Hi.vo.OptionsValueObject,T._defaults.setDefaults(),T._options=new Hi.vo.OptionsValueObject,T.instance)throw Error(t.D5C);return i}return Ga(T,e),T.getInstance=function(){return Be.nullOrUndefined(T.instance)&&(T.instance=new T),T.instance},T.dispose=function(){T._globals._defaults=i.x4C,T._globals=i.x4C,T._options=i.x4C,T._defaults=i.x4C,T.instance=i.x4C},T.setGlobalOptions=function(e){T._globals=e},T.getOptions=function(e,t){void i.F8C===e&&(e=!i.O8C),void i.F8C===t&&(t=!i.O8C);var r=new Hi.vo.OptionsValueObject;return e&&r.mergeWith(T._defaults),t&&r.mergeWith(T._globals),r.mergeWith(T._options),e||r.cleanFromDefaults(),r},T.clear=function(){this._options=new Hi.vo.OptionsValueObject},T.setOptions=function(e,t){if(void i.F8C===t&&(t=!i.F8C),Be.nullOrUndefined(T._options)||t){var r=T.configuratorOpened;T._options=new Hi.vo.OptionsValueObject,T._options.configuratorOpened=r}r=Hi.vo.OptionsValueObject.toPlainObject(e);var o=!i.O8C;T.dispatchSuspended=!i.F8C;var s,n=T.getOptions(!i.F8C,!i.F8C);for(s in r)if(void i.F8C!=n[s]&&r[s]!=n[s]&&(o=!i.F8C,T.optionAffectDataProvider(s))){T.optionAffectedDataProvider=!i.F8C;break}T._options.mergeWith(r),Mi.data_._structure.GenericHierarchy.DEFAULT_SORT_NAME=T.defaultHierarchySortName,T.dispatchSuspended=!i.O8C,o&&T.dispatchReportChange()},T.optionAffectDataProvider=function(e){return-i.O8C<T._optionsAffectDataProvider.indexOf(e)},T.getOption=function(e){return i.x4C!=T._options[e]?T._options[e]:T._globals&&i.x4C!=T._globals[e]?T._globals[e]:T._defaults[e]},Object.defineProperty(T,"configuratorOpened",{get:function(){return T._options.configuratorOpened},set:function(e){T._options.configuratorOpened=e},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(T,S,{get:function(){return T.getOption(S)},set:function(e){T._options.configuratorActive!=e&&(T.configuratorOpened=T._options.configuratorActive=e,T.dispatchReportChange())},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(T,O,{get:function(){return T.getOption(O)},set:function(e){T._options.configuratorButton!=e&&(T._options.configuratorButton=e,T.dispatchReportChange())},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(T,"classicView",{get:function(){return T.getOption(E)==Mi._view.grid.GridType.CLASSIC},set:function(e){T._options.gridType!=Mi._view.grid.GridType.CLASSIC&&(T._options.gridType=Mi._view.grid.GridType.CLASSIC,T.optionAffectedDataProvider=T.optionAffectDataProvider(E),T.dispatchReportChange())},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(T,"flatView",{get:function(){return T.getOption(E)==Mi._view.grid.GridType.FLAT},set:function(e){T._options.gridType!=Mi._view.grid.GridType.FLAT&&(T._options.gridType=Mi._view.grid.GridType.FLAT,T.optionAffectedDataProvider=T.optionAffectDataProvider(E),T.dispatchReportChange())},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(T,E,{get:function(){return T.getOption(E)},set:function(e){T._options.gridType!=e&&(T._options.gridType=e,T.dispatchReportChange())},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(T,"gridTitle",{get:function(){return T.getOption("gridTitle")},set:function(e){T._options.gridTitle!=e&&(T._options.gridTitle=e,T.dispatchReportChange())},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(T,F,{get:function(){return T.getOption(F)},set:function(e){T._options.showFilter!=e&&(T._options.showFilter=e,T.dispatchReportChange())},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(T,w,{get:function(){return T.getOption(w)},set:function(e){T._options.showDefaultSlice!=e&&(T._options.showDefaultSlice=e,T.dispatchReportChange())},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(T,b,{get:function(){return T.getOption(b)},set:function(e){T._options.showEmptyData!=e&&(T._options.showEmptyData=e,T.dispatchReportChange())},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(T,o.T0B,{get:function(){return T.getOption(o.T0B)},set:function(e){T._options.showAggregations!=e&&(T._options.showAggregations=e,T.dispatchReportChange())},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(T,v,{get:function(){return T.getOption(v)},set:function(e){T._options.showHierarchyCaptions!=e&&(T._options.showHierarchyCaptions=e,T.dispatchReportChange())},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(T,_,{get:function(){return T.getOption(_)},set:function(e){T._options.showExtraTotalLabels!=e&&(T._options.showExtraTotalLabels=e,T.dispatchReportChange())},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(T,o.r0B,{get:function(){return T.getOption(o.r0B)},set:function(e){T._options.showHeaders!=e&&(T._options.showHeaders=e,T.dispatchReportChange())},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(T,"sorting",{get:function(){return T.getOption("sorting")},set:function(e){T._options.sorting!=e&&(T._options.sorting=e,T.dispatchReportChange())},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(T,o.P0B,{get:function(){return T.getOption(o.P0B)},set:function(e){T._options.drillThrough!=e&&(T._options.drillThrough=e,T.dispatchReportChange())},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(T,y,{get:function(){return T.getOption(y)},set:function(e){T._options.showDrillThroughConfigurator!=e&&(T._options.showDrillThroughConfigurator=e,T.dispatchReportChange())},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(T,g,{get:function(){return T.getOption(g)},set:function(e){T._options.showHierarchies!=e&&(T._options.showHierarchies=e,T.dispatchReportChange())},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(T,m,{get:function(){return T.getOption(m)},set:function(e){T._options.saveAllFormats!=e&&(T._options.saveAllFormats=e,T.dispatchReportChange())},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(T,f,{get:function(){return T.getOption(f)},set:function(e){T._options.showTotals!=e&&(T._options.showTotals=e,T.optionAffectedDataProvider=T.optionAffectDataProvider(f),T.dispatchReportChange())},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(T,C,{get:function(){return T.getOption(C)},set:function(e){T._options.showGrandTotals!=e&&(T._options.showGrandTotals=e,T.optionAffectedDataProvider=T.optionAffectDataProvider(C),T.dispatchReportChange())},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(T,p,{get:function(){return T.getOption(p)},set:function(e){T._options.datePattern!=e&&(T._options.datePattern=e,T.dispatchReportChange())},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(T,u,{get:function(){return T.getOption(u)},set:function(e){T._options.dateTimePattern!=e&&(T._options.dateTimePattern=e,T.dispatchReportChange())},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(T,d,{get:function(){return T.getOption(d)},set:function(e){T._options.showCalculatedValuesButton!=e&&(T._options.showCalculatedValuesButton=e,T.dispatchReportChange())},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(T,c,{get:function(){return T.getOption(c)},set:function(e){T._options.selectEmptyCells!=e&&(T._options.selectEmptyCells=e,T.dispatchReportChange())},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(T,h,{get:function(){return T.getOption(h)},set:function(e){T._options.defaultHierarchySortName!=e&&(T._options.defaultHierarchySortName=e,T.dispatchReportChange())},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(T,l,{get:function(){return T.getOption(l)},set:function(e){T._options.showAggregationLabels!=e&&(T._options.showAggregationLabels=e,T.dispatchReportChange())},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(T,a,{get:function(){return T.getOption(a)},set:function(e){T._options.grandTotalsPosition!=e&&(T._options.grandTotalsPosition=e,T.optionAffectedDataProvider=T.optionAffectDataProvider(a),T.dispatchReportChange())},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(T,n,{get:function(){return T.getOption(n)},set:function(e){T._options.showReportFiltersArea!=e&&(T._options.showReportFiltersArea=e,T.dispatchReportChange())},enumerable:!i.F8C,configurable:!i.F8C}),T.dispatchReportChange=function(){T.dispatchSuspended||T.getInstance().dispatch(new s._Event(Pi._state.StateEvent.REPORT_CHANGED))},T.optionAffectedDataProvider=!i.O8C,T.dispatchSuspended=!i.O8C,T._optionsAffectDataProvider=[E,f,C,a],T.defaultDatePattern=t.L7C,T.defaultDateTimePattern=t.a7C,T}(s.EventDispatcher),Hi.OptionsManager=Ui,Bi=De||(De={}),ki=Bi.model||(Bi.model={}),Vi=ki._options||(ki._options={}),zi=Vi.vo||(Vi.vo={}),qi=function(){function e(){var e=r;this._defaults={configuratorActive:!e.O8C,configuratorOpened:!e.O8C,configuratorButton:!e.F8C,gridType:Bi._view.grid.GridType.COMPACT,gridTitle:e.C4C,showFilter:!e.F8C,showDefaultSlice:!e.F8C,showEmptyData:!e.F8C,showAggregations:!e.F8C,showHierarchyCaptions:!e.F8C,drillthroughMaxRows:t.N6C,showHeaders:!e.F8C,showReportFiltersArea:!e.F8C,showExtraTotalLabels:!e.O8C,drillThrough:!e.F8C,showDrillThroughConfigurator:!e.F8C,sorting:e.k2C,showHierarchies:!e.F8C,saveAllFormats:!e.O8C,showTotals:e.k2C,showGrandTotals:e.k2C,datePattern:t.L7C,dateTimePattern:t.a7C,showCalculatedValuesButton:!e.F8C,selectEmptyCells:!e.F8C,defaultHierarchySortName:Bi.data_.consts.SortType.ASC,showAggregationLabels:!e.F8C,grandTotalsPosition:e.b2C}}return e.prototype.setDefaults=function(){for(var e in this._defaults)this[e]=this._defaults[e]},e.prototype.cleanFromDefaults=function(){for(var e in this._defaults)this[e]==this._defaults[e]&&(this[e]=void r.F8C)},e.fromObject=function(i){var s=t,n=r,a=new e;return void n.F8C==i?a:(n.x4C!=i.options&&(i=i.options),i instanceof e||(i=e.toPlainObject(i)),n.x4C!=i.configuratorActive&&(a.configuratorActive=i.configuratorActive),n.x4C!=i.configuratorButton&&(a.configuratorButton=i.configuratorButton),n.x4C!=i.gridTitle&&(a.gridTitle=i.gridTitle),n.x4C!=i.gridType&&(a.gridType=i.gridType),n.x4C!=i.showFilter&&(a.showFilter=i.showFilter),n.x4C!=i.showDefaultSlice&&(a.showDefaultSlice=i.showDefaultSlice),n.x4C!=i.showEmptyData&&(a.showEmptyData=i.showEmptyData),n.x4C!=i.showAggregations&&(a.showAggregations=i.showAggregations),n.x4C!=i.showHierarchyCaptions&&(a.showHierarchyCaptions=i.showHierarchyCaptions),n.x4C!=i.showHeaders&&(a.showHeaders=i.showHeaders),n.x4C!=i.showReportFiltersArea&&(a.showReportFiltersArea=i.showReportFiltersArea),n.x4C!=i.showExtraTotalLabels&&(a.showExtraTotalLabels=i.showExtraTotalLabels),n.x4C!=i.drillThrough&&(a.drillThrough=i.drillThrough),n.x4C!=i.showDrillThroughConfigurator&&(a.showDrillThroughConfigurator=i.showDrillThroughConfigurator),n.x4C!=i.sorting&&(a.sorting=i.sorting,s.j7C==a.sorting.toString().toLowerCase()&&(a.sorting=n.k2C),s.C1B==a.sorting.toString().toLowerCase()&&(a.sorting=o.N4B)),n.x4C!=i.showHierarchies&&(a.showHierarchies=i.showHierarchies),n.x4C!=i.saveAllFormats&&(a.saveAllFormats=i.saveAllFormats),n.x4C!=i.showTotals&&(a.showTotals=i.showTotals,s.j7C==a.showTotals.toString().toLowerCase()&&(a.showTotals=n.k2C),s.C1B==a.showTotals.toString().toLowerCase()&&(a.showTotals=o.N4B)),n.x4C!=i.showGrandTotals&&(a.showGrandTotals=i.showGrandTotals,s.j7C==a.showGrandTotals.toString().toLowerCase()&&(a.showGrandTotals=n.k2C),s.C1B==a.showGrandTotals.toString().toLowerCase()&&(a.showGrandTotals=o.N4B)),n.x4C!=i.datePattern&&(a.datePattern=i.datePattern),n.x4C!=i.dateTimePattern&&(a.dateTimePattern=i.dateTimePattern),n.x4C!=i.showCalculatedValuesButton&&(a.showCalculatedValuesButton=i.showCalculatedValuesButton),n.x4C!=i.selectEmptyCells&&(a.selectEmptyCells=i.selectEmptyCells),n.x4C!=i.defaultHierarchySortName&&(a.defaultHierarchySortName=i.defaultHierarchySortName),n.x4C!=i.showAggregationLabels&&(a.showAggregationLabels=i.showAggregationLabels),n.x4C!=i.grandTotalsPosition&&(a.grandTotalsPosition=i.grandTotalsPosition),a)},e.toPlainObject=function(e){var i=t,s=r,n={};return void s.F8C==e?n:(s.x4C!=e.configuratorActive&&(n.configuratorActive=e.configuratorActive),s.x4C!=e.configuratorButton&&(n.configuratorButton=e.configuratorButton),s.x4C!=e.showAggregations&&(n.showAggregations=e.showAggregations),s.x4C!=e.showCalculatedValuesButton&&(n.showCalculatedValuesButton=e.showCalculatedValuesButton),s.x4C!=e.drillThrough&&(n.drillThrough=e.drillThrough),s.x4C!=e.showDrillThroughConfigurator&&(n.showDrillThroughConfigurator=e.showDrillThroughConfigurator),s.x4C!=e.sorting&&(n.sorting=e.sorting),s.x4C!=e.datePattern&&(n.datePattern=e.datePattern),s.x4C!=e.dateTimePattern&&(n.dateTimePattern=e.dateTimePattern),s.x4C!=e.saveAllFormats&&(n.saveAllFormats=e.saveAllFormats),s.x4C!=e.showDefaultSlice&&(n.showDefaultSlice=e.showDefaultSlice),s.x4C!=e.showEmptyData&&(n.showEmptyData=e.showEmptyData),s.x4C!=e.defaultHierarchySortName&&(n.defaultHierarchySortName=e.defaultHierarchySortName),s.x4C!=e.selectEmptyCells&&(n.selectEmptyCells=e.selectEmptyCells),s.x4C!=e.showAggregationLabels&&(n.showAggregationLabels=e.showAggregationLabels),s.x4C!=e.classicView&&(n.classicView=e.classicView),s.x4C!=e.flatView&&(n.flatView=e.flatView),s.x4C!=e.gridType&&(n.gridType=e.gridType),s.x4C!=e.gridTitle&&(n.gridTitle=e.gridTitle),s.x4C!=e.showFilter&&(n.showFilter=e.showFilter),s.x4C!=e.showHeaders&&(n.showHeaders=e.showHeaders),s.x4C!=e.showTotals&&(n.showTotals=e.showTotals),s.x4C!=e.showGrandTotals&&(n.showGrandTotals=e.showGrandTotals),s.x4C!=e.grandTotalsPosition&&(n.grandTotalsPosition=e.grandTotalsPosition),s.x4C!=e.showExtraTotalLabels&&(n.showExtraTotalLabels=e.showExtraTotalLabels),s.x4C!=e.showHierarchies&&(n.showHierarchies=e.showHierarchies),s.x4C!=e.showHierarchyCaptions&&(n.showHierarchyCaptions=e.showHierarchyCaptions),s.x4C!=e.drillthroughMaxRows&&(n.drillthroughMaxRows=e.drillthroughMaxRows),s.x4C!=e.showReportFiltersArea&&(n.showReportFiltersArea=e.showReportFiltersArea),s.x4C!=e.grid&&(e=e.grid,s.x4C!=e.type&&(n.gridType=e.type),s.x4C!=e.title&&(n.gridTitle=e.title),s.x4C!=e.showFilter&&(n.showFilter=e.showFilter),s.x4C!=e.showHeaders&&(n.showHeaders=e.showHeaders),s.x4C!=e.showTotals&&(n.showTotals=e.showTotals,i.j7C==n.showTotals.toString().toLowerCase()&&(n.showTotals=s.k2C),i.C1B==n.showTotals.toString().toLowerCase()&&(n.showTotals=o.N4B)),s.x4C!=e.showGrandTotals&&(n.showGrandTotals=e.showGrandTotals,i.j7C==n.showGrandTotals.toString().toLowerCase()&&(n.showGrandTotals=s.k2C),i.C1B==n.showGrandTotals.toString().toLowerCase()&&(n.showGrandTotals=o.N4B)),s.x4C!=e.grandTotalsPosition&&(n.grandTotalsPosition=e.grandTotalsPosition),s.x4C!=e.showExtraTotalLabels&&(n.showExtraTotalLabels=e.showExtraTotalLabels),s.x4C!=e.showHierarchies&&(n.showHierarchies=e.showHierarchies),s.x4C!=e.showHierarchyCaptions&&(n.showHierarchyCaptions=e.showHierarchyCaptions),s.x4C!=e.drillthroughMaxRows&&(n.drillthroughMaxRows=e.drillthroughMaxRows),s.x4C!=e.showReportFiltersArea&&(n.showReportFiltersArea=e.showReportFiltersArea)),n)},e.prototype.toObject=function(){var e=r,t={},i={};return this.gridType===Bi._view.grid.GridType.COMPACT?i.type=Bi._view.grid.GridType.COMPACT:this.gridType===Bi._view.grid.GridType.CLASSIC?i.type=Bi._view.grid.GridType.CLASSIC:this.gridType===Bi._view.grid.GridType.FLAT&&(i.type=Bi._view.grid.GridType.FLAT),e.x4C!=this.gridTitle&&(i.title=this.gridTitle),e.x4C!=this.showFilter&&(i.showFilter=this.showFilter),e.x4C!=this.showHeaders&&(i.showHeaders=this.showHeaders),e.x4C!=this.showTotals&&(i.showTotals=this.showTotals),e.x4C!=this.showGrandTotals&&(i.showGrandTotals=this.showGrandTotals),e.x4C!=this.grandTotalsPosition&&(i.grandTotalsPosition=this.grandTotalsPosition),e.x4C!=this.showExtraTotalLabels&&(i.showExtraTotalLabels=this.showExtraTotalLabels),e.x4C!=this.showHierarchies&&(i.showHierarchies=this.showHierarchies),e.x4C!=this.showHierarchyCaptions&&(i.showHierarchyCaptions=this.showHierarchyCaptions),e.x4C!=this.drillthroughMaxRows&&(i.drillthroughMaxRows=this.drillthroughMaxRows),e.x4C!=this.showReportFiltersArea&&(i.showReportFiltersArea=this.showReportFiltersArea),Be.ObjectUtils.isEmptyObject(i)||(t.grid=i),e.x4C!=this.configuratorActive&&(t.configuratorActive=this.configuratorActive),e.x4C!=this.configuratorButton&&(t.configuratorButton=this.configuratorButton),e.x4C!=this.showAggregations&&(t.showAggregations=this.showAggregations),e.x4C!=this.showCalculatedValuesButton&&(t.showCalculatedValuesButton=this.showCalculatedValuesButton),e.x4C!=this.drillThrough&&(t.drillThrough=this.drillThrough),e.x4C!=this.showDrillThroughConfigurator&&(t.showDrillThroughConfigurator=this.showDrillThroughConfigurator),e.x4C!=this.sorting&&(t.sorting=this.sorting),e.x4C!=this.datePattern&&(t.datePattern=this.datePattern),e.x4C!=this.dateTimePattern&&(t.dateTimePattern=this.dateTimePattern),e.x4C!=this.saveAllFormats&&(t.saveAllFormats=this.saveAllFormats),e.x4C!=this.showDefaultSlice&&(t.showDefaultSlice=this.showDefaultSlice),e.x4C!=this.showEmptyData&&(t.showEmptyData=this.showEmptyData),e.x4C!=this.defaultHierarchySortName&&(t.defaultHierarchySortName=this.defaultHierarchySortName),e.x4C!=this.selectEmptyCells&&(t.selectEmptyCells=this.selectEmptyCells),e.x4C!=this.showAggregationLabels&&(t.showAggregationLabels=this.showAggregationLabels),t},e.prototype.mergeWith=function(e){for(var t in e)this._defaults.hasOwnProperty(t)&&void r.F8C!=e[t]&&(this[t]=e[t])},e}(),zi.OptionsValueObject=qi,Gi=De||(De={}),Wi=Gi.model||(Gi.model={}),ji=Wi.condition||(Wi.condition={}),Yi=function(e){function i(){var o=e.call(this)||this;if(r.x4C!=i.instance)throw Error(t.D5C);return o}return Ga(i,e),i.getInstance=function(){return r.x4C==i.instance&&(i.instance=new i),i.instance},i.dispose=function(){i.conditions=r.x4C,i.instance=r.x4C},i.add=function(e){r.x4C!=e&&(i.conditions.addItem(e.id,e),this.dispatchReportChange())},i.get=function(e){return i.conditions.getItem(e)},i.remove=function(e){i.conditions.removeItem(e),this.dispatchReportChange()},i.removeAll=function(){i.conditions=new Be.AssociativeArray,this.dispatchReportChange()},i.getObjects=function(){for(var e=[],t=r.F8C;t<i.conditions.length;t++){var o=i.conditions.getItemAt(t);o.isUpdate||e.push(o.toObject())}return e},i.dispatchReportChange=function(){i.getInstance().dispatchWith(Wi._state.StateEvent.REPORT_CHANGED)},i.conditions=new Be.AssociativeArray,i}(s.EventDispatcher),ji.ConditionManager=Yi,Xi=De||(De={}),Ki=Xi.model||(Xi.model={}),function(e){var i=function(){function e(){this.id=r.C4C,this.column=this.row=-r.O8C,this.formula=this.hierarchy=this.member=this.measure=r.C4C,this.params=[]}return Object.defineProperty(e.prototype,"isUpdate",{get:function(){return-r.O8C<this.formula.toLowerCase().indexOf(Xi.data_.consts.FunctionName.UPDATE_DIFFERENCE)||-r.O8C<this.formula.toLowerCase().indexOf(Xi.data_.consts.FunctionName.UPDATE_PERCENT)},enumerable:!r.F8C,configurable:!r.F8C}),e.prototype.toObject=function(){var e={};return e.id=this.id,e.row=this.row,e.column=this.column,void r.F8C!==this.isTotal&&(e.isTotal=this.isTotal),e.measure=this.measure,e.member=this.member,e.hierarchy=this.hierarchy,e.formula=this.formula,r.x4C!=this.format&&(e.format=this.format.toObject(),e.formatCSS=this.format.toString()),e},e.toObject=function(e){return e.toObject()},e.fromObject=function(t){var i=r,o=new e;return o.id=i.x4C!=t.id?t.id:Be.StringUtils.generateID(),i.x4C!=t.row&&(o.row=t.row),i.x4C!=t.column&&(o.column=t.column),i.x4C!=t.isTotal&&(!i.F8C!=t.isTotal&&i.O8C!=t.isTotal||(o.isTotal=!i.F8C),!i.O8C!=t.isTotal&&i.F8C!=t.isTotal||(o.isTotal=!i.O8C)),i.x4C!=t.measure&&(o.measure=t.measure),o.formula=t.formula,i.x4C!=t.trueStyle&&i.x4C==t.format&&(t.format=t.trueStyle),i.x4C!=t.format&&(o.format=i.K2C===typeof t.format?s.fromString(t.format):s.fromObject(t.format)),t=new Be.Lexer,o.params=t.parse(o.formula),i.x4C==o.params?i.x4C:o},e}();e.ConditionValueObject=i;var s=function(){function e(){}return e.fromObject=function(t){var i=r,s=new e;return i.x4C==t?s:(i.x4C!=t.backgroundColor&&(s.backgroundColor=e.color(t.backgroundColor)),i.x4C!=t.color&&(s.color=e.color(t.color)),i.x4C!=t.fontFamily&&(s.fontFamily=t.fontFamily),i.x4C!=t.fontSize&&(s.fontSize=e.size(t.fontSize)),i.x4C!=t.italic&&t.italic&&(s.fontStyle=o.x4B),i.x4C!=t.fontStyle&&(s.fontStyle=t.fontStyle),i.x4C!=t.bold&&t.bold&&(s.fontWeight=o.K4B),i.x4C!=t.fontWeight&&(s.fontWeight=t.fontWeight),i.x4C!=t.padding&&(s.padding=e.size(Math.round(1.5*t.padding))),i.x4C!=t.textAlign&&(s.textAlign=t.textAlign),i.x4C!=t.textIndent&&(s.textIndent=e.size(t.textIndent)),s)},e.fromString=function(i){var o=r,s={};if(i=i.split(t.F9Q),o.x4C!=i)for(var n=o.F8C;n<i.length;n++){var a=i[n].split(t.t7C)[o.F8C],l=i[n].split(t.t7C)[o.O8C];o.C4C!=a&&(s[a]=l)}return e.fromObject(s)},e.prototype.toObject=function(){var e=r,t={};return e.x4C!=this.backgroundColor&&(t.backgroundColor=this.backgroundColor),e.x4C!=this.color&&(t.color=this.color),e.x4C!=this.fontFamily&&(t.fontFamily=this.fontFamily),e.x4C!=this.fontSize&&(t.fontSize=this.fontSize),e.x4C!=this.fontStyle&&(t.fontStyle=this.fontStyle),e.x4C!=this.fontWeight&&(t.fontWeight=this.fontWeight),e.x4C!=this.padding&&(t.padding=this.padding),e.x4C!=this.textAlign&&(t.textAlign=this.textAlign),e.x4C!=this.textIndent&&(t.textIndent=this.textIndent),t},e.prototype.toCSSObject=function(){var e=o,t=r,i={};return t.x4C!=this.backgroundColor&&(i[e.F4B]=this.backgroundColor),t.x4C!=this.color&&(i.color=this.color),t.x4C!=this.fontFamily&&(i[e.M0B]=this.fontFamily),t.x4C!=this.fontSize&&(i[e.b0B]=this.fontSize),t.x4C!=this.fontStyle&&(i["font-style"]=this.fontStyle),t.x4C!=this.fontWeight&&(i[e.M4B]=this.fontWeight),t.x4C!=this.padding&&(i.padding=this.padding),t.x4C!=this.textAlign&&(i[e.b4B]=this.textAlign),t.x4C!=this.textIndent&&(i["text-indent"]=this.textIndent),i},e.prototype.toString=function(){var e,i=r.C4C,o=this.toCSSObject();for(e in o)i+=e+t.t7C+o[e]+t.F9Q;return i},e.color=function(e){return e.replace("0x",t.R7C)},e.size=function(e){var t=r;return t.x2C==typeof e?e+t.y4C:t.K2C==typeof e&&t.F8C>e.indexOf(t.y4C)?e.trim()+t.y4C:e},e}();e.CSSValueObject=s}((Qi=Ki.condition||(Ki.condition={})).vo||(Qi.vo={})),Ji=De||(De={}),Zi=Ji.model||(Ji.model={}),$i=Zi.sizes||(Zi.sizes={}),er=function(e){var i=r,o=/[A-Za-z]+/;function s(){var r=e.call(this)||this;if(i.x4C!=s.instance)throw Error(t.D5C);return r}return Ga(s,e),s.getInstance=function(){return i.x4C==s.instance&&(s.instance=new s),s.instance},s.dispose=function(){s.rowFilterSizes=i.x4C,s.rowHeaderSizes=i.x4C,s.rowSizes=i.x4C,s.rowSizesByIdx=i.x4C,s._rowSizesNamed=i.x4C,s._rowSizesNamedToApply=i.x4C,s.columnHeaderSizes=i.x4C,s.columnSizes=i.x4C,s.columnSizesByIdx=i.x4C,s._columnSizesNamed=i.x4C,s._columnSizesNamedToApply=i.x4C,s.instance=i.x4C},Object.defineProperty(s,"rowSizesNamed",{get:function(){return this._rowSizesNamed=s.toNamedSizes(Ji.data_.consts.AxisName.ROWS_AXIS)},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(s,"columnSizesNamed",{get:function(){return this._columnSizesNamed=s.toNamedSizes(Ji.data_.consts.AxisName.COLUMNS_AXIS)},enumerable:!i.F8C,configurable:!i.F8C}),s.clear=function(){s.rowSizes={},s.columnSizes={},s._rowSizesNamedToApply={},s._rowSizesNamed={},s._columnSizesNamedToApply={},s._columnSizesNamed={},s.rowSizesByIdx={},s.columnSizesByIdx={},s.rowHeaderSizes={},s.columnHeaderSizes={},s.rowFilterSizes={}},s.applySizes=function(e,t,i,r,o,n,a){s.basedOnNamesArray(e)||s.basedOnNamesArray(t)?(s._rowSizesNamedToApply=s.convertSizes(e),s._columnSizesNamedToApply=s.convertSizes(t),s.processSizes()):(s.basedOnNamesObject(e)||s.basedOnNamesObject(t))&&(s._rowSizesNamedToApply=e,s._columnSizesNamedToApply=t,s.processSizes()),s.rowSizesByIdx=i,s.columnSizesByIdx=r,s.rowHeaderSizes=o,s.columnHeaderSizes=n,s.rowFilterSizes=a},s.processSizes=function(){Zi.PivotModel.getInstance().state_.reportState==Zi._state.StateEvent.REPORT_COMPLETE?this.onDataLoaded():Ji.data_.Cube.getInstance().addEventListener(Ji.data_.DataEvent.QUERY_COMPLETE,s.onDataLoaded,i.O8C)},s.basedOnNamesArray=function(e){var t,r=o;for(t in e)if(-i.O8C<e[t].toString().search(r))return!i.F8C;return!i.O8C},s.basedOnNamesObject=function(e){var t,r=o;for(t in e)if(-i.O8C<t.toString().search(r))return!i.F8C;return!i.O8C},s.convertSizes=function(e){var t={};if(i.x4C!=e)for(var r in e){var o=e[r];if(o instanceof Array&&i.F8C<o.length){var s=parseInt(o.pop());t[o.toString()]=s}}return t},s.onDataLoaded=function(){Ji.data_.Cube.getInstance().removeEventListener(Ji.data_.DataEvent.QUERY_COMPLETE,s.onDataLoaded),s.rowSizes=s.fromNamedSizes(Ji.data_.consts.AxisName.ROWS_AXIS),s._rowSizesNamedToApply={},s.columnSizes=s.fromNamedSizes(Ji.data_.consts.AxisName.COLUMNS_AXIS),s._columnSizesNamedToApply={}},s.fromNamedSizes=function(e){var r,o={},n=e==Ji.data_.consts.AxisName.ROWS_AXIS?s._rowSizesNamedToApply:s._columnSizesNamedToApply;for(r in n){var a,l=r.split(t.k6C),h=n[r],c=Ji.data_.Cube.getInstance().slice_.axes.getItem(e).hasMeasures;c&&!Zi._options.OptionsManager.flatView&&(a=l[l.length-i.O8C],l.splice(l.length-i.O8C,i.O8C));for(var d=!i.O8C,u=[],p=i.F8C;p<l.length;p++)if(Zi._options.OptionsManager.flatView)if(e==Ji.data_.consts.AxisName.ROWS_AXIS)u.push(l[p]);else{var C=l[p];if(C=Ji.data_.Cube.getInstance().localDataStorage.keys.indexOf(C),-i.O8C==C){d=!i.F8C;break}u.push(C)}else{if(C=l[p],C=(e==Ji.data_.consts.AxisName.ROWS_AXIS?Ji.data_.Cube.getInstance().slice_.rowsOnly.getItemAt(p):Ji.data_.Cube.getInstance().slice_.columnsOnly.getItemAt(p)).members.getItem(C),i.x4C==C){d=!i.F8C;break}C.isAll?u.push(i.C4C):u.push(C.ordinal.toString())}if(!d){if(c&&!Zi._options.OptionsManager.flatView){if(l=Ji.data_.Cube.getInstance().slice_.measures_.indexOf(a),i.C4C!=a&&-i.O8C==l)continue;u.push(l)}o[u.toString()]=h}}return o},s.toNamedSizes=function(e){var r,o={},n=e==Ji.data_.consts.AxisName.ROWS_AXIS?s.rowSizes:s.columnSizes;for(r in n){var a,l=r.split(t.k6C),h=n[r],c=Ji.data_.Cube.getInstance().slice_.axes.getItem(e).hasMeasures;c&&!Zi._options.OptionsManager.flatView&&(a=parseInt(l[l.length-i.O8C]),l.splice(l.length-i.O8C,i.O8C));for(var d=!i.O8C,u=[],p=i.F8C;p<l.length;p++)if(Zi._options.OptionsManager.flatView)if(e==Ji.data_.consts.AxisName.ROWS_AXIS)u.push(l[p]);else{var C=i.C4C===l[p]?i.F8C:parseInt(l[p]);if(C=Ji.data_.Cube.getInstance().localDataStorage.keys[C],i.x4C==C){d=!i.F8C;break}u.push(C)}else{C=i.C4C===l[p]?i.F8C:parseInt(l[p]);var f=e==Ji.data_.consts.AxisName.ROWS_AXIS?Ji.data_.Cube.getInstance().slice_.rowsOnly.getItemAt(p):Ji.data_.Cube.getInstance().slice_.columnsOnly.getItemAt(p);if(i.x4C==f){d=!i.F8C;break}if(C=f.members.getItemAt(C),i.x4C==C){d=!i.F8C;break}u.push(C.uniqueName)}if(!d){if(c&&!Zi._options.OptionsManager.flatView){if(a>=Ji.data_.Cube.getInstance().slice_.measures_.length)continue;-i.O8C==a&&i.O8C==Ji.data_.Cube.getInstance().slice_.measures_.length&&(a=i.F8C),u.push(Ji.data_.Cube.getInstance().slice_.measures_.getKeyAt(a))}o[u.toString()]=h}}return o},s.rowSizes={},s.columnSizes={},s._rowSizesNamedToApply={},s._rowSizesNamed={},s._columnSizesNamedToApply={},s._columnSizesNamed={},s.startTableRow=i.F8C,s.rowSizesByIdx={},s.columnSizesByIdx={},s.rowHeaderSizes={},s.columnHeaderSizes={},s.rowFilterSizes={},s}(s.EventDispatcher),$i.SizesManager=er,tr=De||(De={}),ir=tr.model||(tr.model={}),rr=ir._export||(ir._export={}),or=function(){var e=r;function i(){}return i.run=function(t,r,n,a){var l=this;tr.preloader(!e.F8C,ir._labels.Labels.MESSAGE_PLEASE_WAIT,o.c4B,!e.F8C,!e.F8C),i.clear(),i.grid=t,i.dataHeight=a,i.dataWidth=n,i.coords=t.gridLayout.coords,i.exportOptions=r,i.pdf=new jsPDF(r.pageOrientation,"mm","a4",!Be.browserVersion().isMsie),i.pageHeight=i.fullPageHeight-e.M8C*i.PAGE_MARGIN,i.pageWidth=i.fullPageWidth-e.M8C*i.PAGE_MARGIN,i.totalColumnCount=i.grid.FIRST_DATA_COLUMN+n,i.totalRowCount=i.grid.FIRST_DATA_ROW+a,i.widthSize={},i.currentYPos=i.PAGE_MARGIN;try{i.calculateColumnCount(),i.getStyles(),i.createHeaderAndFooter(i.exportOptions.header,i.exportOptions.footer,function(){return l.onHeaderAndFooterCreated()})}catch(t){console.error("Export PDF error:",t),tr.uialert(ir._labels.Labels.MESSAGE_EXPORT_ERROR,ir._labels.Labels.ERROR,tr.AlertType.ERROR),tr.preloader(!e.O8C),ir.PivotModel.getInstance().dispatch(new s._Event(tr.PivotEvent.EXPORT_COMPLETE)),i.clear()}},i.createHeaderAndFooter=function(t,r,o){var s="image/jpeg",n="background";try{i.headerHeight=e.F8C,i.footerHeight=e.F8C;var a=e.x4C==t,l=e.x4C==r;if(a&&l)o();else{if(!a){t=(t=t.replace(/##PAGE-NUMBER##/gi,(i.pageNumber+e.O8C).toString())).replace(/##CURRENT-DATE##/gi,(new Date).toLocaleString());var c=new h.UIElement(e.r4C);c.css(e.F3C,e.O3C),c.css(n,"white"),c.setWidth(i.mm2px(i.fullPageWidth-e.M8C*i.HEADER_FOOTER_MARGIN)),c.html(t),tr._view.PivotView.stage.container.prepend(c),html2canvas(c.element,{onrendered:function(t){c.remove();var r=t.toDataURL(s).slice(23);i.headerImage=atob(r),i.headerHeight=i.px2mm(t.height),a=!e.F8C,l&&o()},async:!e.F8C})}if(!l){r=(r=r.replace(/##PAGE-NUMBER##/gi,(i.pageNumber+e.O8C).toString())).replace(/##CURRENT-DATE##/gi,(new Date).toLocaleString());var d=new h.UIElement(e.r4C);d.css(e.F3C,e.O3C),d.css(n,"white"),d.setWidth(i.mm2px(i.fullPageWidth-e.M8C*i.HEADER_FOOTER_MARGIN)),d.html(r),tr._view.PivotView.stage.container.prepend(d),html2canvas(d.element,{onrendered:function(t){d.remove();var r=t.toDataURL(s).slice(23);i.footerImage=atob(r),i.footerHeight=i.px2mm(t.height),l=!e.F8C,a&&o()},async:!e.F8C})}}}catch(t){i.headerImage=e.x4C,i.headerHeight=e.F8C,i.footerImage=e.x4C,i.footerHeight=e.F8C,o()}},i.addHeader=function(e,t){e.addImage(t,"JPEG",i.HEADER_FOOTER_MARGIN,i.HEADER_FOOTER_MARGIN)},i.addFooter=function(e,t){e.addImage(t,"JPEG",i.HEADER_FOOTER_MARGIN,i.fullPageHeight-i.footerHeight-i.HEADER_FOOTER_MARGIN)},i.addHeaderAndFooter=function(){e.x4C!=i.headerImage&&i.addHeader(i.pdf,i.headerImage),e.x4C!=i.footerImage&&i.addFooter(i.pdf,i.footerImage),i.pageHeight=i.fullPageHeight,i.pageHeight-=e.F8C==i.headerHeight?i.PAGE_MARGIN:i.headerHeight+e.M8C*i.HEADER_FOOTER_MARGIN,i.pageHeight-=e.F8C==i.footerHeight?i.PAGE_MARGIN:i.footerHeight+e.M8C*i.HEADER_FOOTER_MARGIN,i.currentYPos=e.F8C==i.headerHeight?i.PAGE_MARGIN:i.headerHeight+e.M8C*i.HEADER_FOOTER_MARGIN},Object.defineProperty(i,"fullPageHeight",{get:function(){return t.Y1Q===i.exportOptions.pageOrientation?297:210},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(i,"fullPageWidth",{get:function(){return t.Y1Q===i.exportOptions.pageOrientation?210:297},enumerable:!e.F8C,configurable:!e.F8C}),i.onHeaderAndFooterCreated=function(){i.addHeaderAndFooter(),i.addTitle(ir._options.OptionsManager.gridTitle,i.pdf),Be.nullOrEmpty(ir._options.OptionsManager.gridTitle)||e.F8C!=i.pageNumber||(i.currentYPos+=e.g8C),i.preprocessData(),Be.ThreadManager.addTask(i.generateRow,e.x4C,e.x4C,function(){return i.onPdfGenerated()})},i.addTitle=function(t,r){if(!Be.nullOrEmpty(t)){r.setTextColor(e.F8C,e.F8C,e.F8C),r.setFontStyle(o.K4B),r.setFontSize(e.e8C);var s=e.e8C*r.getStringUnitWidth(t)/r.internal.scaleFactor;r.text(t,(r.internal.pageSize.width-s)/e.M8C,i.currentYPos)}},i.getStyles=function(){var t=i.grid.gridLayout,r=t.find(o.F0B);i.cellStyle=tr._view.grid.vo.StyleValueObject.fromClass(tr._view.grid.vo.GridStyleName.CELL,r),i.totalCellStyle=tr._view.grid.vo.StyleValueObject.fromClass(tr._view.grid.vo.GridStyleName.CELL+e.s4C+tr._view.grid.vo.GridStyleName.TOTAL,r),i.rowHeaderCellStyle=tr._view.grid.vo.StyleValueObject.fromClass(tr._view.grid.vo.GridStyleName.CELL+e.s4C+tr._view.grid.vo.GridStyleName.HEADER+e.s4C+tr._view.grid.vo.GridStyleName.HEADER_ROW,h.UIElement.convert(t.element)),i.columnHeaderCellStyle=tr._view.grid.vo.StyleValueObject.fromClass(tr._view.grid.vo.GridStyleName.CELL+e.s4C+tr._view.grid.vo.GridStyleName.HEADER+e.s4C+tr._view.grid.vo.GridStyleName.HEADER_COLUMN,h.UIElement.convert(t.element)),i.filterHeaderCellStyle=tr._view.grid.vo.StyleValueObject.fromClass(tr._view.grid.vo.GridStyleName.CELL+e.s4C+tr._view.grid.vo.GridStyleName.HEADER+e.s4C+tr._view.grid.vo.GridStyleName.FILTER_HEADER,h.UIElement.convert(t.element))},i.getColumnWidth=function(t){return.9*(t=(t=i.pixel2mm(i.grid.gridLayout.coords.getColWidth(t)))<i.pageWidth?t:i.pageWidth-e.O8C)},i.setDefaultCellStyle=function(t,i){if(e.x4C!=t&&t.isCustomized){var r=e.F8C<t.style.customStyleNames.length?tr._view.grid.vo.StyleValueObject.fromClass(t.style.getCustomClassString()):tr._view.grid.vo.StyleValueObject.fromString(t.style.getStyleString());r.merge(i),i=r}return i.color=i.color||o.J4B,o.E4B==i.backgroundColor&&(i.color=o.H4B),i.backgroundColor=i.backgroundColor||"rgb(0,0,0,0)",i.borderColor=i.borderColor||"rgb(222,222,222)",i.fontSize=i.fontSize||e.a8C,i},i.getOptionsForCell=function(t){return{fontSize:.85*t.fontSize,fontName:e.x4C==t.fontFamily?i.FONT_NAME:t.fontFamily,fontStyle:tr._view.grid.vo.FontStylePDFType.getFontStyle(parseFloat(t.fontWeight))}},i.preprocessData=function(){i.heigthSize=Array(i.totalRowCount);for(var t,r=e.F8C,o=e.F8C,s=e.F8C;o<i.totalRowCount;){s=r=e.F8C;for(var n=.8*Math.max(i.px2mm(i.coords.getRowHeight(o)),e.o8C);r<i.totalColumnCount;){t=i.grid.gridLayout.getCell(o,r,!e.F8C,!e.F8C);var a=new tr._view.grid.vo.StyleValueObject;if(a=i.cellStyle.clone(),a=i.setDefaultCellStyle(t,a),e.x4C!=t){var l=t.getLabel();e.x2C===typeof l&&(t.value=l,l+=e.C4C,t.numeric=!e.F8C),l=l.replace(/<(?:.|\n)*?>/gi,e.C4C),t=e.x4C!=i.widthSize&&e.x4C!=i.widthSize[r]?i.widthSize[r]:i.getColumnWidth(r),a=i.pdf.splitTextToSize(l,t,i.getOptionsForCell(a)),a=(e.O8C<a.length?i.px2mm(a.length*(e.a8C+e.M8C*i.PADDING)-e.M8C*i.PADDING):i.px2mm(e.a8C*a.length-i.PADDING))/n,s=(a=(a=e.O8C>a?n:(a+e.O8C)*n)>i.pageHeight/e.M8C?(i.pageHeight-e.O8C)/e.M8C:a)>s?a:s}r++}i.heigthSize[o]=s,o++}},i.generateRow=function(){if(i._addingHeaderFooter)return!e.O8C;for(var t=Be.getTimer(),r=e.F8C;r<i.BLOCK_SIZE;r++){if(i.pageIsFilled&&(i.addNewPage(),i._addingHeaderFooter))return!e.O8C;var s,n=e.F8C,a=i.PAGE_MARGIN,l=(n=!e.O8C,e.C4C),h=i.currentRowIdx-i.currentStartRowIdx<i.grid.FIRST_DATA_ROW&&i.currentRowIdx>i.grid.START_HEADERS_COLUMN?i.currentRowIdx-i.currentStartRowIdx:i.currentRowIdx,c=i.heigthSize[h];for(i.currentColIdx=i.currentStartColIdx;i.currentColIdx<i.currentColumnCount+i.currentStartColIdx;){if(s=(n=ir._options.OptionsManager.flatView?!e.O8C:i.currentColIdx==i.currentStartColIdx&&i.currentColIdx>i.grid.START_HEADERS_COLUMN)?i.grid.START_HEADERS_COLUMN:i.currentColIdx,i.allRowsGenerated()||!(i.rowsHeightSum+c<=i.pageHeight)){i.pageIsFilled=!e.F8C;break}if(.9*(a+(n=e.x4C!=i.widthSize&&e.x4C!=i.widthSize[s]?i.widthSize[s]:i.getColumnWidth(s)))>i.pageWidth)break;s=i.grid.gridLayout.getCell(h,s,!e.F8C,!e.F8C),l=Be.nullOrUndefined(s)?e.C4C:s.getLabel(),e.x2C===typeof l&&(s.value=l,l+=e.C4C,s.numeric=!e.F8C);var d=(l=l.replace(/<(?:.|\n)*?>/gi,e.C4C)).match(/&#(\d{3,4});/gi);if(d)for(var u,p=e.F8C;p<d.length;p++)u=parseInt(d[p].substring(e.M8C,d[p].length-e.O8C)),l=l.replace(d[p],String.fromCharCode(u));d=[l],p=new tr._view.grid.vo.StyleValueObject,e.x4C!=s&&s.isRowHeader?(p=i.rowHeaderCellStyle.clone(),p=i.setDefaultCellStyle(s,p),d=i.pdf.splitTextToSize(l,n,i.getOptionsForCell(p))):e.x4C!=s&&s.isColumnHeader?(p=i.columnHeaderCellStyle.clone(),p=i.setDefaultCellStyle(s,p),d=i.pdf.splitTextToSize(l,n,i.getOptionsForCell(p))):e.x4C!=s&&s.isFilterHeader?(p=i.filterHeaderCellStyle.clone(),p=i.setDefaultCellStyle(s,p)):e.x4C!=s&&s.isTotal&&e.C4C!=s.getLabel()?(p=i.totalCellStyle.clone(),p=i.setDefaultCellStyle(s,p)):(p=i.cellStyle.clone(),p=i.setDefaultCellStyle(s,p),d=i.pdf.splitTextToSize(l,n,i.getOptionsForCell(p))),u=d.length;var C=e.O8C<u?i.px2mm(d.length*(p.fontSize+e.M8C*i.PADDING)-e.M8C*i.PADDING):i.px2mm(d.length*p.fontSize-i.PADDING);C>i.pageHeight/e.M8C&&(C=(i.pageHeight-e.J8C)/e.M8C,u=Math.floor(i.mm2px(C)/(p.fontSize+e.M8C*i.PADDING))),p.fontSize*=.7;var f=tr._view.grid.vo.StyleValueObject.parseRGB(p.backgroundColor);if(i.pdf.setFillColor(f[e.F8C],f[e.O8C],f[e.M8C],e.F8C!=f[e.b8C]?void e.F8C:e.F8C),f=tr._view.grid.vo.StyleValueObject.parseRGB(p.borderColor),i.pdf.setDrawColor(f[e.F8C],f[e.O8C],f[e.M8C],e.F8C!=f[e.b8C]?void e.F8C:e.F8C),f=tr._view.grid.vo.StyleValueObject.parseRGB(p.color),i.pdf.setTextColor(f[e.F8C],f[e.O8C],f[e.M8C]),i.pdf.setFontStyle(o.K4B==p.fontWeight?o.K4B:"normal"),i.pdf.setFontSize(p.fontSize),i.pdf.rect(a,i.currentYPos,n,c,"FD"),C=i.currentYPos+(c-C)/e.M8C+i.PADDING,e.j2C==p.textAlign)if(e.O8C<d.length)for(r=e.F8C;r<u;r++)i.pdf.text(d[r],a+n-i.PADDING,C,e.x4C,e.x4C,e.j2C),C+=e.M8C*i.PADDING;else i.pdf.text(l,a+n-i.PADDING,C,e.x4C,e.x4C,e.j2C);else if(e.O8C<d.length)for(r=e.F8C;r<u;r++)p=!ir._options.OptionsManager.classicView&&e.x4C!=s&&e.F8C<s.level?(s.level+e.O8C)*i.PADDING:i.PADDING,i.pdf.text(d[r],a+p,C),C+=e.M8C*i.PADDING;else p=!ir._options.OptionsManager.classicView&&e.x4C!=s&&e.F8C<s.level?(s.level+e.O8C)*i.PADDING:i.PADDING,i.pdf.text(l,a+p,C);i.currentColIdx++,a+=n}if(i.pageIsFilled||(i.currentYPos+=c,i.rowsHeightSum+=c,i.currentRowIdx++),i.allColumnsGenerated()&&i.allRowsGenerated())break}return i.BLOCK_SIZE=Be.ThreadManager.adjustTaskSize(Be.getTimer()-t,i.BLOCK_SIZE),i.allColumnsGenerated()&&i.allRowsGenerated()},i.allColumnsGenerated=function(){return i.currentStartColIdx+i.currentColumnCount>=i.dataWidth+i.grid.FIRST_DATA_COLUMN},i.allRowsGenerated=function(){return i.currentRowIdx>=i.dataHeight+i.grid.FIRST_DATA_ROW},i.addNewPage=function(){i.pdf.addPage(),i.pageNumber++,i.pageIsFilled=!e.O8C,i._addingHeaderFooter=!e.F8C,i.createHeaderAndFooter(i.exportOptions.header,i.exportOptions.footer,function(){i._addingHeaderFooter=!e.O8C,i.addHeaderAndFooter()}),i.rowsHeightSum=e.F8C,e.O8C<i.pageNumber&&(i.shiftRows(),i.shiftColumns()),tr.preloader(!e.F8C,ir._labels.Labels.MESSAGE_PLEASE_WAIT,i.pageNumber+e.O8C+e.s4C+ir._labels.Labels.MESSAGE_PAGES_WERE_GENERATED,!e.F8C)},i.shiftRows=function(){i.allColumnsGenerated()&&!i.allRowsGenerated()?(i.currentRowIdx-=i.grid.FIRST_DATA_ROW,i.currentStartRowIdx=i.currentRowIdx):i.currentRowIdx=i.currentStartRowIdx},i.shiftColumns=function(){i.allColumnsGenerated()?i.allRowsGenerated()||(i.currentStartColIdx=e.F8C,i.currentColIdx=e.F8C):(i.currentStartColIdx+=i.currentColumnCount,i.currentColIdx=i.currentStartColIdx),i.calculateColumnCount()},i.calculateColumnCount=function(){i.currentColumnCount=e.F8C;var t=i.currentStartColIdx,r=e.F8C,o=e.F8C;for((ir._options.OptionsManager.flatView?e.F8C:i.currentStartColIdx>=i.grid.FIRST_DATA_COLUMN)&&(o+=r=i.getColumnWidth(i.grid.START_HEADERS_COLUMN),i.currentColumnCount++,i.currentStartColIdx--,i.currentColIdx--);t<i.totalColumnCount;){if((r=i.getColumnWidth(t))>i.pageWidth/e.M8C-i.PAGE_MARGIN&&(r=(i.pageWidth+i.PAGE_MARGIN)/e.M8C,i.widthSize[t]=r),!((o+=r)<=i.pageWidth)){e.F8C==i.currentColumnCount&&(i.currentColumnCount=e.O8C);break}i.currentColumnCount++,t++}},i.onPdfGenerated=function(){e.F8C==i.exportOptions.filename.length&&(i.exportOptions.filename="vertical.pdf");var t=i.pdf.output();t=Be.StringUtils.strToUint8Arr(t),rr.ExportManager.save(t,i.exportOptions),i.clear(),ir.PivotModel.getInstance().dispatch(new s._Event(tr.PivotEvent.EXPORT_COMPLETE))},i.clear=function(){i.grid=e.x4C,i.exportOptions=e.x4C,i.pdf=e.x4C,i.dataWidth=e.F8C,i.dataHeight=e.F8C,i.totalColumnCount=e.F8C,i.totalRowCount=e.F8C,i.currentColumnCount=e.F8C,i.currentColIdx=e.F8C,i.currentStartColIdx=e.F8C,i.currentRowIdx=e.F8C,i.currentStartRowIdx=e.F8C,i.rowsHeightSum=e.F8C,i.currentYPos=e.F8C,i.pageIsFilled=!e.O8C,i.pageNumber=e.F8C,i.pageHeight=e.F8C,i.pageWidth=e.F8C,i.headerHeight=e.F8C,i.headerImage=e.x4C,i.footerHeight=e.F8C,i.footerImage=e.x4C},i.pixel2mm=function(e){return.264*e},i.mm2px=function(e){return 3.779*e},i.px2mm=function(e){return e/3.779},i.FONT_NAME="Helvetica",i.PAGE_MARGIN=e.A8C,i.pageIsFilled=!e.O8C,i.pageNumber=e.F8C,i.HEADER_FOOTER_MARGIN=e.g8C,i.headerHeight=e.F8C,i.footerHeight=e.F8C,i._addingHeaderFooter=!e.O8C,i.BLOCK_SIZE=e.J8C,i.PADDING=i.pixel2mm(e.t8C),i}(),rr.ExportPDF=or,sr=De||(De={}),nr=sr.model||(sr.model={}),ar=nr._export||(nr._export={}),lr=function(){var e=r;function i(){throw Error(t.D5C)}return i.run=function(t,r,o,n){i.grid=t,i.dataWidth=o,i.dataHeight=n,i.exportOptions=r;try{i.exportToHTML()}catch(t){console.error("Export HTML error:",t),sr.uialert(nr._labels.Labels.MESSAGE_EXPORT_ERROR,nr._labels.Labels.ERROR,sr.AlertType.ERROR),sr.preloader(!e.O8C),nr.PivotModel.getInstance().dispatch(new s._Event(sr.PivotEvent.EXPORT_COMPLETE)),i.clear()}},i.exportToHTML=function(){sr.preloader(!e.F8C,nr._labels.Labels.MESSAGE_EXPORT_PROGRESS),i.htmlString=e.C4C,i.rowIdx=i.grid.START_TABLE_ROW,i.stylesList=[],Be.ThreadManager.addTask(i.generateRow,e.x4C,e.x4C,i.onHTMLExportComplete)},i.generateStyle=function(){var t=o,r=e.C4C,s=i.grid.gridLayout,n=s.find(t.F0B);for(r=(r=(r=(r=(r=(r=(r=(r+=Be.StringUtils.bind("body{{0}}\n",sr._view.grid.vo.StyleValueObject.fromItemToString(h.UIElement.convert(s.element),[t.M0B])))+Be.StringUtils.bind(".grid{border-collapse:collapse;{0}border-top:1px solid #e9e9e9;border-left:1px solid #e9e9e9;}\n",sr._view.grid.vo.StyleValueObject.fromItemToString(h.UIElement.convert(s.element),[t.M0B,t.b0B,t.W2B])))+Be.StringUtils.bind(".title{{0}}\n",sr._view.grid.vo.StyleValueObject.fromClassToString(sr._view.grid.vo.GridStyleName.TITLE,h.UIElement.convert(s.element))))+Be.StringUtils.bind(t.n0B,sr._view.grid.vo.StyleValueObject.fromClassToString(sr._view.grid.vo.GridStyleName.CELL,n)))+Be.StringUtils.bind(t.t0B,sr._view.grid.vo.StyleValueObject.fromClassToString(sr._view.grid.vo.GridStyleName.CELL+e.s4C+sr._view.grid.vo.GridStyleName.TOTAL,n)))+Be.StringUtils.bind(t.c0B,sr._view.grid.vo.StyleValueObject.fromClassToString(sr._view.grid.vo.GridStyleName.CELL+e.s4C+sr._view.grid.vo.GridStyleName.HEADER+e.s4C+sr._view.grid.vo.GridStyleName.HEADER_ROW,h.UIElement.convert(s.element))))+Be.StringUtils.bind(t.L0B,sr._view.grid.vo.StyleValueObject.fromClassToString(sr._view.grid.vo.GridStyleName.CELL+e.s4C+sr._view.grid.vo.GridStyleName.HEADER+e.s4C+sr._view.grid.vo.GridStyleName.HEADER_COLUMN,h.UIElement.convert(s.element))))+Be.StringUtils.bind(t.a0B,sr._view.grid.vo.StyleValueObject.fromClassToString(sr._view.grid.vo.GridStyleName.CELL+e.s4C+sr._view.grid.vo.GridStyleName.HEADER+e.s4C+sr._view.grid.vo.GridStyleName.FILTER_HEADER,h.UIElement.convert(s.element))),n=e.O8C;e.J8C>=n;n++)r+=Be.StringUtils.bind(t.e0B,n,sr._view.grid.vo.StyleValueObject.fromClassToString(sr._view.grid.vo.GridStyleName.HEADER_ROW+e.s4C+sr._view.grid.vo.GridStyleName.LEVEL+n,h.UIElement.convert(s.element),[t.h0B]));for(n=e.F8C;n<i.stylesList.length;n++)r+=Be.StringUtils.bind(t.R0B,i.stylesList[n],sr._view.grid.vo.StyleValueObject.fromClassToString(i.stylesList[n],h.UIElement.convert(s.element)));return r},i.appendStylesList=function(t){for(var r=e.F8C;r<t.length;r++)e.F8C>i.stylesList.indexOf(t[r])&&i.stylesList.push(t[r])},i.generateRow=function(){for(var r,s=o,n=t,a=Be.getTimer(),l=Math.min(i.rowIdx+i.BLOCK_SIZE,i.dataHeight+i.grid.FIRST_DATA_ROW),h=e.C4C;i.rowIdx<l;i.rowIdx++){h=e.C4C;for(var c=i.grid.START_HEADERS_COLUMN;c<i.dataWidth+i.grid.FIRST_DATA_COLUMN;c++)if(r=i.grid.gridLayout.getCell(i.rowIdx,c,!e.F8C,!e.F8C),h+=n.p0B+(r?r.getLabel():e.C4C)+n.X0B,e.x4C==r)h=Be.StringUtils.bind(h,n.B0B);else{var d=e.C4C,u=e.C4C;r.isCustomized&&(u=r.style.getStyleString(),d=r.style.getCustomClassString(),i.appendStylesList(r.style.customStyleNames)),d=r.isRowHeader?d+(n.Y0B+r.level):r.isColumnHeader?d+n.q0B:r.isFilterHeader?d+s.u0B:r.isTotal&&e.C4C!=r.getLabel()?d+s.z0B:d+s.N0B,e.x4C!=r&&r.isFilterHeader&&(d+=" level"+r.level),e.C4C!=d.trim()&&(d=s.D0B+d.trim()+n.v9Q),u+="width:"+i.grid.gridLayout.coords.getColWidth(c)+"px;",e.C4C!=u.trim()&&(u=s.x0B+u.trim()+n.v9Q),h=Be.StringUtils.bind(h,d+e.s4C+u)}i.rowsString+="<tr>"+h+"</tr>"}return i.BLOCK_SIZE=Be.ThreadManager.adjustTaskSize(Be.getTimer()-a,i.BLOCK_SIZE),i.showProgress(i.rowIdx),i.rowIdx>=i.dataHeight+i.grid.FIRST_DATA_ROW},i.showProgress=function(t){sr.preloader(!e.F8C,nr._labels.Labels.MESSAGE_EXPORT_PROGRESS,Be.StringUtils.bind("{0}%",(t/(i.dataHeight+i.grid.FIRST_DATA_ROW)*e.o0C).toFixed(e.F8C)))},i.onHTMLExportComplete=function(){sr.preloader(!e.O8C),i.saveHTMLExport(),i.clear()},i.saveHTMLExport=function(){var r=t;e.F8C==i.exportOptions.filename.length&&(i.exportOptions.filename="pivotgrid.html");var o=e.C4C;Be.nullOrEmpty(i.exportOptions.header)||(o+=i.exportOptions.header.replace(/##PAGE-NUMBER##/gi,e.C4C).replace(/##CURRENT-DATE##/gi,(new Date).toLocaleString())),o+="<div class='title'>"+nr._options.OptionsManager.gridTitle+"</div>",o+="<table class='grid'>"+i.rowsString+"</table>",Be.nullOrEmpty(i.exportOptions.footer)||(o+=i.exportOptions.footer.replace(/##PAGE-NUMBER##/gi,e.C4C).replace(/##CURRENT-DATE##/gi,(new Date).toLocaleString())),i.htmlString="<!DOCTYPE html><html><head><meta charset='UTF-8'/>",i.htmlString+=r.o5C+(Be.nullOrEmpty(nr._options.OptionsManager.gridTitle)?nr._labels.Labels.DEFAULT_EXPORT_TITLE:nr._options.OptionsManager.gridTitle)+r.n5C,i.htmlString+=r.t5C+i.generateStyle()+"</style></head>",i.htmlString+=r.e5C+o+"</body></html>",ar.ExportManager.save(i.htmlString,i.exportOptions),nr.PivotModel.getInstance().dispatch(new s._Event(sr.PivotEvent.EXPORT_COMPLETE))},i.clear=function(){i.rowIdx=e.F8C,i.htmlString=e.C4C,i.rowsString=e.C4C,i.dataWidth=e.F8C,i.dataHeight=e.F8C,i.grid=e.x4C,i.exportOptions=e.x4C},i.rowIdx=e.F8C,i.htmlString=e.C4C,i.rowsString=e.C4C,i.BLOCK_SIZE=e.J8C,i}(),ar.ExportHTML=lr,hr=De||(De={}),cr=hr.model||(hr.model={}),dr=cr._export||(cr._export={}),ur=function(){var e=r,i="1899-12-30";function n(){throw Error(t.D5C)}return n.run=function(t,i,r,o){n.grid=t,n.dataWidth=r,n.dataHeight=o,n.exportOptions=i;try{n.exportToXLS()}catch(t){console.error("Export XLS error:",t),hr.uialert(cr._labels.Labels.MESSAGE_EXPORT_ERROR,cr._labels.Labels.ERROR,hr.AlertType.ERROR),hr.preloader(!e.O8C),cr.PivotModel.getInstance().dispatch(new s._Event(hr.PivotEvent.EXPORT_COMPLETE))}},n.exportToXLS=function(){hr.preloader(!e.F8C,cr._labels.Labels.MESSAGE_EXPORT_PROGRESS),n.rowIdx=n.grid.START_TABLE_ROW,n.xlsPadding=e.F8C,n.xlsDocument=new gd.XLS;var t=Be.nullOrEmpty(cr._options.OptionsManager.gridTitle)?cr._labels.Labels.DEFAULT_EXPORT_TITLE:cr._options.OptionsManager.gridTitle.replace(/[^a-zA-Z\d\s\-|+@#$^&()_,.!]/g,e.C4C);t=e.F8C<n.exportOptions.excelSheetName.length?n.exportOptions.excelSheetName:t,e.I8C<t.length&&(t=t.substr(e.F8C,e.S8C)+o.c4B),t=new gd.XLSSheet(t),n.xlsDocument.sheets.push(t),n.getStyles(),n.addTitle(),n.addXLSCustomFields(),n.addFilters(),Be.ThreadManager.addTask(n.generateXLSRow,e.x4C,e.x4C,function(){return n.onXLSExportComplete()})},n.getStyles=function(){var t=n.grid.gridLayout.element;n.cellStyle=hr._view.grid.vo.StyleValueObject.fromClass(hr._view.grid.vo.GridStyleName.CELL,h.UIElement.convert(t)),n.totalCellStyle=hr._view.grid.vo.StyleValueObject.fromClass(hr._view.grid.vo.GridStyleName.CELL+e.s4C+hr._view.grid.vo.GridStyleName.TOTAL,h.UIElement.convert(t)),n.rowHeaderCellStyle=hr._view.grid.vo.StyleValueObject.fromClass(hr._view.grid.vo.GridStyleName.CELL+e.s4C+hr._view.grid.vo.GridStyleName.HEADER+e.s4C+hr._view.grid.vo.GridStyleName.HEADER_ROW,h.UIElement.convert(t)),n.columnHeaderCellStyle=hr._view.grid.vo.StyleValueObject.fromClass(hr._view.grid.vo.GridStyleName.CELL+e.s4C+hr._view.grid.vo.GridStyleName.HEADER+e.s4C+hr._view.grid.vo.GridStyleName.HEADER_COLUMN,h.UIElement.convert(t)),n.filterHeaderCellStyle=hr._view.grid.vo.StyleValueObject.fromClass(hr._view.grid.vo.GridStyleName.CELL+e.s4C+hr._view.grid.vo.GridStyleName.HEADER+e.s4C+hr._view.grid.vo.GridStyleName.FILTER_HEADER,h.UIElement.convert(t));for(var i=e.O8C;e.J8C>=i;i++)n.rowHeaderLevelsCellStyle[i]=hr._view.grid.vo.StyleValueObject.fromClass(hr._view.grid.vo.GridStyleName.CELL+e.s4C+hr._view.grid.vo.GridStyleName.HEADER+e.s4C+hr._view.grid.vo.GridStyleName.HEADER_ROW+e.s4C+hr._view.grid.vo.GridStyleName.LEVEL+i,h.UIElement.convert(t))},n.onXLSExportComplete=function(){n.mergeTitleCells(),hr.preloader(!e.O8C),n.saveXLSExport()},n.saveXLSExport=function(){n.rowIdx=n.grid.START_TABLE_ROW,e.F8C==n.exportOptions.filename.length&&(n.exportOptions.filename="vertical.xlsx"),dr.ExportManager.save(n.xlsDocument.toUint8Array(),n.exportOptions),n.xlsDocument=e.x4C,n.exportOptions=e.x4C,cr.PivotModel.getInstance().dispatch(new s._Event(hr.PivotEvent.EXPORT_COMPLETE))},n.generateXLSRow=function(){for(var i=o,r=Be.getTimer(),s=n.dataHeight+n.grid.FIRST_DATA_ROW;n.rowIdx<s;n.rowIdx++){if(e.o0C<Be.getTimer()-r){if(r=n.rowIdx/s*e.o0C,e.o0C<r)return!e.O8C;hr.preloader(!e.F8C,cr._labels.Labels.MESSAGE_EXPORT_PROGRESS,Be.StringUtils.bind("{0}% ({1} rows)",r.toFixed(e.F8C),n.rowIdx.toString()));break}for(var a=n.grid.START_HEADERS_COLUMN;a<n.dataWidth+n.grid.FIRST_DATA_COLUMN;a++){var l,h=n.grid.gridLayout.getCell(n.rowIdx,a,!e.F8C,!e.F8C),c=Be.nullOrUndefined(h)?e.C4C:h.getLabel();Be.nullOrUndefined(h)||e.x4C!=h.measure&&(h.measure.type==hr.data_.types.MeasureType.DATE?isNaN(h.value)||(l=n.convertToExcelDate(h.value)):h.measure.type==hr.data_.types.MeasureType.DATETIME&&(isNaN(h.value)||(l=n.convertToExcelDateTime(h.value)))),e.x2C===typeof c&&(h.value=c,c+=e.C4C,h.numeric=!e.F8C);var d=e.x4C!=h&&(h.isRowHeader||h.isColumnHeader);if(n.exportOptions.excelExportAll&&e.C4C==c&&e.x4C!=h&&e.x4C!=h.member&&(c=h.member.caption),e.C4C!=c.trim()||d){d=new hr._view.grid.vo.StyleValueObject,d=e.x4C!=h&&h.isRowHeader?e.F8C<h.level&&n.rowHeaderLevelsCellStyle[h.level]?n.rowHeaderLevelsCellStyle[h.level].clone():n.rowHeaderCellStyle.clone():e.x4C!=h&&h.isColumnHeader?n.columnHeaderCellStyle.clone():e.x4C!=h&&h.isFilterHeader?n.filterHeaderCellStyle.clone():e.x4C!=h&&h.isTotal&&e.C4C!=h.getLabel()?n.totalCellStyle.clone():n.cellStyle.clone(),e.x4C!=h&&h.isCustomized&&((f=e.F8C<h.style.customStyleNames.length?hr._view.grid.vo.StyleValueObject.fromClass(h.style.getCustomClassString()):hr._view.grid.vo.StyleValueObject.fromString(h.style.getStyleString())).merge(d),d=f),d.color=d.color||i.J4B,i.E4B==d.backgroundColor&&(d.color=i.H4B),d.backgroundColor=d.backgroundColor||t.Q7C,d.fontSize=d.fontSize?n.px2pt(d.fontSize):e.t8C;var u=new gd.styles.fonts.XLSStyleFont("Tahoma",d.fontSize,Be.StringUtils.fromRgbToHex(d.color));u.bold=i.K4B==d.fontWeight,u.italic=!e.O8C;var p=e.x4C,C=f=!e.O8C;if(h.numeric){if(e.x4C!=h.measure){p=h.measure.getFormat(),C=e.C4C!=p.nullValue?!e.F8C:C;var f=h.measure.aggregation==hr.data_.consts.AggregationName.PERCENT||h.measure.aggregation==hr.data_.consts.AggregationName.PERCENT_COLUMN||h.measure.aggregation==hr.data_.consts.AggregationName.PERCENT_ROW||h.measure.aggregation==hr.data_.consts.AggregationName.PERCENT_DIFFERENCE||h.measure.calculated&&-e.O8C<h.measure.formula.indexOf(i.g2B),m=p.toXLSFormatCode();(f||p.isPercent)&&((p=p.clone()).currencySymbol=e.C4C==p.currencySymbol?i.o2B:p.currencySymbol,m=p.toXLSFormatCode()),p=new gd.styles.format.XLSStyleFormat(e.C4C==m?e.F8C:-e.O8C,m)}}else e.x4C==h.measure||h.measure.type!=hr.data_.types.MeasureType.DATE&&h.measure.type!=hr.data_.types.MeasureType.DATETIME||(p=new gd.styles.format.XLSStyleFormat(e.R8C,e.C4C));p&&n.xlsDocument.styleSheet.addFormat(p),u=new gd.styles.XLSStyle(u,Be.StringUtils.fromRgbToHex(d.backgroundColor),p,d.textAlign),!cr._options.OptionsManager.classicView&&h&&h.isRowHeader&&e.F8C<h.level&&(u.textIndent=h.level),n.xlsDocument.styleSheet.addStyle(u),p=e.x4C!=h.measure?h.measure.getFormat():e.x4C,h.numeric?e.x4C==p||h.label!=p.infinityValue&&h.label!=p.divideByZeroValue?(l=e.x4C==p||!f&&i.o2B!=p.currencySymbol?h.value:h.value/e.o0C,n.xlsDocument.sheets[e.F8C].setCell(n.rowIdx-n.grid.START_TABLE_ROW+n.xlsPadding,a,isNaN(h.value)&&C?h.getLabel():l,u)):n.xlsDocument.sheets[e.F8C].setCell(n.rowIdx-n.grid.START_TABLE_ROW+n.xlsPadding,a,h.getLabel(),u):!h.isValue||e.x4C==h.measure||h.measure.type!=hr.data_.types.MeasureType.DATE&&h.measure.type!=hr.data_.types.MeasureType.DATETIME?h.isValue&&e.x4C!=h.measure&&h.measure.aggregation==hr.data_.consts.AggregationName.NONE?n.xlsDocument.sheets[e.F8C].setCell(n.rowIdx-n.grid.START_TABLE_ROW+n.xlsPadding,a,h.value,u):n.xlsDocument.sheets[e.F8C].setCell(n.rowIdx-n.grid.START_TABLE_ROW+n.xlsPadding,a,c,u):n.xlsDocument.sheets[e.F8C].setCell(n.rowIdx-n.grid.START_TABLE_ROW+n.xlsPadding,a,l,u),e.x4C!=h&&(e.F8C==n.xlsDocument.sheets[e.F8C].getColumnWidth(a)&&(h=n.convertPixelsToWidth(n.grid.gridLayout.coords.getColWidth(a)),n.xlsDocument.sheets[e.F8C].setColumnWidth(a,h)),a!=n.grid.START_HEADERS_COLUMN||n.grid.gridLayout.coords.isRowHeightDefault(n.rowIdx)||(h=n.convertPixelsToPoints(n.grid.gridLayout.coords.getRowHeight(n.rowIdx)),n.xlsDocument.sheets[e.F8C].setRowHeight(n.rowIdx+n.xlsPadding,h)),c.length>d.width&&n.xlsDocument.sheets[e.F8C].setColumnWidth(a,n.convertPixelsToPoints(c.length+n.cellPadding)>n.convertPixelsToPoints(n.DEFAULT_CELL_WIDTH)?n.convertPixelsToPoints(n.DEFAULT_CELL_WIDTH):n.convertPixelsToPoints(c.length+n.cellPadding)))}}}return n.rowIdx>=s},n.convertToExcelDate=function(e){return Be.DateFormat.isUTCFormat(cr._options.OptionsManager.datePattern)||(e-=6e4*new Date(e).getTimezoneOffset()),e=-Date.parse(i)+e,Math.floor(e/864e5)},n.convertToExcelDateTime=function(e){return Be.DateFormat.isUTCFormat(cr._options.OptionsManager.dateTimePattern)||(e-=6e4*new Date(e).getTimezoneOffset()),(-Date.parse(i)+e)/864e5},n.px2pt=function(e){return.75*e},n.convertPixelsToPoints=function(t){return e.F8C>=t?e.F8C:n.defaultExcelCellHeightPoints/n.defaultExcelCellHeightPixels*t*(n.defaultExcelCellHeightPixels/hr._view.grid.sheet.GridCoords.CELL_HEIGHT)},n.convertPixelsToWidth=function(t){return e.F8C>=t?e.F8C:((t-e.g8C)/e.n8C*e.o0C+.5)/e.o0C},n.addXLSCustomFields=function(){var i=o,r=cr.report.CustomFieldsManager.customFields;if(e.F8C<r.length){var s=getComputedStyle(hr._view.PivotView.stage.container.find(t.f7C+hr._view.grid.vo.GridStyleName.HEADER_COLUMN).element),a=new gd.styles.fonts.XLSStyleFont(s.fontFamily,parseInt(s.fontSize)-e.M8C,Be.StringUtils.fromRgbToHex(s.color));a.bold=i.K4B===s.fontWeight,a.italic=i.x4B===s.fontStyle,(a=new gd.styles.XLSStyle(a,Be.StringUtils.fromRgbToHex(s.backgroundColor))).textAlign=s.textAlign,n.xlsDocument.styleSheet.addStyle(a),n.xlsDocument.sheets[e.F8C].setCell(n.xlsPadding,e.F8C,"Report Information",a),n.xlsDocument.sheets[e.F8C].setCell(n.xlsPadding,e.O8C,e.C4C,a),s=getComputedStyle(hr._view.PivotView.stage.container.find(t.f7C+hr._view.grid.vo.GridStyleName.CELL).element);var l=new gd.styles.fonts.XLSStyleFont(s.fontFamily,parseInt(s.fontSize)-e.M8C,Be.StringUtils.fromRgbToHex(s.color));for(l.bold=i.K4B===s.fontWeight,l.italic=i.x4B===s.fontStyle,(l=new gd.styles.XLSStyle(l,Be.StringUtils.fromRgbToHex(s.backgroundColor))).textAlign=s.textAlign,n.xlsDocument.styleSheet.addStyle(l),s=e.F8C;s<r.length;s++)n.xlsDocument.sheets[e.F8C].setCell(s+e.O8C+n.xlsPadding,e.F8C,String(r[s].name),a),n.xlsDocument.sheets[e.F8C].setCell(s+e.O8C+n.xlsPadding,e.O8C,String(r[s].value),a)}n.xlsPadding+=e.F8C==r.length?e.F8C:r.length+e.M8C},n.addTitle=function(){var i=cr._options.OptionsManager.gridTitle;if(e.F8C!=i.length){var r=getComputedStyle(hr._view.PivotView.stage.container.find(t.f7C+hr._view.grid.vo.GridStyleName.TITLE).element),s=new gd.styles.fonts.XLSStyleFont(r.fontFamily,parseInt(r.fontSize)-e.M8C,Be.StringUtils.fromRgbToHex(r.color));s.bold=o.K4B===r.fontWeight,s.italic=o.x4B===r.fontStyle,(r=new gd.styles.XLSStyle(s,Be.StringUtils.fromRgbToHex(r.backgroundColor))).textAlign="center",n.xlsDocument.styleSheet.addStyle(r),n.xlsDocument.sheets[e.F8C].setCell(e.F8C,e.F8C,i,r),n.xlsPadding=e.O8C}},n.mergeTitleCells=function(){if(e.F8C<cr._options.OptionsManager.gridTitle.length){var t=n.xlsDocument.sheets[e.F8C];t.mergeCells(e.F8C,e.F8C,Math.min(t.columnsCount,e.L8C))}},n.addFilters=function(){var i=o,r=t;if(n.exportOptions.showFilters){var s,a=cr.PivotModel.getInstance().cube_.slice_.allHierarchies(),l=[],h=e.C4C,c=!e.F8C,d=getComputedStyle(hr._view.PivotView.stage.container.find(r.f7C+hr._view.grid.vo.GridStyleName.HEADER).element),u=new gd.styles.fonts.XLSStyleFont(d.fontFamily,parseInt(d.fontSize)-e.M8C,Be.StringUtils.fromRgbToHex(d.color));u.bold=i.K4B===d.fontWeight,u.italic=i.x4B===d.fontStyle,(u=new gd.styles.XLSStyle(u,Be.StringUtils.fromRgbToHex(d.backgroundColor))).textAlign=d.textAlign,n.xlsDocument.styleSheet.addStyle(u);var p=getComputedStyle(hr._view.PivotView.stage.container.find(r.f7C+hr._view.grid.vo.GridStyleName.CELL).element);(d=new gd.styles.fonts.XLSStyleFont(p.fontFamily,parseInt(p.fontSize)-e.M8C,Be.StringUtils.fromRgbToHex(p.color))).bold=i.K4B===p.fontWeight,d.italic=i.x4B===p.fontStyle,(d=new gd.styles.XLSStyle(d,Be.StringUtils.fromRgbToHex(p.backgroundColor))).textAlign=p.textAlign,n.xlsDocument.styleSheet.addStyle(d),p=n.xlsDocument.sheets[e.F8C],h=!e.O8C;for(var C=e.F8C,f=e.F8C;f<a.length;f++)if(h=(s=a.getItemAt(f)).dimension.type==hr.data_.types.DimensionType.MD_DIMTYPE_TIME,s.hasFilter()){if(l.length=e.F8C,h)h=n.composeDateRange(s);else{for(var m=e.F8C;m<s.filterMembers.length;m++)h=s.filterMembers.getItemAt(m),l.push(h.caption);h=l.join(r.P7C)}c&&(p.setCell(C+n.xlsPadding,e.F8C,e.C4C,u),p.setCell(C+n.xlsPadding,e.O8C,"Filters",u),C++),p.setCell(C+n.xlsPadding,e.F8C,s.caption,u),p.setCell(C+n.xlsPadding,e.O8C,h,d),C++,c=!e.O8C}if(cr._options.OptionsManager.gridType==hr._view.grid.GridType.FLAT)for(a=cr.PivotModel.getInstance().cube_.slice_.measuresAll,f=e.F8C;f<a.length;f++)if((s=cr.PivotModel.getInstance().cube_.slice_.measureToHierarchy(a.getItemAt(f))).hasFilter()){for(m=l.length=e.F8C;m<s.filterMembers.length;m++)h=s.filterMembers.getItemAt(m),l.push(h.caption);h=l.join(r.P7C),c&&(p.setCell(C+n.xlsPadding,e.F8C,e.C4C,u),p.setCell(C+n.xlsPadding,e.O8C,"Filters",u),C++),p.setCell(C+n.xlsPadding,e.F8C,s.caption,u),p.setCell(C+n.xlsPadding,e.O8C,h,d),C++,c=!e.O8C}n.xlsPadding+=c?e.F8C:C+e.O8C}},n.composeDateRange=function(i){var r,o,s,a=!e.O8C,l=[];a=o=e.C4C,e.x4C!=n.sortedMembers&&(n.sortedMembers.length=e.F8C),n.sortMembers(i.allMember);for(var h=n.composeFilteredMembers(i),c=!e.O8C,d=e.F8C;d<n.sortedMembers.length;d++)o=n.sortedMembers[d],a=d==n.sortedMembers.length-e.O8C,!c&&i.filterMembers.keyExists(o.uniqueName)&&(c=!e.F8C,r=o),c&&(i.filterMembers.keyExists(o.uniqueName)&&(s=o),-e.O8C<h.indexOf(o)&&!a||(s=e.x4C!=s?s:r,o=n.composeDate(r),a=s.uniqueName!=r.uniqueName?t.t7C+n.composeDate(s,!e.F8C):e.C4C,s=r=e.x4C,c=!e.O8C,l.push(o+a)));return l.join(t.P7C)},n.sortMembers=function(t){e.x4C==n.sortedMembers&&(n.sortedMembers=[]),t.isAll||n.sortedMembers.push(t);for(var i,r=(t=t.hierarchy_.sortChildren(t,!e.O8C,hr.data_.consts.SortType.ASC)).length,o=e.F8C;o<r;o++)i=t.getItemAt(o),e.F8C<i.children.length?n.sortMembers(i):n.sortedMembers.push(i)},n.composeDate=function(t,i){void e.F8C===i&&(i=!e.O8C);var r=t,o=[];for(o.push(t.caption);r&&r.uniqueName!=t.uniqueName&&!r.level.isLast&&e.F8C<r.children.length;)o.push(r.caption),r=(r=r.hierarchy_.sortChildren(r,!e.O8C,hr.data_.consts.SortType.ASC)).getItemAt(i?r.length-e.O8C:e.F8C);for(r=t.parent;r&&!r.isAll;)o.unshift(r.caption),r=r.parent;return o.join(e.L2C)},n.composeFilteredMembers=function(t){var i=[];t=t.filterMembers;for(var r,o,s=e.F8C;s<t.length;s++){r=t.getItemAt(s),i.push(r),o=r.descendants;for(var n=e.F8C;n<o.length;n++)i.push(o.getItemAt(n));if(!(r.parent&&!r.parent.isAll&&-e.O8C<i.indexOf(r.parent)))for(;r.parent&&!r.parent.isAll;)r=r.parent,i.push(r)}return i},n.rowIdx=e.F8C,n.xlsPadding=e.F8C,n.cellPadding=e.b8C,n.DEFAULT_CELL_WIDTH=e.o0C,n.rowHeaderLevelsCellStyle=[],n.defaultExcelCellHeightPoints=14.3,n.defaultExcelCellHeightPixels=e.P8C,n}(),dr.ExportXLS=ur,pr=De||(De={}),function(e){var i=function(){function i(){}return i.exportTo=function(t,s,a){var l=r;void l.F8C===s&&(s=l.x4C),void l.F8C===a&&(a=l.x4C),i._exportInProgress?this.delayedExports.push({type:t,options:s,callback:a}):(t=t.toLowerCase(),t=n.validType(t)?t:n.PDF,Cr.PivotModel.getInstance().addEventListener(pr.PivotEvent.EXPORT_COMPLETE,i.exportCompleteHandler),i._exportInProgress=!l.F8C,i.callbackHandler=a,Be.nullOrUndefined(s)&&(s=new e.ExportOptions),s.type=t,t=new o(t,s,a),Cr.PivotModel.getInstance().dispatch(t))},i.stopExport=function(){pr.preloader(!r.O8C),Cr.PivotModel.getInstance().removeEventListener(pr.PivotEvent.EXPORT_COMPLETE,i.exportCompleteHandler),i._exportInProgress=!r.O8C},i.onExportCompleted=function(e){i.stopExport(),r.F8C<i.delayedExports.length&&(e=i.delayedExports.shift(),this.exportTo(e.type,e.options,e.callback))},i.save=function(e,t){switch(t.destinationType.toLowerCase()){case Cr.report.DestinationType.FILE:i.saveToFile(e,t);break;case Cr.report.DestinationType.SERVER:i.saveToServer(e,t);break;case Cr.report.DestinationType.BINARY:i.saveToBinary(e,t);break;case Cr.report.DestinationType.PLAIN:i.saveToPlain(e,t);break;default:i.saveToFile(e,t)}},i.saveToServer=function(e,r){switch(r.type){case n.HTML:case n.EXCEL:case n.PDF:i.saveToServerAsBinary(e,r);break;default:var o=Cr.XSSCheck.validate(r.type);pr.uialert("Unknown type of export: '"+o+t.v9Q,Cr._labels.Labels.ERROR)}},i.saveToFile=function(e,t){var o;switch(t.type){case n.HTML:o="text/html;charset=utf-8",t.filename=i.appendFileExtension(t.filename,".html");break;case n.EXCEL:o="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",t.filename=i.appendFileExtension(t.filename,".xlsx");break;case n.PDF:o="application/pdf",t.filename=i.appendFileExtension(t.filename,".pdf");break;default:o="text/plain;charset=utf-8"}var s=[e];try{var a=new Blob(s,{type:o});savingAs(a,t.filename),i.triggerCallback({data:e,fielname:t.filename,type:t.type})}catch(e){pr.uialert(Cr._labels.Labels.MESSAGE_CANT_SAVE_FILE,Cr._labels.Labels.ERROR,pr.AlertType.ERROR),i.triggerCallback(r.x4C,{message:Cr._labels.Labels.MESSAGE_CANT_SAVE_FILE})}},i.appendFileExtension=function(e,t){return e.indexOf(t)!=e.length-t.length&&(e+=t),e},i.saveToServerAsBinary=function(e,t){var o=new Be.Timer(r.m0C);o.addEventListener(Be.TimerEvent.TIMER,function(e){pr.preloader(!r.F8C,Cr._labels.Labels.MESSAGE_UPLOADING,(o.currentCount/r.L8C).toString()+" sec")});var n=new Ne.URLStream;n.addEventListener(s._Event.ERROR,function(e){pr.uialert(Cr._labels.Labels.MESSAGE_CANT_SAVE_FILE,Cr._labels.Labels.ERROR),o.stop(),pr.preloader(!r.O8C),i.triggerCallback(r.x4C,{message:Cr._labels.Labels.MESSAGE_CANT_SAVE_FILE})}),n.addEventListener(s._Event.COMPLETE,function(){o.stop(),pr.preloader(!r.O8C),i.triggerCallback({data:e,fielname:t.filename,type:t.type,response:n.response})});var a=new Blob([e],{type:"application/octet-binary"}),l=new FormData;for(var h in l.append("filedata",a,t.filename),t.extendedParameters)l.append(h,t.extendedParameters[h]);n.requestMethod=Ne.URLRequestMethod.POST,n.data=l,n.contentType=!r.O8C,n.load(t.url),o.start()},i.saveToBinary=function(e,t){},i.saveToPlain=function(e,t){},i.triggerCallback=function(e,t){var o=r;void o.F8C===e&&(e=o.x4C),void o.F8C===t&&(t=o.x4C),o.x4C!=i.callbackHandler&&i.callbackHandler.call(o.x4C,e,t)},i._exportInProgress=!r.O8C,i.delayedExports=[],i.exportCompleteHandler=function(e){return i.onExportCompleted(e)},i}();e.ExportManager=i;var o=function(e){function t(t,i,r){var o=e.call(this,pr.PivotEvent.EXPORT)||this;return o.exportType=t,o.exportOptions=i,o.callbackHandler=r,o}return Ga(t,e),t}(s._Event);e.ExportEvent=o;var n=function(){function e(){}return e.validType=function(t){return t===e.EXCEL||t===e.HTML||t===e.PDF},e.EXCEL="excel",e.HTML=t.o6C,e.PDF="pdf",e}();e.ExportType=n}((Cr=pr.model||(pr.model={}))._export||(Cr._export={})),fr=De||(De={}),mr=fr.model||(fr.model={}),gr=mr._export||(mr._export={}),yr=function(){function e(e){var i=r;void i.F8C===e&&(e=t.A6C),this.showHeaders=!i.F8C,this.destinationType=fr.model.report.DestinationType.FILE,this.filename=i.C4C,this.url=t.S5C,this.type=gr.ExportType.HTML,this.pageOrientation=t.Y1Q,this.excelSheetName=i.C4C,this.showFilters=this.excelExportAll=!i.O8C,this.extendedParameters={},this.destinationType=e}return e.fromObject=function(i){var s=r,n=t,a=new e;return Be.nullOrUndefined(i)?a:(i.hasOwnProperty(o.r0B)&&(a.showHeaders=n.j7C===i.showHeaders||!s.F8C===i.showHeaders),i.hasOwnProperty(n.A8B)&&(a.filename=i.filename),i.hasOwnProperty(n.k8B)&&(a.url=i.url),i.hasOwnProperty("excelSheetName")&&(a.excelSheetName=i.excelSheetName),i.hasOwnProperty("excelExportAll")&&(a.excelExportAll=i.excelExportAll),!i.hasOwnProperty("pageOrientation")||n.Y1Q!==i.pageOrientation&&n.y9Q!==i.pageOrientation||(a.pageOrientation=i.pageOrientation.toLowerCase()),i.hasOwnProperty("destinationType")&&fr.model.report.DestinationType.validType(i.destinationType.toString().toLowerCase())&&(a.destinationType=i.destinationType.toString().toLowerCase()),void s.F8C!=i.showFilters&&(a.showFilters=i.showFilters),void s.F8C!=i.extendedParameters&&(a.extendedParameters=i.extendedParameters),void s.F8C!=i.header&&(a.header=i.header),void s.F8C!=i.footer&&(a.footer=i.footer),a)},e}(),gr.ExportOptions=yr,_r=De||(De={}),vr=_r.model||(_r.model={}),br=vr.format||(vr.format={}),wr=function(){function e(){}return e.getFormat=function(t){return e.formats.keyExists(t)?e.formats.getItem(t):r.C4C!=t&&e.formats.keyExists(r.C4C)?e.formats.getItem(r.C4C):e.getDefaultFormat()},e.setFormat=function(t){var i=br.vo.FormatValueObject.fromObject(t);if(e.cleanFormats.addItem(i.name,i),r.x4C!=e.defaultFormat)i.mergeDefaults(e.defaultFormat);else if(r.C4C==i.name)for(e.defaultFormat=t,t=r.F8C;t<e.formats.length;t++)e.formats.getItemAt(t).mergeDefaults(e.defaultFormat);e.formats.addItem(i.name,i)},e.getAllFormats=function(){return e.cleanFormats.slice()},e.clear=function(){e.formats=new Be.AssociativeArray,e.cleanFormats=new Be.AssociativeArray,e.defaultFormat=r.x4C},e.getDefaultFormat=function(){return new br.vo.FormatValueObject},e.formatExists=function(t){return e.formats.keyExists(t)},e.dispose=function(){e.formats=r.x4C,e.cleanFormats=r.x4C,e.defaultFormat=r.x4C},e.formats=new Be.AssociativeArray,e.cleanFormats=new Be.AssociativeArray,e.defaultFormat=r.x4C,e}(),br.FormatManager=wr,Fr=De||(De={}),Er=Fr.model||(Fr.model={}),Or=Er.format||(Er.format={}),Sr=Or.vo||(Or.vo={}),Tr=function(){var e=r,i="isPercent",s="textAlign",n="divideByZeroValue",a="infinityValue",l="currencySymbolAlign",h="currencySymbol",c="maxSymbols",d="maxDecimalPlaces",u="decimalPlaces",p="decimalSeparator",C="thousandsSeparator";function f(i){void e.F8C===i&&(i=e.C4C),this.name=e.C4C,this._params={},this._defaults={thousandsSeparator:e.s4C,decimalSeparator:t.f7C,decimalPlaces:-e.O8C,maxDecimalPlaces:-e.O8C,maxSymbols:e.J8C,currencySymbol:e.C4C,currencySymbolAlign:e.M2C,nullValue:e.C4C,infinityValue:"Infinity",divideByZeroValue:"Infinity",textAlign:e.C4C,isPercent:!e.O8C,isCount:!e.O8C},this.name=i}return Object.defineProperty(f.prototype,o.P2B,{get:function(){return this._params},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(f.prototype,C,{get:function(){return void e.F8C!=this._params.thousandsSeparator?this._params.thousandsSeparator:this._defaults.thousandsSeparator},set:function(e){this._params.thousandsSeparator=e},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(f.prototype,p,{get:function(){return void e.F8C!=this._params.decimalSeparator?this._params.decimalSeparator:this._defaults.decimalSeparator},set:function(e){this._params.decimalSeparator=e},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(f.prototype,u,{get:function(){return void e.F8C!=this._params.decimalPlaces?this._params.decimalPlaces:this._defaults.decimalPlaces},set:function(e){this._params.decimalPlaces=e},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(f.prototype,d,{get:function(){return void e.F8C!=this._params.maxDecimalPlaces?this._params.maxDecimalPlaces:this._defaults.maxDecimalPlaces},set:function(e){this._params.maxDecimalPlaces=e},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(f.prototype,c,{get:function(){return void e.F8C!=this._params.maxSymbols?this._params.maxSymbols:this._defaults.maxSymbols},set:function(e){this._params.maxSymbols=e},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(f.prototype,h,{get:function(){return void e.F8C!=this._params.currencySymbol?this._params.currencySymbol:this._defaults.currencySymbol},set:function(e){this._params.currencySymbol=e},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(f.prototype,l,{get:function(){return void e.F8C!=this._params.currencySymbolAlign?this._params.currencySymbolAlign:this._defaults.currencySymbolAlign},set:function(e){this._params.currencySymbolAlign=e},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(f.prototype,"nullValue",{get:function(){return void e.F8C!=this._params.nullValue?this._params.nullValue:this._defaults.nullValue},set:function(e){this._params.nullValue=e},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(f.prototype,a,{get:function(){return void e.F8C!=this._params.infinityValue?this._params.infinityValue:this._defaults.infinityValue},set:function(e){this._params.infinityValue=e},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(f.prototype,n,{get:function(){return void e.F8C!=this._params.divideByZeroValue?this._params.divideByZeroValue:this._defaults.divideByZeroValue},set:function(e){this._params.divideByZeroValue=e},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(f.prototype,s,{get:function(){return void e.F8C!=this._params.textAlign?this._params.textAlign:this._defaults.textAlign},set:function(e){this._params.textAlign=e},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(f.prototype,i,{get:function(){return void e.F8C!=this._params.isPercent?this._params.isPercent:this._defaults.isPercent},set:function(e){this._params.isPercent=e},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(f.prototype,"isCount",{get:function(){return void e.F8C!=this._params.isCount?this._params.isCount:this._defaults.isCount},set:function(e){this._params.isCount=e},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(f.prototype,"currencySymbolLength",{get:function(){return e.O8C<this.currencySymbol.length&&t.R6C==this.currencySymbol.charAt(e.F8C)&&t.F9Q==this.currencySymbol.charAt(this.currencySymbol.length-e.O8C)?e.O8C:this.currencySymbol.length},set:function(e){},enumerable:!e.F8C,configurable:!e.F8C}),f.prototype.applyFormat=function(e){return Be.NumberFormatter.format(e,this)},f.prototype.toXLSFormatCode=function(){var i,r=t,s=e.C4C;if(-e.O8C==this.decimalPlaces&&e.C4C==this.currencySymbol)return e.C4C;if(o.o2B==this.currencySymbol){var n=-e.O8C==this.decimalPlaces?e.F8C:this.decimalPlaces;for(s=e.F8C<n?"0.":r.O7C,i=e.F8C;i<n;i++)s+=r.O7C;return s+this.currencySymbol}if(s=e.C4C!=this.thousandsSeparator?"#,##0":"###0",e.F8C<this.decimalPlaces)for(s+=r.f7C,i=e.F8C;i<this.decimalPlaces;i++)s+=r.O7C;return e.C4C!=this.currencySymbol&&(s=e.M2C==this.currencySymbolAlign?o.F3B+this.currencySymbol+s:s+o.F3B+this.currencySymbol),s},f.prototype.toObject=function(t){void e.F8C===t&&(t=!e.O8C);var i={};if(i.name=this.name,t)i.thousandsSeparator=this.thousandsSeparator,i.decimalSeparator=this.decimalSeparator,i.decimalPlaces=this.decimalPlaces,i.maxDecimalPlaces=this.maxDecimalPlaces,i.maxSymbols=this.maxSymbols,i.currencySymbol=this.currencySymbol,i.currencySymbolAlign=this.currencySymbolAlign,i.nullValue=this.nullValue,i.infinityValue=this.infinityValue,i.divideByZeroValue=this.divideByZeroValue,i.textAlign=e.C4C!=this.textAlign?this.textAlign:e.j2C,i.isPercent=this.isPercent,i.isCount=this.isCount;else for(var r in this._params)i[r]=s==r?e.C4C==this.textAlign?e.j2C:this.textAlign:this._params[r];return i},f.fromObject=function(t){var i=new f;return e.x4C!=t.name&&(i.name=t.name),e.x4C!=t.thousandsSeparator&&Er.XSSCheck.valid(t.thousandsSeparator)&&(i.thousandsSeparator=Er.XSSCheck.validate(t.thousandsSeparator,!e.F8C)),e.x4C!=t.decimalSeparator&&Er.XSSCheck.valid(t.decimalSeparator)&&(i.decimalSeparator=Er.XSSCheck.validate(t.decimalSeparator)),e.x4C!=t.decimalPlaces&&-e.O8C<parseInt(t.decimalPlaces)&&(i.decimalPlaces=isNaN(parseInt(t.decimalPlaces))?-e.O8C:parseInt(t.decimalPlaces)),e.x4C!=t.maxDecimalPlaces&&-e.O8C<parseInt(t.maxDecimalPlaces)&&(i.maxDecimalPlaces=t.maxDecimalPlaces),e.x4C!=t.maxSymbols&&e.O8C<parseInt(t.maxSymbols)&&(i.maxSymbols=t.maxSymbols),e.x4C!=t.currencySymbol&&Er.XSSCheck.valid(t.currencySymbol)&&(i.currencySymbol=Er.XSSCheck.validate(t.currencySymbol,!e.F8C)),e.x4C!=t.currencySymbolAlign&&Er.XSSCheck.valid(t.currencySymbolAlign)&&(i.currencySymbolAlign=Er.XSSCheck.validate(t.currencySymbolAlign)),e.x4C!=t.nullValue&&Er.XSSCheck.valid(t.nullValue)&&(i.nullValue=Er.XSSCheck.validate(t.nullValue)),e.x4C!=t.infinityValue&&Er.XSSCheck.valid(t.infinityValue)&&(i.infinityValue=Er.XSSCheck.validate(t.infinityValue)),e.x4C!=t.divideByZeroValue&&Er.XSSCheck.valid(t.divideByZeroValue)&&(i.divideByZeroValue=Er.XSSCheck.validate(t.divideByZeroValue)),e.x4C!=t.textAlign&&Er.XSSCheck.valid(t.textAlign)&&(i.textAlign=Er.XSSCheck.validate(t.textAlign)),e.x4C!=t.isPercent&&(i.isPercent=!e.F8C==t.isPercent),e.x4C!=t.isCount&&(i.isCount=!e.F8C==t.isCount),i},f.prototype.clone=function(){var e=new f;e.name=this.name,this._params.hasOwnProperty(C)&&(e.thousandsSeparator=this.thousandsSeparator),this._params.hasOwnProperty(p)&&(e.decimalSeparator=this.decimalSeparator),this._params.hasOwnProperty(u)&&(e.decimalPlaces=this.decimalPlaces),this._params.hasOwnProperty(d)&&(e.maxDecimalPlaces=this.maxDecimalPlaces),this._params.hasOwnProperty(c)&&(e.maxSymbols=this.maxSymbols),this._params.hasOwnProperty(h)&&(e.currencySymbol=this.currencySymbol),this._params.hasOwnProperty(l)&&(e.currencySymbolAlign=this.currencySymbolAlign),this._params.hasOwnProperty("nullValue")&&(e.nullValue=this.nullValue),this._params.hasOwnProperty(a)&&(e.infinityValue=this.infinityValue),this._params.hasOwnProperty(n)&&(e.divideByZeroValue=this.divideByZeroValue),this._params.hasOwnProperty(s)&&(e.textAlign=this.textAlign),this._params.hasOwnProperty(i)&&(e.isPercent=this.isPercent),this._params.hasOwnProperty(i)&&(e.isCount=this.isCount);var t,r={};for(t in this._defaults)r[t]=this._defaults[t];return e._defaults=r,e},f.prototype.mergeDefaults=function(e){for(var t in e)this._defaults[t]=e[t]},f}(),Sr.FormatValueObject=Tr,xr=Be||(Be={}),Lr=function(){function e(){}return e.format=function(i,s,n,a,l){var h=t,c=o,d=r;if(void d.F8C===s&&(s=d.x4C),void d.F8C===n&&(n=!d.O8C),void d.F8C===a&&(a=!d.O8C),void d.F8C===l&&(l=-d.O8C),d.x4C==s&&(s=e.defaultFormatVO),isNaN(i)||xr.nullOrUndefined(i))return s.nullValue;if(1/0==i)return s.infinityValue;if(i==De.data_.consts.DataConsts.DIVIDE_BY_ZERO)return s.divideByZeroValue;n||(n=s.isCount),i=s.isPercent&&c.o2B!=s.currencySymbol?d.o0C*i:i;var u=a?c.o2B:s.currencySymbol;u=!a&&s.isPercent&&c.o2B!=s.currencySymbol?c.o2B:u;s.currencySymbolAlign=s.isPercent?d.j2C:s.currencySymbolAlign;var p=n?d.F8C:s.decimalPlaces,C=d.C4C;if(d.F8C==i&&d.F8C>p)return C=h.O7C,!n&&d.F8C<u.length&&(C=e.formatCurrency(C,u,s.currencySymbolAlign,a)),C;C=d.F8C>i?s.maxSymbols-d.O8C:s.maxSymbols,d.O8C<s.thousandsSeparator.length&&!xr.StringUtils.isEntity(s.thousandsSeparator)&&(C-=Math.floor(C/d.b8C)*s.thousandsSeparator.length),!n&&d.F8C<s.currencySymbolLength&&(C-=s.currencySymbolLength),s.thousandsSeparator=h.S7C==s.thousandsSeparator?h.v9Q:s.thousandsSeparator;var f=i.toString().split(h.f7C);if(d.O8C<f.length&&d.L8C<=f[d.O8C].length){f=f[d.O8C];for(var m=d.F8C,g=d.F8C,y=f.length-d.M8C;d.F8C<=y;y--)if("9"!=f.charAt(y)&&h.O7C!=f.charAt(y)||f.charAt(y)!=f.charAt(y+d.O8C)){if(!(d.j8C>m)){g=y+d.O8C;break}m=d.F8C}else m++;d.j8C<=m&&(f=Math.pow(d.L8C,g),i=Math.round(i*f)/f)}return f=d.j8C<p?Math.pow(d.L8C,C-p-d.O8C):Math.pow(d.L8C,C-d.j8C),m=Math.pow(d.L8C,-(C-d.j8C)),-d.O8C<l&&(p=l),Math.abs(i)>f?(l=Math.round(Math.log(i)/Math.LN10),l=Math.round(Math.log(l)/Math.LN10+d.O8C),C=d.F8C>i?s.maxSymbols-l-d.g8C:s.maxSymbols-l-d.j8C,d.J8C<C&&(C=d.J8C),d.O8C>C&&(C=d.O8C),C=i.toExponential(C)):Math.abs(i)<m&&d.F8C>p?(l=Math.round(Math.log(i)/Math.LN10),l=Math.round(Math.log(-l)/Math.LN10+d.O8C),C=C-d.j8C-l,d.J8C<C&&(C=d.J8C),d.O8C>C&&(C=d.O8C),C=i.toExponential(C)):d.F8C>p?(l=d.O8C,d.O8C<Math.abs(i)?(l=Math.round(Math.log(Math.abs(i))/Math.LN10),l=Math.pow(d.L8C,C-l-d.M8C)):l=Math.pow(d.L8C,C-d.M8C),C=(Math.round(Math.abs(i)*l)/l).toString(),d.F8C>i&&(C=d.L2C+C)):C=d.F8C==p?Math.round(i).toString():i.toFixed(p),-d.O8C==C.indexOf("e")&&(C=C.split(h.f7C),l=e.formatThousands(C[d.F8C],s),f=d.O8C<C.length?C[d.O8C]:d.C4C,(d.O8C<C.length||d.F8C<p)&&d.F8C!=s.maxDecimalPlaces?(-d.O8C<s.maxDecimalPlaces&&f.length>s.maxDecimalPlaces&&(f=f.substr(d.F8C,s.maxDecimalPlaces)),C=l+s.decimalSeparator+f):C=l),!n&&d.F8C<u.length&&(C=e.formatCurrency(C,u,s.currencySymbolAlign,a)),e.checkNegativeZero(C,i)},e.formatThousands=function(t,i){var o=r;void o.F8C===i&&(i=o.x4C);var s=o.F8C>parseFloat(t);s&&(t=t.substr(o.O8C));var n=t;if(o.b8C<t.length){o.x4C==i&&(o.x4C==e.defaultFormatVO&&(e.defaultFormatVO=new De.model.format.vo.FormatValueObject(o.C4C)),i=e.defaultFormatVO);n=Math.floor(t.length/o.b8C);var a=[],l=t.length%o.b8C;o.F8C<l&&a.push(t.substr(o.F8C,l));for(var h=o.F8C;h<n;h++)a.push(t.substr(l+o.b8C*h,o.b8C));n=a.join(i.thousandsSeparator)}return s&&(n=o.L2C+n),n},e.formatCurrency=function(e,t,i,o){var s=r;return s.M2C!=i||o?e+t:s.F8C==e.indexOf(s.L2C)?s.L2C+t+e.substr(s.O8C):t+e},e.checkNegativeZero=function(e,t){var i=r;return i.F8C<=t||-i.O8C==e.indexOf(i.L2C)||-i.O8C<e.search("[1-9]+")?e:e.replace(i.L2C,i.C4C)},e.defaultFormatVO=new De.model.format.vo.FormatValueObject,e}(),xr.NumberFormatter=Lr,Ar=De||(De={}),Ir=Ar.data_||(Ar.data_={}),Rr=function(){function e(){}return e.getStructureLoader=function(e){var t=r.x4C;switch(e.dataSourceType){case Ir.consts.DataSourceType.CSV:t=!r.F8C==e.embedded?new Ir.csv.CSVEmbeddedLoader:new Ir.csv.CSVLoader;break;case Ir.consts.DataSourceType.JSON:t=new Ir.json.JSONLoader}return t},e}(),Ir.StructureLoaderFactory=Rr,Dr=De||(De={}),Nr=Dr.data_||(Dr.data_={}),Mr=function(){this.mdx=this.type=r.C4C,this.axisName=Nr.consts.AxisName.ROWS_AXIS,this.tuple=[]},Nr.Query=Mr,Pr=De||(De={}),Hr=Pr.data_||(Pr.data_={}),Ur=function(){function e(){}return e.MEMBERS=t.a1Q,e.ASCENDANTS="ascendants",e.DESCENDANTS=o.g3B,e.SIBLINGS="siblings",e.SEARCH=o.n3B,e}(),Hr.MembersLoaderState=Ur,function(e){var t=function(){function e(){}return e.BEFORE_STRUCTURE_LOADING="BEFORE_STRUCTURE_LOADING",e.STRUCTURE_CONNECTED="STRUCTURE_CONNECTED",e.STRUCTURE_LOADED="STRUCTURE_LOADED",e.STRUCTURE_CANCELLED="STRUCTURE_CANCELLED",e.STRUCTURE_LOADING_FAILED="STRUCTURE_LOADING_FAILED",e.BEFORE_QUERY="BEFORE_QUERY",e.QUERY_COMPLETE=o.R3B,e.QUERY_ERROR=o.A3B,e}();e.DataEvent=t;var i=function(e){function i(i){var r=e.call(this,t.BEFORE_QUERY)||this;return r.queryType=i,r}return Ga(i,e),i}(s._Event);e.BeforeQueryEvent=i,i=function(i){function r(r){var o=i.call(this,t.QUERY_COMPLETE)||this;return o.queryType=e.consts.QueryType.SELECT,o.queryType=r,o}return Ga(r,i),r}(s._Event),e.QueryCompleteEvent=i}((Br=De||(De={})).data_||(Br.data_={})),kr=De||(De={}),Vr=kr.data_||(kr.data_={}),zr=Vr.dataprovider_||(Vr.dataprovider_={}),qr=function(e){var i=r,s=o;function n(){var t=e.call(this)||this;return t.rowTuples=[],t._rowTuples=[],t.columnTuples=[],t._columnTuples=[],t.rowDepths=[],t.rowType=[],t.columnDepths=[],t._name=i.C4C,t.queryCompleteHandler=function(){return t.onQueryComplete()},t.beforeQueryHandler=function(e){return t.onBeforeQuery(e)},t.structureLoadedHandler=function(e){return t.onStructureLoaded()},t._rows=new Be.AssociativeArray,t._rowLevels=[],t._columnLevels=[],t._columns=new Be.AssociativeArray,t._pages=new Be.AssociativeArray,t._measures=new Be.AssociativeArray,t._measuresPosition=i.F8C,t._dataLoaded=!i.O8C,t._rowMaxDepth=i.F8C,t._columnMaxDepth=i.F8C,t._measureDepth=i.F8C,t.queryType=Vr.consts.QueryType.SELECT,t._showUnexpandedDataAlert=!i.O8C,t._fillRowTuplesStart=i.F8C,n.counter++,t.cube_=Vr.Cube.getInstance(),t}return Ga(n,e),n.getInstance=function(){return i.x4C==n.instance&&(n.instance=new n,n.instance._name="grid"+n.counter),n.instance},n.prototype.addEventListeners=function(){this.cube_.addEventListener(Vr.DataEvent.QUERY_COMPLETE,this.queryCompleteHandler,i.O8C),this.cube_.addEventListener(Vr.DataEvent.BEFORE_QUERY,this.beforeQueryHandler),this.cube_.addEventListener(Vr.DataEvent.STRUCTURE_LOADED,this.structureLoadedHandler,i.O8C)},n.prototype.removeEventListeners=function(){this.cube_.removeEventListener(Vr.DataEvent.QUERY_COMPLETE,this.queryCompleteHandler),this.cube_.removeEventListener(Vr.DataEvent.BEFORE_QUERY,this.beforeQueryHandler),this.cube_.removeEventListener(Vr.DataEvent.STRUCTURE_LOADED,this.structureLoadedHandler)},Object.defineProperty(n.prototype,s.k3B,{get:function(){return i.x4C!=this._dataStorage?this._dataStorage:this.cube_.localDataStorage},set:function(e){this._dataStorage=e},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,t.t8Q,{get:function(){return i.x4C!=this._slice?this._slice:this.cube_.slice_},set:function(e){this._slice=e},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.f3B,{get:function(){return kr.model._options.OptionsManager.classicView},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,t.M8Q,{get:function(){return this._rows},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.i3B,{get:function(){return this.slice.rowsOnly},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.J3B,{get:function(){return this._rowLevels},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.E3B,{get:function(){return this._columnLevels},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,t.b8Q,{get:function(){return this._columns},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.H3B,{get:function(){return this.slice.columnsOnly},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.Z3B,{get:function(){return this._pages},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.y3B,{get:function(){return this._measures},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.d3B,{get:function(){return this._measuresPosition},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.S3B,{get:function(){return this.slice&&this._dataLoaded},set:function(e){this._dataLoaded=e},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.I3B,{get:function(){return this._rowMaxDepth},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.T3B,{get:function(){return this._columnMaxDepth},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.m3B,{get:function(){return this._measureDepth},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.w3B,{get:function(){return this._rowAxis},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.r3B,{get:function(){return this._columnAxis},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.C3B,{get:function(){return this._rowAxis?this._rowAxis.hasMeasures?this._rowAxis.hierarchies.length-i.O8C:this._rowAxis.hierarchies.length:i.F8C},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.P3B,{get:function(){return this._columnAxis?this._columnAxis.hasMeasures?this._columnAxis.hierarchies.length-i.O8C:this._columnAxis.hierarchies.length:i.F8C},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.U6B,{get:function(){return i.O8C<this._measures.length||this._columnAxis.hasMeasures&&kr.model._options.OptionsManager.showExtraTotalLabels},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),n.prototype.getExpandedRows=function(){return this._rowAxis&&!this.isAllExpanded()?this._rowAxis.expandedTuples:[]},n.prototype.setExpandedRows=function(e){this._rowAxis&&!this.isAllExpanded()&&(this._rowAxis.expandedTuples=e)},n.prototype.getExpandedColumns=function(){return this._columnAxis&&!this.isAllExpanded()?this._columnAxis.expandedTuples:[]},n.prototype.setExpandedColumns=function(e){this._columnAxis&&!this.isAllExpanded()&&(this._columnAxis.expandedTuples=e)},n.prototype.getCollapsedRows=function(){return this._rowAxis&&this.isAllExpanded()?this._rowAxis.expandedTuples:[]},n.prototype.setCollapsedRows=function(e){this._rowAxis&&this.isAllExpanded()&&(this._rowAxis.expandedTuples=e)},n.prototype.getCollapsedColumns=function(){return this._columnAxis&&this.isAllExpanded()?this._columnAxis.expandedTuples:[]},n.prototype.setCollapsedColumns=function(e){this._columnAxis&&this.isAllExpanded()&&(this._columnAxis.expandedTuples=e)},n.prototype.getDrilledDownRows=function(){return this._rowAxis&&!this.isAllDrilled()?this._rowAxis.drilledTuples:[]},n.prototype.setDrilledDownRows=function(e){this._rowAxis&&!this.isAllDrilled()&&(this._rowAxis.drilledTuples=e)},n.prototype.getDrilledDownColumns=function(){return this._columnAxis&&!this.isAllDrilled()?this._columnAxis.drilledTuples:[]},n.prototype.setDrilledDownColumns=function(e){this._columnAxis&&!this.isAllDrilled()&&(this._columnAxis.drilledTuples=e)},n.prototype.getDrilledUpRows=function(){return this._rowAxis&&this.isAllDrilled()?this._rowAxis.drilledTuples:[]},n.prototype.setDrilledUpRows=function(e){this._rowAxis&&this.isAllDrilled()&&(this._rowAxis.drilledTuples=e)},n.prototype.getDrilledUpColumns=function(){return this._columnAxis&&this.isAllDrilled()?this._columnAxis.drilledTuples:[]},n.prototype.setDrilledUpColumns=function(e){this._columnAxis&&this.isAllDrilled()&&(this._columnAxis.drilledTuples=e)},n.prototype.isAllDrilled=function(){return this.slice.drillAll},n.prototype.isAllExpanded=function(){return this.slice.expandAll},Object.defineProperty(n.prototype,s.v6B,{get:function(){var e=Vr.consts.SortType.UNSORTED;return this._rowAxis&&(e=this._rowAxis.sortType)==Vr.consts.SortType.UNSORTED&&this._rowAxis.totalSortMeasure&&this._rowAxis.totalSortType!=Vr.consts.SortType.UNSORTED&&(e=this._rowAxis.totalSortType),e},set:function(e){this._rowAxis&&(this._rowAxis.sortType=e)},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.G6B,{get:function(){var e;return this._rowAxis&&(e=this._rowAxis.sortTuple,this._rowAxis.sortType==Vr.consts.SortType.UNSORTED&&this._rowAxis.totalSortMeasure&&this._rowAxis.totalSortType!=Vr.consts.SortType.UNSORTED&&(e=[])),e},set:function(e){this._rowAxis&&(this._rowAxis.sortTuple=e)},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.W6B,{get:function(){var e;return this._rowAxis&&(e=this._rowAxis.sortMeasure,this._rowAxis.sortType==Vr.consts.SortType.UNSORTED&&this._rowAxis.totalSortMeasure&&this._rowAxis.totalSortType!=Vr.consts.SortType.UNSORTED&&(e=this._rowAxis.totalSortMeasure)),e},set:function(e){this._rowAxis&&(this._rowAxis.sortMeasure=e)},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.V6B,{get:function(){if(this.rowSortType==Vr.consts.SortType.UNSORTED||i.x4C==this.rowSortTuple)return!i.O8C;if(i.O8C>this.rowSortTuple.length)return!i.F8C;var e=!i.O8C;try{e=this.isRowExpanded(this.rowSortTuple.slice(i.F8C,this.rowSortTuple.length-i.O8C))}catch(e){}return e},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.l6B,{get:function(){var e=Vr.consts.SortType.UNSORTED;return this._columnAxis&&(e=this._columnAxis.sortType)==Vr.consts.SortType.UNSORTED&&this._columnAxis.totalSortMeasure&&this._columnAxis.totalSortType!=Vr.consts.SortType.UNSORTED&&(e=this._columnAxis.totalSortType),e},set:function(e){this._columnAxis&&(this._columnAxis.sortType=e)},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.p6B,{get:function(){var e;return this._columnAxis&&(e=this._columnAxis.sortTuple,this._columnAxis.sortType==Vr.consts.SortType.UNSORTED&&this._columnAxis.totalSortMeasure&&this._columnAxis.totalSortType!=Vr.consts.SortType.UNSORTED&&(e=[])),e},set:function(e){this._columnAxis&&(this._columnAxis.sortTuple=e)},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.X6B,{get:function(){var e;return this._columnAxis&&(e=this._columnAxis.sortMeasure,this._columnAxis.sortType==Vr.consts.SortType.UNSORTED&&this._columnAxis.totalSortMeasure&&this._columnAxis.totalSortType!=Vr.consts.SortType.UNSORTED&&(e=this._columnAxis.totalSortMeasure)),e},set:function(e){this._columnAxis&&(this._columnAxis.sortMeasure=e)},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.B6B,{get:function(){if(this.columnSortType==Vr.consts.SortType.UNSORTED||i.x4C==this.columnSortTuple)return!i.O8C;if(i.O8C>this.columnSortTuple.length)return!i.F8C;var e=!i.O8C;try{e=this.isColumnExpanded(this.columnSortTuple.slice(i.F8C,this.columnSortTuple.length-i.O8C))}catch(e){}return e},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),n.prototype.reset=function(e){void i.F8C===e&&(e=!i.F8C),this.dataLoaded=!i.O8C,this._measures=new Be.AssociativeArray,this._rows=new Be.AssociativeArray,this._columns=new Be.AssociativeArray,this._pages=new Be.AssociativeArray,this._rowLevels=[],this._columnLevels=[],this._rowTuples=[],this._columnTuples=[],this.rowTuples=[],this.columnTuples=[],this.rowDepths=[],this.columnDepths=[],this._columnMaxDepth=this._rowMaxDepth=i.F8C,this.rowType=[],e&&(this._columnAxis&&(this._columnAxis.expandedTuples=[]),this._rowAxis&&(this._rowAxis.expandedTuples=[]),this._columnAxis&&(this._columnAxis.drilledTuples=[]),this._rowAxis&&(this._rowAxis.drilledTuples=[]))},n.prototype.onBeforeQuery=function(e){this.queryType=e.queryType,this.dataLoaded=!i.O8C,e.queryType==Vr.consts.QueryType.SELECT&&this.reset(),e.queryType!=Vr.consts.QueryType.DRILL_UP&&e.queryType!=Vr.consts.QueryType.DRILL_DOWN||this.reset(!i.O8C)},n.prototype.onQueryComplete=function(){this.load()},n.prototype.onStructureLoaded=function(){this.dataLoaded=!i.O8C,this.reset()},n.prototype.load=function(){if(i.x4C!=this.dataStorage||(this.dataStorage=this.cube_.localDataStorage,i.x4C!=this.dataStorage))if(this.slice){if(this._columnAxis=this.slice.findAxis(Vr.consts.AxisName.COLUMNS_AXIS),this._rowAxis=this.slice.findAxis(Vr.consts.AxisName.ROWS_AXIS),i.F8C==this.columnTuples.length&&i.F8C==this.rowTuples.length||this.queryType==Vr.consts.QueryType.FILTER){var e,t,r;if(this.isAllExpanded()?this.dataStorage.expandAll(this.slice.drillAll):(this.dataStorage.expand([],Vr.consts.AxisName.ROWS_AXIS,i.x4C),this.dataStorage.expand([],Vr.consts.AxisName.COLUMNS_AXIS,i.x4C)),(i.F8C<this.getDrilledDownRows().length||i.F8C<this.getDrilledUpRows().length)&&this._drillRows(),(i.F8C<this.getDrilledDownColumns().length||i.F8C<this.getDrilledUpColumns().length)&&this._drillColumns(),this.queryType==Vr.consts.QueryType.FILTER)if(this.slice.expandAll){var o=this.getCollapsedRows();if(i.F8C<o.length)for(e=i.F8C;e<o.length;e++)try{t=this.slice.measures_.getItemAt(o[e][i.F8C]),r=o[e].slice(i.O8C),this.dataStorage.collapse(r,Vr.consts.AxisName.ROWS_AXIS,t)}catch(e){}if(o=this.getCollapsedColumns(),i.F8C<this.getCollapsedColumns().length)for(e=i.F8C;e<this.getCollapsedColumns().length;e++)try{t=this.slice.measures_.getItemAt(o[e][i.F8C]),r=o[e].slice(i.O8C),this.dataStorage.collapse(r,Vr.consts.AxisName.COLUMNS_AXIS,t)}catch(e){}}else{if(o=this.getExpandedRows(),i.F8C<o.length)for(e=i.F8C;e<o.length;e++)try{t=this.slice.measures_.getItemAt(o[e][i.F8C]),r=o[e].slice(i.O8C),this.dataStorage.expand(r,Vr.consts.AxisName.ROWS_AXIS,t)}catch(e){}if(o=this.getExpandedColumns(),i.F8C<o.length)for(e=i.F8C;e<o.length;e++)try{t=this.slice.measures_.getItemAt(o[e][i.F8C]),r=o[e].slice(i.O8C),this.dataStorage.expand(r,Vr.consts.AxisName.COLUMNS_AXIS,t)}catch(e){}}(i.F8C<this.getDrilledDownRows().length||i.F8C<this.getDrilledUpRows().length)&&this._drillRows(),(i.F8C<this.getDrilledDownColumns().length||i.F8C<this.getDrilledUpColumns().length)&&this._drillColumns()}this.prepare(),this.dataLoaded=!i.F8C}else this._rowAxis=this._columnAxis=i.x4C},n.prototype._drillRows=function(){var e,t,r,o,s,n=this.rowAxis.hierarchies.slice();if(n.removeItem(Vr.Cube.MEASURES_NAME),this.isAllDrilled())for(var a=this.getDrilledUpRows(),l=i.F8C;l<a.length;l++)try{e=this.slice.measures_.getItemAt(a[l][i.F8C]),r=a[l].slice(i.M8C),s=(o=n.getItemAt(r.length-i.O8C)).members.getItem(a[l][i.O8C]),this.dataStorage.isRowDrilledDown(r,s,e)&&this.dataStorage.drillUp(r,s,Vr.consts.AxisName.ROWS_AXIS,e)}catch(e){}else for(a=this.getDrilledDownRows(),l=i.F8C;l<a.length;l++)try{if(i.K2C==typeof a[l][i.F8C]?(t=a[l][i.F8C],e=this.slice.measures_.getItemAt(a[l][i.O8C]),r=a[l].slice(i.b8C),s=(o=n.getItemAt(r.length-i.O8C)).members.getItem(a[l][i.M8C])):(e=this.slice.measures_.getItemAt(a[l][i.F8C]),r=a[l].slice(i.M8C),s=(o=n.getItemAt(r.length-i.O8C)).members.getItem(a[l][i.O8C])),void i.F8C!==t)if(o.findLevel(t).num<s.level.num){var h=this.ascendantByLevel(s,t);r[r.length-i.O8C]=h.ordinal,o.drillUpMember(h),this.dataStorage.drillUp(r,h,Vr.consts.AxisName.ROWS_AXIS,e)}else this.dataStorage.drillDownTo(r,s,Vr.consts.AxisName.ROWS_AXIS,t);else this.dataStorage.isRowDrilledDown(r,s,e)||(this.dataStorage.hierarchize(r,s,Vr.consts.AxisName.ROWS_AXIS),this.dataStorage.drillDown(r,s,Vr.consts.AxisName.ROWS_AXIS,e))}catch(e){}},n.prototype._drillColumns=function(){var e,t,r,o=this.columnAxis.hierarchies.slice();if(o.removeItem(Vr.Cube.MEASURES_NAME),this.isAllDrilled())for(var s=this.getDrilledUpColumns(),n=i.F8C;n<s.length;n++)try{e=this.slice.measures_.getItemAt(s[n][i.F8C]),t=s[n].slice(i.M8C),r=o.getItemAt(t.length-i.O8C).members.getItem(s[n][i.O8C]),this.dataStorage.isColumnDrilledDown(t,r,e)&&this.dataStorage.drillUp(t,r,Vr.consts.AxisName.COLUMNS_AXIS,e)}catch(e){}else for(s=this.getDrilledDownColumns(),n=i.F8C;n<s.length;n++)try{e=this.slice.measures_.getItemAt(s[n][i.F8C]),t=s[n].slice(i.M8C),r=o.getItemAt(t.length-i.O8C).members.getItem(s[n][i.O8C]),this.dataStorage.isColumnDrilledDown(t,r,e)||(this.dataStorage.hierarchize(t,r,Vr.consts.AxisName.COLUMNS_AXIS),this.dataStorage.drillDown(t,r,Vr.consts.AxisName.COLUMNS_AXIS,e))}catch(e){}},n.prototype.prepare=function(){var e=t;this._showUnexpandedDataAlert=!i.O8C,this.slice?(this._measures=this.slice.measures_,this._measuresPosition=this._rowAxis.hasMeasures?this._rowAxis.measuresPosition:this._columnAxis.measuresPosition,this._rows=this.slice.rows,this._columns=this.slice.columns,this._pages=this.slice.pages):(this._measures=new Be.AssociativeArray,this._measuresPosition=i.F8C,this._rows=new Be.AssociativeArray,this._columns=new Be.AssociativeArray,this._pages=new Be.AssociativeArray),this._rowLevels=[],this._columnLevels=[],this._rowTuples=[],this._columnTuples=[],this.rowTuples=[],this.columnTuples=[],this.rowDepths=[],this.columnDepths=[],this.rowType=[],this._columnMaxDepth=this._rowMaxDepth=i.F8C;var r,s=this.dataStorage.result[i.F8C],n=this.dataStorage.result[i.O8C];if(!Be.nullOrUndefined(this.slice)&&!this.slice.isEmpty){if((!this._rowAxis.hasMeasures||i.O8C<this._rows.length||this.isClassic)&&this.fillRowTuples(s,[],i.F8C),(i.k2C==kr.model._options.OptionsManager.showGrandTotals||e.b8Q==kr.model._options.OptionsManager.showGrandTotals||this._rowAxis.hasMeasures&&i.O8C==this._rows.length)&&(this.rowTuples.push([]),this.rowDepths.push(i.F8C)),!this.isClassic)if(this._rowAxis.hasMeasures&&this.multiMeasures){if(this.rowDepths=[],this.rowType=[],i.O8C<this._rows.length)for(i.F8C!=this.measuresPosition&&this.fillRowTuples1(s,[],-i.O8C,i.F8C),r=i.F8C;r<this._measures.length;r++)i.k2C==kr.model._options.OptionsManager.showGrandTotals||e.b8Q==kr.model._options.OptionsManager.showGrandTotals?(this._rowTuples.push([[],r]),this.rowDepths.push(i.F8C)):i.F8C!=this._measuresPosition||o.N4B!=kr.model._options.OptionsManager.showGrandTotals&&e.M8Q!=kr.model._options.OptionsManager.showGrandTotals||(this._rowTuples.push([[],r]),this.rowDepths.push(i.F8C)),i.F8C==this.measuresPosition&&this.fillRowTuples1(s,[],r,i.O8C);if(i.F8C==this.measuresPosition&&(i.k2C==kr.model._options.OptionsManager.showGrandTotals||e.b8Q==kr.model._options.OptionsManager.showGrandTotals||this._rowAxis.hasMeasures&&i.O8C==this._rows.length))for(r=i.F8C;r<this._measures.length;r++)this._rowTuples.push([[],r]),this.rowDepths.push(i.F8C)}else this._rowTuples=this.rowTuples;if((!this._columnAxis.hasMeasures||i.O8C<this._columns.length)&&this.fillColumnTuples(n,[],i.F8C),this._measureDepth=-i.O8C,(i.k2C==kr.model._options.OptionsManager.showGrandTotals||e.M8Q==kr.model._options.OptionsManager.showGrandTotals||this._columnAxis.hasMeasures&&i.O8C==this._columns.length)&&(this.columnTuples.push([]),this.columnDepths.push(i.F8C)),this._columnAxis.hasMeasures&&this.multiMeasures){if(this.columnDepths=[],i.O8C<this._columns.length)for(i.F8C!=this._measuresPosition&&this.fillColumnTuples1(n,[],-i.O8C,i.F8C),r=i.F8C;r<this._measures.length;r++)i.k2C==kr.model._options.OptionsManager.showGrandTotals||e.M8Q==kr.model._options.OptionsManager.showGrandTotals?(this._columnTuples.push([[],r]),this.columnDepths.push(i.F8C)):i.F8C!=this._measuresPosition||o.N4B!=kr.model._options.OptionsManager.showGrandTotals&&e.b8Q!=kr.model._options.OptionsManager.showGrandTotals||(this._columnTuples.push([[],r]),this.columnDepths.push(i.F8C)),i.F8C==this._measuresPosition&&this.fillColumnTuples1(n,[],r,i.F8C);if(i.F8C==this._measuresPosition&&(i.k2C==kr.model._options.OptionsManager.showGrandTotals||e.M8Q==kr.model._options.OptionsManager.showGrandTotals||this._columnAxis.hasMeasures&&i.O8C==this._columns.length))for(r=i.F8C;r<this._measures.length;r++)this._columnTuples.push([[],r]),this.columnDepths.push(i.F8C)}else this._columnTuples=this.columnTuples;for(s=i.F8C;s<this.rowDepths.length;s++)this.rowDepths[s]>this._rowMaxDepth&&(this._rowMaxDepth=this.rowDepths[s]);for(this._rowMaxDepth++,s=i.F8C;s<this.columnDepths.length;s++)this.columnDepths[s]>this._columnMaxDepth&&(this._columnMaxDepth=this.columnDepths[s]);this._columnMaxDepth++,i.F8C<this.slice.columnsOnly.length&&this._columnAxis.hasMeasures&&this.multiMeasures&&this._columnMaxDepth++,-i.O8C==this._measureDepth?this._measureDepth=i.F8C==this.measuresPosition?i.F8C:this._columnMaxDepth:this._measureDepth++,this._showUnexpandedDataAlert&&kr.uialert(kr.model._labels.Labels.MESSAGE_CANT_EXPAND,kr.model._labels.Labels.MESSAGE_CANT_EXPAND_TITLE,kr.AlertType.ALERT)}},n.prototype.showRowTuples=function(){for(var e=i.F8C;e<this.rowTuples.length;e++);},n.prototype.showRowTuples1=function(){for(var e=i.F8C;e<this._rowTuples.length;e++)this.getRowTuple(e,!i.F8C),this.getRowMeasure(e)},n.prototype.showColumnTuples=function(){for(var e=i.F8C;e<this.columnTuples.length;e++);},n.prototype.showColumnTuples1=function(){for(var e=i.F8C;e<this._columnTuples.length;e++)this.getColumnTuple(e,!i.F8C),this.getColumnMeasure(e)},n.prototype.fillRowTuples=function(e,t,r){var o=t.length;(o=this._rowAxis.hasMeasures&&t.length>=this._measuresPosition?this._rows.getItemAt(o+i.O8C):this._rows.getItemAt(o))&&(i.F8C==r&&(this._fillRowTuplesStart=Date.now()),this.isClassic?this._fillRowChildren(o.allMember,e,t,r):this.fillRowChildren(o.allMember,e,t,r))},n.prototype.isEmptyOnRows=function(e){for(var t=i.F8C;t<this.measures.length;t++)if(!isNaN(this.getValue(e,[],this.measures.getItemAt(t))))return!i.O8C;return!i.F8C},n.prototype.isEmptyOnColumns=function(e){for(var t=i.F8C;t<this.measures.length;t++)if(!isNaN(this.getValue([],e,this.measures.getItemAt(t))))return!i.O8C;return!i.F8C},n.prototype.fillRowChildren=function(e,t,r,o){if(i.x4C!=e){var s;s=e.hierarchy_.sortChildren(e,!i.O8C,i.C4C),s=this.sortRowsByValue(s,t,r),e=this.rowsOnly.indexOf(e.hierarchy_.uniqueName)<this.rowsOnly.length-i.O8C;for(var a=i.F8C;a<s.length;a++){var l=s.getItemAt(a);if(i.F8C==a&&this.fillRowLevels(l),i.x4C!=t[l.ordinal]&&!l.isAll){var h=r.slice(i.F8C);if(h.push(l.ordinal),!this.isEmptyOnRows(h)){var c=!l.isLeaf&&this.dataStorage.isRowDrilledDown(h,l),d=e&&this.dataStorage.isRowExpanded(h);this.rowTuples.push(h),this.rowDepths.push(o),Date.now()-this._fillRowTuplesStart<n.SCRIPT_EXECUTION_TIMEOUT&&(c?this.fillRowChildren(l,t,r,o+i.O8C):d&&this.fillRowTuples(t[l.ordinal],h,o+i.O8C))}}}}},n.prototype.fillRowTuples1=function(e,t,r,o){if(!this.isClassic){var s=t.length;(s=this._rowAxis.hasMeasures&&t.length>=this._measuresPosition?this._rows.getItemAt(s+i.O8C):this._rows.getItemAt(s))&&this.fillRowChildren1(s.allMember,e,t,r,o)}},n.prototype.fillRowChildren1=function(e,t,r,o,s){if(i.x4C!=e){var n=r.length;e=e.hierarchy_.sortChildren(e,!i.O8C,i.C4C),e=this.sortRowsByValue(e,t,r);for(var a,l=i.F8C;l<e.length;l++){var h=e.getItemAt(l);if(i.x4C!=t[h.ordinal]&&!h.isAll){var c=r.slice(i.F8C);if(c.push(h.ordinal),!this.isEmptyOnRows(c))if(n<this._measuresPosition)if(this._rowTuples.push([c,-i.O8C]),this.rowDepths.push(s),n==this._measuresPosition-i.O8C&&this.dataStorage.isRowExpanded(c,o))for(a=i.F8C;a<this._measures.length;a++)this.dataStorage.isRowDrilledDown(c,h,a)?this.fillRowChildren1(h,t,r,a,s+i.M8C):(this._rowTuples.push([c,a]),this.rowDepths.push(s+i.O8C),this.dataStorage.isRowExpanded(c)&&this.fillRowTuples1(t[h.ordinal],c,a,s+i.M8C));else{for(a=i.F8C;a<this._measures.length;a++)this._rowTuples.push([c,a]),this.rowDepths.push(s+i.O8C);this.dataStorage.isRowDrilledDown(c,h,o)?this.fillRowChildren1(h,t,r,o,s+i.M8C):this.dataStorage.isRowExpanded(c,o)&&this.fillRowTuples1(t[h.ordinal],c,o,s+i.M8C)}else this._rowTuples.push([c,o]),this.rowDepths.push(s),this.dataStorage.isRowDrilledDown(c,h,o)?this.fillRowChildren1(h,t,r,o,s+i.O8C):this.dataStorage.isRowExpanded(c,o)&&this.fillRowTuples1(t[h.ordinal],c,o,s+i.O8C)}}}},n.prototype._fillRowChildren=function(e,r,o,s){if(i.x4C!=e){e=e.hierarchy_.sortChildren(e,!i.O8C,i.C4C),e=this.sortRowsByValue(e,r,o);for(var a=i.F8C;a<e.length;a++){var l=e.getItemAt(a);if(i.F8C==a&&this.fillRowLevels(l),i.x4C!=r[l.ordinal]&&!l.isAll){var h=o.slice(i.F8C);if(h.push(l.ordinal),!this.isEmptyOnRows(h)){var c=this.dataStorage.isRowDrilledDown(h,l),d=this.dataStorage.isRowExpanded(h),u=this.rowTuples.length;this.rowCount>h.length&&(this.rowType[u]=i.O8C,void i.F8C==this.rowDepths[u]&&(this.rowDepths[u]=s)),Date.now()-this._fillRowTuplesStart<n.SCRIPT_EXECUTION_TIMEOUT?c?this._fillRowChildren(l,r,o,s+i.O8C):d&&this.fillRowTuples(r[l.ordinal],h,s+i.O8C):(c||d)&&(this._showUnexpandedDataAlert=!i.F8C),c||d?(i.k2C!=kr.model._options.OptionsManager.showTotals&&t.M8Q!=kr.model._options.OptionsManager.showTotals||(this.rowTuples.push(h),this.rowType[this.rowTuples.length-i.O8C]=i.M8C,this.rowDepths[this.rowTuples.length-i.O8C]=s),c&&this.rowDepths[u]>s&&(this.rowDepths[u]=s,this.rowType[u]=i.F8C)):(this.rowTuples.push(h),void i.F8C==this.rowType[this.rowTuples.length-i.O8C]&&(this.rowType[this.rowTuples.length-i.O8C]=i.F8C,this.rowDepths[this.rowTuples.length-i.O8C]=s))}}}}},n.prototype.fillRowLevels=function(e){this.fillLevels(this._rowLevels,e)},n.prototype.fillColumnLevels=function(e){this.fillLevels(this._columnLevels,e)},n.prototype.fillLevels=function(e,t){if(-i.O8C==e.indexOf(t.level.uniqueName))if(i.O8C>=t.level.num)e.push(t.level.uniqueName);else{var r=e.indexOf(t.parent.level.uniqueName);e.splice(r+i.O8C,i.F8C,t.level.uniqueName)}},n.prototype.isValidSortTuple=function(e,t){for(var r=i.F8C;r<e.length;r++){var o=t.getItemAt(r);if(o.hasFilter()){var s=o.members.getItemAt(e[r]);if(!o.filter.keyExists(s.uniqueName))return!i.O8C}}return!i.F8C},n.prototype.sortRowsByValue=function(e,t,r){if(!this.hasColumnSorting)return e;var o=this.columnSortTuple;if(!this.isValidSortTuple(o,this.columnsOnly))return e;for(var s,n=[],a=[],l=[],h=new Be.AssociativeArray,c=i.F8C;c<e.length;c++)if(s=e.getItemAt(c),i.x4C!=t[s.ordinal]&&!s.isAll){var d=r.slice(i.F8C);d.push(s.ordinal),d=this.getValue(d,o,this.columnSortMeasure),isNaN(d)?l.push(s):(n.push(d),a.push(s))}for(e=this.columnSortType!=Vr.consts.SortType.DESC?Be.ArrayUtils.sort(n,Be.ArrayUtils.NUMERIC|Be.ArrayUtils.RETURNINDEXEDARRAY):Be.ArrayUtils.sort(n,Be.ArrayUtils.NUMERIC|Be.ArrayUtils.DESCENDING|Be.ArrayUtils.RETURNINDEXEDARRAY),c=i.F8C;c<e.length;c++)s=a[e[c]],i.x4C!=s&&h.addItem(s.uniqueName,s);for(c=i.F8C;c<l.length;c++)s=l[c],this.columnSortType==Vr.consts.SortType.DESC?h.addItem(s.uniqueName,s):h.addItemAt(s.uniqueName,s,c);return h},n.prototype.sortColumnsByValue=function(e,t,r){if(!this.hasRowSorting)return e;var o=this.rowSortTuple;if(!this.isValidSortTuple(o,this.rowsOnly))return e;for(var s,n=[],a=[],l=[],h=new Be.AssociativeArray,c=i.F8C;c<e.length;c++)if(s=e.getItemAt(c),i.x4C!=t[s.ordinal]&&!s.isAll){var d=r.slice(i.F8C);d.push(s.ordinal),d=this.getValue(o,d,this.rowSortMeasure),isNaN(d)?l.push(s):(n.push(d),a.push(s))}for(e=this.rowSortType!=Vr.consts.SortType.DESC?Be.ArrayUtils.sort(n,Be.ArrayUtils.NUMERIC|Be.ArrayUtils.RETURNINDEXEDARRAY):Be.ArrayUtils.sort(n,Be.ArrayUtils.NUMERIC|Be.ArrayUtils.DESCENDING|Be.ArrayUtils.RETURNINDEXEDARRAY),c=i.F8C;c<e.length;c++)s=a[e[c]],i.x4C!=s&&h.addItem(s.uniqueName,s);for(c=i.F8C;c<l.length;c++)s=l[c],this.rowSortType==Vr.consts.SortType.DESC?h.addItem(s.uniqueName,s):h.addItemAt(s.uniqueName,s,c);return h},n.prototype.fillColumnTuples=function(e,t,r){var o=t.length;(o=this._columnAxis.hasMeasures&&t.length>=this._measuresPosition?this._columns.getItemAt(o+i.O8C):this._columns.getItemAt(o))&&this.fillColumnChildren(o.allMember,e,t,r)},n.prototype.fillColumnChildren=function(e,t,r,o){e=e.hierarchy_.sortChildren(e,!i.O8C,i.C4C),e=this.sortColumnsByValue(e,t,r);for(var s=i.F8C;s<e.length;s++){var n=e.getItemAt(s);if(i.F8C==s&&this.fillColumnLevels(n),i.x4C!=t[n.ordinal]&&!n.isAll){var a=r.slice(i.F8C);if(a.push(n.ordinal),!this.isEmptyOnColumns(a)){var l=this.dataStorage.isColumnExpanded(a);this.columnTuples.push(a),this.columnDepths.push(o),this.dataStorage.isColumnDrilledDown(a,n)?this.fillColumnChildren(n,t,r,o+i.O8C):l&&this.fillColumnTuples(t[n.ordinal],a,o+i.O8C)}}}},n.prototype.fillColumnTuples1=function(e,t,r,o){var s=t.length;(s=this._columnAxis.hasMeasures&&t.length>=this._measuresPosition?this._columns.getItemAt(s+i.O8C):this._columns.getItemAt(s))&&this.fillColumnChildren1(s.allMember,e,t,r,o)},n.prototype.fillColumnChildren1=function(e,t,r,o,s){var n=r.length;e=e.hierarchy_.sortChildren(e,!i.O8C,i.C4C),e=this.sortColumnsByValue(e,t,r);for(var a,l=i.F8C;l<e.length;l++){var h=e.getItemAt(l);if(i.x4C!=t[h.ordinal]&&!h.isAll){var c=r.slice(i.F8C);if(c.push(h.ordinal),!this.isEmptyOnColumns(c)){var d=this.dataStorage.isColumnExpanded(c,o);if(n<this._measuresPosition)if(this._columnAxis.hasMeasures&&this._measureDepth<s+i.O8C&&(this._measureDepth=s+i.O8C),n==this._measuresPosition-i.O8C&&d)if(this.dataStorage.isColumnDrilledDown(c,h)){for(a=i.F8C;a<this._measures.length;a++)this._columnTuples.push([c,a]),this.columnDepths.push(s);this.fillColumnChildren1(h,t,r,o,s+i.O8C)}else for(a=i.F8C;a<this._measures.length;a++)this._columnTuples.push([c,a]),this.columnDepths.push(s),this.dataStorage.isColumnExpanded(c,a)&&this.fillColumnTuples1(t[h.ordinal],c,a,s+i.O8C);else{for(a=i.F8C;a<this._measures.length;a++)this._columnTuples.push([c,a]),this.columnDepths.push(s);this.dataStorage.isColumnDrilledDown(c,h,o)?this.fillColumnChildren1(h,t,r,o,s+i.O8C):d&&this.fillColumnTuples1(t[h.ordinal],c,o,s+i.O8C)}else this._columnTuples.push([c,o]),this.columnDepths.push(s),this.dataStorage.isColumnDrilledDown(c,h,o)?this.fillColumnChildren1(h,t,r,o,s+i.O8C):d&&this.fillColumnTuples1(t[h.ordinal],c,o,s+i.O8C)}}}},Object.defineProperty(n.prototype,s.Y6B,{get:function(){return i.F8C==this.columnTuples.length&&i.F8C==this.rowTuples.length},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),n.prototype.getRowDepth=function(e){return this.isClassic?this.rowDepths[this._rowAxis.hasMeasures?Math.floor(e/this._measures.length):e]:this.rowDepths[e]},n.prototype.getRowType=function(e){return this.isClassic?this.rowType[this._rowAxis.hasMeasures?Math.floor(e/this._measures.length):e]:this.rowType[e]},n.prototype.getColumnType=function(e){return i.O8C},n.prototype.getColumnDepth=function(e){return this.columnDepths[e]},n.prototype.getRowHierarchyIdx=function(e){return this._rowAxis.hasMeasures&&(e.length>this._measuresPosition||i.F8C==this._measuresPosition)?e.length:e.length-i.O8C},n.prototype.getRowHierarchy=function(e){return e=this.getRowHierarchyIdx(e),this._rows.getItemAt(e)},n.prototype.getColumnHierarchyIdx=function(e){return this._columnAxis.hasMeasures&&(e.length>this._measuresPosition||i.F8C==this._measuresPosition)?e.length:e.length-i.O8C},n.prototype.getColumnHierarchy=function(e){return e=this.getColumnHierarchyIdx(e),this._columns.getItemAt(e)},Object.defineProperty(n.prototype,s.q6B,{get:function(){return this.columnTuples.length},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.u6B,{get:function(){return this.rowTuples.length},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.z6B,{get:function(){return this._columnTuples.length},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.N6B,{get:function(){return this.isClassic?(this.rowAxis&&this.rowAxis.hasMeasures?this._measures.length:i.O8C)*this.rowTuples.length:this._rowTuples.length},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),n.prototype.isRowExpanded=function(e,t){return void i.F8C===t&&(t=i.x4C),this.dataStorage.isRowExpanded(e,t)},n.prototype.isColumnExpanded=function(e,t){return void i.F8C===t&&(t=i.x4C),this.dataStorage.isColumnExpanded(e,t)},n.prototype.isRowDrilledDown=function(e,t,r){return void i.F8C===r&&(r=i.x4C),this.dataStorage.isRowDrilledDown(e,t,r)},n.prototype.isColumnDrilledDown=function(e,t,r){return void i.F8C===r&&(r=i.x4C),this.dataStorage.isColumnDrilledDown(e,t,r)},n.prototype.isAggregated=function(e,t){return this.dataStorage.isAggregated(e,t)},n.prototype.getColumnTupleIndex=function(e){e=e.slice(i.F8C);for(var t=this._columnAxis.hasMeasures,r=t?e.pop():-i.O8C,o=this._columnTuples,s=i.F8C;s<o.length;s++){var n,a=!i.F8C;if(t&&this.multiMeasures){if(r!=o[s][i.O8C])continue;n=o[s][i.F8C]}else n=o[s];if(n.length==e.length){for(var l=i.F8C;l<n.length;l++)if(n[l]!=e[l]){a=!i.O8C;break}if(a)return s}}return-i.O8C},n.prototype.getRowTupleIndex=function(e){e=e.slice(i.F8C);for(var t=this._rowAxis.hasMeasures,r=t?e.pop():-i.O8C,o=this.isClassic?this.rowTuples:this._rowTuples,s=i.F8C;s<o.length;s++){var n,a=!i.F8C;if(t&&this.multiMeasures){if(r!=o[s][i.O8C])continue;n=o[s][i.F8C]}else n=o[s];if(n.length==e.length){for(var l=i.F8C;l<n.length;l++)if(n[l]!=e[l]){a=!i.O8C;break}if(a)return s}}return-i.O8C},n.prototype.getRowTuple=function(e,t){if(void i.F8C===t&&(t=!i.O8C),i.F8C>e||i.x4C==this._rowAxis||i.x4C==this._measures)return i.x4C;if(t&&this._rowAxis.hasMeasures&&this.multiMeasures){if(this.isClassic){var r=Math.floor(e/this._measures.length);return i.x4C==this.rowTuples[r]?i.x4C:this.rowTuples[r].slice(i.F8C)}return i.x4C==this._rowTuples[e]?i.x4C:this._rowTuples[e][i.F8C].slice(i.F8C)}return i.x4C==this.rowTuples[e]?i.x4C:this.rowTuples[e].slice(i.F8C)},n.prototype.getColumnTuple=function(e,t){return void i.F8C===t&&(t=!i.O8C),i.F8C>e||i.x4C==this._columnAxis||i.x4C==this._measures?i.x4C:t&&this._columnAxis.hasMeasures&&this.multiMeasures?i.x4C==this._columnTuples[e]?i.x4C:this._columnTuples[e][i.F8C].slice():i.x4C==this.columnTuples[e]?i.x4C:this.columnTuples[e].slice()},n.prototype.getColumnTupleByName=function(e,t){return i.x4C},n.prototype.getColumnTupleForExport=function(e){return this._columnAxis.hasMeasures&&this.multiMeasures?this._columnTuples[e]:this.columnTuples[e]},n.prototype.getRowMeasure=function(e){return i.x4C==this._rowTuples[e]?i.x4C:this._rowAxis.hasMeasures&&this.multiMeasures?this._measures.getItemAt(this._rowTuples[e][i.O8C]):i.x4C},n.prototype.getRowMeasureIndex=function(e){return i.x4C==this._rowTuples[e]?-i.O8C:this._rowAxis.hasMeasures&&this.multiMeasures?this._rowTuples[e][i.O8C]:-i.O8C},n.prototype.getColumnMeasure=function(e){return i.x4C==this._columnTuples[e]?i.x4C:this._columnAxis.hasMeasures&&this.multiMeasures?this._measures.getItemAt(this._columnTuples[e][i.O8C]):i.x4C},n.prototype.getColumnMeasureIndex=function(e){return i.x4C==this._columnTuples[e]?-i.O8C:this._columnAxis.hasMeasures&&this.multiMeasures?this._columnTuples[e][i.O8C]:-i.O8C},n.prototype.getMeasure=function(e,t){if(i.x4C==this._measures||i.x4C==this._rowAxis||i.x4C==this._columnAxis)return i.x4C;if(this.multiMeasures){if(this._rowAxis.hasMeasures){if(this.isClassic){var r=e%this._measures.length;return i.x4C==this.rowTuples[Math.floor(e/this.measures.length)]?this._measures.getItemAt(i.F8C):this._measures.getItemAt(r)}return i.x4C==this._rowTuples[e]?this._measures.getItemAt(i.F8C):this._measures.getItemAt(this._rowTuples[e][i.O8C])}return i.x4C==this._columnTuples[t]?this._measures.getItemAt(i.F8C):this._measures.getItemAt(this._columnTuples[t][i.O8C])}return this._measures.getItemAt(i.F8C)},n.prototype.drillThrough=function(e,t,i){return this.dataStorage.drillThrough(e,t,i)},n.prototype.save=function(e,t,i,r,o){this.dataStorage.save(e,t,i,r,o)},n.prototype.getUpdatedValue=function(e,t,i){return this.dataStorage.getUpdatedValue(e,t,i)},n.prototype.getRecordId=function(e,t,r){return i.x4C},n.prototype.getValue=function(e,t,r){var o;if(r.aggregation==Vr.consts.AggregationName.PERCENT)return o=this.dataStorage.getValue([],[],r),e=this.dataStorage.getValue(e,t,r),Math.abs(i.o0C*e/o);if(r.aggregation==Vr.consts.AggregationName.PERCENT_COLUMN)return o=this.dataStorage.getValue([],t,r),e=this.dataStorage.getValue(e,t,r),i.o0C*e/o;if(r.aggregation==Vr.consts.AggregationName.PERCENT_ROW)return o=this.dataStorage.getValue(e,[],r),e=this.dataStorage.getValue(e,t,r),i.o0C*e/o;if(r.aggregation==Vr.consts.AggregationName.INDEX){o=this.dataStorage.getValue([],[],r);var s=this.dataStorage.getValue(e,[],r),n=this.dataStorage.getValue([],t,r);return e=this.dataStorage.getValue(e,t,r),Math.abs(o*e/(n*s))}return r.aggregation==Vr.consts.AggregationName.DIFFERENCE?this.getDifference(e,t,r,!i.O8C):r.aggregation==Vr.consts.AggregationName.PERCENT_DIFFERENCE?this.getDifference(e,t,r,!i.F8C):this.dataStorage.getValue(e,t,r)},n.prototype.getDifference=function(e,t,i,r){return this.rowAxis.hasMeasures?this.getDifferenceColumn(e,t,i,r):this.getDifferenceRow(e,t,i,r)},n.prototype.getDifferenceColumn=function(e,t,r,o){var s;if(i.F8C<this.columns.length){if(s=this.getColumnTupleIndex(t),i.F8C>s)return i.F8C;if(i.F8C==s||i.F8C==t.length)return NaN;if(s=this.getColumnTuple(s-i.O8C),t.length!=s.length)return NaN;s=this.dataStorage.getValue(e,s,r)}else{if(e.slice(i.F8C),e.push(-i.O8C),s=this.getRowTupleIndex(e),e.pop(),i.F8C==s||i.F8C==e.length)return NaN;if(i.F8C>s)return i.F8C;if(s=this.getRowTuple(s-i.O8C,!i.F8C),e.length!=s.length)return NaN;s=this.dataStorage.getValue(s,t,r)}return e=this.dataStorage.getValue(e,t,r),o?(e-s)/s*i.o0C:e-s},n.prototype.getDifferenceRow=function(e,t,r,o){var s;if(i.F8C<this.rows.length){if(s=this.getRowTupleIndex(e),i.F8C==s||i.F8C==e.length)return NaN;if(i.F8C>s)return i.F8C;if(s=this.getRowTuple(s-i.O8C),e.length!=s.length)return NaN;s=this.dataStorage.getValue(s,t,r)}else{if((t=t.slice(i.F8C)).push(i.F8C),s=this.getColumnTupleIndex(t),t.pop(),i.F8C==s||i.F8C==t.length)return NaN;if(i.F8C>s)return i.F8C;if(s=this.getColumnTuple(s-i.O8C,!i.F8C),t.length!=s.length)return NaN;s=this.dataStorage.getValue(e,s,r)}return e=this.dataStorage.getValue(e,t,r),o?(e-s)/s*i.o0C:e-s},n.prototype.calculate=function(e,t,i,r){return this.dataStorage.calculate(e,t,i,r)},n.prototype.expandData=function(e){this.dataLoaded&&(e=this.slice.allHierarchies().getItem(e),i.x4C!=e&&this.expandHierarchy(e))},n.prototype.expandHierarchy=function(e){var t=this.slice.rows.keyExists(e.uniqueName)?Vr.consts.AxisName.ROWS_AXIS:Vr.consts.AxisName.COLUMNS_AXIS,r=t==Vr.consts.AxisName.ROWS_AXIS?this.slice.rowsOnly.length:this.slice.columnsOnly.length;if((e=t==Vr.consts.AxisName.ROWS_AXIS?this.slice.rowsOnly.indexOf(e.uniqueName):this.slice.columnsOnly.indexOf(e.uniqueName))+i.O8C!=r){r=[];var o=(t==Vr.consts.AxisName.ROWS_AXIS?this.slice.rowsOnly:this.slice.columnsOnly).slice(i.F8C,e+i.O8C);this.getTuples([],o,r),o=t==this.slice.axisWithMeasures.uniqueName?this.slice.axisWithMeasures.measuresPosition:-i.O8C;for(var s=i.F8C;s<r.length;s++)if(i.F8C<=o&&o<=e&&i.O8C<this.slice.measures_.length)for(var n=i.F8C;n<this.slice.measures_.length;n++){var a=this.slice.measures_.getItemAt(n);r[s].length>o?this.expand(r[s],t,a,!i.O8C):this.expand(r[s],t,i.x4C,!i.O8C)}else this.expand(r[s],t,i.x4C,!i.O8C);this.cube_.dispatch(new Vr.QueryCompleteEvent(Vr.consts.QueryType.EXPAND))}},n.prototype.getTuples=function(e,t,r,o){if(void i.F8C===o&&(o=!i.F8C),i.F8C!=t.length)for(var s=(s=t.getItemAt(i.F8C)).hasFilter()?s.filter:s.members,n=i.F8C;n<s.length;n++){var a=s.getItemAt(n);if(!a.isAll){var l=e.slice(i.F8C);l.push(a.ordinal),(o||!o&&i.O8C==t.length)&&r.push(l.slice(i.F8C)),this.getTuples(l.slice(i.F8C),t.slice(i.O8C),r,o)}}},n.prototype.collapseData=function(e){this.dataLoaded&&(e=this.slice.allHierarchies().getItem(e),i.x4C!=e&&this.collapseHierarchy(e))},n.prototype.collapseHierarchy=function(e){var t=this.slice.rows.keyExists(e.uniqueName)?Vr.consts.AxisName.ROWS_AXIS:Vr.consts.AxisName.COLUMNS_AXIS,r=t==Vr.consts.AxisName.ROWS_AXIS?this.slice.rowsOnly.length:this.slice.columnsOnly.length;if((e=t==Vr.consts.AxisName.ROWS_AXIS?this.slice.rowsOnly.indexOf(e.uniqueName):this.slice.columnsOnly.indexOf(e.uniqueName))+i.O8C!=r){r=[];var o=(t==Vr.consts.AxisName.ROWS_AXIS?this.slice.rowsOnly:this.slice.columnsOnly).slice(i.F8C,e+i.O8C);this.getTuples([],o,r,!i.O8C),o=t==this.slice.axisWithMeasures.uniqueName?this.slice.axisWithMeasures.measuresPosition:-i.O8C;for(var s=i.F8C;s<r.length;s++)if(i.F8C<=o&&o<=e&&i.O8C<this.slice.measures_.length)for(var n=i.F8C;n<this.slice.measures_.length;n++){var a=this.slice.measures_.getItemAt(n);r[s].length>o?this.collapse(r[s],t,a,!i.O8C):this.collapse(r[s],t,i.x4C,!i.O8C)}else this.collapse(r[s],t,i.x4C,!i.O8C);this.cube_.dispatch(new Vr.QueryCompleteEvent(Vr.consts.QueryType.COLLAPSE))}},n.prototype.expandAll=function(){this.dataLoaded&&(this.reset(),this.slice.expandAll?this.dataStorage.expandAll(this.slice.drillAll):this.cube_.select())},n.prototype.sort=function(){this.prepare(),this.cube_.dispatchWith(kr.model._state.StateEvent.REPORT_CHANGED)},Object.defineProperty(n.prototype,s.D6B,{get:function(){return this._lastRowsTupleInteracted},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.x6B,{get:function(){return this._lastColsTupleInteracted},enumerable:!i.F8C,configurable:!i.F8C}),n.prototype.expand=function(e,t,r,o){void i.F8C===r&&(r=i.x4C),void i.F8C===o&&(o=!i.F8C),t==Vr.consts.AxisName.ROWS_AXIS&&(this._lastRowsTupleInteracted=e),t==Vr.consts.AxisName.COLUMNS_AXIS&&(this._lastColsTupleInteracted=e);var s=this.slice.findAxis(t),n=e.slice(i.F8C);s=r&&s.hasMeasures?this._measures.indexOf(r.uniqueName):-i.O8C,n.unshift(s);var a=[];if(this.isAllExpanded())if(t==Vr.consts.AxisName.ROWS_AXIS){a=[];var l=this.getCollapsedRows();for(s=i.F8C;s<l.length;s++)n.toString()!=l[s].toString()&&a.push(l[s]);this.setCollapsedRows(a)}else{for(a=[],l=this.getCollapsedColumns(),s=i.F8C;s<l.length;s++)n.toString()!=l[s].toString()&&a.push(l[s]);this.setCollapsedColumns(a)}else t==Vr.consts.AxisName.ROWS_AXIS?((a=this.getExpandedRows().slice(i.F8C)).push(n),this.setExpandedRows(a)):((a=this.getExpandedColumns().slice(i.F8C)).push(n),this.setExpandedColumns(a));this.cube_.expand(e,t,r,o),this.cube_.dispatchWith(kr.model._state.StateEvent.REPORT_CHANGED)},n.prototype.collapse=function(e,t,r,o){void i.F8C===r&&(r=i.x4C),void i.F8C===o&&(o=!i.F8C),t==Vr.consts.AxisName.ROWS_AXIS&&(this._lastRowsTupleInteracted=e.slice(i.F8C,e.length-i.O8C)),t==Vr.consts.AxisName.COLUMNS_AXIS&&(this._lastColsTupleInteracted=e.slice(i.F8C,e.length-i.O8C));var s=this.slice.findAxis(t),n=e.slice(i.F8C);s=r&&s.hasMeasures?this._measures.indexOf(r.uniqueName):-i.O8C,n.unshift(s);var a=[];if(this.isAllExpanded())t==Vr.consts.AxisName.ROWS_AXIS?((a=this.getCollapsedRows().slice(i.F8C)).push(n),this.setCollapsedRows(a)):((a=this.getCollapsedColumns().slice(i.F8C)).push(n),this.setCollapsedColumns(a));else if(t==Vr.consts.AxisName.ROWS_AXIS){a=[];var l=this.getExpandedRows();for(s=i.F8C;s<l.length;s++)n.toString()!=l[s].toString()&&a.push(l[s]);this.setExpandedRows(a)}else{for(a=[],l=this.getExpandedColumns(),s=i.F8C;s<l.length;s++)n.toString()!=l[s].toString()&&a.push(l[s]);this.setExpandedColumns(a)}this.cube_.collapse(e,t,r,o),this.cube_.dispatchWith(kr.model._state.StateEvent.REPORT_CHANGED)},n.prototype.drillUp=function(e,t,r,o,s){if(void i.F8C===o&&(o=i.x4C),void i.F8C!==s)return this.drillUpTo(e,t,r,o,s);var n=this.slice.findAxis(r);s=[];var a=e.slice(i.F8C);if(a.unshift(t.uniqueName),n=o&&n.hasMeasures?this._measures.indexOf(o.uniqueName):-i.O8C,a.unshift(n),this.isAllDrilled())r==Vr.consts.AxisName.ROWS_AXIS?((s=this.getDrilledUpRows().slice(i.F8C)).push(a),this.setDrilledUpRows(s)):((s=this.getDrilledUpColumns().slice(i.F8C)).push(a),this.setDrilledUpColumns(s));else if(r==Vr.consts.AxisName.ROWS_AXIS){var l,h=this.getDrilledDownRows();for(l in h)n=h[l],i.K2C==typeof n[i.F8C]&&(n=n.slice(i.O8C)),n.toString()!=a.toString()&&s.push(n);this.setDrilledDownRows(s)}else{for(l in h=this.getDrilledDownColumns())n=h[l],i.K2C==typeof n[i.F8C]&&(n=n.slice(i.O8C)),n.toString()!=a.toString()&&s.push(n);this.setDrilledDownColumns(s)}this.cube_.drillUp(e,t,r,o),this.cube_.dispatchWith(kr.model._state.StateEvent.REPORT_CHANGED)},n.prototype.ascendantByLevel=function(e,t){for(var r=e;void i.F8C!==r&&r.level.uniqueName!=t;)r=r.parent;return r},n.prototype.drillUpTo=function(e,t,r,o,s){void i.F8C===o&&(o=i.x4C);var n,a=this.ascendantByLevel(t,s),l=this.slice.findAxis(r),h=[],c=e.slice(i.F8C);if(c.unshift(t.uniqueName),l=o&&l.hasMeasures?this._measures.indexOf(o.uniqueName):-i.O8C,c.unshift(l),c.unshift(s),h.push(c),r==Vr.consts.AxisName.ROWS_AXIS){var d=this.getDrilledDownRows();for(l=d.length-i.O8C;i.F8C<=l;l--)c=d[l],n=i.K2C==typeof c[i.F8C]?t.hierarchy_.findMember(c[i.M8C]):t.hierarchy_.findMember(c[i.O8C]),n=this.ascendantByLevel(n,s),void i.F8C!==n&&n.uniqueName==a.uniqueName||h.unshift(c);this.setDrilledDownRows(h)}else{for(l=(d=this.getDrilledDownColumns()).length-i.O8C;i.F8C<=l;l--)c=d[l],n=i.K2C==typeof c[i.F8C]?t.hierarchy_.findMember(c[i.M8C]):t.hierarchy_.findMember(c[i.O8C]),n=this.ascendantByLevel(n,s),void i.F8C!==n&&n.uniqueName==a.uniqueName||h.unshift(c);this.setDrilledDownColumns(h)}(c=e.slice(i.F8C))[c.length-i.O8C]=a.ordinal,this.cube_.drillUp(c,a,r,o)},n.prototype.drillDown=function(e,t,r,o,s){if(void i.F8C===o&&(o=i.x4C),void i.F8C!==s)return this.drillDownTo(e,t,r,o,s);var n=this.slice.findAxis(r);s=[];var a=e.slice(i.F8C);if(a.unshift(t.uniqueName),n=o&&n.hasMeasures?this._measures.indexOf(o.uniqueName):-i.O8C,a.unshift(n),this.isAllDrilled())if(r==Vr.consts.AxisName.ROWS_AXIS){var l,h=this.getDrilledUpRows();for(l in h)(n=h[l]).toString()!=a.toString()&&s.push(n);this.setDrilledUpRows(s)}else{for(l in h=this.getDrilledUpColumns())(n=h[l]).toString()!=a.toString()&&s.push(n);this.setDrilledUpColumns(s)}else r==Vr.consts.AxisName.ROWS_AXIS?((s=this.getDrilledDownRows().slice(i.F8C)).push(a),this.setDrilledDownRows(s)):((s=this.getDrilledDownColumns().slice(i.F8C)).push(a),this.setDrilledDownColumns(s));this.cube_.drillDown(e,t,r,o),this.cube_.dispatchWith(kr.model._state.StateEvent.REPORT_CHANGED)},n.prototype.drillDownTo=function(e,t,r,o,s){var n=this.slice.findAxis(r),a=[];(e=e.slice(i.F8C)).unshift(t.uniqueName),t=o&&n.hasMeasures?this._measures.indexOf(o.uniqueName):-i.O8C,e.unshift(t),e.unshift(s),r==Vr.consts.AxisName.ROWS_AXIS?((a=this.getDrilledDownRows().slice(i.F8C)).push(e),this.setDrilledDownRows(a)):((a=this.getDrilledDownColumns().slice(i.F8C)).push(e),this.setDrilledDownColumns(a))},n.dispose=function(){n.instance&&(n.instance.removeEventListeners(),n.instance.removeAllEventListeners()),n.instance=i.x4C},n.counter=i.F8C,n.SCRIPT_EXECUTION_TIMEOUT=9e3,n}(s.EventDispatcher),zr.ViewDataProvider=qr,Gr=De||(De={}),function(e){var t=function(){function t(){}return t.getDataProvider=function(o){var s=r;void s.F8C===o&&(o=s.C4C),s.C4C==o&&(o=Gr.model._options.OptionsManager.flatView?i.FLAT:i.PIVOT);var n=s.x4C;return(n=o==i.FLAT?e.FlatViewDataProvider.getInstance():e.ViewDataProvider.getInstance()).addEventListeners(),t.dataProvider_!=n?(t.dataProvider_&&t.dataProvider_.removeEventListeners(),n.load()):Gr.model._options.OptionsManager.optionAffectedDataProvider&&(n.load(),Gr.model._options.OptionsManager.optionAffectedDataProvider=!s.O8C),t.dataProvider_=n,t.dataProvider_},t.dispose=function(){e.FlatViewDataProvider.dispose(),e.ViewDataProvider.dispose(),t.dataProvider_=r.x4C},t.dataProvider_=r.x4C,t}();e.DataProviderFactory=t;var i=function(){function e(){}return e.PIVOT=o.s6B,e.FLAT=o.F6B,e}();e.DataProviderType=i}((Wr=Gr.data_||(Gr.data_={})).dataprovider_||(Wr.dataprovider_={})),jr=De||(De={}),Yr=jr.data_||(jr.data_={}),Xr=Yr.dataprovider_||(Yr.dataprovider_={}),Kr=function(e){var i=r,s=o;function n(){var t=e.call(this)||this;return t._measures=new Be.AssociativeArray,t._dataLoaded=!i.O8C,t.queryCompleteHandler=function(){return t.onQueryComplete()},t._columnSortType=Yr.consts.SortType.UNSORTED,t._columnSortTuple=i.x4C,t.indices=[],t.colIndices=[],t.cube_=Yr.Cube.getInstance(),t}return Ga(n,e),Object.defineProperty(n.prototype,s.k3B,{get:function(){return i.x4C!=this._dataStorage?this._dataStorage:this.cube_.localDataStorage},set:function(e){this._dataStorage=e},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,t.t8Q,{get:function(){return i.x4C!=this._slice?this._slice:this.cube_.slice_},set:function(e){this._slice=e},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.y3B,{get:function(){return this._measures},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.U6B,{get:function(){return i.O8C<this._measures.length},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.S3B,{get:function(){return this.slice&&this._dataLoaded},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),n.getInstance=function(){return i.x4C==n.instance&&(n.instance=new n),n.instance},n.prototype.addEventListeners=function(){this.cube_.addEventListener(Yr.DataEvent.QUERY_COMPLETE,this.queryCompleteHandler,i.O8C)},n.prototype.removeEventListeners=function(){this.cube_.removeEventListener(Yr.DataEvent.QUERY_COMPLETE,this.queryCompleteHandler)},n.prototype.load=function(){i.x4C==this.dataStorage&&(this.dataStorage=this.cube_.localDataStorage,i.x4C==this.dataStorage)||this.slice&&(this.dataStorage.expand([],Yr.consts.AxisName.ROWS_AXIS,i.x4C),this.dataStorage.expand([],Yr.consts.AxisName.COLUMNS_AXIS,i.x4C),this.prepare(),this._dataLoaded=!i.F8C)},n.prototype.onQueryComplete=function(){this.load()},n.prototype.prepare=function(){var e,t,r,o=this.slice?this.slice.flatten(!i.F8C):new Be.AssociativeArray;for(this.colIndices.length=i.F8C,this.colNames=new Be.AssociativeArray,this._measures=new Be.AssociativeArray,e=i.F8C;e<o.length;e++)r=o.getItemAt(e),t=this.cube_.structure_.hierarchyToMeasure(r.uniqueName),i.x4C==t&&(t=this.cube_.structure_.calculatedMeasures.getItem(r.uniqueName)),t&&this._measures.addItem(t.uniqueName,t),t=this.dataStorage.factKeys.indexOf(r.uniqueName),this.colIndices.push(t),this.colNames.addItem(r.uniqueName,this.colIndices.length-i.O8C);if(this.hasColumnSorting)this._sort();else for(e=i.F8C;e<o.length;e++)if((r=o.getItemAt(e)).sortName!=Yr.consts.SortType.UNSORTED){this._columnSortType=r.sortName,this._columnSortTuple=this.getColumnTuple(e),this._columnSortMeasure=this.cube_.structure_.hierarchyToMeasure(r.uniqueName),i.x4C==this._columnSortMeasure&&(this._columnSortMeasure=this.cube_.structure_.calculatedMeasures.getItem(r.uniqueName)),this.sort();break}},Object.defineProperty(n.prototype,s.d3B,{get:function(){return i.F8C},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.I3B,{get:function(){return i.F8C},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.T3B,{get:function(){return i.F8C},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.m3B,{get:function(){return i.F8C},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,t.M8Q,{get:function(){return new Be.AssociativeArray},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.i3B,{get:function(){return new Be.AssociativeArray},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.J3B,{get:function(){return[]},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.E3B,{get:function(){return[]},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,t.b8Q,{get:function(){return new Be.AssociativeArray},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.H3B,{get:function(){return new Be.AssociativeArray},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.Z3B,{get:function(){return new Be.AssociativeArray},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.w3B,{get:function(){return new Yr._structure.Axis(Yr.consts.AxisName.ROWS_AXIS)},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.r3B,{get:function(){return new Yr._structure.Axis(Yr.consts.AxisName.COLUMNS_AXIS)},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.C3B,{get:function(){return i.O8C},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.P3B,{get:function(){return i.F8C},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.v6B,{get:function(){return i.x4C},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.G6B,{get:function(){return i.x4C},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.W6B,{get:function(){return i.x4C},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.V6B,{get:function(){return!i.O8C},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.l6B,{get:function(){return this._columnSortType},set:function(e){e=e.toLowerCase(),this._columnSortType=e==Yr.consts.SortType.ASC||e==Yr.consts.SortType.DESC?e:Yr.consts.SortType.UNSORTED},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.p6B,{get:function(){return this._columnSortTuple},set:function(e){this._columnSortTuple=e},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.X6B,{get:function(){return this._columnSortMeasure},set:function(e){this._columnSortMeasure=e},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.B6B,{get:function(){return this._columnSortType==Yr.consts.SortType.UNSORTED||i.x4C==this._columnSortTuple?!i.O8C:!i.F8C},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),n.prototype.reset=function(e){this._dataLoaded=!i.O8C,this._sortedHierarchy=i.x4C,this._measures=new Be.AssociativeArray,this.indices.length=i.F8C,this.colIndices.length=i.F8C,this.colNames=new Be.AssociativeArray,this._columnSortTuple=this._columnSortMeasure=i.x4C,this._columnSortType=Yr.consts.SortType.UNSORTED},Object.defineProperty(n.prototype,s.Y6B,{get:function(){return i.F8C==this.colIndices.length},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),n.prototype.getRowDepth=function(e){return i.F8C},n.prototype.getRowType=function(e){return i.F8C},n.prototype.getColumnType=function(e){return i.F8C},n.prototype.getColumnDepth=function(e){return i.O8C},n.prototype.getRowHierarchyIdx=function(e){return i.F8C},n.prototype.getRowHierarchy=function(e){return this.getColumnHierarchy(e)},n.prototype.getColumnHierarchyIdx=function(e){return i.F8C},n.prototype.getColumnHierarchy=function(e){return this.cube_.structure_.allHierarchies().getItem(this.dataStorage.keys[e[i.F8C]])},Object.defineProperty(n.prototype,s.q6B,{get:function(){return this.colIndices.length},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.u6B,{get:function(){return this.dataStorage?this.dataStorage.result[i.F8C]:i.F8C},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.z6B,{get:function(){return this.colIndices.length},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.N6B,{get:function(){return this.dataStorage.getRowCount()},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),n.prototype.isRowExpanded=function(e,t){return!i.O8C},n.prototype.isColumnExpanded=function(e,t){return!i.O8C},n.prototype.isRowDrilledDown=function(e,t,r){return!i.O8C},n.prototype.isColumnDrilledDown=function(e,t,r){return!i.O8C},n.prototype.isAggregated=function(e,t){return!i.O8C},n.prototype.getColumnTupleIndex=function(e){for(var t=i.F8C;t<this.colIndices.length;t++)if(this.colIndices[t].toString()==e.toString())return t;return-i.O8C},n.prototype.getRowTupleIndex=function(e){if(!(i.F8C<this.indices.length&&e[i.F8C]<this.indices.length))return e[i.F8C];for(var t=i.F8C;t<this.indices.length;t++)if(this.indices[t].toString()==e.toString())return t;return-i.O8C},n.prototype.getRowTuple=function(e,t){return i.F8C>e?i.x4C:i.F8C<this.indices.length&&e<this.indices.length?[this.indices[e]]:[e]},n.prototype.getColumnTuple=function(e,t){return i.F8C>e?i.x4C:i.F8C<this.colIndices.length&&e<this.colIndices.length?[this.colIndices[e]]:[e]},n.prototype.getColumnTupleByName=function(e,t){void i.F8C===t&&(t=!i.O8C);var r=this.colNames.getItem(e);return this.getColumnTuple(r,t)},n.prototype.getColumnTupleForExport=function(e){return i.x4C},n.prototype.getRowMeasure=function(e){return i.x4C},n.prototype.getRowMeasureIndex=function(e){return i.F8C},n.prototype.getColumnMeasure=function(e){return i.x4C},n.prototype.getColumnMeasureIndex=function(e){return i.F8C},n.prototype.getMeasure=function(e,t){var r=this.getColumnTuple(t);return this._measures.getItem(this.dataStorage.factKeys[r[i.F8C]])},n.prototype.getUpdatedValue=function(e,t,r){return i.x4C==e?this.dataStorage.getFlatUpdatedValue(i.x4C,r):this.dataStorage.getFlatUpdatedValue(e[i.F8C],r)},n.prototype.getValue=function(e,t,r){return i.x4C==t&&i.x4C==e?this.dataStorage.getValue([],[],r):this.dataStorage.getFlatValue(e[i.F8C],t[i.F8C],r,r.type!=Yr.types.MeasureType.COUNT)},n.prototype.getRecordId=function(e,t,r){return i.x4C==t&&i.x4C==e?i.x4C:this.dataStorage.getRecordId(e[i.F8C],t[i.F8C],r)},n.prototype.sort=function(){this._sort()},n.prototype._sort=function(){if(this.hasColumnSorting){this._columnSortMeasure.type!=Yr.types.MeasureType.COUNT?this.sortRowsByValue():this.sortRowsByMembers(),this._sortedHierarchy&&(this._sortedHierarchy.sortName=Yr.consts.SortType.UNSORTED);var e=this.getColumnHierarchy(this._columnSortTuple);e&&(e.sortName=this._columnSortType,this._sortedHierarchy=e)}},n.prototype.sortRowsByValue=function(){var e,t,r=[];for(e=i.F8C;e<this.extendedDataHeight;e++)t=this.getValue([e],this._columnSortTuple,this._columnSortMeasure),r[e]=isNaN(t)?Number.NEGATIVE_INFINITY:t;this.indices=this._columnSortType!=Yr.consts.SortType.DESC?Be.ArrayUtils.sort(r,Be.ArrayUtils.NUMERIC|Be.ArrayUtils.RETURNINDEXEDARRAY):Be.ArrayUtils.sort(r,Be.ArrayUtils.NUMERIC|Be.ArrayUtils.DESCENDING|Be.ArrayUtils.RETURNINDEXEDARRAY)},n.prototype.sortRowsByMembers=function(){var e=this,t=this.getColumnHierarchy(this._columnSortTuple);if(i.x4C!=t){var r,o,s=[],n=(r=t.levels_.getItemAt(i.O8C).type)==Yr.types.LevelType.YEAR||r==Yr.types.LevelType.MONTH||r==Yr.types.LevelType.DAY;for(r=i.F8C;r<this.extendedDataHeight;r++)o=this.getValue([r],this._columnSortTuple,this._columnSortMeasure),o=t.members.getItemAt(o),s.push(n?o.uniqueName:o.caption);if(n){for(this.sortedIndex={},n=t.sortChildren(t.allMember,!i.O8C,this._columnSortType),r=i.F8C;r<t.members.length;r++)o=t.members.getItemAt(r),this.sortedIndex[o.uniqueName]=n.indexOf(o.uniqueName);this.indices=Be.ArrayUtils.sort(s,Be.ArrayUtils.RETURNINDEXEDARRAY,function(t,i){return e.sortFunction(t,i)})}else this.indices=this._columnSortType!=Yr.consts.SortType.DESC?Be.ArrayUtils.sort(s,Be.ArrayUtils.RETURNINDEXEDARRAY):Be.ArrayUtils.sort(s,Be.ArrayUtils.DESCENDING|Be.ArrayUtils.RETURNINDEXEDARRAY)}},n.prototype.sortFunction=function(e,t){var r=this.sortedIndex[e],o=this.sortedIndex[t];return r>o?i.O8C:r<o?-i.O8C:i.F8C},n.prototype.calculate=function(e,t,i,r){return this.dataStorage.calculateFlat(e,t,i,r)},n.prototype.expandData=function(e){},n.prototype.collapseData=function(e){},n.prototype.expandAll=function(){},Object.defineProperty(n.prototype,s.D6B,{get:function(){return i.x4C},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(n.prototype,s.x6B,{get:function(){return i.x4C},enumerable:!i.F8C,configurable:!i.F8C}),n.prototype.expand=function(e,t,i,r){},n.prototype.collapse=function(e,t,i,r){},n.prototype.drillUp=function(e,t,i,r){},n.prototype.drillDown=function(e,t,i,r){},n.prototype.drillThrough=function(e,t,i){return[]},n.prototype.save=function(e,t,i,r,o){this.dataStorage.saveFlat(e,t,i,r,o)},Object.defineProperty(n.prototype,s.f3B,{get:function(){return!i.O8C},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),n.dispose=function(){n.instance&&(n.instance.removeAllEventListeners(),n.instance.removeEventListeners()),n.instance=i.x4C},n}(s.EventDispatcher),Xr.FlatViewDataProvider=Kr,Qr=De||(De={}),Jr=Qr.data_||(Qr.data_={}),Zr=Jr.dataprovider_||(Jr.dataprovider_={}),$r=function(e){function t(){return e.call(this)||this}return Ga(t,e),t.getInstance=function(){return r.x4C==t._instance&&(t._instance=new t,t._instance._name="chart"+Zr.ViewDataProvider.counter),t._instance},Object.defineProperty(t.prototype,o.f3B,{get:function(){return!r.O8C},set:function(e){},enumerable:!r.F8C,configurable:!r.F8C}),t.dispose=function(){t._instance&&(t._instance.removeEventListeners(),t._instance.removeAllEventListeners()),t._instance=r.x4C},t}(Zr.ViewDataProvider),Zr.ChartDataProvider=$r,eo=De||(De={}),to=eo.data_||(eo.data_={}),io=to._structure||(to._structure={}),ro=function(){var e=r;function i(t,i){void e.F8C===i&&(i=e.C4C),this.data={},this.uniqueName=t,this.caption=i}return Object.defineProperty(i.prototype,t.W0B,{get:function(){return this._caption},set:function(t){e.x4C==t&&(t=e.C4C),t=t.toString(),e.x2C==typeof t?this._caption=e.C4C+t:e.C4C==t.trim()?this._caption=eo.model._labels.Labels.MEMBER_BLANK:this._caption=t},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(i.prototype,o.M6B,{get:function(){return this._uniqueName},set:function(e){this._uniqueName=e},enumerable:!e.F8C,configurable:!e.F8C}),i.prototype._getProperty=function(e){if(this._hasProperty(e))return this.data[e]},i.prototype._setProperty=function(e,t){this.data[e]=t},i.prototype._hasProperty=function(e){return this.data.hasOwnProperty(e)},i.prototype.toString=function(){return this.uniqueName},i.prototype.toObject=function(){var e={};return e.caption=this.caption,e.uniqueName=this.uniqueName,e},i.prototype.fromObject=function(t){for(var i in t)e.x4C!=this[i]&&(this[i]=t[i])},i}(),io.GenericElement=ro,oo=De||(De={}),so=oo.data_||(oo.data_={}),no=so._structure||(so._structure={}),ao=function(e){var i=r,s="allMemberName",n="filterEnabled";function a(r,o){void i.F8C===o&&(o=i.C4C);var s=e.call(this,r,o)||this;s._type=i.O8C,s._origin=i.F8C,s._folder=i.C4C,s._allMemberName=i.C4C,s._sortName=a.DEFAULT_SORT_NAME,s._sortAs=i.x4C,s._filter=new Be.AssociativeArray,s._filterMembers=new Be.AssociativeArray,s.__filterMembersChanged=!i.O8C,s._filterMembersNegated=new Be.AssociativeArray,s.__filterMembersNegatedChanged=!i.O8C,s._members=new Be.AssociativeArray,s._drilledDownMembers=new Be.AssociativeArray,s._levels=new Be.AssociativeArray,s._isHierarchy=!i.O8C,s._filterEnabled=!i.F8C,s._predefinedDrillDowns=[],s.cache=[],s.cacheWithDescendants=[],s._filterType=so.consts.FilterType.NONE,s._filterQuantity=-i.O8C,s._filterMeasureName=i.C4C;var n=r+".(All)",l=new no.GenericLevel(n,t.g6Q,i.F8C);s.addLevel(l),l=r+".(All Member)";var h=new no.GenericMember(l,t.g6Q);return s.addMember(h,n),s.allMemberName=l,s}return Ga(a,e),Object.defineProperty(a.prototype,"dimension",{get:function(){return this._dimension},set:function(e){this._dimension=e},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(a.prototype,i.W3C,{get:function(){return this._type},set:function(e){this._type=e},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(a.prototype,"origin",{get:function(){return this._origin},set:function(e){this._origin=e,this._isHierarchy=i.O8C==(e&i.O8C)},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(a.prototype,"quantity",{get:function(){return this.members.length},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(a.prototype,o.o6B,{get:function(){return this._folder},set:function(e){i.Q2C==e?this._folder=i.C4C:this._folder=e},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(a.prototype,"levels_",{get:function(){return this._levels},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),a.prototype.addLevel=function(e){e.hierarchy=this,this._levels.addItem(e.uniqueName,e),this._drilledDownMembers.addItemAt(e.uniqueName,new Be.AssociativeArray,e.num)},a.prototype.addLevelAt=function(e,t){e.hierarchy=this,this._levels.addItemAt(e.uniqueName,e,t);for(var r=i.M8C;r<this._levels.length;r++)this._levels.getItemAt(r).num++;this._drilledDownMembers.addItemAt(e.uniqueName,new Be.AssociativeArray,e.num)},a.prototype.findLevel=function(e){return this._levels.getItem(e)},Object.defineProperty(a.prototype,"isHierarchy",{get:function(){return i.M8C<this.levels_.length},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(a.prototype,"isMeasures",{get:function(){return this.uniqueName==so.Cube.MEASURES_NAME},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(a.prototype,n,{get:function(){return this._filterEnabled},set:function(e){this._filterEnabled=e},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(a.prototype,t.a1Q,{get:function(){return this._members},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),a.prototype.clear=function(){this._members=new Be.AssociativeArray},a.prototype.addMember=function(e,r,s){void i.F8C===r&&(r=i.C4C),void i.F8C===s&&(s=i.C4C),i.C4C==r&&(r=this.levels_&&i.O8C<this.levels_.length?this.levels_.getItemAt(i.O8C).uniqueName:this.uniqueName+t.f7C+this.caption,this.caption==oo.model._labels.Labels.MEMBER_BLANK&&(r=this.uniqueName+o.a6B)),i.x4C==this.findMember(e.uniqueName)&&(e.hierarchy_=this,e.parent=this.findMember(s)||this.allMember,e.level=this.findLevel(r),i.x4C!=e.parent&&e.parent.addChild(e),e.ordinal=this._members.length,this._members.addItem(e.uniqueName,e),this.cache=[],this.cacheWithDescendants=[])},a.prototype.drillDownMember=function(e){i.x4C!=e&&(e.isDrilledDown=!i.F8C,this._drilledDownMembers.getItem(e.level.uniqueName).addItem(e.uniqueName,e))},a.prototype.drillUpMember=function(e){e.isDrilledDown=!i.O8C,this._drilledDownMembers.getItem(e.level.uniqueName).removeItem(e.uniqueName),e=e.descendants;for(var t=i.F8C;t<e.length;t++){var r=e.getItemAt(t);r.isDrilledDown&&this.drillUpMember(r)}},a.prototype.drilledDownMembers=function(e){return this._drilledDownMembers.getItem(e.uniqueName)},Object.defineProperty(a.prototype,"drillDownDepth",{get:function(){for(var e=i.O8C;e<this.levels_.length;e++){var t=this.levels_.getItemAt(e);if(i.F8C==this.drilledDownMembers(t).length)return e}return i.O8C},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),a.prototype.findMemberByCaption=function(e){for(var t=i.F8C;t<this.members.length;t++)if(this.members.getItemAt(t).caption==e)return this.members.getItemAt(t);return i.x4C},a.prototype.findMember=function(e){return this.members.getItem(e)},a.prototype.clearSort=function(e){void i.F8C===e&&(e=!i.O8C),this.sortName=e?so.consts.SortType.UNSORTED:a.DEFAULT_SORT_NAME},a.prototype.clearSortCache=function(){this.cache=[]},Object.defineProperty(a.prototype,"sortName",{get:function(){return this._sortName},set:function(e){this._sortName=e},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(a.prototype,"sortAs",{get:function(){return this._sortAs},set:function(e){this._sortAs=e},enumerable:!i.F8C,configurable:!i.F8C}),a.prototype.sort=function(){return this.sortChildren(this.allMember)},a.prototype.sortChildren=function(e,r,o){if(void i.F8C===r&&(r=!i.F8C),void i.F8C===o&&(o=i.C4C),i.x4C==e)return new Be.AssociativeArray;if(so.consts.SortType.isValid(o)||(o=this._sortName),r){if(i.x4C!=this.cacheWithDescendants[e.ordinal]){if(i.x4C!=this.cacheWithDescendants[e.ordinal][o])return this.cacheWithDescendants[e.ordinal][o];if(!this.isHierarchy){if(o==so.consts.SortType.DESC&&i.x4C!=this.cacheWithDescendants[e.ordinal][so.consts.SortType.ASC])return this.cacheWithDescendants[e.ordinal][so.consts.SortType.DESC]=this.cacheWithDescendants[e.ordinal][so.consts.SortType.ASC].reverse(),this.cacheWithDescendants[e.ordinal][so.consts.SortType.DESC];if(o==so.consts.SortType.ASC&&i.x4C!=this.cacheWithDescendants[e.ordinal][so.consts.SortType.DESC])return this.cacheWithDescendants[e.ordinal][so.consts.SortType.ASC]=this.cacheWithDescendants[e.ordinal][so.consts.SortType.DESC].reverse(),this.cacheWithDescendants[e.ordinal][so.consts.SortType.ASC]}}}else if(i.x4C!=this.cache[e.ordinal]){if(i.x4C!=this.cache[e.ordinal][o])return this.cache[e.ordinal][o];if(!this.isHierarchy){if(o==so.consts.SortType.DESC&&i.x4C!=this.cache[e.ordinal][so.consts.SortType.ASC])return this.cache[e.ordinal][so.consts.SortType.DESC]=this.cache[e.ordinal][so.consts.SortType.ASC].reverse(),this.cache[e.ordinal][so.consts.SortType.DESC];if(o==so.consts.SortType.ASC&&i.x4C!=this.cache[e.ordinal][so.consts.SortType.DESC])return this.cache[e.ordinal][so.consts.SortType.ASC]=this.cache[e.ordinal][so.consts.SortType.DESC].reverse(),this.cache[e.ordinal][so.consts.SortType.ASC]}}var s,n=this._sortName;return this._sortName=o,s=r?e.descendants:e.children,t.l6C<s.length?s=r?e.descendants:e.children:this._sortName==so.consts.SortType.UNSORTED?(s=r?e.descendants:e.children,i.F8C<s.length&&s.getItemAt(i.F8C).isAll&&s.removeItemAt(i.F8C)):s=this.sortByCaption(e,r),r?(i.x4C==this.cacheWithDescendants[e.ordinal]&&(this.cacheWithDescendants[e.ordinal]=[]),this.cacheWithDescendants[e.ordinal][o]=s):(i.x4C==this.cache[e.ordinal]&&(this.cache[e.ordinal]=[]),this.cache[e.ordinal][o]=s),this._sortName=n,s},a.prototype._sortByCaptionOptimized=function(e,t){var r=(o=e.getChildrenCaptions()).captions,o=o.members;this._sortName==so.consts.SortType.DESC&&(r=r.reverse(),o=o.reverse());for(var s=new Be.AssociativeArray,n=i.F8C;n<r.length;n++)if(i.x4C!=r[n]){var a;this._sortName==so.consts.SortType.ASC&&(a=Be.ArrayUtils.sort(r[n],Be.ArrayUtils.CASEINSENSITIVE|Be.ArrayUtils.RETURNINDEXEDARRAY)),this._sortName==so.consts.SortType.DESC&&(a=Be.ArrayUtils.sort(r[n],Be.ArrayUtils.DESCENDING|Be.ArrayUtils.CASEINSENSITIVE|Be.ArrayUtils.RETURNINDEXEDARRAY));for(var l=i.F8C;l<a.length;l++){var h=o[n][a[l]];s.addUniqueItem(h.uniqueName,h),t&&(h=this.sortChildren(h),i.F8C<h.length&&s.concat(h,!i.O8C))}}return s},a.prototype.checkIfMonth=function(e){try{if(o.A6B==e.level.caption.toLowerCase())return!i.F8C;if(i.e8C<e.children.length)return!i.O8C;for(var t=i.F8C;t<e.children.length;t++){var r=e.children.getItemAt(t).caption.split(i.s4C)[i.F8C];if(-i.O8C==oo.model._labels.Labels.MONTHS_LABELS.indexOf(r)&&-i.O8C==oo.model._labels.Labels.MONTHS_LABELS_SHORT.indexOf(r))return!i.O8C}var s=e.hierarchy_.levels_.indexOf(e.level.uniqueName);return e.hierarchy_.levels_.length<s+i.M8C?!i.O8C:(e.hierarchy_.levels_.getItemAt(s+i.O8C).type=so.types.LevelType.MONTH,e.hierarchy_.levels_.getItemAt(s+i.M8C).type=so.types.LevelType.DAY,!i.F8C)}catch(e){}return!i.O8C},a.prototype.sortByCaption=function(e,r){var o=t,s=this.levels_.getItemAt(e.level.num+i.O8C),n=s&&s.type==so.types.LevelType.YEAR,a=s&&s.type==so.types.LevelType.HALFYEAR,l=s&&s.type==so.types.LevelType.QUARTER,h=s&&s.type==so.types.LevelType.MONTH,c=s&&s.type==so.types.LevelType.WEEK,d=s&&s.type==so.types.LevelType.DAY,u=s&&s.type==so.types.LevelType.HOUR,p=s&&s.type==so.types.LevelType.MINUTE,C=s&&s.type==so.types.LevelType.NUMBER,f=s&&s.type==so.types.LevelType.TIME||s&&s.type==so.types.LevelType.DATE,m=s&&s.type==so.types.LevelType.TIME_DATE,g=this.sortAs==so.consts.SortType.NUMERIC_RANGE;if(!(l||h||c||f||d||u||p||C||m)){if(o.N6C<e.children.length)return this._sortByCaptionOptimized(e,r);this.checkIfMonth(e)&&(h=!i.F8C)}var y=e.children.toArray();for(l||h||c||d||u||p||m||a||n?y=this.sortOrdinal(y,s?s.type:-i.O8C):f?y=this.sortDate(y):C?(this._sortName==so.consts.SortType.ASC&&Be.ArrayUtils.sortOn(y,o.W0B,Be.ArrayUtils.NUMERIC),this._sortName==so.consts.SortType.DESC&&Be.ArrayUtils.sortOn(y,o.W0B,Be.ArrayUtils.DESCENDING|Be.ArrayUtils.NUMERIC)):g?y.sort(this.numericRangeSort):(this._sortName==so.consts.SortType.ASC&&Be.ArrayUtils.sortOn(y,o.W0B,Be.ArrayUtils.CASEINSENSITIVE),this._sortName==so.consts.SortType.DESC&&Be.ArrayUtils.sortOn(y,o.W0B,Be.ArrayUtils.DESCENDING|Be.ArrayUtils.CASEINSENSITIVE)),s=new Be.AssociativeArray,n=i.F8C;n<y.length;n++)a=y[n],s.addUniqueItem(a.uniqueName,a),r&&!e.isLeaf&&(a=this.sortChildren(a,r),i.F8C<a.length&&s.concat(a,!i.O8C));return s},a.prototype.sortOrdinal=function(e,r){return r==so.types.LevelType.MONTH?e=this.sortMonths(e):r==so.types.LevelType.DAY?e=this.sortWeekdays(e):r==so.types.LevelType.QUARTER||r==so.types.LevelType.HALFYEAR||r==so.types.LevelType.YEAR?e=Be.ArrayUtils.sortOn(e,t.W0B,Be.ArrayUtils.CASEINSENSITIVE|(this.sortName==so.consts.SortType.DESC?Be.ArrayUtils.DESCENDING:i.F8C)):(this.sortName==so.consts.SortType.ASC&&Be.ArrayUtils.sortOn(e,o.Q6B,Be.ArrayUtils.NUMERIC),this.sortName==so.consts.SortType.DESC&&Be.ArrayUtils.sortOn(e,o.Q6B,Be.ArrayUtils.DESCENDING|Be.ArrayUtils.NUMERIC)),e},a.prototype.sortMonths=function(e){for(var r=this,o=[],s=[],n=i.F8C;n<e.length;++n){var a=e[n];this._checkIfMonth(a.caption)?s.push(a):o.push(a)}return this.sortName==so.consts.SortType.ASC&&Be.ArrayUtils.sortOn(o,t.W0B,Be.ArrayUtils.CASEINSENSITIVE),this.sortName==so.consts.SortType.DESC&&Be.ArrayUtils.sortOn(o,t.W0B,Be.ArrayUtils.DESCENDING|Be.ArrayUtils.CASEINSENSITIVE),s.sort(function(e,t){return r.dateTimeMonthSort(e,t)}),s.concat(o)},a.prototype.sortWeekdays=function(e){for(var r=this,o=[],s=[],n=i.F8C;n<e.length;++n){var a=e[n];this._checkIfWeekday(a.caption)?s.push(a):o.push(a)}return this.sortName==so.consts.SortType.ASC&&Be.ArrayUtils.sortOn(o,t.W0B,Be.ArrayUtils.CASEINSENSITIVE|Be.ArrayUtils.NUMERIC),this.sortName==so.consts.SortType.DESC&&Be.ArrayUtils.sortOn(o,t.W0B,Be.ArrayUtils.DESCENDING|Be.ArrayUtils.CASEINSENSITIVE|Be.ArrayUtils.NUMERIC),s.sort(function(e,t){return r.weekDaySort(e,t)}),s.concat(o)},a.prototype._checkIfMonth=function(e){return-i.O8C!=oo.model._labels.Labels.MONTHS_LABELS.indexOf(e)||-i.O8C!=oo.model._labels.Labels.MONTHS_LABELS_SHORT.indexOf(e)},a.prototype._checkIfWeekday=function(e){return-i.O8C!=oo.model._labels.Labels.WEEKDAYS_LABELS.indexOf(e)||-i.O8C!=oo.model._labels.Labels.WEEKDAYS_LABELS_SHORT.indexOf(e)},a.prototype.dateTimeMonthSort=function(e,t){var r=this.sortName==so.consts.SortType.ASC?oo.model._labels.Labels.MONTHS_LABELS.indexOf(e.caption):oo.model._labels.Labels.MONTHS_LABELS.indexOf(t.caption);-i.O8C==r&&(r=this.sortName==so.consts.SortType.ASC?oo.model._labels.Labels.MONTHS_LABELS_SHORT.indexOf(e.caption):oo.model._labels.Labels.MONTHS_LABELS_SHORT.indexOf(t.caption));var o=this.sortName==so.consts.SortType.ASC?oo.model._labels.Labels.MONTHS_LABELS.indexOf(t.caption):oo.model._labels.Labels.MONTHS_LABELS.indexOf(e.caption);return-i.O8C==o&&(o=this.sortName==so.consts.SortType.ASC?oo.model._labels.Labels.MONTHS_LABELS_SHORT.indexOf(t.caption):oo.model._labels.Labels.MONTHS_LABELS_SHORT.indexOf(e.caption)),r>o?i.O8C:r<o?-i.O8C:i.F8C},a.prototype.weekDaySort=function(e,t){var r=this.sortName==so.consts.SortType.ASC?oo.model._labels.Labels.WEEKDAYS_LABELS.indexOf(e.caption):oo.model._labels.Labels.WEEKDAYS_LABELS.indexOf(t.caption);-i.O8C==r&&(r=this.sortName==so.consts.SortType.ASC?oo.model._labels.Labels.WEEKDAYS_LABELS_SHORT.indexOf(e.caption):oo.model._labels.Labels.WEEKDAYS_LABELS_SHORT.indexOf(t.caption));var o=this.sortName==so.consts.SortType.ASC?oo.model._labels.Labels.WEEKDAYS_LABELS.indexOf(t.caption):oo.model._labels.Labels.WEEKDAYS_LABELS.indexOf(e.caption);return-i.O8C==o&&(o=this.sortName==so.consts.SortType.ASC?oo.model._labels.Labels.WEEKDAYS_LABELS_SHORT.indexOf(t.caption):oo.model._labels.Labels.WEEKDAYS_LABELS_SHORT.indexOf(e.caption)),r>o?i.O8C:r<o?-i.O8C:i.F8C},a.prototype.sortDate=function(e){return this._sortName==so.consts.SortType.ASC&&Be.ArrayUtils.sortOn(e,o.Q6B,Be.ArrayUtils.NUMERIC),this._sortName==so.consts.SortType.DESC&&Be.ArrayUtils.sortOn(e,o.Q6B,Be.ArrayUtils.DESCENDING|Be.ArrayUtils.NUMERIC),e},a.prototype.numericRangeSort=function(e,t){var r=/(?:\d*\.)?\d+/,o=e.caption.match(r),s=t.caption.match(r);return(o=o&&i.F8C<o.length?parseFloat(o[i.F8C]):Number.POSITIVE_INFINITY)>(s=s&&i.F8C<s.length?parseFloat(s[i.F8C]):Number.POSITIVE_INFINITY)?i.O8C:o<s?-i.O8C:i.F8C},a.prototype.membersByLevel=function(e){e=this._levels.getItem(e).num;for(var t=new Be.AssociativeArray,r=this.sort(),o=i.F8C;o<r.length;o++){var s=r.getItemAt(o);s&&s.level.num==e&&t.addItem(s.uniqueName,s)}return t},Object.defineProperty(a.prototype,o.f6B,{get:function(){return i.F8C<this._filter.length?this._filter:this.filterMembers},set:function(e){this._filter=e},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(a.prototype,"filterMembers",{get:function(){return this.__filterMembersNegatedChanged&&(this._filterMembers=new Be.AssociativeArray,i.F8C<this._filterMembersNegated.length&&(this._filterMembers=this.createOpposite(this._filterMembersNegated)),this.__filterMembersNegatedChanged=!i.O8C),this._filterMembers},set:function(e){e.length+i.O8C==this.members.length&&(e=new Be.AssociativeArray),this.__filterMembersChanged=!i.F8C,this._filterMembers=e,this._filterMembersNegated=new Be.AssociativeArray},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(a.prototype,"filterMembersNegated",{get:function(){return this.__filterMembersChanged&&(this._filterMembersNegated=new Be.AssociativeArray,i.F8C<this._filterMembers.length&&(this._filterMembersNegated=this.createOpposite(this._filterMembers)),this.__filterMembersChanged=!i.O8C),this._filterMembersNegated},set:function(e){e.length+i.O8C==this.members.length&&(e=new Be.AssociativeArray),this.__filterMembersNegatedChanged=!i.F8C,this._filterMembersNegated=e,this._filterMembers=new Be.AssociativeArray},enumerable:!i.F8C,configurable:!i.F8C}),a.prototype.createOpposite=function(e){for(var t=this.members.slice(i.O8C),r=i.F8C;r<e.length;r++){var o=e.getItemAt(r);t.removeItem(o.uniqueName),this.removeMemberChildren(t,o),o.parent&&this.removeMemberParent(t,o.parent)}return this.checkMemberChildren(t,this.allMember),t},a.prototype.checkMemberChildren=function(e,t){for(var r=i.F8C;r<t.children.length;r++){var o=t.children.getItemAt(r);i.F8C<o.children.length&&(e.getItem(o.uniqueName)?e.getItem(o.children.getItemAt(i.F8C).uniqueName)&&this.removeMemberChildren(e,o):this.checkMemberChildren(e,o))}},a.prototype.removeMemberChildren=function(e,t){if(t)for(var r=t.children,o=i.F8C;o<r.length;o++)e.removeItem(r.getItemAt(o).uniqueName),this.removeMemberChildren(e,r.getItemAt(o))},a.prototype.removeMemberParent=function(e,t){t&&(e.removeItem(t.uniqueName),t.parent&&this.removeMemberParent(e,t.parent))},Object.defineProperty(a.prototype,"filterType",{get:function(){return-i.O8C==this._filterQuantity?so.consts.FilterType.NONE:this._filterType},set:function(e){e=e.toLowerCase(),this._filterType=e==so.consts.FilterType.TOP||e==so.consts.FilterType.BOTTOM?e:so.consts.FilterType.NONE},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(a.prototype,"filterQuantity",{get:function(){return this._filterQuantity},set:function(e){isNaN(e)||i.O8C>e?(this._filterQuantity=-i.O8C,this._filterType=so.consts.FilterType.NONE):this._filterQuantity=e},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(a.prototype,"filterMeasureName",{get:function(){return this._filterMeasureName},set:function(e){this._filterMeasureName=e},enumerable:!i.F8C,configurable:!i.F8C}),a.prototype.clearFilter=function(){this.clearMembersFilter(),this.clearValuesFilter()},a.prototype.clearMembersFilter=function(){this._filter=new Be.AssociativeArray,this._filterMembers=new Be.AssociativeArray,this._filterMembersNegated=new Be.AssociativeArray},a.prototype.clearValuesFilter=function(){this._filter=new Be.AssociativeArray,this._filterQuantity=-i.O8C,this._filterType=so.consts.FilterType.NONE,this._filterMeasureName=i.C4C},a.prototype.hasFilter=function(){return this.hasMembersFilter()||this.hasValuesFilter()},a.prototype.hasMembersFilter=function(){return i.F8C<this._filterMembers.length||i.F8C<this._filterMembersNegated.length},a.prototype.hasValuesFilter=function(){return this._filterType&&this.filterType!=so.consts.FilterType.NONE},a.prototype.filterByLevel=function(e){for(var t=new Be.AssociativeArray,r=i.F8C<this._filter.length?this._filter:this._filterMembers,o=i.F8C;o<r.length;o++){var s=r.getItemAt(o);s.level.num==e&&t.addItem(s.uniqueName,s)}return t},Object.defineProperty(a.prototype,s,{get:function(){return this._allMemberName},set:function(e){this._allMemberName=e},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(a.prototype,"allMember",{get:function(){return this._allMember||(this._allMember=this.findMember(this._allMemberName),this.drillDownMember(this._allMember)),this._allMember},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(a.prototype,"predefinedDrillDowns",{get:function(){return this._predefinedDrillDowns},set:function(e){this._predefinedDrillDowns=e},enumerable:!i.F8C,configurable:!i.F8C}),a.toObject=function(e){var t={};return t.uniqueName=e.uniqueName,t.caption=e.caption,t.filterEnabled=e.filterEnabled,t.sortName=e.sortName,t.sortAs=e.sortAs,t.type=e.type,t.filter=a.filterToObject(e),t},a.filterToObject=function(e){if(!i.O8C==e.hasFilter())return i.x4C;var t={};return e.hasValuesFilter()&&(t={type:e.filterType,quantity:e.filterQuantity,measure:e.filterMeasureName,measureName:e.filterMeasureName}),e.hasMembersFilter()&&(e.filterMembers.length<e.members.length/i.M8C?t.members=e.filterMembers.toArray(!i.F8C):(t.negation=!i.F8C,t.members=e.filterMembersNegated.toArray(!i.F8C))),t},a.fromObject=function(e,r){void i.F8C===r&&(r=i.x4C);var l=e.uniqueName;return i.x4C==r&&(r=new a(l)),e.hasOwnProperty(t.W0B)&&(r.caption=e.caption),e.hasOwnProperty("sortName")&&(r.sortName=e.sortName),e.hasOwnProperty("sortAs")&&(r.sortAs=e.sortAs),e.hasOwnProperty(n)&&(r.filterEnabled=e.filterEnabled),e.hasOwnProperty(i.W3C)&&(r.type=e.type),e.hasOwnProperty("origin")&&(r.origin=e.origin),e.hasOwnProperty(o.o6B)&&(r.folder=e.folder),e.hasOwnProperty(o.f6B)&&a.filterFromObject(e.filter,r),e.hasOwnProperty(s)&&(r.allMemberName=e.allMemberName),r},a.filterFromObject=function(e,r){if(i.x4C!=e){if(e.hasOwnProperty(t.a1Q)){for(var o,s,n=new Be.AssociativeArray,a=i.F8C;a<e.members.length;a++)o=i.K2C==typeof e.members[a]?e.members[a]:e.members[a].uniqueName,s=r.findMember(o),i.x4C!=s&&n.addItem(o,s);e.negation?r.filterMembersNegated=n:r.filterMembers=n}o=e.hasOwnProperty(i.W3C)?e.type:so.consts.FilterType.NONE,s=e.hasOwnProperty("quantity")?Number(e.quantity):-i.O8C,n=i.C4C,e.hasOwnProperty("measureName")&&(n=e.measureName),e.hasOwnProperty("measure")&&(n=e.measure),o!=so.consts.FilterType.NONE&&(r.filterType=o,r.filterQuantity=s,r.filterMeasureName=n)}},a.DEFAULT_SORT_NAME=o.r6B,a}(no.GenericElement),no.GenericHierarchy=ao,lo=De||(De={}),ho=lo.data_||(lo.data_={}),co=ho._structure||(ho._structure={}),uo=function(e){var t=r;function i(i,r,o){return void t.F8C===r&&(r=t.C4C),void t.F8C===o&&(o=t.F8C),(i=e.call(this,i,r)||this)._type=t.O8C,i._properties=new Be.AssociativeArray,i._number=o,i}return Ga(i,e),Object.defineProperty(i.prototype,"num",{get:function(){return this._number},set:function(e){this._number=e},enumerable:!t.F8C,configurable:!t.F8C}),Object.defineProperty(i.prototype,t.W3C,{get:function(){return this._type},set:function(e){this._type=e},enumerable:!t.F8C,configurable:!t.F8C}),Object.defineProperty(i.prototype,"isLast",{get:function(){return this._hierarchy.levels_.length-t.O8C==this._number},set:function(e){},enumerable:!t.F8C,configurable:!t.F8C}),Object.defineProperty(i.prototype,o.U5B,{get:function(){return this._hierarchy},set:function(e){this._hierarchy=e},enumerable:!t.F8C,configurable:!t.F8C}),i}(co.GenericElement),co.GenericLevel=uo,po=De||(De={}),Co=po.data_||(po.data_={}),fo=Co._structure||(Co._structure={}),mo=function(e){var i=r,s="_captionMembers_",n="_captions_",a="_descendants_",l="_children_";function h(t,r){var o=e.call(this,t,r)||this;return o._ordinal=i.O8C,o._levelOrdinal=i.F8C,o._isDrilledDown=!i.O8C,o._numDescendants=-i.O8C,o._hasCaptionSorting=-i.O8C,o}return Ga(h,e),Object.defineProperty(h.prototype,"ordinal",{get:function(){return this._ordinal},set:function(e){this._ordinal=e},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(h.prototype,o.Q6B,{get:function(){return this._levelOrdinal},set:function(e){this._levelOrdinal=e},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(h.prototype,"hierarchy_",{get:function(){return this._hierarchy},set:function(e){this._hierarchy=e},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(h.prototype,i.q2C,{get:function(){return this._parent},set:function(e){this._parent=e},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(h.prototype,"root",{get:function(){if(i.M8C>this._level.num)return this;var e=this;do{e=e.parent}while(i.O8C<e.level.num);return e},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(h.prototype,o.V5B,{get:function(){return this._level},set:function(e){this._level=e},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(h.prototype,"isAll",{get:function(){return i.x4C!=this.hierarchy_.allMember&&this.hierarchy_.allMember.uniqueName==this.uniqueName},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(h.prototype,"isDrilledDown",{get:function(){return this._isDrilledDown},set:function(e){this._isDrilledDown=e},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(h.prototype,"children",{get:function(){return this._hasProperty(l)?this._getProperty(l):new Be.AssociativeArray},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(h.prototype,o.g3B,{get:function(){if(this._hasProperty(a))return this._getProperty(a);var e=new Be.AssociativeArray;if(e.addItem(this.uniqueName,this),i.F8C==this.numDescendants)return e;for(var t=this.children.length,r=i.F8C;r<t;r++){var s=this.children.getItemAt(r);s.isLeaf?e.addItem(s.uniqueName,s):i.F8C<s.numDescendants?e.concat(s.descendants,!i.O8C):e.addItem(s.uniqueName,s)}return i.F8C<e.length&&this._setProperty(o.g3B,e),e},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(h.prototype,"numDescendants",{get:function(){if(-i.O8C<this._numDescendants)return this._numDescendants;if(!this._hasProperty(l))return this._numDescendants=i.F8C;for(var e=this.children.length,t=e,r=i.F8C;r<e;r++)t+=this.children.getItemAt(r).numDescendants;return t},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),h.prototype.getChildrenCaptions=function(){return{captions:this.captions,members:this.captionMembers}},h.prototype.clearDescendantsCache=function(){this._hasProperty(a)&&delete this._descendants_,this.parent&&this.parent.clearDescendantsCache()},Object.defineProperty(h.prototype,"captions",{get:function(){return this._hasProperty(n)||(this.captions=[]),this._getProperty(n)},set:function(e){this._setProperty(n,e)},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(h.prototype,"captionMembers",{get:function(){return this._hasProperty(s)||(this.captionMembers=[]),this._getProperty(s)},set:function(e){this._setProperty(s,e)},enumerable:!i.F8C,configurable:!i.F8C}),h.prototype.addChild=function(e){var r=this.children;r.addItem(e.uniqueName,e),this._setProperty(l,r),e.parent=this,this._numDescendants=-i.O8C,this.clearDescendantsCache(),i.O8C==this.hasCaptionSorting(e)&&(r=e.caption.charAt(i.F8C).toLowerCase().charCodeAt(i.F8C),i.x4C==this.captions[r]&&(this.captions[r]=[],this.captionMembers[r]=[]),this.captions[r].push(e.caption),this.captionMembers[r].push(e)),t.l6C<this.children.length&&(this._hasCaptionSorting=i.F8C,this.captions=[],this.captionMembers=[])},h.prototype.removeChild=function(e){if(this.children.removeItem(e.uniqueName),this.clearDescendantsCache(),i.O8C==this.hasCaptionSorting(e)){var t=e.caption.charAt(i.F8C).toLowerCase().charCodeAt(i.F8C);e=this.captions[t].indexOf(e.caption),this.captions[t].splice(e,i.O8C),this.captionMembers[t].splice(e,i.O8C)}},h.prototype.hasCaptionSorting=function(e){return-i.O8C!=this._hasCaptionSorting?this._hasCaptionSorting:this._hasCaptionSorting=e.level.type==Co.types.LevelType.HOUR||e.level.type==Co.types.LevelType.MINUTE||e.level.type==Co.types.LevelType.DAY||e.level.type==Co.types.LevelType.NUMBER?i.F8C:i.O8C},h.prototype.toString=function(){return this.uniqueName+" : "+this._ordinal},Object.defineProperty(h.prototype,"isLeaf",{get:function(){return!this._hasProperty(l)||i.F8C==this.children.length},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),h.toObject=function(e){var t={};return t.uniqueName=e.uniqueName,t.caption=e.caption,t.hierarchyName=e.hierarchy_.uniqueName,t},h}(fo.GenericElement),fo.GenericMember=mo,go=De||(De={}),yo=go.data_||(go.data_={}),_o=yo._structure||(yo._structure={}),vo=function(e){var i=o,s=r,n="availableAggregations",a="aggregation",l="grandTotalCaption",h="individual";function c(t,i){var o=r;void o.F8C===i&&(i=o.C4C);var s=e.call(this,t,i)||this;return s._folder=o.C4C,s._format=o.C4C,s._type=yo.types.MeasureType.NUMBER,s._grandTotalCaption=o.C4C,s._defaultAggregation=yo.consts.AggregationName.SUM,s._aggregation=o.C4C,s._availableAggregations=[],s._params=[],s._formula=o.C4C,s._individual=!o.O8C,s._hidden=!o.O8C,s._defaultAggregation=yo.consts.AggregationName.SUM,s}return Ga(c,e),Object.defineProperty(c.prototype,t.W0B,{get:function(){if(this._customCaption)return this._customCaption;if(!r.O8C==go.model._options.OptionsManager.showAggregationLabels)return this._caption;switch(this.aggregation){case yo.consts.AggregationName.COUNT:return Be.StringUtils.bind(go.model._labels.Labels.COUNT_TOTAL_CAPTION,this._caption);case yo.consts.AggregationName.PRODUCT:return Be.StringUtils.bind(go.model._labels.Labels.PRODUCT_TOTAL_CAPTION,this._caption);case yo.consts.AggregationName.DISTINCT_COUNT:return Be.StringUtils.bind(go.model._labels.Labels.DISTINCT_COUNT_TOTAL_CAPTION,this._caption);case yo.consts.AggregationName.AVERAGE:return Be.StringUtils.bind(go.model._labels.Labels.AVERAGE_TOTAL_CAPTION,this._caption);case yo.consts.AggregationName.MAX:return Be.StringUtils.bind(go.model._labels.Labels.MAX_TOTAL_CAPTION,this._caption);case yo.consts.AggregationName.MIN:return Be.StringUtils.bind(go.model._labels.Labels.MIN_TOTAL_CAPTION,this._caption);case yo.consts.AggregationName.PERCENT:return Be.StringUtils.bind(go.model._labels.Labels.PERCENT_TOTAL_CAPTION,this._caption);case yo.consts.AggregationName.PERCENT_COLUMN:return Be.StringUtils.bind(go.model._labels.Labels.PERCENT_COLUMN_TOTAL_CAPTION,this._caption);case yo.consts.AggregationName.PERCENT_ROW:return Be.StringUtils.bind(go.model._labels.Labels.PERCENT_ROW_TOTAL_CAPTION,this._caption);case yo.consts.AggregationName.INDEX:return Be.StringUtils.bind(go.model._labels.Labels.INDEX_TOTAL_CAPTION,this._caption);case yo.consts.AggregationName.DIFFERENCE:return Be.StringUtils.bind(go.model._labels.Labels.DIFFERENCE_TOTAL_CAPTION,this._caption);case yo.consts.AggregationName.PERCENT_DIFFERENCE:return Be.StringUtils.bind(go.model._labels.Labels.PERCENT_DIFFERENCE_TOTAL_CAPTION,this._caption);case yo.consts.AggregationName.NONE:return this._caption}return Be.StringUtils.bind(go.model._labels.Labels.SUM_TOTAL_CAPTION,this._caption)},set:function(e){r.C4C==e.trim()?this._caption=go.model._labels.Labels.MEMBER_BLANK:this._caption=e},enumerable:!s.F8C,configurable:!s.F8C}),Object.defineProperty(c.prototype,"originalCaption",{get:function(){return this._caption},set:function(e){},enumerable:!s.F8C,configurable:!s.F8C}),Object.defineProperty(c.prototype,"customCaption",{get:function(){return this._customCaption},set:function(e){this._customCaption=e},enumerable:!s.F8C,configurable:!s.F8C}),Object.defineProperty(c.prototype,i.o6B,{get:function(){return this._folder},set:function(e){this._folder=e},enumerable:!s.F8C,configurable:!s.F8C}),Object.defineProperty(c.prototype,"format",{get:function(){return this._format},set:function(e){this._format=e},enumerable:!s.F8C,configurable:!s.F8C}),Object.defineProperty(c.prototype,h,{get:function(){return this._individual},set:function(e){this._individual=e},enumerable:!s.F8C,configurable:!s.F8C}),Object.defineProperty(c.prototype,i.b5B,{get:function(){return this._hidden},set:function(e){this._hidden=e},enumerable:!s.F8C,configurable:!s.F8C}),Object.defineProperty(c.prototype,s.W3C,{get:function(){return this._type},set:function(e){this._type=e,this._type!=yo.types.MeasureType.NUMBER&&this._type!=yo.types.MeasureType.TIME&&(this._type==yo.types.MeasureType.DATE||this._type==yo.types.MeasureType.DATETIME?(this.availableAggregations=[yo.consts.AggregationName.COUNT,yo.consts.AggregationName.DISTINCT_COUNT,yo.consts.AggregationName.MAX,yo.consts.AggregationName.MIN],this._defaultAggregation=yo.consts.AggregationName.MAX):(this.availableAggregations=[yo.consts.AggregationName.COUNT,yo.consts.AggregationName.DISTINCT_COUNT],this._defaultAggregation=yo.consts.AggregationName.COUNT))},enumerable:!s.F8C,configurable:!s.F8C}),Object.defineProperty(c.prototype,l,{get:function(){if(this.calculated)return this._caption;if(this._grandTotalCaption)return this._grandTotalCaption;if(!r.O8C==go.model._options.OptionsManager.showAggregationLabels)return this._caption;switch(this.aggregation){case yo.consts.AggregationName.SUM:return Be.StringUtils.bind(go.model._labels.Labels.SUM_GRAND_TOTAL_CAPTION,this._caption);case yo.consts.AggregationName.COUNT:return Be.StringUtils.bind(go.model._labels.Labels.COUNT_GRAND_TOTAL_CAPTION,this._caption);case yo.consts.AggregationName.PRODUCT:return Be.StringUtils.bind(go.model._labels.Labels.PRODUCT_GRAND_TOTAL_CAPTION,this._caption);case yo.consts.AggregationName.DISTINCT_COUNT:return Be.StringUtils.bind(go.model._labels.Labels.DISTINCT_COUNT_GRAND_TOTAL_CAPTION,this._caption);case yo.consts.AggregationName.AVERAGE:return Be.StringUtils.bind(go.model._labels.Labels.AVERAGE_GRAND_TOTAL_CAPTION,this._caption);case yo.consts.AggregationName.MAX:return Be.StringUtils.bind(go.model._labels.Labels.MAX_GRAND_TOTAL_CAPTION,this._caption);case yo.consts.AggregationName.MIN:return Be.StringUtils.bind(go.model._labels.Labels.MIN_GRAND_TOTAL_CAPTION,this._caption);case yo.consts.AggregationName.PERCENT:return Be.StringUtils.bind(go.model._labels.Labels.PERCENT_GRAND_TOTAL_CAPTION,this._caption);case yo.consts.AggregationName.PERCENT_COLUMN:return Be.StringUtils.bind(go.model._labels.Labels.PERCENT_COLUMN_GRAND_TOTAL_CAPTION,this._caption);case yo.consts.AggregationName.PERCENT_ROW:return Be.StringUtils.bind(go.model._labels.Labels.PERCENT_ROW_GRAND_TOTAL_CAPTION,this._caption);case yo.consts.AggregationName.INDEX:return Be.StringUtils.bind(go.model._labels.Labels.INDEX_GRAND_TOTAL_CAPTION,this._caption);case yo.consts.AggregationName.DIFFERENCE:return Be.StringUtils.bind(go.model._labels.Labels.DIFFERENCE_GRAND_TOTAL_CAPTION,this._caption);case yo.consts.AggregationName.PERCENT_DIFFERENCE:return Be.StringUtils.bind(go.model._labels.Labels.PERCENT_DIFFERENCE_GRAND_TOTAL_CAPTION,this._caption)}return this._caption},set:function(e){this._grandTotalCaption=e},enumerable:!s.F8C,configurable:!s.F8C}),Object.defineProperty(c.prototype,a,{get:function(){return r.C4C==this._aggregation?this._defaultAggregation:this._aggregation},set:function(e){var t=r;e&&e.toLowerCase()!=this._aggregation?(e=e.toLowerCase(),yo.consts.AggregationName.deprecatedType(e)&&(e=yo.consts.AggregationName.fromDeprecatedToValid(e)),yo.consts.AggregationName.validType(e)||this.calculated&&e==yo.consts.AggregationName.NONE?(this._grandTotalCaption=this._customCaption=void t.F8C,this._aggregation=e,!this.calculated&&t.F8C<this.availableAggregations.length&&-t.O8C==this.availableAggregations.indexOf(e)&&(this._aggregation=this._availableAggregations[t.F8C])):this.resolveColisionsForAggregations()):t.C4C==e&&this.resolveColisionsForAggregations()},enumerable:!s.F8C,configurable:!s.F8C}),c.prototype.resolveColisionsForAggregations=function(){this._grandTotalCaption=this._customCaption=void r.F8C,this._aggregation=r.F8C<this._availableAggregations.length?this._availableAggregations[r.F8C]:this._defaultAggregation},Object.defineProperty(c.prototype,n,{get:function(){return this._availableAggregations},set:function(e){if(this._availableAggregations=[],r.x4C==e)this._availableAggregations=[];else if(this.type!=yo.types.MeasureType.NUMBER&&this._type!=yo.types.MeasureType.TIME&&r.F8C==this._availableAggregations.length)this._availableAggregations=this._type==yo.types.MeasureType.DATE||this._type==yo.types.MeasureType.DATETIME?[yo.consts.AggregationName.COUNT,yo.consts.AggregationName.DISTINCT_COUNT,yo.consts.AggregationName.MAX,yo.consts.AggregationName.MIN]:[yo.consts.AggregationName.COUNT,yo.consts.AggregationName.DISTINCT_COUNT];else for(var t=r.F8C;t<e.length;t++){var i=e[t].trim().toLowerCase();yo.consts.AggregationName.deprecatedType(i)&&(i=yo.consts.AggregationName.fromDeprecatedToValid(i)),(this.type==yo.types.MeasureType.NUMBER||this._type==yo.types.MeasureType.TIME||i==yo.consts.AggregationName.COUNT||i==yo.consts.AggregationName.DISTINCT_COUNT)&&yo.consts.AggregationName.validType(i)&&this._availableAggregations.push(i)}},enumerable:!s.F8C,configurable:!s.F8C}),Object.defineProperty(c.prototype,i.P2B,{get:function(){return this._params},set:function(e){this._params=e},enumerable:!s.F8C,configurable:!s.F8C}),Object.defineProperty(c.prototype,"calculated",{get:function(){return r.x4C!=this.formula&&r.C4C!=this.formula},set:function(e){},enumerable:!s.F8C,configurable:!s.F8C}),Object.defineProperty(c.prototype,i.t5B,{get:function(){return this._formula},set:function(e){this._formula=e},enumerable:!s.F8C,configurable:!s.F8C}),c.toObject=function(e){var t={};return t.uniqueName=e.uniqueName,t.name=e.originalCaption,e.calculated&&(t.formula=e.formula),t.format=e.format,t.individual=e.individual,t.availableAggregations=e.availableAggregations,t.aggregation=e.aggregation,t.caption=e.caption,t.originalCaption=e.originalCaption,t.grandTotalCaption=e.grandTotalCaption,t.folder=e.folder,t.type=e.type,t.calculated=e.calculated,t},c.fromObject=function(e,o){var s=r;void s.F8C===o&&(o=s.x4C);var c=e.uniqueName;return s.x4C==o&&(o=new _o.GenericMeasure(c)),e.hasOwnProperty(s.W3C)&&(o.type=s.K2C==typeof e.type?yo.types.MeasureType.fromColumnType(e.type):e.type),e.hasOwnProperty(h)&&(o.individual=e.individual),e.hasOwnProperty(i.t5B)&&(o.formula=e.formula),e.hasOwnProperty("format")&&(o.format=e.format),e.hasOwnProperty(n)&&(o.availableAggregations=e.availableAggregations),o.aggregation=e.hasOwnProperty(a)?e.aggregation:o.calculated?yo.consts.AggregationName.NONE:s.C4C,e.hasOwnProperty(t.W0B)&&(o.caption=e.caption),e.hasOwnProperty(t.F5C)&&(o.caption=e.name),e.hasOwnProperty(l)&&(o.grandTotalCaption=e.grandTotalCaption),e.hasOwnProperty(i.o6B)&&(o.folder=e.folder),o.calculated&&(c=new Be.Lexer,o.params=c.parse(o.formula)),o},c.prototype.hasDefaultParams=function(){var e=r,t=new c(e.C4C,e.C4C);return this.individual!=t.individual||this.formula!=t.formula||this.format!=t.format||this.type==yo.types.MeasureType.COUNT&&this.aggregation!=yo.consts.AggregationName.COUNT&&this.aggregation!=yo.consts.AggregationName.NONE||this.type==yo.types.MeasureType.NUMBER&&this.aggregation!=yo.consts.AggregationName.SUM&&this.aggregation!=yo.consts.AggregationName.NONE?!e.O8C:!e.F8C},c.prototype.getFormat=function(e){var t,i=r;return void i.F8C===e&&(e=!i.O8C),t=go.model.format.FormatManager.formatExists(this.format)?go.model.format.FormatManager.getFormat(this.format):i.C4C!=this.format&&go.model.format.FormatManager.formatExists(i.C4C)?go.model.format.FormatManager.getFormat(i.C4C):go.model.format.FormatManager.getDefaultFormat(),e&&Be.nullOrUndefined(t.params.textAlign)&&this.type!=yo.types.MeasureType.NUMBER&&this.type!=yo.types.MeasureType.TIME&&this.type!=yo.types.MeasureType.DATETIME&&((t=t.clone()).textAlign=i.M2C),t},c}(_o.GenericElement),_o.GenericMeasure=vo,bo=De||(De={}),wo=bo.data_||(bo.data_={}),Fo=wo._structure||(wo._structure={}),Eo=function(e){var t=r;function i(i,r){void t.F8C===r&&(r=t.C4C);var o=e.call(this,i,r)||this;return o.hierarchies=new Be.AssociativeArray,o}return Ga(i,e),Object.defineProperty(i.prototype,o.c5B,{get:function(){return this._hierarchies},set:function(e){this._hierarchies=e},enumerable:!t.F8C,configurable:!t.F8C}),Object.defineProperty(i.prototype,t.W3C,{get:function(){return this._type},set:function(e){this._type=e},enumerable:!t.F8C,configurable:!t.F8C}),Object.defineProperty(i.prototype,"structure",{get:function(){return this._structure},set:function(e){this._structure=e},enumerable:!t.F8C,configurable:!t.F8C}),i.prototype.addHierarchy=function(e){e.dimension=this,this._hierarchies.addItem(e.uniqueName,e)},i.prototype.findHierarchy=function(e){return this._hierarchies.getItem(e)},i.fromObject=function(e,r){void t.F8C===r&&(r=t.x4C);var o=e.uniqueName;return t.x4C==r&&(r=new i(o)),void t.F8C!==e.caption&&(r.caption=e.caption),void t.F8C!==e.type&&(r.type=e.type),r},i}(Fo.GenericElement),Fo.GenericDimension=Eo,Oo=De||(De={}),So=Oo.data_||(Oo.data_={}),To=So._structure||(So._structure={}),xo=function(){var e=o,i=r;function s(){this._isComplete=!r.O8C,this.id=this.deleteId=r.C4C,this.levels=[],this._dimensions=new Be.AssociativeArray,this._measures=new Be.AssociativeArray,this._measureToHierarchyMap={},this._hierarchyToMeasureMap={};var e=new To.GenericHierarchy(So.Cube.MEASURES_NAME,So.Cube.MEASURES_NAME),t=new To.GenericDimension(So.Cube.MEASURES_NAME,So.Cube.MEASURES_NAME);t.type=So.types.DimensionType.MD_DIMTYPE_MEASURE,t.addHierarchy(e),this.addDimension(t),this.fields=new Be.AssociativeArray,this.types=[],this.id=this.deleteId=r.C4C}return Object.defineProperty(s.prototype,"isComplete",{get:function(){return this._isComplete},set:function(e){this._isComplete=e},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(s.prototype,"dimensions",{get:function(){return this._dimensions},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(s.prototype,e.h5B,{get:function(){return this._measures},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(s.prototype,e.R5B,{get:function(){for(var e=new Be.AssociativeArray,t=r.F8C;t<this._measures.length;t++){var i=this._measures.getItemAt(t);i.calculated&&e.addItem(i.uniqueName,i)}return e},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(s.prototype,e.A5B,{get:function(){for(var e=new Be.AssociativeArray,t=r.F8C;t<this._measures.length;t++){var i=this._measures.getItemAt(t);i.calculated||e.addItem(i.uniqueName,i)}return e},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(s.prototype,e.Q5B,{get:function(){var e=this.findDimension(So.Cube.MEASURES_NAME);if(r.x4C==e){var t=new To.GenericHierarchy(So.Cube.MEASURES_NAME,So.Cube.MEASURES_NAME);(e=new To.GenericDimension(So.Cube.MEASURES_NAME,So.Cube.MEASURES_NAME)).type=So.types.DimensionType.MD_DIMTYPE_MEASURE,e.addHierarchy(t),this.addDimension(e)}return e.findHierarchy(So.Cube.MEASURES_NAME)},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),s.prototype.addDimension=function(e){r.x4C==this.findDimension(e.uniqueName)&&(e.structure=this,this.dimensions.addItem(e.uniqueName,e))},s.prototype.findDimension=function(e){return this.dimensions.getItem(e)},s.prototype.allHierarchies=function(e){void r.F8C===e&&(e=!r.O8C);for(var t=new Be.AssociativeArray,i=r.F8C;i<this.dimensions.length;i++){var o=this.dimensions.getItemAt(i);(e||o.type!=So.types.DimensionType.MD_DIMTYPE_MEASURE)&&(t=t.concat(o.hierarchies))}return t},s.prototype.findHierarchy=function(e){return this.allHierarchies(!r.F8C).getItem(e)},s.prototype.addMeasure=function(e){this.measures_.addItem(e.uniqueName,e)},s.prototype.findMeasure=function(e){return this.measures_.getItem(e)},s.prototype.removeMeasure=function(e){return this.measures_.removeItem(e)},s.prototype.clear=function(){this._measureToHierarchyMap={},this._hierarchyToMeasureMap={},this.fields=new Be.AssociativeArray,this.types=[],this.id=this.deleteId=r.C4C,this._dimensions=new Be.AssociativeArray,this._measures=new Be.AssociativeArray,this.isComplete=!r.O8C},s.prototype.measureToHierarchy=function(e){return this._measureToHierarchyMap[e]},s.prototype.hierarchyToMeasure=function(e){return this._hierarchyToMeasureMap[e]},s.prototype.getDataType=function(e){return this.types[e]},s.prototype.getDataField=function(e){return this.fields.getItem(e)},s.prototype.getDataKeys=function(){return this.fields.toArray(!r.F8C)},s.prototype.addKeys=function(e,t){this._measureToHierarchyMap[e]=this.findHierarchy(t),this._hierarchyToMeasureMap[t]=this.findMeasure(e)},s.prototype._addMeasure=function(e,t){var i=new To.GenericMeasure(e.uniqueName,e.caption);i.type=t,this.addMeasure(i),this.addKeys(i.uniqueName,e.uniqueName),this.localDataStorage.addFactKey(i.uniqueName)},s.prototype.addStringHierarchy=function(t,i,o){var s=i.uniqueName;i=new To.GenericHierarchy(s,i.caption),t.addHierarchy(i),this.localDataStorage.addKey(s),t=new To.GenericLevel(i.caption==Oo.model._labels.Labels.MEMBER_BLANK?s+e.a6B:s,i.caption,r.O8C),i.addLevel(t),this._addMeasure(i,So.types.MeasureType.COUNT),this.fields.addItem(o,i)},s.prototype.addHierarchicalDateHierarchy=function(t,i,r){var o=i.uniqueName,s=i.caption;t.type=So.types.DimensionType.MD_DIMTYPE_TIME,s=new To.GenericHierarchy(o,s),t.addHierarchy(s),(t=new To.GenericLevel(o+e.k5B,Oo.model._labels.Labels.YEAR,s.levels_.length)).type=So.types.LevelType.YEAR,s.addLevel(t),this.localDataStorage.addKey(s.uniqueName),i.type==So.types.DataFieldType.HIERARCHICAL_DATE_WITH_QUARTERS&&(i=o+".Quarter",(t=new To.GenericLevel(i,Oo.model._labels.Labels.QUARTER,s.levels_.length)).type=So.types.LevelType.QUARTER,s.addLevel(t),this.localDataStorage.addKey(i,s.uniqueName)),i=o+e.i5B,(t=new To.GenericLevel(i,Oo.model._labels.Labels.MONTH,s.levels_.length)).type=So.types.LevelType.MONTH,s.addLevel(t),this.localDataStorage.addKey(i,s.uniqueName),o+=e.J5B,(t=new To.GenericLevel(o,Oo.model._labels.Labels.DAY,s.levels_.length)).type=So.types.LevelType.DAY,s.addLevel(t),this.localDataStorage.addKey(o,s.uniqueName),this._addMeasure(s,So.types.MeasureType.COUNT),this.fields.addItem(r,s)},s.prototype.addLevelOfHierarchy=function(t,i,o){var s=r,n=i.hasOwnProperty(e.U5B)?i.hierarchy:i.uniqueName,a=i.hasOwnProperty(e.U5B)?i.hierarchy:i.caption,l=t.findHierarchy(n);if(s.x4C==l&&(l=new To.GenericHierarchy(n,a),t.addHierarchy(l)),a=s.F8C,i.hasOwnProperty(s.q2C)){if(n=l.findLevel(i.parent),s.x4C==n)return s.x4C==this.levels[l.uniqueName]&&(this.levels[l.uniqueName]=[]),void(this.levels[l.uniqueName][i.parent]=[i,o]);a=l.levels_.indexOf(n.uniqueName)}n=i.hasOwnProperty(e.V5B)?i.level:o,i=i.hasOwnProperty(e.V5B)?i.level:o,i=new To.GenericLevel(n,i,a+s.O8C),l.addLevel(i),s.O8C==i.num?this.localDataStorage.addKey(l.uniqueName):this.localDataStorage.addKey(n,l.uniqueName),this._addMeasure(l,So.types.MeasureType.COUNT),this.fields.addItem(o,i),this.levels[l.uniqueName]&&this.levels[l.uniqueName][n]&&this.addLevelOfHierarchy(t,this.levels[l.uniqueName][n][s.F8C],this.levels[l.uniqueName][n][s.O8C])},s.prototype.addDateHierarchy=function(i,o,s){var n=t,a=o.uniqueName,l=o.caption;i.type=So.types.DimensionType.MD_DIMTYPE_TIME;var h=a+e.k5B,c=l+n.f7C+Oo.model._labels.Labels.YEAR;(o=new To.GenericHierarchy(h,c)).type=So.types.DataFieldType.typeNum(So.types.DataFieldType.DATE),i.addHierarchy(o),(c=new To.GenericLevel(h+n.f7C+c,c,r.O8C)).type=So.types.LevelType.YEAR,o.addLevel(c),this.localDataStorage.addKey(h),this._addMeasure(o,So.types.MeasureType.COUNT),h=a+e.i5B,c=l+n.f7C+Oo.model._labels.Labels.MONTH,o=new To.GenericHierarchy(h,c),i.addHierarchy(o),(c=new To.GenericLevel(h+n.f7C+c,c,r.O8C)).type=So.types.LevelType.MONTH,o.addLevel(c),this.localDataStorage.addKey(h),this._addMeasure(o,So.types.MeasureType.COUNT),a+=e.J5B,l=l+n.f7C+Oo.model._labels.Labels.DAY,o=new To.GenericHierarchy(a,l),i.addHierarchy(o),(l=new To.GenericLevel(a+n.f7C+l,l,r.O8C)).type=So.types.LevelType.DAY,o.addLevel(l),this.localDataStorage.addKey(a),this._addMeasure(o,So.types.MeasureType.COUNT),this.fields.addItem(s,i)},s.prototype.addNumberHierarchy=function(e,i,o){var s=i.uniqueName,n=i.caption;i=new To.GenericHierarchy(s,n),e.addHierarchy(i),this.localDataStorage.addKey(s),(e=new To.GenericLevel(s+t.f7C+n,n,r.O8C)).type=So.types.LevelType.NUMBER,i.addLevel(e),this._addMeasure(i,So.types.MeasureType.NUMBER),this.fields.addItem(o,i)},s.prototype.addMonthHierarchy=function(e,i,o){var s=i.uniqueName,n=i.caption;i=new To.GenericHierarchy(s,n),e.addHierarchy(i),this.localDataStorage.addKey(s),(e=new To.GenericLevel(s+t.f7C+n,n,r.O8C)).type=So.types.LevelType.MONTH,i.addLevel(e),this._addMeasure(i,So.types.MeasureType.COUNT),this.fields.addItem(o,i)},s.prototype.addWeekdayHierarchy=function(e,i,o){var s=i.uniqueName,n=i.caption;i=new To.GenericHierarchy(s,n),e.addHierarchy(i),this.localDataStorage.addKey(s),(e=new To.GenericLevel(s+t.f7C+n,n,r.O8C)).type=So.types.LevelType.DAY,i.addLevel(e),this._addMeasure(i,So.types.MeasureType.COUNT),this.fields.addItem(o,i)},s.prototype.addDateStringHierarchy=function(e,i,o){var s=i.uniqueName,n=i.caption;i=new To.GenericHierarchy(s,n),e.addHierarchy(i),this.localDataStorage.addKey(s),(e=new To.GenericLevel(s+t.f7C+n,n,r.O8C)).type=So.types.LevelType.TIME,i.addLevel(e),this._addMeasure(i,So.types.MeasureType.DATE),this.fields.addItem(o,i)},s.prototype.addTimeHierarchy=function(e,i,o){var s=i.uniqueName,n=i.caption;i=new To.GenericHierarchy(s,n),e.addHierarchy(i),this.localDataStorage.addKey(s),(e=new To.GenericLevel(s+t.f7C+n,n,r.O8C)).type=So.types.LevelType.NUMBER,i.addLevel(e),this._addMeasure(i,So.types.MeasureType.TIME),this.fields.addItem(o,i)},s.prototype.addDateTimeHierarchy=function(e,i,o){var s=i.uniqueName,n=i.caption;i=new To.GenericHierarchy(s,n),e.addHierarchy(i),this.localDataStorage.addKey(s),(e=new To.GenericLevel(s+t.f7C+n,n,r.O8C)).type=So.types.LevelType.NUMBER,i.addLevel(e),this._addMeasure(i,So.types.MeasureType.DATETIME),this.fields.addItem(o,i)},s.prototype.isMetaObject=function(i){return i.hasOwnProperty(r.W3C)||i.hasOwnProperty(t.W0B)||i.hasOwnProperty(e.U5B)||i.hasOwnProperty(e.V5B)||i.hasOwnProperty(r.q2C)||i.hasOwnProperty("dimensionCaption")},s.prototype.addDataStructure=function(t){var i,o=r,s=!o.O8C;for(i in t)o.x4C==t[i]&&(t[i]=o.C4C),o.K2C==typeof t[i]||o.x2C==typeof t[i]?this.addDataFieldString(i,So.types.DataFieldType.typeFromValue(t[i])):t[i]instanceof Date?this.addDataFieldString(i,So.types.DataFieldType.DATE):t[i]instanceof Array||(this.isMetaObject(t[i])&&(s=!o.F8C),t[i].hasOwnProperty(e.t5B)?!o.O8C==Be.nullOrEmpty(t[i].formula)&&this.addCalculatedMeasure(t[i],i):this.addDataField(t[i],i));return this.isComplete=!o.F8C,s},s.prototype.addCalculatedMeasure=function(e,t){var i;(i=new So._structure.GenericMeasure(t,void r.F8C==e.caption?t:e.caption)).formula=e.formula,i.grandTotalCaption=void r.F8C==e.grandTotalCaption?Oo.model._labels.Labels.GRID_GRAND_TOTAL:e.grandTotalCaption,Oo.model.PivotModel.getInstance().addCalculatedMeasure(i)},s.prototype.addDataFieldString=function(e,t){this.addDataField({uniqueName:e,caption:e,type:t},e)},s.prototype.addDataField=function(i,o){var s=r;void s.F8C===o&&(o=s.C4C);var n,a,l={};for(n in i)l[n]=i[n];switch(l.hasOwnProperty(e.M6B)||(l.uniqueName=o),l.hasOwnProperty(t.W0B)&&s.C4C!=l.caption||(l.caption=o),s.C4C==o&&(o=l.uniqueName),n=So.types.DataFieldType.STRING,l.hasOwnProperty(s.W3C)&&(n=String(l.type).trim().toLowerCase()),l.type=n,l.hasOwnProperty(e.U5B)?a=this.findDimension(l.hierarchy):n==So.types.DataFieldType.LEVEL&&l.hasOwnProperty(e.U5B)&&(a=this.findDimension(l.hierarchy)),s.x4C==a&&(a=So._structure.GenericDimension.fromObject(l),l.hasOwnProperty(e.U5B)&&(a.uniqueName=l.hierarchy),a.caption=l.hasOwnProperty(t.W0B)?l.caption:l.hasOwnProperty(e.U5B)?l.hierarchy:a.caption,n==So.types.DataFieldType.LEVEL&&l.hasOwnProperty(e.U5B)&&(a.uniqueName=l.hierarchy),this.addDimension(a)),this.types[o]=n,n){case So.types.DataFieldType.STRING:this.addStringHierarchy(a,l,o);break;case So.types.DataFieldType.NUMBER:this.addNumberHierarchy(a,l,o);break;case So.types.DataFieldType.MONTH:this.addMonthHierarchy(a,l,o);break;case So.types.DataFieldType.WEEKDAY:this.addWeekdayHierarchy(a,l,o);break;case So.types.DataFieldType.DATE:this.addDateHierarchy(a,l,o);break;case So.types.DataFieldType.DATETIME:this.addDateTimeHierarchy(a,l,o);break;case So.types.DataFieldType.TIME:this.addTimeHierarchy(a,l,o);break;case So.types.DataFieldType.LEVEL:this.addLevelOfHierarchy(a,l,o);break;case So.types.DataFieldType.HIERARCHICAL_DATE:case So.types.DataFieldType.HIERARCHICAL_DATE_WITH_QUARTERS:this.addHierarchicalDateHierarchy(a,l,o);break;case So.types.DataFieldType.DATE_STRING:this.addDateStringHierarchy(a,l,o);break;case So.types.DataFieldType.ID:this.id=o,this.fields.addItem(o,s.x4C);break;case So.types.DataFieldType.DELETE:this.deleteId=o;break;case So.types.DataFieldType.HIDDEN:break;default:this.addStringHierarchy(a,l,o)}},s}(),To.GenericStructure=xo,Lo=De||(De={}),Ao=Lo.data_||(Lo.data_={}),Io=Ao._structure||(Ao._structure={}),Ro=function(){var e=o,i=r;function s(e){this._hierarchies=new Be.AssociativeArray,this.totalSortType=Ao.consts.SortType.UNSORTED,this._sortTuple=this.__sortTuple=r.x4C,this._expandedTuples=[],this._drilledTuples=[],this._sortType=Ao.consts.SortType.UNSORTED,this._name=e}return Object.defineProperty(s.prototype,"sortTuple",{get:function(){var e=r,t=/\D/;if(e.x4C!=this.__sortTuple)return this.__sortTuple;var i=e.x4C;if(e.x4C!=this._sortTuple)for(var o=e.F8C,s=(i=[],e.F8C);s<this._hierarchies.length;s++){var n=this.hierarchies.getItemAt(s);if(!n.isMeasures){if(!this._sortTuple[o])break;if(e.x2C==typeof this._sortTuple[o]){i=this._sortTuple;break}var a=this._sortTuple[o].toString().trim();if(!t.test(a)){i=this._sortTuple;break}if(n=n.findMember(this._sortTuple[o].toString().trim()),e.x4C!=n)i.push(n.ordinal);else if(this._sortTuple[o]){i=e.x4C;break}}o++}return this.__sortTuple=i},set:function(e){this._sortTuple=e,this.__sortTuple=r.x4C},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(s.prototype,"sortNamedTuple",{get:function(){var e=r,t=e.x4C,i=this.sortTuple;if(e.x4C!=i)for(var o=e.F8C,s=(t=[],e.F8C);s<this._hierarchies.length;s++){if(!(a=this.hierarchies.getItemAt(s)).isMeasures){if(!i[o])break;var n=e.C4C===i[s]?e.F8C:parseInt(i[s]),a=a.members.getItemAt(n);if(e.x4C!=a)t.push(a.uniqueName);else if(i[o]){t=e.x4C;break}}o++}return t},set:function(e){this.sortTuple=e},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(s.prototype,"expandedTuples",{get:function(){return this._expandedTuples},set:function(e){var t=r;if(t.x4C==e)this._expandedTuples=[];else if(this.hasMeasures)this._expandedTuples=e;else{this._expandedTuples=[];for(var i=t.F8C;i<e.length;i++){var o=e[i];o[t.F8C]=-t.O8C,this._expandedTuples.push(o)}}},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(s.prototype,"expandedTuplesBasedOnUniqueNames",{get:function(){for(var e,t,i,o,s,n,a=r,l=[],h=a.F8C;h<this.expandedTuples.length;h++){t=[],i=(e=this.expandedTuples[h].slice(a.F8C)).shift(),o=a.C4C;for(var c=s=a.F8C;c<e.length;c++)(n=this.hierarchies.getItemAt(s)).isMeasures&&(-a.O8C<i&&(o=n.members.getItemAt(i).uniqueName),s++,n=this.hierarchies.getItemAt(s)),a.x4C!=n.members.getItemAt(e[c])&&t.push(n.members.getItemAt(e[c]).uniqueName),s++;t.unshift(o),l.push(t)}return l},enumerable:!i.F8C,configurable:!i.F8C}),s.prototype.parseExpandedTuplesBasedOnUniqueNames=function(e,t){var i=r;void i.F8C===t&&(t=i.x4C);for(var o,s,n,a,l,h,c=[],d=i.F8C;d<e.length;d++){if(o=e[d].slice(i.F8C),isNaN(parseInt(o[i.F8C]))){if(s=[],a=-i.O8C,n=o.shift(),l=i.F8C,i.F8C<this.hierarchies.length)for(var u=i.F8C;u<o.length;u++){if(h=this.hierarchies.getItemAt(l),Be.nullOrUndefined(h))return[];h.isMeasures&&(i.C4C!=n&&(a=t?t.indexOf(n):h.members.indexOf(n)),l++,h=this.hierarchies.getItemAt(l)),s.push(h.members.indexOf(o[u])),l++}s.unshift(a)}else s=o;c.push(s)}return c},Object.defineProperty(s.prototype,"drilledTuples",{get:function(){return this._drilledTuples},set:function(e){var t=r;if(Be.nullOrUndefined(e))this._drilledTuples=[];else{var i;if(this.hasMeasures)this._drilledTuples=e;else{this._drilledTuples=[];for(var o=t.F8C;o<e.length;o++)i=e[o],t.K2C==typeof i[t.F8C]?i[t.O8C]=-t.O8C:i[t.F8C]=-t.O8C,this._drilledTuples.push(i)}this.setPredefinedDrillDowns(e)}},enumerable:!i.F8C,configurable:!i.F8C}),s.prototype.setPredefinedDrillDowns=function(e){var t,i=r,o=this._hierarchies.slice();o.removeItem(Ao.Cube.MEASURES_NAME);for(var s,n=i.F8C;n<e.length;n++){t=e[n].slice(i.F8C),i.K2C==typeof t[i.F8C]&&(s=t.shift());var a=o.getItemAt(t.length-i.b8C);if(i.x4C==a)break;var l=t[i.O8C];isNaN(parseFloat(t[i.O8C]))||(t=a.members.getItemAt(t[i.O8C]),i.x4C!=t&&(l=t.uniqueName)),-i.O8C==a.predefinedDrillDowns.indexOf(l)&&a.predefinedDrillDowns.push([s,l])}},Object.defineProperty(s.prototype,"drilledTuplesBasedOnUniqueNames",{get:function(){for(var e,t,i,o,s,n,a,l,h=r,c=[],d=h.F8C;d<this.drilledTuples.length;d++){e=this.drilledTuples[d].slice(h.F8C),t=[],s=i=h.C4C,h.K2C==typeof e[h.F8C]&&(i=e.shift()),o=e.shift(),n=e.shift();for(var u=a=h.F8C;u<e.length;u++)(l=this.hierarchies.getItemAt(a)).isMeasures&&(-h.O8C<o&&(s=l.members.getItemAt(o).uniqueName),a++,l=this.hierarchies.getItemAt(a)),h.x4C!=l.members.getItemAt(e[u])&&t.push(l.members.getItemAt(e[u]).uniqueName),a++;t.unshift(n),t.unshift(s),t.unshift(i),c.push(t)}return c},enumerable:!i.F8C,configurable:!i.F8C}),s.prototype.parseDrilledTuplesBasedOnUniqueNames=function(e,t){var i=r;void i.F8C===t&&(t=i.x4C);for(var o,s,n,a,l,h,c,d,u=[],p=i.F8C;p<e.length;p++){if(o=e[p].slice(i.F8C),isNaN(parseInt(o[o.length-i.O8C]))){if(s=[],a=-i.O8C,n=o.shift(),l=o.shift(),h=o.shift(),c=i.F8C,i.F8C<this.hierarchies.length)for(var C=i.F8C;C<o.length;C++){if(d=this.hierarchies.getItemAt(c),Be.nullOrUndefined(d))return[];d.isMeasures&&(i.C4C!=l&&(a=t?t.indexOf(l):d.members.indexOf(l)),c++,d=this.hierarchies.getItemAt(c)),s.push(d.members.indexOf(o[C])),c++}s.unshift(h),s.unshift(a),i.C4C!=n&&s.unshift(n)}else s=o;u.push(s)}return u},Object.defineProperty(s.prototype,"sortType",{get:function(){return this._sortType},set:function(e){e=e.toLowerCase(),this._sortType=e==Ao.consts.SortType.ASC||e==Ao.consts.SortType.DESC?e:Ao.consts.SortType.UNSORTED},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(s.prototype,e.M6B,{get:function(){return this._name},set:function(e){this._name=e},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(s.prototype,t.W0B,{get:function(){return this._caption},set:function(e){this._caption=e},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(s.prototype,e.c5B,{get:function(){return this._hierarchies},set:function(e){this.expandedTuples=[],this.drilledTuples=[],this._sortTuple=r.x4C,this._sortType=Ao.consts.SortType.UNSORTED,this.sortMeasure=r.x4C,this._hierarchies=e},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(s.prototype,i.l2C,{get:function(){for(var e=r.O8C,t=r.F8C;t<this._hierarchies.length;t++)e*=this._hierarchies.getItemAt(t).size;return e},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(s.prototype,e.d3B,{get:function(){return this._hierarchies.indexOf(Ao.Cube.MEASURES_NAME)},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(s.prototype,e.Q5B,{get:function(){return this._hierarchies.getItem(Ao.Cube.MEASURES_NAME)},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(s.prototype,"hasMeasures",{get:function(){return-r.O8C<this.measuresPosition},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(s.prototype,"depth",{get:function(){for(var e=r.F8C,t=r.F8C;t<this._hierarchies.length;t++)e+=this._hierarchies.getItemAt(t).drillDownDepth;return e},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),s.prototype.toString=function(){return"[Axis:"+this._name+" ]"},s.fromObject=function(e,t,i,o,n,a,l){var h,c=r;if(void c.F8C===l&&(l=c.x4C),(e=new s(e)).hierarchies=new Be.AssociativeArray,t)for(h=c.F8C;h<t.length;h++)if(c.x4C!=t[h].uniqueName){var d=a.findHierarchy(t[h].uniqueName);c.x4C!=d&&(Ao._structure.GenericHierarchy.fromObject(t[h],d),d.isMeasures&&e.uniqueName==Ao.consts.AxisName.PAGES_AXIS||e.hierarchies.addItem(d.uniqueName,d))}if(i&&(h=a.findMeasure(i.measure?i.measure:c.C4C),c.x4C!=h&&c.x4C!=i.tuple?e.setSort(h,i.tuple,i.type):e.sortToSet=i),o&&c.F8C<o.length){for(d=[],h=c.F8C;h<o.length;h++){for(t=o[h],a=[],c.F8C<t.length&&a.push((isNaN(parseInt(t[c.F8C])),t[c.F8C])),i=c.O8C;i<t.length;i++)a.push((isNaN(parseInt(t[i])),t[i]));d.push(a)}o=d}if(e.expandedTuples=o?e.parseExpandedTuplesBasedOnUniqueNames(o,l):[],n&&c.F8C<n.length){for(o=[],h=c.F8C;h<n.length;h++){for(t=n[h],a=[],c.F8C<t.length&&a.push((isNaN(parseInt(t[c.F8C])),t[c.F8C])),i=c.O8C;i<t.length;i++)a.push((isNaN(parseInt(t[i])),t[i]));o.push(a)}n=o}return e.drilledTuples=n?e.parseDrilledTuplesBasedOnUniqueNames(n,l):[],e},s.toObject=function(e){for(var t={},i=[],o=r.F8C;o<e.hierarchies.length;o++){var s=Io.GenericHierarchy.toObject(e.hierarchies.getItemAt(o));i.push(s)}return t.hierarchies=i,e.sortType==Ao.consts.SortType.UNSORTED||Be.nullOrUndefined(e.sortTuple)||Be.nullOrUndefined(e.sortMeasure)||(t.sort={type:e.sortType,tuple:e.sortNamedTuple,measure:e.sortMeasure.uniqueName}),t},s.prototype.setSort=function(e,t,i){this.sortMeasure=e,this.sortTuple=t,this.sortType=i,r.F8C==t.length&&(this.totalSortType=this.sortType,this.totalSortMeasure=this.sortMeasure)},s}(),Io.Axis=Ro,Do=De||(De={}),No=Do.data_||(Do.data_={}),Po=Mo=No._structure||(No._structure={}),Ho=function(){var e=o,i=r;function s(e){this._axes=new Be.AssociativeArray,this._measures=new Be.AssociativeArray,this._drillAll=this._expandAll=!r.O8C,this._flatOrder=[],this.structure=e,this.addAxis(new No._structure.Axis(No.consts.AxisName.ROWS_AXIS)),this.addAxis(new No._structure.Axis(No.consts.AxisName.COLUMNS_AXIS)),this.addAxis(new No._structure.Axis(No.consts.AxisName.PAGES_AXIS))}return Object.defineProperty(s.prototype,"axes",{get:function(){return this._axes},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),s.prototype.addAxis=function(e){this._axes.addItem(e.uniqueName,e),e.hasMeasures&&(this._axisWithMeasures=e)},s.prototype.findAxis=function(e){return this._axes.getItem(e)},Object.defineProperty(s.prototype,"axisWithMeasures",{get:function(){if(r.x4C==this._axisWithMeasures){for(var e=r.F8C;e<this._axes.length;e++){var t=this._axes.getItemAt(e);if(t.hasMeasures){this._axisWithMeasures=t;break}}r.x4C==this._axisWithMeasures&&(this._axisWithMeasures=this.findAxis(No.consts.AxisName.COLUMNS_AXIS))}return this._axisWithMeasures.hasMeasures||(e=this.structure.measuresHierarchy)&&this._axisWithMeasures.hierarchies.addItem(e.uniqueName,e),this._axisWithMeasures},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(s.prototype,e.A5B,{get:function(){for(var e=new Be.AssociativeArray,t=r.F8C;t<this._measures.length;t++){var i=this._measures.getItemAt(t);i.calculated||e.addItem(i.uniqueName,i)}return e},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(s.prototype,e.R5B,{get:function(){for(var e=new Be.AssociativeArray,t=r.F8C;t<this._measures.length;t++){var i=this._measures.getItemAt(t);i.calculated&&e.addItem(i.uniqueName,i)}return e},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(s.prototype,"measuresAll",{get:function(){return this._measures},set:function(e){this.measures_=e},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(s.prototype,e.h5B,{get:function(){for(var e=new Be.AssociativeArray,t=r.F8C;t<this._measures.length;t++){var i=this._measures.getItemAt(t);i.hidden||e.addItem(i.uniqueName,i)}return e},set:function(e){var t=r;if(this._measures=e,e=this.axisWithMeasures.measuresHierarchy,t.x4C!=e&&(e.clear(),t.x4C!=this._measures))for(var i=t.F8C;i<this._measures.length;i++){var o=this._measures.getItemAt(i);o=new Mo.GenericMember(o.uniqueName,o.caption),e.addMember(o,t.C4C,t.C4C,!t.O8C)}},enumerable:!i.F8C,configurable:!i.F8C}),s.prototype.allHierarchies=function(e,t,i){var o=r;void o.F8C===e&&(e=!o.F8C),void o.F8C===t&&(t=!o.F8C),void o.F8C===i&&(i=!o.O8C);for(var s=new Be.AssociativeArray,n=o.F8C;n<this._axes.length;n++){var a=this._axes.getItemAt(n);s=s.concat(a.hierarchies)}if(e||s.removeItem(this.structure.measuresHierarchy.uniqueName),!t)for(e=o.F8C;e<this.pages.length;e++)s.removeItem(this.pages.getKeyAt(n));if(i)for(n=o.F8C;n<this.measures_.length;n++)(i=this.measures_.getItemAt(n)).calculated||(i=this.structure.measureToHierarchy(i.uniqueName),s.addItem(i.uniqueName,i));return s},s.prototype.clear=function(){for(var e=r.F8C;e<this._axes.length;e++)this._axes.getItemAt(e).hierarchies=new Be.AssociativeArray;this._measures=new Be.AssociativeArray},Object.defineProperty(s.prototype,t.M8Q,{get:function(){return this.findAxis(No.consts.AxisName.ROWS_AXIS).hierarchies},set:function(e){var t=this.findAxis(No.consts.AxisName.ROWS_AXIS);r.x4C==t&&(t=new Po.Axis(No.consts.AxisName.ROWS_AXIS)),t.hierarchies=e,r.x4C==e&&(t.hierarchies=new Be.AssociativeArray),this.addAxis(t)},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(s.prototype,t.b8Q,{get:function(){return this.findAxis(No.consts.AxisName.COLUMNS_AXIS).hierarchies},set:function(e){var t=this.findAxis(No.consts.AxisName.COLUMNS_AXIS);r.x4C==t&&(t=new Po.Axis(No.consts.AxisName.COLUMNS_AXIS)),t.hierarchies=e,r.x4C==e&&(t.hierarchies=new Be.AssociativeArray),this.addAxis(t)},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(s.prototype,e.Z3B,{get:function(){return this.findAxis(No.consts.AxisName.PAGES_AXIS).hierarchies},set:function(e){var t=this.findAxis(No.consts.AxisName.PAGES_AXIS);r.x4C==t&&(t=new Po.Axis(No.consts.AxisName.PAGES_AXIS)),t.hierarchies=e,r.x4C==e&&(t.hierarchies=new Be.AssociativeArray),this.addAxis(t)},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(s.prototype,e.i3B,{get:function(){return this.axisWithMeasures.uniqueName==No.consts.AxisName.ROWS_AXIS?this.rows.splice(this.axisWithMeasures.measuresPosition,r.O8C):this.rows},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(s.prototype,e.H3B,{get:function(){return this.axisWithMeasures.uniqueName==No.consts.AxisName.COLUMNS_AXIS?this.columns.splice(this.axisWithMeasures.measuresPosition,r.O8C):this.columns},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),s.prototype.clone=function(){var e=new s(this.structure);return e.rows=this.rows.slice(),e.columns=this.columns.slice(),e.pages=this.pages.slice(),e.measures_=this.measures_.slice(),e.flatOrder=this.flatOrder.slice(r.F8C),e},s.areRowsDiffer=function(e,t,i){var o=r;if(void o.F8C===i&&(i=!o.F8C),o.x4C==t)return!o.F8C;var n=e.rows.length!=t.rows.length;if(!n)for(var a=o.F8C;a<e.rows.length;a++)if(e.rows.getItemAt(a).uniqueName!=t.rows.getItemAt(a).uniqueName){n=!o.F8C;break}return!n&&i&&e.findAxis(No.consts.AxisName.ROWS_AXIS).hasMeasures&&t.findAxis(No.consts.AxisName.ROWS_AXIS).hasMeasures&&(n=s.areMeasuresDiffer(e,t)),n},s.areColumnsDiffer=function(e,t,i){var o=r;if(void o.F8C===i&&(i=!o.F8C),o.x4C==t)return!o.F8C;var n=e.columns.length!=t.columns.length;if(!n)for(var a=o.F8C;a<e.columns.length;a++)if(e.columns.getItemAt(a).uniqueName!=t.columns.getItemAt(a).uniqueName){n=!o.F8C;break}return!n&&i&&e.findAxis(No.consts.AxisName.COLUMNS_AXIS).hasMeasures&&t.findAxis(No.consts.AxisName.COLUMNS_AXIS).hasMeasures&&(n=s.areMeasuresDiffer(e,t)),n},s.areMeasuresDiffer=function(e,t){var i=r;if(i.x4C==t)return!i.F8C;var o=e.measures_.length!=t.measures_.length;if(!o)for(var s=i.F8C;s<e.measures_.length;s++)if(e.measures_.getItemAt(s).uniqueName!=t.measures_.getItemAt(s).uniqueName){o=!i.F8C;break}return o},s.fromObject=function(t,i){for(var o=r,n=new s(i),a=new Be.AssociativeArray,l=o.F8C;l<t.measures.length;l++)if(t.measures[l].hasOwnProperty(e.M6B)){var h=i.measures_.getItem(t.measures[l].uniqueName);o.x4C==h&&Be.nullOrEmpty(t.measures[l].formula)||((h=No._structure.GenericMeasure.fromObject(t.measures[l],h)).calculated&&!i.measures_.keyExists(h.uniqueName)&&i.addMeasure(h),(Be.nullOrUndefined(t.measures[l].active)||t.measures[l].active)&&a.addItem(h.uniqueName,h))}return l=No._structure.Axis.fromObject(No.consts.AxisName.ROWS_AXIS,t.rows,t.rowSorting,t.expandedRows,t.drilledRows,i,a.toArray(!o.F8C)),h=No._structure.Axis.fromObject(No.consts.AxisName.COLUMNS_AXIS,t.columns,t.columnSorting,t.expandedColumns,t.drilledColumns,i,a.toArray(!o.F8C)),n.rows=l.hierarchies,n.columns=h.hierarchies,n.pages=No._structure.Axis.fromObject(No.consts.AxisName.PAGES_AXIS,t.pages,o.x4C,[],[],i).hierarchies,n.measures_=a,n.expandAll=t.expandAll,n.drillAll=t.drillAll,n.flatOrder=t.flatOrder,n.addAxis(l),n.addAxis(h),n},s.prototype.toObject=function(){for(var e=r,t={rows:[]},i=e.F8C;i<this.rows.length;i++){var o=this.rows.getItemAt(i).toObject();t.rows[i]=o}for(t.columns=[],i=e.F8C;i<this.columns.length;i++)o=this.columns.getItemAt(i).toObject(),t.columns[i]=o;for(t.pages=[],i=e.F8C;i<this.pages.length;i++)o=this.pages.getItemAt(i).toObject(),t.pages[i]=o;for(t.measures=[],i=e.F8C;i<this.measures_.length;i++)o=this.measures_.getItemAt(i).toObject(),t.measures[i]=o;return t},s.prototype.parseExpandedTuples=function(){for(var e=r.F8C;e<this._axes.length;e++)this._axes.getItemAt(e).parseExpandedTuples()},s.prototype.flatten=function(e){var t=r;void t.F8C===e&&(e=!t.O8C);for(var i=this.allHierarchies(!t.O8C),o=t.F8C;o<this.measures_.length;o++){var s=this.measures_.getItemAt(o),n=this.measureToHierarchy(s.uniqueName);t.x4C!=n&&i.addItem(n.uniqueName,n),s.calculated&&e&&(n=new Po.GenericHierarchy(s.uniqueName,s.caption),i.addItem(s.uniqueName,n))}for(e=new Be.AssociativeArray,o=t.F8C;o<this.flatOrder.length;o++)s=this.flatOrder[o],i.keyExists(s)&&(e.addItem(s,i.getItem(s)),i.removeItem(s));for(o=t.F8C;o<i.length;o++)e.addItem(i.getKeyAt(o),i.getItemAt(o));return e},s.prototype.isEqual=function(e){var t=r;if(t.x4C==e||this.pages.length!=e.pages.length||this.rows.length!=e.rows.length||this.columns.length!=e.columns.length||this.measures_.length!=e.measures_.length)return!t.O8C;for(var i=t.F8C;i<this.pages.length;i++)if(this.pages.getKeyAt(i)!=e.pages.getKeyAt(i))return!t.O8C;for(i=t.F8C;i<this.rows.length;i++)if(this.rows.getKeyAt(i)!=e.rows.getKeyAt(i))return!t.O8C;for(i=t.F8C;i<this.columns.length;i++)if(this.columns.getKeyAt(i)!=e.columns.getKeyAt(i))return!t.O8C;for(i=t.F8C;i<this.measures_.length;i++)if(this.measures_.getKeyAt(i)!=e.measures_.getKeyAt(i)||this.measures_.getItemAt(i).aggregation!=e.measures_.getItemAt(i).aggregation)return!t.O8C;return!t.F8C},s.prototype.measureToHierarchy=function(e){return this.structure.measureToHierarchy(e)},s.prototype.hierarchyToMeasure=function(e){return this.structure.hierarchyToMeasure(e)},Object.defineProperty(s.prototype,e.Y6B,{get:function(){return r.F8C==this.allHierarchies(!r.O8C).length&&r.F8C==this.measures_.length},set:function(e){},enumerable:!i.F8C,configurable:!i.F8C}),s.prototype.makeDefault=function(){var e,t=r;if(Do.model._options.OptionsManager.flatView){this.rows=new Be.AssociativeArray,this.columns=new Be.AssociativeArray,this.pages=new Be.AssociativeArray;for(var i=new Be.AssociativeArray,o=[],s=t.F8C;s<this.structure.measures_.length;s++)e=this.structure.measures_.getItemAt(s),o.push(e.uniqueName),e.type==No.types.MeasureType.COUNT?(e=this.structure.measureToHierarchy(e.uniqueName))&&this.rows.addItem(e.uniqueName,e):i.addItem(e.uniqueName,e);this._flatOrder=o,this.measures_=i}else{for(s=t.F8C;s<this.structure.measures_.length&&((e=this.structure.measures_.getItemAt(s)).type!=No.types.MeasureType.NUMBER?t.x4C==i&&(i=this.structure.measureToHierarchy(e.uniqueName)):t.x4C==o&&(o=e),t.x4C==i||t.x4C==o);s++);t.x4C==o?o=this.structure.measures_.getItemAt(t.F8C):t.x4C==i?(e=this.structure.measures_.getItemAt(t.F8C),i=this.structure.measureToHierarchy(e.uniqueName)):t.x4C==i&&t.x4C==o&&t.F8C<this.structure.measures_.length&&(o=this.structure.measures_.getItemAt(t.F8C),i=this.structure.measureToHierarchy(o.uniqueName)),t.x4C!=i&&t.x4C!=o&&(this.pages=new Be.AssociativeArray,this.rows=new Be.AssociativeArray,this.columns=new Be.AssociativeArray,this.rows.addItem(i.uniqueName,i),(i=new Be.AssociativeArray).addItem(o.uniqueName,o),this.measures_=i)}},Object.defineProperty(s.prototype,"expandAll",{get:function(){return this._expandAll},set:function(e){this._expandAll=e},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(s.prototype,"drillAll",{get:function(){return this._drillAll},set:function(e){this._drillAll=e},enumerable:!i.F8C,configurable:!i.F8C}),s.prototype.clearExpands=function(){this.rowAxis.expandedTuples=[],this.columnAxis.expandedTuples=[]},s.prototype.clearDrills=function(){this.rowAxis.drilledTuples=[],this.columnAxis.drilledTuples=[]},Object.defineProperty(s.prototype,"flatOrder",{get:function(){return r.x4C==this._flatOrder&&(this._flatOrder=[]),this._flatOrder},set:function(e){this._flatOrder=e},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(s.prototype,e.w3B,{get:function(){return this.axes.getItem(No.consts.AxisName.ROWS_AXIS)},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(s.prototype,e.r3B,{get:function(){return this.axes.getItem(No.consts.AxisName.COLUMNS_AXIS)},enumerable:!i.F8C,configurable:!i.F8C}),s.prototype.mergeExpandsAndDrills=function(e){var t=r;Be.nullOrUndefined(e)||(this.expandAll=e.expandAll,this.drillAll=e.drillAll,s.areRowsDiffer(this,e,!t.O8C)?(this.rowAxis.expandedTuples=this.cutTuples(e.rowAxis.expandedTuples,this.getCommonFieldsCount(this.rowAxis.hierarchies,e.rowAxis.hierarchies)),this.rowAxis.drilledTuples=this.cutTuples(e.rowAxis.drilledTuples,this.getCommonFieldsCount(this.rowAxis.hierarchies,e.rowAxis.hierarchies)+t.M8C)):(this.rowAxis.expandedTuples=this.cloneTuples(e.rowAxis.expandedTuples),this.rowAxis.drilledTuples=this.cloneTuples(e.rowAxis.drilledTuples)),s.areColumnsDiffer(this,e,!t.O8C)?(this.columnAxis.expandedTuples=this.cutTuples(e.columnAxis.expandedTuples,this.getCommonFieldsCount(this.columnAxis.hierarchies,e.columnAxis.hierarchies)),this.columnAxis.drilledTuples=this.cutTuples(e.columnAxis.drilledTuples,this.getCommonFieldsCount(this.columnAxis.hierarchies,e.columnAxis.hierarchies)+t.M8C)):(this.columnAxis.expandedTuples=this.cloneTuples(e.columnAxis.expandedTuples),this.columnAxis.drilledTuples=this.cloneTuples(e.columnAxis.drilledTuples)))},s.prototype.removeMeasure=function(e){this._measures.removeItem(e)},s.prototype.getCommonFieldsCount=function(e,t){for(var i=r.F8C,o=Math.min(e.length,t.length),s=r.F8C;s<o;s++){var n=e.getItemAt(s),a=t.getItemAt(s);if(n.uniqueName!=a.uniqueName)break;n.isMeasures||i++}return i},s.prototype.cutTuples=function(e,t){var i=[];if(r.O8C<t)for(var o=r.F8C;o<e.length;o++){var s=e[o];s.length<=t&&i.push(s.slice())}return i},s.prototype.cloneTuples=function(e){for(var t=[],i=r.F8C;i<e.length;i++)t.push(e[i].slice());return t},s}(),Po.Slice=Ho,Uo=De||(De={}),function(e){var i=function(){function e(){var e=r,t=this;this.beforeBeforeLastByte=this.beforeLastByte=this.lastByte=e.F8C,this.fileExtensions=[o.Y7B],this.onAuthApiLoadHandler=function(){return t.onAuthApiLoad()},this.onhandleAuthResultHandler=function(e){return t.handleAuthResult(e)},this.tickHandler=function(){return t.onTick()},this.timerCompleteHandler=function(){return t.onTimerComplete()},this.lastPosition=e.F8C,this.isStarted=!e.O8C,this.preloaderTime=e.F8C,this.cube_=Bo.Cube.getInstance(),this.fileExtensions=[o.Y7B]}return e.prototype.clear=function(){var e=r;this.data=[],this.dataLoadedLength=this.bytesLoaded=e.F8C,this.connected=!e.O8C,this.chunkIndex=this.lastPosition=e.F8C,this.recordsetDelimiter=t.m6C,this.fieldEnclosureToken=t.U9Q,this.columnType=[],this.hasSizeHeader=this.isFileFailed=this.isFileLoaded=this.isHeaderParsed=!e.O8C,this.lastByte=e.F8C,this.lastRow=e.C4C,this.rowIdx=this.beforeBeforeLastByte=this.beforeLastByte=e.F8C,this.BLOCK_SIZE=e.o0C,e.x4C!=this.loader&&(this.loader.removeAllEventListeners(),this.loader.dispose(),this.loader=e.x4C),this.stopTimer()},e.prototype.load=function(e,i,o,s,n){var a=r;try{this.clear(),this.filename=e.filename,this.successHandler=i,this.errorHandler=o,this.connectedHandler=s,this.cancelledHandler=n,this.fieldSeparator=e.fieldSeparator,this.ignoreQuotedLineBreaks=e.ignoreQuotedLineBreaks,e.isDemo?this.generate():(void a.F8C!==this.filename&&a.C4C!=this.filename&&t.S5C!=this.filename.substr(-a.M8C)||!a.O8C!==e.browseForFile?this.filename=Be.URLUtils.getUrl(this.filename,!a.F8C):this.onFileError(),!a.F8C===e.browseForFile?this.browseFile():this.isGooggleDrive(e.filename)&&Be.nullOrUndefined(e.requestHeader)?this.authorizeGoogleDrive():(Uo.preloader(!a.F8C,Uo.model._labels.Labels.MESSAGE_LOADING_DATA),this.loadFile(this.filename,e.requestHeader)))}catch(e){console.error(e.stack),this.onFileError()}},e.prototype.generate=function(){},e.prototype.authorizeGoogleDrive=function(){window.gapi&&window.gapi.load("auth",{callback:this.onAuthApiLoadHandler})},e.prototype.onAuthApiLoad=function(){r.C4C==Uo._view.PivotView.stage.getToolbar().googleClientId||r.x4C==Uo._view.PivotView.stage.getToolbar().googleClientId?this.onGoogleClientIdNotSet():window.gapi.auth.authorize({client_id:Uo._view.PivotView.stage.getToolbar().googleClientId,scope:Uo._view.PivotView.stage.getToolbar().googleScope,immediate:!r.O8C},this.onhandleAuthResultHandler)},e.prototype.handleAuthResult=function(e){var t={};e&&!e.error?(t.Authorization="Bearer "+e.access_token,Uo.preloader(!r.F8C,Uo.model._labels.Labels.MESSAGE_LOADING_DATA),this.loadFile(this.filename,t)):(Uo.preloader(!r.O8C),this.onFileError())},e.prototype.isGooggleDrive=function(e){return-r.O8C<e.indexOf("www.googleapis.com/drive")},e.prototype.onGoogleClientIdNotSet=function(){Uo.uialert(Uo.model._labels.Labels.MESSAGE_NO_GOOGLE_CLIENT_KEY,Uo.model._labels.Labels.ERROR,Uo.AlertType.ERROR)},e.prototype.browseFile=function(){var e=this;this.fileReference=new Ne.FileReference,this.fileReference.addEventListener(s._Event.SELECT,function(){return e.onFileSelected()}),this.fileReference.addEventListener(s._Event.COMPLETE,function(){return e.onFileComplete()}),this.fileReference.addEventListener(s._Event.PROGRESS,function(t){return e.onFileProgress(t)}),this.fileReference.addEventListener(s._Event.CANCEL,function(){return e.onFileCancelled()}),this.fileReference.addEventListener(s._Event.ERROR,function(){return e.onFileError()}),this.fileReference.browse(this.fileExtensions)},e.prototype.onFileSelected=function(){var e=r;Uo.preloader(!e.F8C,Uo.model._labels.Labels.MESSAGE_LOADING_DATA,e.C4C,!e.F8C,!e.F8C),this.loader=this.fileReference,this.fileReference.load(),this.fileReference=e.x4C},e.prototype.loadFile=function(e,i){var o=this;void r.F8C===i&&(i=r.x4C);var n=new Ne.URLStream;n.dataType=Ne.DataType.TEXT,n.addEventListener(s._Event.COMPLETE,function(){return o.onFileComplete()}),n.addEventListener(s._Event.CONNECTED,function(){return o.onFileConnected()}),n.addEventListener(s._Event.PROGRESS,function(e){return o.onFileProgress(e)}),n.addEventListener(s._Event.ERROR,function(){return o.onFileError()}),n.load(e,i),this.loader=n,this.timer=new Be.Timer(r.o0C,t.N6C),this.timer.addEventListener(Be.TimerEvent.TIMER,this.tickHandler),this.timer.addEventListener(Be.TimerEvent.TIMER_COMPLETE,this.timerCompleteHandler),this.timer.start()},e.prototype.onTick=function(){var e=r;e.F8C<this.bytesLoaded||this.isFileLoaded||this.isFileFailed?this.stopTimer():e.x4C!=this.timer&&Uo.preloader(!e.F8C,Uo.model._labels.Labels.MESSAGE_LOADING_DATA,Be.StringUtils.bind(Uo.model._labels.Labels.MESSAGE_LOADING_WAITING,Be.NumberFormatter.format(this.timer.currentCount/e.L8C,new Uo.model.format.vo.FormatValueObject,!e.O8C,!e.O8C,e.O8C)))},e.prototype.onTimerComplete=function(){this.timer.running&&this.stopTimer()},e.prototype.stopTimer=function(){this.timer&&this.timer.running&&(this.timer.stop(),this.timer.removeEventListener(Be.TimerEvent.TIMER,this.tickHandler),this.timer.removeEventListener(Be.TimerEvent.TIMER_COMPLETE,this.timerCompleteHandler))},e.prototype.onFileCancelled=function(){r.x4C!=this.cancelledHandler&&(this.cancelledHandler(),this.cancelledHandler=r.x4C),this.clear()},e.prototype.onFileError=function(){var e=r;if(Uo.preloader(!e.O8C),!e.O8C==this.isFileFailed){this.isFileFailed=!e.F8C;var t=Uo.model.XSSCheck.valid(this.filename)?this.filename:Uo.model.XSSCheck.validate(this.filename);Uo.uialert(Be.StringUtils.bind(Uo.model._labels.Labels.MESSAGE_UNABLE_TO_OPEN_FILE,t),Uo.model._labels.Labels.ERROR,Uo.AlertType.ERROR)}e.x4C!=this.errorHandler&&(this.errorHandler(),this.errorHandler=e.x4C),this.stopTimer()},e.prototype.onHeaderParsingError=function(){Uo.preloader(!r.O8C),Uo.uialert(Be.StringUtils.bind(Uo.model._labels.Labels.MESSAGE_CSV_HEADER_PARSING_ERROR),Uo.model._labels.Labels.ERROR,Uo.AlertType.ERROR)},e.prototype.onFileProgress=function(e){var t=r;if(404==e.target.status)this.onFileError();else if(!Be.nullOrUndefined(this.loader))try{var i=this.loader.response;if(t.x4C!=i&&t.F8C!=i.length&&(this.bytesLoaded!=e.loaded||this.dataLoadedLength!=i.length)&&(this.hasSizeHeader=t.F8C<e.total&&e.lengthComputable,this.dataLoadedLength=i.length,this.bytesLoaded=e.loaded,o.q7B<i.length-this.lastPosition||e.loaded==e.total))if(this.bytesLoaded>Uo.model.license.Limitations.MAX_CSV)Uo.uialert(Uo.model.license.LicenseLabels.getLabel(Uo.model.license.LicenseLabels.betaversion),Uo.model.license.LicenseLabels.getLabel(Uo.model.license.LicenseLabels.tooLarge)),Uo.preloader(!t.O8C),t.x4C!=this.errorHandler&&(this.errorHandler(),this.errorHandler=t.x4C),this.stopTimer();else{this.isFileLoaded=e.loaded==e.total,void t.F8C!==i&&this.parseChunk(i.substring(this.lastPosition,i.length)),this.lastPosition=i.length;var s=Be.StringUtils.bind(Uo.model._labels.Labels.MESSAGE_LOADING_PROGRESS,Be.NumberFormatter.formatThousands(e.loaded.toFixed(t.F8C)),Be.NumberFormatter.formatThousands(e.total.toFixed(t.F8C)));Uo.preloader(!t.F8C,Uo.model._labels.Labels.MESSAGE_LOADING_DATA,s)}}catch(e){console.error(e.stack),this.onFileError()}},e.prototype.onFileConnected=function(){this.connected=!r.F8C,Uo.preloader(!r.F8C,Uo.model._labels.Labels.MESSAGE_LOADING_DATA,r.C4C)},e.prototype.setConnected=function(){r.x4C!=this.connectedHandler&&(this.connectedHandler(),this.connectedHandler=r.x4C)},e.prototype.onFileComplete=function(){var e=r;if(!Be.nullOrUndefined(this.loader))try{if(e.F8C==this.lastPosition||!this.hasSizeHeader){var t=this.loader.response;this.connected=!e.F8C,t.length>Uo.model.license.Limitations.MAX_CSV?(Uo.uialert(Uo.model.license.LicenseLabels.getLabel(Uo.model.license.LicenseLabels.betaversion),Uo.model.license.LicenseLabels.getLabel(Uo.model.license.LicenseLabels.tooLarge)),Uo.preloader(!e.O8C),e.x4C!=this.errorHandler&&(this.errorHandler(),this.errorHandler=e.x4C),this.clear()):(this.isFileLoaded=!e.F8C,this.isStarted?this.hasSizeHeader||(this.lastPosition<t.length?(this.parseChunk(t.substring(this.lastPosition,t.length)),this.lastPosition=t.length):this.data.push(this.lastRow)):this.parseChunk(t),this.parseAllDataRows(),this.onDataParsed())}}catch(e){console.error(e.stack),this.onFileError()}},e.isCSVValid=function(e){var i=r;return e=e.toLowerCase(),-i.O8C!=e.indexOf(t.j5C)||-i.O8C!=e.indexOf("<config>")||i.F8C==e.trim().length||-i.O8C!=e.indexOf("<!doctype")?(Uo.uialert(Uo.model._labels.Labels.MESSAGE_INAPPROPRIATE_FILE_FORMAT,Uo.model._labels.Labels.ERROR,Uo.AlertType.ERROR),!i.O8C):!i.F8C},e.prototype.parseChunk=function(e){var i=t,o=r;this.isStarted=!o.F8C,this.setConnected(),o.F8C==this.chunkIndex&&-o.O8C==e.indexOf(i.m6C)&&-o.O8C!=e.indexOf(i.J7C)&&(this.recordsetDelimiter=i.J7C),void o.F8C===this.fieldSeparator&&(this.fieldSeparator=this.chooseSeparator(-o.O8C==e.indexOf(i.m6C)&&-o.O8C==e.indexOf(i.J7C)?e:e.substring(o.F8C,e.indexOf(this.recordsetDelimiter)))),this.appendData(e),!o.O8C==this.isHeaderParsed&&(o.O8C<this.data.length||Uo.model._options.OptionsManager.showEmptyData)&&(this.parseHeader(this.data.shift(),this.data[o.F8C]),this.isHeaderParsed=!o.F8C)},e.prototype.onDataParsed=function(){var e=r;Uo.preloader(!e.O8C),this.isHeaderParsed?e.x4C!=this.successHandler&&this.successHandler():(Uo.uialert(Uo.model._labels.Labels.MESSAGE_NO_DATA_AVAILABLE,Uo.model._labels.Labels.ERROR,Uo.AlertType.ALERT),e.x4C!=this.errorHandler&&(this.errorHandler(),this.errorHandler=e.x4C)),this.clear()},e.prototype.parseHeader=function(i,s){var n=r,a=t;if(e.isCSVValid(i))try{Be.nullOrUndefined(this.fieldSeparator)&&(this.fieldSeparator=a.k6C);var l=e.splitRow(i,this.fieldSeparator),h=e.splitRow(s,this.fieldSeparator);this.columnNames=[];for(var c=n.F8C;c<l.length;c++){var d,u=this.getColumnValue(h[c]),p=l[c],C=n.x4C;if(n.F8C<l[c].length&&-n.O8C<l[c].indexOf(a.w7C)){var f=l[c].substr(l[c].indexOf(a.t7C)+n.O8C,l[c].length);if(n.F8C<f.length){p=l[c].substring(n.F8C,l[c].indexOf(a.t7C));try{C=JSON.parse(f)}catch(e){console.error(o.N7B+l[c].substring(n.F8C,l[c].indexOf(t.t7C))+o.D7B+f),console.error(e.stack),l[c]=p}}}if(Be.nullOrUndefined(C)){var m=this.getColumnType(l[c],u,n.F8C==h.length);d=this.getColumnName(l[c]);var g=this.getColumnCaption(d),y=this.getColumnAlias(l[c])||g;if(this.columnType[c]=m,this.columnNames.push(d),C={type:m,caption:y,uniqueName:d},m==Bo.types.DataFieldType.LEVEL){var _=d.split(a.t7C);if(C.hierarchy=_[n.F8C],C.level=_.pop(),n.F8C<_.length){var v=_.pop();C.parent=v}}}else!Be.nullOrUndefined(C.type)&&Bo.types.DataFieldType.valid(C.type)||(n.C4C==u||void n.F8C===u?C.type=Bo.types.DataFieldType.STRING:isNaN(Number(u))?isNaN(Number(u))&&(C.type=Be.StringUtils.isDate(u)&&Uo.model._options.OptionsManager.datePattern==Uo.model._options.OptionsManager.defaultDatePattern?Bo.types.DataFieldType.DATE:Bo.types.DataFieldType.STRING):C.type=Bo.types.DataFieldType.NUMBER),d=this.getColumnName(p),(Be.nullOrUndefined(C.caption)||n.C4C==C.caption.length)&&(C.caption=this.getColumnCaption(d)),this.columnType[c]=C.type,this.columnNames.push(d);this.cube_.structure_.addDataField(C,d)}}catch(e){console.error(e.stack),this.onHeaderParsingError()}else this.onFileError()},e.prototype.getColumnValue=function(e){return void r.F8C!==e&&r.x4C!==e&&(e=e.replace(t.k6C,t.f7C)),e},e.prototype.getColumnCaption=function(e){var i=e.split(n.ALIAS_DELIMITER);return r.O8C<i.length?i[r.O8C]:(this.hasParentHierarchy(e)&&(i=e.split(t.t7C)),i[i.length-r.O8C])},e.prototype.getColumnName=function(e){var t=r;if(e=e.trim().split(n.ALIAS_DELIMITER)[t.F8C],e=this.removeColumnFlags(e),-t.O8C<this.columnNames.indexOf(e)){for(var i=t.O8C,o=e;-t.O8C<this.columnNames.indexOf(o);)o=e+i,i++;e=o}return e},e.prototype.getColumnAlias=function(e){return e=e.split(n.ALIAS_DELIMITER),r.O8C<e.length?e[r.O8C]:r.x4C},e.prototype.removeColumnFlags=function(e){return e.replace(o.x7B,r.C4C)},e.prototype.getColumnType=function(e,i,o){var s=r,n=Bo.types.DataFieldType.NUMBER;return e=e.trim(),Be.nullOrUndefined(i)&&!o?Bo.types.DataFieldType.STRING:(t.D7C==e.charAt(s.F8C)?n=Bo.types.DataFieldType.STRING:"t+"==e.substr(s.F8C,s.M8C)?n=Bo.types.DataFieldType.TIME:"dt+"==e.substr(s.F8C,s.b8C)?n=Bo.types.DataFieldType.DATETIME:"n+"==e.substr(s.F8C,s.M8C)?n=Bo.types.DataFieldType.NUMBER:s.L2C==e.charAt(s.F8C)?n=Bo.types.DataFieldType.NUMBER:"ds+"==e.substr(s.F8C,s.b8C)?n=Bo.types.DataFieldType.DATE_STRING:"d+"==e.substr(s.F8C,s.M8C)?n=Bo.types.DataFieldType.DATE:"m+"==e.substr(s.F8C,s.M8C)?n=Bo.types.DataFieldType.MONTH:"w+"==e.substr(s.F8C,s.M8C)?n=Bo.types.DataFieldType.WEEKDAY:"D+"==e.substr(s.F8C,s.M8C)?n=Bo.types.DataFieldType.HIERARCHICAL_DATE:"D4+"==e.substr(s.F8C,s.b8C)?n=Bo.types.DataFieldType.HIERARCHICAL_DATE_WITH_QUARTERS:"id+"==e.substr(s.F8C,s.b8C)?n=Bo.types.DataFieldType.ID:s.C4C==i||void s.F8C===i?n=Bo.types.DataFieldType.STRING:isNaN(Number(i))&&(n=Be.StringUtils.isDate(i)&&Uo.model._options.OptionsManager.datePattern==Uo.model._options.OptionsManager.defaultDatePattern?Bo.types.DataFieldType.DATE:Bo.types.DataFieldType.STRING),n==Bo.types.DataFieldType.STRING&&this.hasParentHierarchy(e)&&(n=Bo.types.DataFieldType.LEVEL),n)},e.prototype.hasParentHierarchy=function(e){var i=r;return t.D7C==e.charAt(i.F8C)&&(e=e.substr(i.O8C)),i.O8C<e.split(t.t7C).length&&-i.O8C<this.columnNames.indexOf(e.split(t.t7C)[i.F8C].trim())},e.prototype.parseDataRows=function(){for(var e=r,t=Be.getTimer(),i=this.data.length;e.V0C>Be.getTimer()-t&&this.rowIdx!=i;)this.parseDataRow(this.data[this.rowIdx++]);return e.m0C<Be.getTimer()-this.preloaderTime&&this.isFileLoaded&&(t=Uo.model._labels.Labels.MESSAGE_ANALYZING_DATA,i=(this.rowIdx/this.data.length*e.o0C).toFixed(e.F8C),i=Be.StringUtils.bind(Uo.model._labels.Labels.MESSAGE_ANALYZING_PROGRESS,Be.NumberFormatter.formatThousands(this.rowIdx.toFixed(e.F8C)),Be.NumberFormatter.formatThousands(this.data.length.toFixed(e.F8C)),i),Uo.preloader(!e.F8C,t,i),this.preloaderTime=Be.getTimer()),this.isFileLoaded&&this.rowIdx>=this.data.length},e.prototype.parseAllDataRows=function(){for(Uo.preloader(!r.F8C,Uo.model._labels.Labels.MESSAGE_ANALYZING_DATA,Be.StringUtils.bind(Uo.model._labels.Labels.MESSAGE_ANALYZING_RECORDS,Be.NumberFormatter.formatThousands(this.data.length.toFixed(r.F8C))));this.rowIdx<this.data.length;this.rowIdx++)this.parseDataRow(this.data[this.rowIdx])},e.prototype.parseDataRow=function(e){var i=r;if(!Be.nullOrEmpty(e)&&void i.F8C!==this.columnNames){if((e=Be.StringUtils.trim(e,this.fieldSeparator)).split(this.fieldSeparator).length<this.columnNames.length)for(var o=e.split(this.fieldSeparator).length;o<this.columnNames.length;o++)e=e.concat(this.fieldSeparator);e+=i.s4C;var s=!i.O8C,n=!i.O8C,a=i.C4C,l=i.F8C,h=[],c=[],d=i.C4C;for(o=i.F8C;o<e.length;o++){var u=e.charAt(o);o==e.length-i.O8C||u==this.fieldSeparator&&!s?(o==e.length-i.O8C&&(a+=u),(a=(a=a.trim()).replace(t.J7C,i.C4C)).charAt(i.F8C)==this.fieldEnclosureToken&&a.charAt(a.length-i.O8C)==this.fieldEnclosureToken&&(a=a.slice(i.O8C,a.length-i.O8C)),this.columnType[l]==Bo.types.DataFieldType.ID&&(d=a),Uo.model.XSSCheck.valid(a)||(a=Uo.model.XSSCheck.validate(a)),i.x4C!=this.columnNames[l]&&this.cube_.localDataStorage.addMember(this.columnNames[l],a,this.columnType[l],h,c),s=n=!i.O8C,a=i.C4C,l++):u==this.fieldEnclosureToken?(n||(a+=u),s=!s,n=!i.F8C):(a+=u,n=!i.O8C)}this.cube_.localDataStorage.insert(h,c,d)}},e.prototype.appendData=function(e){var t=r;void t.F8C!==this.lastRow&&t.F8C<this.lastRow.length&&(e=Be.StringUtils.concat(this.lastRow,e)),e=this.splitLines(e);for(var i=t.F8C;i<e.length;i++)this.data.push(e[i]);!t.F8C!=this.isFileLoaded&&(this.lastRow=this.data.pop())},e.prototype.splitLines=function(e){var t=r,i=!t.O8C;if(e=e.split(this.recordsetDelimiter),!t.O8C==this.ignoreQuotedLineBreaks)for(var o=t.F8C;o<e.length;o++)i?(this.isQuoteOpen(e[o])&&(i=!t.O8C),e[o-t.O8C]+="<br/>"+e[o],e.splice(o,t.O8C),o--):this.isQuoteOpen(e[o])&&(i=!t.F8C);return e},e.prototype.isQuoteOpen=function(e){return r.O8C==this.countChar(e,this.fieldEnclosureToken)%r.M8C},e.prototype.countChar=function(e,t){var i=r.F8C;if(e)for(var o=r.F8C;o<e.length;o++)e.charAt(o)==t&&i++;return i},e.prototype.chooseSeparator=function(e){var i=t;if(void r.F8C==this.fieldSeparator)return e.split(i.k6C).length>(e=e.split(i.F9Q).length)?i.k6C:i.F9Q},e.splitRow=function(e,i,o){var s=r;if(void s.F8C===o&&(o=t.U9Q),s.x4C==e)return[];for(var n=s.C4C,a=!s.O8C,l=!s.O8C,h=[],c=s.F8C;c<e.length;c++){var d=e.charAt(c);c==e.length-s.O8C||d==i&&!a?(c==e.length-s.O8C&&d==i?(h.push(n),n=s.C4C):c==e.length-s.O8C&&(n+=d),(n=n.trim()).charAt(s.F8C)==o&&n.charAt(n.length-s.O8C)==o&&(n=n.slice(s.O8C,n.length-s.O8C)),a=l=!s.O8C,h.push(n),n=s.C4C):d==o?(l||(n+=d),a=!a,l=!s.F8C):(n+=d,l=!s.O8C)}return h},e.splitRowWithMeta=function(e,i,o,s,n){var a=r;if(void a.F8C===o&&(o=t.U9Q),void a.F8C===s&&(s=t.w7C),void a.F8C===n&&(n=t.C7C),a.x4C==e)return[];for(var l=a.C4C,h=!a.O8C,c=!a.O8C,d=!a.O8C,u=[],p=a.F8C;p<e.length;p++){var C=e.charAt(p);p==e.length-a.O8C||C==i&&!h&&!d?(p==e.length-a.O8C&&C==i?(u.push(l),l=a.C4C):p==e.length-a.O8C&&(l+=C),(l=l.trim()).charAt(a.F8C)==o&&l.charAt(l.length-a.O8C)==o&&(l=l.slice(a.O8C,l.length-a.O8C)),d=h=c=!a.O8C,u.push(l),l=a.C4C):C==o?(c||(l+=C),h=!h,c=!a.F8C):(c=!a.O8C,C==s?d=!a.F8C:C==n&&(d=!a.O8C),l+=C)}return u},e.timeCaption=function(e){return e&&r.F8C<e.length?e:Uo.model._labels.Labels.INVALID_DATE},e.prototype.loadMembers=function(e,t,i){},e.prototype.loadMemberChildren=function(e,t,i,r){},e.prototype.loadMemberDescendants=function(e,t,i,r){},e.prototype.searchMembers=function(e,t,i,r){},e.prototype.cancel=function(){this.clear(),this.connectedHandler=this.errorHandler=this.successHandler=r.x4C},e}();e.CSVLoader=i;var n=function(){function e(){}return e.NAN="N",e.FLOAT="F",e.DELIMITER=t.m7C,e.NEW_LINE=t.m6C,e.ALIAS_DELIMITER="+T+",e}();e.Consts=n}((Bo=Uo.data_||(Uo.data_={})).csv||(Bo.csv={})),ko=De||(De={}),Vo=ko.data_||(ko.data_={}),zo=Vo.csv||(Vo.csv={}),qo=function(){function e(){var e=t,s=r;this._embedded=!s.O8C,this._dataOffset=s.F8C,this.FIELD_DELIMITER=e.k6C,this.RECORDSET_DELIMITER=e.m6C,this._cube=Vo.Cube.getInstance(),this._isStarted=!s.O8C,this._embeddedDataStartSign=e.S8B,this._embeddedDataStopSign="--\x3e",this._embeddedDataJSONStartSign=e.d8B,this._embeddedDataJSONStopSign=o.h7B,this._currentDataStopSign=this._currentDataStartSign=s.C4C,this._preloaderTime=s.F8C,this.regDelimiter=RegExp(o.R7B,"g"),this.regQuote=RegExp(o.Q7B,"g"),this.regNewline=RegExp(i.k7B,"g")}return e.prototype.load=function(e,t,i,o,s){try{this.clear(),this._connectionInfo=e,this._successHandler=t,this.connectedHandler=o,this.cancelledHandler=s,this._errorHandler=i,this._embedded=this._connectionInfo.embedded,this._dataOffset=this._connectionInfo.embeddedDataOffset,this._dataToLoad=this._connectionInfo.embeddedDataToLoad,this._embeddedDataStarted=!r.O8C,this._embedded&&r.x4C!=this._dataToLoad&&this.loadEmbedded(this._dataToLoad)}catch(e){console.error(e.stack),this.onFileError()}},e.prototype.defineCurrentDataSigns=function(e){this._currentDataStartSign=-r.O8C<e.indexOf(this._embeddedDataJSONStartSign)?this._embeddedDataJSONStartSign:this._embeddedDataStartSign,this._currentDataStopSign=this._currentDataStartSign==this._embeddedDataJSONStartSign?this._embeddedDataJSONStopSign:this._embeddedDataStopSign},e.prototype.loadEmbedded=function(e){var i=this;this.BLOCK_SIZE=t.A5C,this._bytesLoaded=r.F8C;try{var o=new ko.DataStream(e,this._dataOffset,ko.DataStream.BIG_ENDIAN);Be.getTimer();var s=o.byteLength>this.BLOCK_SIZE?this.BLOCK_SIZE:o.byteLength,n=o.readString(s);this.defineCurrentDataSigns(n),this._dataStrFromBytes=r.C4C,this._dataStrFromBytes+=n.substring(this._currentDataStartSign.length),this._bytesLoaded+=s,this._bytesToLoad=o.byteLength,this._bytesLoaded<this._bytesToLoad?Be.ThreadManager.addTask(this.loadBytes,this,o,function(){return i.onComplete()}):this.onComplete()}catch(e){console.error(e.stack),this.onFileError()}},e.prototype.loadBytes=function(e){var t=this._bytesToLoad-this._bytesLoaded>this.BLOCK_SIZE?this.BLOCK_SIZE:this._bytesToLoad-this._bytesLoaded;return e=e.readString(t),this._bytesLoaded+=t,this._dataStrFromBytes+=e,this.showLoadingProgress(this._bytesLoaded,this._bytesToLoad),this._bytesLoaded>=this._bytesToLoad},e.prototype.showLoadingProgress=function(e,t){var i=Be.StringUtils.bind(ko.model._labels.Labels.MESSAGE_ANALYZING_RECORDS,(e/t*r.o0C).toFixed(r.F8C)+o.o2B);ko.preloader(!r.F8C,ko.model._labels.Labels.MESSAGE_LOADING,i)},e.prototype.onComplete=function(){ko.preloader(!r.O8C),this._isFileLoaded=!r.F8C,this.processStringFromBytes(this._dataStrFromBytes)},e.prototype.setConnected=function(){r.x4C!=this.connectedHandler&&(this.connectedHandler(),this.connectedHandler=r.x4C)},e.prototype.processStringFromBytes=function(e){e=Be.StringUtils.trimLeft(e),this.parseChunk(e)},e.prototype.onTick=function(){var e=r;if(this._timerCount++,e.F8C<this._bytesLoaded||this._isFileLoaded||this._isFileFailed)Be.fmClearInterval(this._timer),this._timerCount=e.F8C;else{var t=this._timerCount/e.L8C;this._isConnected?(196<t&&(t=196),t=Be.NumberFormatter.format(t/e.M8C,new ko.model.format.vo.FormatValueObject,!e.O8C,!e.O8C,e.O8C)+o.o2B):t=Be.StringUtils.bind(ko.model._labels.Labels.MESSAGE_LOADING_WAITING,Be.NumberFormatter.format(t,new ko.model.format.vo.FormatValueObject,!e.O8C,!e.O8C,e.O8C)),ko.preloader(!e.F8C,ko.model._labels.Labels.MESSAGE_LOADING_DATA,t)}},e.prototype.onFileError=function(){var e=r;Be.fmClearInterval(this._timer),ko.preloader(!e.O8C),!e.O8C==this._isFileFailed&&(this._isFileFailed=!e.F8C,ko.uialert(Be.StringUtils.bind(ko.model._labels.Labels.MESSAGE_UNABLE_TO_OPEN_FILE,e.C4C),ko.model._labels.Labels.ERROR,ko.AlertType.ERROR)),e.x4C!=this.errorHandler&&(this.errorHandler(),this.errorHandler=e.x4C),this.clear()},e.prototype.parseChunk=function(e){var t=r;this._isStarted=!t.F8C,this.setConnected(),this.appendData(e),!t.O8C==this._isHeaderParsed&&t.O8C<this._data.length&&(this._data.shift(),this.parseHeader(this._data.shift()),this._isHeaderParsed=!t.F8C,this.parseAllDataRows(),this.onDataParsed())},e.prototype.appendData=function(e){var t=r;void t.F8C!==this._lastRow&&t.F8C<this._lastRow.length&&(e=Be.StringUtils.concat(this._lastRow,e)),e=t.F8C<=e.indexOf(this.RECORDSET_DELIMITER)?e.split(this.RECORDSET_DELIMITER):[];for(var i=t.F8C;i<e.length;i++)this._data.push(e[i]);!t.F8C!=this._isFileLoaded&&(this._lastRow=this._data.pop(),this._lastRow=this._lastRow==this._currentDataStopSign?this._data.pop():this._lastRow)},e.prototype.parseHeader=function(e){var i=r;e=zo.CSVLoader.splitRowWithMeta(e,this.FIELD_DELIMITER),this._columnNames=[];for(var s=i.F8C;s<e.length;s++){var n=e[s],a={};if(i.F8C<e[s].length&&-i.O8C<e[s].indexOf(t.w7C)){var l=e[s].substr(e[s].indexOf(t.t7C)+i.O8C,e[s].length);if(i.F8C<l.length){n=e[s].substring(i.F8C,e[s].indexOf(t.t7C));try{a=JSON.parse(l)}catch(r){console.error(o.N7B+e[s].substring(i.F8C,e[s].indexOf(t.t7C))+o.D7B+l),console.error(r.stack)}}}n=this.getColumnName(n),(Be.nullOrUndefined(a.caption)||i.C4C==a.caption.length)&&(a.caption=this.getColumnCaption(n)),this._columnType[s]=a.type,this._columnNames.push(n),this._cube.structure_.addDataField(a,n)}},e.prototype.getColumnCaption=function(e){var i=e.split(zo.Consts.ALIAS_DELIMITER);return r.O8C<i.length?i[r.O8C]:(this.hasParentHierarchy(e)&&(i=e.split(t.t7C)),i[i.length-r.O8C])},e.prototype.hasParentHierarchy=function(e){var i=r;return t.D7C==e.charAt(i.F8C)&&(e=e.substr(i.O8C)),i.O8C<e.split(t.t7C).length&&-i.O8C<this._columnNames.indexOf(e.split(t.t7C)[i.F8C].trim())},e.prototype.getColumnName=function(e){var t=r;if(e=e.trim().split(zo.Consts.ALIAS_DELIMITER)[t.F8C],e=this.removeColumnFlags(e),e=this.decodeChars(e),-t.O8C<this._columnNames.indexOf(e)){for(var i=t.O8C,o=e;-t.O8C<this._columnNames.indexOf(o);)o=e+i,i++;e=o}return e},e.prototype.removeColumnFlags=function(e){return e.replace(o.x7B,r.C4C)},e.prototype.parseAllDataRows=function(){for(ko.preloader(!r.F8C,ko.model._labels.Labels.MESSAGE_ANALYZING_DATA,Be.StringUtils.bind(ko.model._labels.Labels.MESSAGE_ANALYZING_RECORDS,Be.NumberFormatter.formatThousands(this._data.length.toFixed(r.F8C))));this._rowIdx<this._data.length;this._rowIdx++)this.parseDataRow(this._data[this._rowIdx])},e.prototype.parseDataRows=function(){var e=r,i=Be.getTimer(),o=this._rowIdx+this.BLOCK_SIZE;for(o>this._data.length&&(o=this._data.length);this._rowIdx<o;this._rowIdx++)this.parseDataRow(this._data[this._rowIdx]);return this.BLOCK_SIZE=Be.ThreadManager.adjustTaskSize(Be.getTimer()-i,this.BLOCK_SIZE),t.N6C<Be.getTimer()-this._preloaderTime&&this._isFileLoaded&&(i=ko.model._labels.Labels.MESSAGE_ANALYZING_DATA,o=(this._rowIdx/this._data.length*e.o0C).toFixed(e.F8C),o=Be.StringUtils.bind(ko.model._labels.Labels.MESSAGE_ANALYZING_PROGRESS,Be.NumberFormatter.formatThousands(this._rowIdx.toFixed(e.F8C)),Be.NumberFormatter.formatThousands(this._data.length.toFixed(e.F8C)),o),ko.preloader(!e.F8C,i,o),this._preloaderTime=Be.getTimer()),this._isFileLoaded&&this._rowIdx>=this._data.length},e.prototype.parseDataRow=function(e){if(!Be.nullOrEmpty(e)&&void r.F8C!==this._columnNames&&e!=this._currentDataStopSign){if(e.split(this.FIELD_DELIMITER).length<this._columnNames.length)for(var t=e.split(this.FIELD_DELIMITER).length;t<this._columnNames.length;t++)e=e.concat(this.FIELD_DELIMITER);var i=[],o=[];for(e=e.split(this.FIELD_DELIMITER),t=r.F8C;t<e.length;t++)this.parseDataValue(e[t],t,i,o);this._cube.localDataStorage.insert(i,o)}},e.prototype.parseDataValue=function(e,i,o,s){var n=r,a=!n.F8C;if(n.x4C!=this._columnNames[i]){if(this._columnType[i]==Vo.types.DataFieldType.STRING||this._columnType[i]==Vo.types.DataFieldType.WEEKDAY||this._columnType[i]==Vo.types.DataFieldType.MONTH){if(t.g9Q==e.charAt(n.F8C)){var l=parseInt(e.substring(n.O8C));if(!n.O8C==isNaN(l)){var h=this._cube.structure_.getDataField(this._columnNames[i]);l=h.members.getItemAt(l+n.O8C),n.x4C!=l&&(e=l.caption==ko.model._labels.Labels.MEMBER_BLANK?n.C4C:l.caption,a=!n.O8C)}}}else this._columnType[i]==Vo.types.DataFieldType.LEVEL?t.g9Q==e.charAt(n.F8C)&&(l=parseInt(e.substring(n.O8C)),!n.O8C==isNaN(l)&&(h=this._cube.structure_.getDataField(this._columnNames[i]),n.x4C==h.members&&(h=this._cube.structure_.getDataField(this._columnNames[i]).hierarchy),l=h.members.getItemAt(l+n.O8C),n.x4C!=l&&(e=l.caption==ko.model._labels.Labels.MEMBER_BLANK?n.C4C:l.caption,a=!n.O8C))):this._columnType[i]!=Vo.types.DataFieldType.DATE&&this._columnType[i]!=Vo.types.DataFieldType.DATE_STRING&&this._columnType[i]!=Vo.types.DataFieldType.HIERARCHICAL_DATE&&this._columnType[i]!=Vo.types.DataFieldType.HIERARCHICAL_DATE_WITH_QUARTERS||(e=t.N6C*parseInt(e),a=!n.O8C);!n.F8C==a&&(e=this.decodeChars(e)),this._cube.localDataStorage.addMember(this._columnNames[i],e,this._columnType[i],o,s)}},e.prototype.decodeChars=function(e){return e.replace(this.regDelimiter,t.k6C).replace(this.regQuote,t.U9Q).replace(this.regNewline,t.m6C)},e.prototype.onDataParsed=function(){ko.preloader(!r.O8C),this._isHeaderParsed?this.successHandler():(ko.uialert(ko.model._labels.Labels.MESSAGE_NO_DATA_AVAILABLE,ko.model._labels.Labels.ERROR,ko.AlertType.ALERT),this.errorHandler(),this._errorHandler=r.x4C),this.clear()},e.prototype.clear=function(){var e=r;this._data=[],this._currentDataStopSign=this._currentDataStartSign=e.C4C,this._bytesLoaded=e.F8C,this._isConnected=!e.O8C,this._columnType=[],this._hasSizeHeader=this._isFileFailed=this._isFileLoaded=this._isHeaderParsed=!e.O8C,this._lastRow=e.C4C,this._rowIdx=e.F8C,this.BLOCK_SIZE=e.o0C,Be.fmClearInterval(this._timer)},e.prototype.successHandler=function(){r.x4C!=this._successHandler&&this._successHandler()},e.prototype.errorHandler=function(){r.x4C!=this._errorHandler&&this._errorHandler()},e.prototype.loadDimensions=function(e){},e.prototype.loadHierarchies=function(e){},e.prototype.loadLevels=function(e){},e.prototype.loadMeasures=function(e){},e.prototype.loadMembers=function(e,t,i){},e.prototype.loadMemberChildren=function(e,t,i,r){},e.prototype.loadMemberDescendants=function(e,t,i,r){},e.prototype.searchMembers=function(e,t,i,r){},e.prototype.cancel=function(){this.connectedHandler=this.errorHandler=this.successHandler=r.x4C},e}(),zo.CSVEmbeddedLoader=qo,Go=De||(De={}),function(e){var s=function(){function e(){this.NaN=i.f7B,this._embeddedJSONDataStart=t.d8B,this._embeddedJSONDataFinish=o.h7B}return e.prototype.getData=function(e){this._callback=e,Go.preloader(!r.F8C,Go.model._labels.Labels.MESSAGE_SAVING),this.preprocessHeader(),this.composeData()},e.prototype.preprocessHeader=function(){var e;for(this._allHierarchies=Wo.Cube.getInstance().structure_.allHierarchies(),this._columnsList=[],this._colIdx=r.F8C;this._colIdx<this._allHierarchies.length;){e=this._allHierarchies.getItemAt(this._colIdx);var t=Wo.Cube.getInstance().structure_.hierarchyToMeasure(e.uniqueName).type;t!=Wo.types.MeasureType.COUNT&&t!=Wo.types.MeasureType.DATE?this.processMeasureColumn(Wo.Cube.getInstance().structure_.hierarchyToMeasure(e.uniqueName)):this.processHierarchyColumn(e),this._colIdx++}},e.prototype.composeData=function(){var e=this;this._rowIdx=r.F8C,this._data=r.C4C,this._facts=Wo.Cube.getInstance().localDataStorage.getFacts(),this._tuples=Wo.Cube.getInstance().localDataStorage.getTuples(),Be.ThreadManager.addTask(this.composeLine,this,r.x4C,function(){return e.onDataCreated()})},e.prototype.composeLine=function(){var e=Be.getTimer();for(this._colIdxDifference=this._colIdx=r.F8C;this._rowIdx<this._tuples.length;){for(;this._colIdx+this._colIdxDifference<this._tuples[this._rowIdx].length;)this.addMember(this.composeMember()),this._colIdx++;if(this._rowIdx++,this._data+=t.m6C,this._colIdxDifference=this._colIdx=r.F8C,r.o0C<Be.getTimer()-e)break}return this.showSavingProgress(this._rowIdx,this._tuples.length),this._rowIdx>=this._tuples.length},e.prototype.composeMember=function(){var e,i=r,s=this._columnsList[this._colIdx].type;if(s!=Wo.types.DataFieldType.DATE&&s!=Wo.types.DataFieldType.DATE_STRING&&s!=Wo.types.DataFieldType.LEVEL&&s!=Wo.types.DataFieldType.HIERARCHICAL_DATE&&s!=Wo.types.DataFieldType.HIERARCHICAL_DATE_WITH_QUARTERS&&s!=Wo.types.DataFieldType.TIME&&s!=Wo.types.DataFieldType.DATETIME&&(e=this._allHierarchies.getItem(this._columnsList[this._colIdx].uniqueName).members.getItemAt(this._tuples[this._rowIdx][this._colIdx+this._colIdxDifference]).caption),s==Wo.types.DataFieldType.NUMBER)return i.x4C!=e?e.toString():i.C4C;if(s!=Wo.types.DataFieldType.STRING&&s!=Wo.types.DataFieldType.WEEKDAY&&s!=Wo.types.DataFieldType.MONTH){if(s==Wo.types.DataFieldType.LEVEL){e=(s=this._allHierarchies.getItem(this._columnsList[this._colIdx].hierarchy)).members.getItemAt(this._tuples[this._rowIdx][this._colIdx+this._colIdxDifference]).caption;for(var n=this._colIdx,a=i.F8C;a<s.levels_.length-i.M8C;a++)this.addMember(this.composeStringData(e,n)),this._colIdx++,e=i.x4C==this._tuples[this._rowIdx][this._colIdx+this._colIdxDifference]||i.C4C==this._tuples[this._rowIdx][this._colIdx+this._colIdxDifference]+i.C4C?i.C4C:s.members.getItemAt(this._tuples[this._rowIdx][this._colIdx+this._colIdxDifference]).caption;return this.composeStringData(e,n)}if(s==Wo.types.DataFieldType.DATE_STRING)return this._allHierarchies.getItem(this._columnsList[this._colIdx].uniqueName).members.getItemAt(this._tuples[this._rowIdx][this._colIdx+this._colIdxDifference]).levelOrdinal/t.N6C+i.C4C;if(s==Wo.types.DataFieldType.DATE)return e=i.C4C,e+=(s=this._allHierarchies.getItem(this._columnsList[this._colIdx].uniqueName+o.k5B).members.getItemAt(this._tuples[this._rowIdx][this._colIdx+this._colIdxDifference])).caption+i.L2C,this._colIdxDifference++,e+=(s=this._allHierarchies.getItem(this._columnsList[this._colIdx].uniqueName+o.i5B).members.getItemAt(this._tuples[this._rowIdx][this._colIdx+this._colIdxDifference])).caption+i.L2C,this._colIdxDifference++,e+=(s=this._allHierarchies.getItem(this._columnsList[this._colIdx].uniqueName+o.J5B).members.getItemAt(this._tuples[this._rowIdx][this._colIdx+this._colIdxDifference])).caption,new Date(e).getTime()/t.N6C+Math.abs(i.Y0C*(new Date).getTimezoneOffset())+i.C4C;if(s==Wo.types.DataFieldType.HIERARCHICAL_DATE||s==Wo.types.DataFieldType.HIERARCHICAL_DATE_WITH_QUARTERS)return this.composeHierarchicalDateData(s);if(s==Wo.types.DataFieldType.TIME||s==Wo.types.DataFieldType.DATETIME)return this._facts[this._rowIdx][this._colIdx+this._colIdxDifference]+i.C4C}return this.composeStringData(e)},e.prototype.addMember=function(e){this._data+=e==this.NaN||e==Go.model._labels.Labels.MEMBER_BLANK?r.C4C:e,this._data+=this._colIdx+this._colIdxDifference<this._tuples[this._rowIdx].length-r.O8C?t.k6C:r.C4C},e.prototype.composeStringData=function(e,t){return void r.F8C===t&&(t=this._colIdx),r.C4C==e?e:(this._columnsList[t].members.keyExists(e)||this._columnsList[t].members.addItem(e,this._columnsList[t].members.length),this.encodeChars(e))},e.prototype.encodeChars=function(e){return e.replace(/,/g,o.R7B).replace(/\"/g,o.Q7B).replace(/\n/g,i.k7B)},e.prototype.composeHierarchicalDateData=function(e){return this._colIdxDifference+=r.M8C,this._colIdxDifference=e==Wo.types.DataFieldType.HIERARCHICAL_DATE_WITH_QUARTERS?this._colIdxDifference+r.O8C:this._colIdxDifference,this._allHierarchies.getItem(this._columnsList[this._colIdx].uniqueName).members.getItemAt(this._tuples[this._rowIdx][this._colIdx+this._colIdxDifference]).levelOrdinal/t.N6C+r.C4C},e.prototype.onDataCreated=function(){Go.preloader(!r.O8C),r.x4C!=this._callback&&this._callback(this.getResult())},e.prototype.processHierarchyColumn=function(e){var t=this.getHierarchyType(e);t==Wo.types.DataFieldType.LEVEL?this.processLevelsColumn(e):t==Wo.types.DataFieldType.DATE?(this._columnsList.push(this.createColumn(t,e.dimension.uniqueName,e.dimension.caption)),this._colIdx+=r.M8C):this._columnsList.push(this.createColumn(t,e.uniqueName,e.caption))},e.prototype.getResult=function(){for(var e=t,i=this._embeddedJSONDataStart+"\n___csv___WDR___"+Go.Pivot.BUILD_VERSION+e.m6C,o=r.F8C;o<this._columnsList.length;o++)i+=this._columnsList[o].uniqueName,i+=":{",i+='"type": "'+this._columnsList[o].type+e.U9Q,this._columnsList[o].isLevel?(i+=', "hierarchy": "'+this._columnsList[o].hierarchy+e.U9Q,i+=', "level": "'+this._columnsList[o].uniqueName+e.U9Q,Be.nullOrUndefined(this._columnsList[o].parent)||(i+=', "parent": "'+this._columnsList[o].parent+e.U9Q)):this._columnsList[o].uniqueName!=this._columnsList[o].caption&&(i+=', "caption": "'+this._columnsList[o].caption+e.U9Q),i+=e.C7C,i+=o<this._columnsList.length-r.O8C?e.k6C:r.C4C;return i+e.m6C+this._data+this._embeddedJSONDataFinish},e.prototype.processMeasureColumn=function(e){this._columnsList.push(this.createColumn(Wo.types.MeasureType.toDataFieldType(e.type),e.uniqueName,e.originalCaption,!r.F8C))},e.prototype.processLevelsColumn=function(e){var t=r,i=e.uniqueName;e=e.levels_;for(var o,s,n=t.O8C;n<e.length;n++){var a;s=n,o=e.getItem(e.getKeyAt(n)),t.O8C<s&&(a=e.getItem(e.getKeyAt(s-t.O8C)).uniqueName),(o=this.createColumn(Wo.types.DataFieldType.LEVEL,o.uniqueName,o.caption)).isLevel=!t.F8C,o.hierarchy=i,Be.nullOrUndefined(a)||(o.parent=a),this._columnsList.push(o)}},e.prototype.getHierarchyType=function(e){var t=r;if(e.dimension.type.toString()==Wo.types.DataFieldType.DATE_STRING)return Wo.types.DataFieldType.DATE_STRING;var i=Wo.types.DataFieldType.typeName(e.type);return t.M8C<e.levels_.length&&(i=t.j8C==e.levels_.length&&e.levels_.getItemAt(t.O8C).uniqueName==e.uniqueName+o.k5B?Wo.types.DataFieldType.HIERARCHICAL_DATE:t.g8C==e.levels_.length&&e.levels_.getItemAt(t.O8C).uniqueName==e.uniqueName+o.k5B?Wo.types.DataFieldType.HIERARCHICAL_DATE_WITH_QUARTERS:Wo.types.DataFieldType.LEVEL),i},e.prototype.showSavingProgress=function(e,t){var i=Be.StringUtils.bind(Go.model._labels.Labels.MESSAGE_ANALYZING_RECORDS,(e/t*r.o0C).toFixed(r.F8C)+o.o2B);Go.preloader(!r.F8C,Go.model._labels.Labels.MESSAGE_SAVING,i)},e.prototype.createColumn=function(e,t,i,o){void r.F8C===o&&(o=!r.O8C);var s=new n;return s.type=e,s.uniqueName=t,s.caption=i,s.isMeasure=o,s},e}();e.CSVSaver=s;var n=function(){var e=r;function i(){this._isLevel=!e.O8C,this._members=new Be.AssociativeArray}return Object.defineProperty(i.prototype,t.a1Q,{get:function(){return this._members},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(i.prototype,e.W3C,{get:function(){return this._type},set:function(e){this._type=e},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(i.prototype,o.M6B,{get:function(){return this._uniqueName},set:function(e){this._uniqueName=e},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(i.prototype,t.W0B,{get:function(){return this._caption},set:function(e){this._caption=e},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(i.prototype,"isMeasure",{get:function(){return this._isMeasure},set:function(e){this._isMeasure=e},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(i.prototype,"isLevel",{get:function(){return this._isLevel},set:function(e){this._isLevel=e},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(i.prototype,o.U5B,{get:function(){return this._hierarchyUniqueName},set:function(e){this._hierarchyUniqueName=e},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(i.prototype,e.q2C,{get:function(){return this._parentUniqueName},set:function(e){this._parentUniqueName=e},enumerable:!e.F8C,configurable:!e.F8C}),i}();e.Column=n}((Wo=Go.data_||(Go.data_={})).csv||(Wo.csv={})),jo=De||(De={}),Yo=jo.data_||(jo.data_={}),Xo=Yo.json||(Yo.json={}),Ko=function(e){var i="Too much records!";function s(){var i=e.call(this)||this;return i.CHUNK_SIZE=o.q7B,i.factsCounter=r.F8C,i.fileExtensions=[t.m8B,t.T8B],i}return Ga(s,e),s.prototype.load=function(i,o,s,n,a){var l=r;this.clear(),this.successHandler=o,this.errorHandler=s,this.connectedHandler=n,this.cancelledHandler=a,!l.F8C===i.browseForFile?this.browseFile():void l.F8C!==i.filename&&l.C4C!=i.filename&&t.S5C!=i.filename.substr(-l.M8C)?e.prototype.load.call(this,i,o,s,n,a):this.addData(i.data)},s.prototype.onFileProgress=function(e){if(!Be.nullOrUndefined(this.loader))try{if(o.q7B<e.loaded-this.bytesLoaded){var i=Be.StringUtils.bind(jo.model._labels.Labels.MESSAGE_LOADING_PROGRESS,Be.NumberFormatter.formatThousands((e.loaded/t.N6C).toFixed(r.F8C)),Be.NumberFormatter.formatThousands((e.total/t.N6C).toFixed(r.F8C)));jo.preloader(!r.F8C,jo.model._labels.Labels.MESSAGE_LOADING_DATA,i)}this.bytesLoaded=e.loaded}catch(e){console.error(e.stack),this.onFileError()}},s.prototype.onFileComplete=function(){var e=r;if(!Be.nullOrUndefined(this.loader)){var t=this.loader.response;this.connected=!e.F8C,t.length>jo.model.license.Limitations.MAX_JSON?(jo.uialert(jo.model.license.LicenseLabels.getLabel(jo.model.license.LicenseLabels.betaversion),jo.model.license.LicenseLabels.getLabel(jo.model.license.LicenseLabels.tooLarge)),jo.preloader(!e.O8C),e.x4C!=this.errorHandler&&(this.errorHandler(),this.errorHandler=e.x4C),this.clear()):(this.isFileLoaded=!e.F8C,this.parseChunk(t))}},s.prototype.parseChunk=function(e){try{var t=JSON.parse(e);if(Be.nullOrUndefined(t.items)||(t=t.items),Be.nullOrUndefined(t.length))return void this.invalidFormat()}catch(e){return void this.invalidFormat()}jo.preloader(!r.O8C),this.addData(t)},s.prototype.addData=function(e){var o=r;if(Be.nullOrUndefined(e.items)||(e=e.items),!(Be.nullOrUndefined(e)||o.O8C>e.length))if(e.toString().length>jo.model.license.Limitations.MAX_JSON)jo.uialert(i,t.S5Q);else{this.setConnected();var s=!o.O8C,n=e[o.F8C]&&e[o.F8C]instanceof Array;n?this.parseHeader(e[o.F8C].toString(),e[o.O8C].toString()):s=this.cube_.structure_.addDataStructure(e[o.F8C]),this.data=e.slice(),this.factsCounter=o.F8C,(s||n)&&this.data.shift(),this.parseAllDataRows(),this.onParseComplete()}},s.prototype.updateData=function(e){var o=r;if(!(Be.nullOrUndefined(e)||o.O8C>e.length))if(e.toString().length>jo.model.license.Limitations.MAX_JSON)jo.uialert(i,t.S5Q);else{this.cube_.localDataStorage.clearUpdates();for(var s=e[o.O8C]&&e[o.O8C]instanceof Array,n=o.F8C;n<e.length;n++)s?this.cube_.localDataStorage.insertArray(e[n],!o.F8C):this.cube_.localDataStorage.insertObject(e[n],!o.F8C)}},s.prototype.onParseComplete=function(){jo.preloader(!r.O8C),this.successHandler()},s.prototype.parseDataRow=function(e){var t=r,i=this.factsCounter;e=i+this.CHUNK_SIZE;for(var o=this.data[t.O8C]&&this.data[t.O8C]instanceof Array;i<e;i++){if(i==this.data.length)return!t.F8C;o?this.cube_.localDataStorage.insertArray(this.data[i]):this.cube_.localDataStorage.insertObject(this.data[i]),this.factsCounter++}return e=Math.round(this.factsCounter/this.data.length*t.o0C),t.o0C<e&&(e=t.o0C),jo.preloader(!t.F8C,jo.model._labels.Labels.MESSAGE_ANALYZING_DATA,Be.StringUtils.bind(jo.model._labels.Labels.MESSAGE_ANALYZING_PROGRESS,Be.NumberFormatter.formatThousands(this.factsCounter.toString()),Be.NumberFormatter.formatThousands(this.data.length.toString()),e.toString())),!t.O8C},s.prototype.parseAllDataRows=function(){var e=r;jo.preloader(!e.F8C,jo.model._labels.Labels.MESSAGE_ANALYZING_DATA,Be.StringUtils.bind(jo.model._labels.Labels.MESSAGE_ANALYZING_RECORDS,Be.NumberFormatter.formatThousands(this.data.length.toFixed(e.F8C))));for(var t=this.data[e.O8C]&&this.data[e.O8C]instanceof Array;this.factsCounter<this.data.length;this.factsCounter++)t?this.cube_.localDataStorage.insertArray(this.data[this.factsCounter]):this.cube_.localDataStorage.insertObject(this.data[this.factsCounter])},s.prototype.invalidFormat=function(){jo.preloader(!r.O8C),jo.uialert(jo.model._labels.Labels.MESSAGE_INVALID_JSON_DATA,jo.model._labels.Labels.ERROR),this.errorHandler(),this.stopTimer()},s}(Yo.csv.CSVLoader),Xo.JSONLoader=Ko,Qo=De||(De={}),Jo=Qo.data_||(Qo.data_={}),Zo=Jo.consts||(Jo.consts={}),$o=function(){function e(){}return e.valid=function(t){return t==e.JSON||t==e.CSV||t==e.EMPTY},e.CSV="csv",e.JSON=t.n6C,e.EMPTY=r.C4C,e}(),Zo.DataSourceType=$o,es=De||(De={}),ts=es.data_||(es.data_={}),is=ts.consts||(ts.consts={}),rs=function(){function e(){}return e.TOP=r.b2C,e.BOTTOM=r.g2C,e.NONE=r.n2C,e}(),is.FilterType=rs,os=De||(De={}),ss=os.data_||(os.data_={}),ns=ss.consts||(ss.consts={}),as=function(){function e(){}return e.isValid=function(t){return t==e.UNSORTED||t==e.ASC||t==e.DESC},e.UNSORTED="unsorted",e.ASC=o.r6B,e.DESC=i.r7B,e.NUMERIC_RANGE="numericRange",e}(),ns.SortType=as,ls=De||(De={}),hs=ls.data_||(ls.data_={}),cs=hs.consts||(hs.consts={}),ds=function(){function e(){}return e.ROWS_AXIS=t.M8Q,e.COLUMNS_AXIS=t.b8Q,e.PAGES_AXIS=o.Z3B,e}(),cs.AxisName=ds,us=De||(De={}),ps=us.data_||(us.data_={}),Cs=ps.types||(ps.types={}),fs=function(){var e=r;function t(){}return t.MD_DIMTYPE_UNKNOWN=e.F8C,t.MD_DIMTYPE_TIME=e.O8C,t.MD_DIMTYPE_MEASURE=e.M8C,t.MD_DIMTYPE_OTHER=e.b8C,t}(),Cs.DimensionType=fs,ms=De||(De={}),gs=ms.data_||(ms.data_={}),ys=gs.types||(gs.types={}),_s=function(){function e(){}return e.fromDataFieldType=function(t){var i=e.DEFAULT;switch(t){case ys.DataFieldType.NUMBER:i=e.MEASURE;break;case ys.DataFieldType.DATE:i=e.DATE}return i},e.toDataFieldType=function(t){var i=ys.DataFieldType.STRING;switch(t){case e.MEASURE:i=ys.DataFieldType.NUMBER;break;case e.DATE:i=ys.DataFieldType.DATE}return i},e.DEFAULT=r.F8C,e.DATE=r.O8C,e.MEASURE=r.M8C,e}(),ys.HierarchyType=_s,vs=De||(De={}),bs=vs.data_||(vs.data_={}),ws=bs.types||(bs.types={}),Fs=function(){var e=r;function o(){}return o.fromColumnType=function(t){switch(t){case e.h8C:return o.TIME;case e.A8C:return o.DATETIME;case e.b8C:return o.BOOLEAN;case e.e8C:return o.NUMBER}return o.COUNT},o.fromDataType=function(r){var s=o.COUNT;switch(r){case e.x2C:s=o.NUMBER;break;case e.K2C:s=o.STRING;break;case t.k5C:s=o.BOOLEAN;break;case i.P7B:s=o.DATE;break;case"timestamp":s=o.TIME;break;case i.v9Y:s=o.COUNT}return s},o.toDataFieldType=function(e){switch(e){case o.STRING:return ws.DataFieldType.STRING;case o.BOOLEAN:return ws.DataFieldType.BOOLEAN;case o.DATE:return ws.DataFieldType.DATE;case o.DATETIME:return ws.DataFieldType.DATETIME;case o.TIME:return ws.DataFieldType.TIME}return ws.DataFieldType.NUMBER},o.NUMBER=e.O8C,o.STRING=e.M8C,o.BOOLEAN=e.b8C,o.DATE=e.j8C,o.TIME=e.g8C,o.DATETIME=e.o8C,o.COUNT=e.n8C,o}(),ws.MeasureType=Fs,Es=De||(De={}),Os=Es.data_||(Es.data_={}),Ss=Os.types||(Os.types={}),Ts=function(){var e=r;function t(){}return t.ALL=e.F8C,t.STRING=e.O8C,t.NUMBER=e.M8C,t.BOOLEAN=e.b8C,t.DATE=e.j8C,t.TIME=e.g8C,t.YEAR=e.o8C,t.HALFYEAR=e.n8C,t.QUARTER=e.t8C,t.MONTH=e.c8C,t.WEEK=e.L8C,t.WEEKDAY=e.a8C,t.DAY=e.e8C,t.HOUR=e.h8C,t.MINUTE=e.R8C,t.SECOND=e.A8C,t.MILLISECOND=e.Q8C,t.TIME_DATE=e.k8C,t}(),Ss.LevelType=Ts,xs=De||(De={}),Ls=xs.data_||(xs.data_={}),As=Ls.types||(Ls.types={}),Is=function(){function e(){}return e.typeName=function(t){return e.allStrings[t]},e.typeNum=function(t){return e.allStrings.indexOf(t)},e.valid=function(t){return-r.O8C<e.allStrings.indexOf(t)},e.typeFromValue=function(i){return r.C4C===i?e.STRING:r.x2C!=typeof i&&isNaN(Number(i))?r.F8C<Date.parse(i)?Be.detectBrowser().isChrome&&!i.match(t.h7C)?e.STRING:e.DATE:e.STRING:e.NUMBER},e.STRING=r.K2C,e.NUMBER=r.x2C,e.BOOLEAN=t.k5C,e.LEVEL=o.V5B,e.MONTH=o.A6B,e.WEEKDAY="weekday",e.DATE=i.P7B,e.DATE_STRING="date string",e.HIERARCHICAL_DATE="year/month/day",e.HIERARCHICAL_DATE_WITH_QUARTERS="year/quarter/month/day",e.TIME="time",e.DATETIME="datetime",e.ID=r.G2C,e.DELETE=t.e1B,e.HIDDEN=o.b5B,e.allStrings=[e.NUMBER,e.STRING,e.BOOLEAN,e.LEVEL,e.MONTH,e.WEEKDAY,e.DATE,e.DATE_STRING,e.HIERARCHICAL_DATE,e.HIERARCHICAL_DATE_WITH_QUARTERS,e.TIME,e.DATETIME,e.ID,e.DELETE,e.HIDDEN],e}(),As.DataFieldType=Is,Rs=De||(De={}),Ds=Rs.data_||(Rs.data_={}),Ns=Ds.consts||(Ds.consts={}),Ms=function(){function e(){}return e.aggregationCaption=function(t){return t==e.SUM?Rs.model._labels.Labels.SUM_CAPTION:t==e.COUNT?Rs.model._labels.Labels.COUNT_CAPTION:t==e.DISTINCT_COUNT||t==e.DISTINCT_COUNT_DEPRECATED?Rs.model._labels.Labels.DISTINCT_COUNT_CAPTION:t==e.AVERAGE?Rs.model._labels.Labels.AVERAGE_CAPTION:t==e.PRODUCT?Rs.model._labels.Labels.PRODUCT_CAPTION:t==e.MIN?Rs.model._labels.Labels.MIN_CAPTION:t==e.MAX?Rs.model._labels.Labels.MAX_CAPTION:t==e.PERCENT?Rs.model._labels.Labels.PERCENT_CAPTION:t==e.PERCENT_COLUMN||t==e.PERCENT_COLUMN_DEPRECATED?Rs.model._labels.Labels.PERCENT_COLUMN_CAPTION:t==e.PERCENT_ROW?Rs.model._labels.Labels.PERCENT_ROW_CAPTION:t==e.INDEX?Rs.model._labels.Labels.INDEX_CAPTION:t==e.DIFFERENCE?Rs.model._labels.Labels.DIFFERENCE_CAPTION:t==e.PERCENT_DIFFERENCE?Rs.model._labels.Labels.PERCENT_DIFFERENCE_CAPTION:t==e.NONE?Rs.model._labels.Labels.NONE_CAPTION:t},e.aggregationCaptions=function(t){void r.F8C===t&&(t=r.x4C);var i=[];t=t||e.ALL_AGGREGATIONS;for(var o=r.F8C;o<t.length;o++)i.push(e.aggregationCaption(t[o]));return i},e.aggregationTotalCaptions=function(t){void r.F8C===t&&(t=r.x4C);var i=[];t=t||e.ALL_AGGREGATIONS;for(var o=r.F8C;o<t.length;o++)t[o]==e.SUM&&i.push(Rs.model._labels.Labels.SUM_TOTAL_CAPTION),t[o]==e.COUNT&&i.push(Rs.model._labels.Labels.COUNT_TOTAL_CAPTION),t[o]!=e.DISTINCT_COUNT&&t[o]!=e.DISTINCT_COUNT_DEPRECATED||i.push(Rs.model._labels.Labels.DISTINCT_COUNT_TOTAL_CAPTION),t[o]==e.AVERAGE&&i.push(Rs.model._labels.Labels.AVERAGE_TOTAL_CAPTION),t[o]==e.PRODUCT&&i.push(Rs.model._labels.Labels.PRODUCT_TOTAL_CAPTION),t[o]==e.MIN&&i.push(Rs.model._labels.Labels.MIN_TOTAL_CAPTION),t[o]==e.MAX&&i.push(Rs.model._labels.Labels.MAX_TOTAL_CAPTION),t[o]==e.PERCENT&&i.push(Rs.model._labels.Labels.PERCENT_TOTAL_CAPTION),t[o]!=e.PERCENT_COLUMN&&t[o]!=e.PERCENT_COLUMN_DEPRECATED||i.push(Rs.model._labels.Labels.PERCENT_COLUMN_TOTAL_CAPTION),t[o]==e.PERCENT_ROW&&i.push(Rs.model._labels.Labels.PERCENT_ROW_TOTAL_CAPTION),t[o]==e.INDEX&&i.push(Rs.model._labels.Labels.INDEX_TOTAL_CAPTION),t[o]==e.DIFFERENCE&&i.push(Rs.model._labels.Labels.DIFFERENCE_TOTAL_CAPTION),t[o]==e.PERCENT_DIFFERENCE&&i.push(Rs.model._labels.Labels.PERCENT_DIFFERENCE_TOTAL_CAPTION),t[o]==e.NONE&&i.push("{0}");return i},e.validType=function(t){return-r.O8C!=e.ALL_AGGREGATIONS.indexOf(t)||t==e.NONE},e.validForDateTimeFormatting=function(t){return-r.O8C!=e.AGGREGATIONS_COMPATIBLE_WITH_DATETIME_FORMATTING.indexOf(t)||t==e.NONE},e.deprecatedType=function(t){return t==e.DISTINCT_COUNT_DEPRECATED||t==e.PERCENT_COLUMN_DEPRECATED},e.fromDeprecatedToValid=function(t){switch(t){case e.DISTINCT_COUNT_DEPRECATED:return e.DISTINCT_COUNT;case e.PERCENT_COLUMN_DEPRECATED:return e.PERCENT_COLUMN;default:return r.C4C}},e.SUM=t.t9Q,e.COUNT=i.v9Y,e.DISTINCT_COUNT="distinctcount",e.DISTINCT_COUNT_DEPRECATED="distinct count",e.AVERAGE="average",e.PERCENT=o.g2B,e.PERCENT_COLUMN="percentofcolumn",e.PERCENT_ROW="percentofrow",e.PERCENT_COLUMN_DEPRECATED="percent of column",e.PRODUCT="product",e.INDEX="index",e.MIN=t.o9Q,e.MAX=t.n9Q,e.NONE=r.n2C,e.DIFFERENCE="difference",e.PERCENT_DIFFERENCE="%difference",e.ALL_AGGREGATIONS=[e.SUM,e.COUNT,e.DISTINCT_COUNT,e.AVERAGE,e.PRODUCT,e.MIN,e.MAX,e.PERCENT,e.PERCENT_COLUMN,e.PERCENT_ROW,e.INDEX,e.DIFFERENCE,e.PERCENT_DIFFERENCE],e.AGGREGATIONS_COMPATIBLE_WITH_DATETIME_FORMATTING=[e.SUM,e.AVERAGE,e.PRODUCT,e.MIN,e.MAX],e}(),Ns.AggregationName=Ms,Ps=De||(De={}),Hs=Ps.data_||(Ps.data_={}),Us=Hs.consts||(Hs.consts={}),Bs=function(){var e=i,o=t;function s(){}return s.ADD=o.D7C,s.SUBTRACT=r.L2C,s.MULTIPLY=o.j9Q,s.DIVIDE=o.l5C,s.POWER=o.g9Q,s.LESS=e.O9Y,s.GREATER=e.M9Y,s.EQUAL=o.h6C,s.EQUAL_2=e.b9Y,s.NOT_EQUAL=e.j9Y,s.LESS_OR_EQUAL="<=",s.GREATER_OR_EQUAL=">=",s.OR="or",s.AND=o.B8B,s.IF=o.R1B,s.ABS="abs",s.MIN=o.o9Q,s.MAX=o.n9Q,s.BLANK="isnan",s.NOT_BLANK="!isnan",s.VALUE=e.a9Y,s.UPDATE_DIFFERENCE="updatedifference",s.UPDATE_PERCENT="updatepercent",s}(),Us.FunctionName=Bs,ks=De||(De={}),Vs=ks.data_||(ks.data_={}),zs=Vs.consts||(Vs.consts={}),qs=function(){function e(){}return e.SELECT="select",e.EXPAND="expand",e.COLLAPSE="collapse",e.DRILL_UP="drillUp",e.DRILL_DOWN="drillDown",e.DRILL_DOWN_TO="drillDownTo",e.DRILL_THROUGH=o.P0B,e.FILTER=o.f6B,e.SEARCH=o.n3B,e}(),zs.QueryType=qs,Gs=De||(De={}),Ws=Gs.data_||(Gs.data_={}),js=Ws.consts||(Ws.consts={}),Ys=function(){function e(){}return e.DIVIDE_BY_ZERO=.001122334400556678,e}(),js.DataConsts=Ys,Xs=De||(De={}),Ks=Xs.data_||(Xs.data_={}),Qs=Ks.vo||(Ks.vo={}),Js=function(){var e=r;function s(){this._dataSourceType=Ks.consts.DataSourceType.EMPTY,this.isUpdateData=!e.O8C}return Object.defineProperty(s.prototype,"dataSourceType",{get:function(){return this._dataSourceType},set:function(e){this._dataSourceType=e.toLowerCase()},enumerable:!e.F8C,configurable:!e.F8C}),s.prototype.isEqual=function(e){return e&&this.dataSourceType==e.dataSourceType},Object.defineProperty(s.prototype,o.Y6B,{get:function(){return this._dataSourceType==Ks.consts.DataSourceType.EMPTY},set:function(e){},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(s.prototype,"isDemo",{get:function(){return this._dataSourceType==Ks.consts.DataSourceType.CSV&&"this"==this.filename},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(s.prototype,i.y9Y,{get:function(){return!e.O8C},set:function(e){},enumerable:!e.F8C,configurable:!e.F8C}),s.fromObject=function(i){if(void e.F8C==i)return new s;if(Be.nullOrUndefined(i.connectionInfo)||(i=i.connectionInfo),i instanceof s||i instanceof Qs.CSVConnectionInfo||i instanceof Qs.JSONConnectionInfo||(i=s.toPlainObject(i)),Be.nullOrUndefined(i.dataSourceType)||(i.dataSourceType=i.dataSourceType.toLowerCase()),!Be.nullOrUndefined(i.filename)&&Be.nullOrUndefined(i.dataSourceType)){var r=i.filename.split(t.I5C)[e.F8C].toLowerCase();o.Y7B==r.substr(-e.j8C)?i.dataSourceType=Ks.consts.DataSourceType.CSV:t.T8B==r.substr(-e.g8C)||t.m8B==r.substr(-e.b8C)?i.dataSourceType=Ks.consts.DataSourceType.JSON:i.dataSourceType=Ks.consts.DataSourceType.CSV}switch(!Be.nullOrUndefined(i.data)&&i.data instanceof Array&&(i.dataSourceType=Ks.consts.DataSourceType.JSON,i.data=i.data.slice()),i.dataSourceType){case Ks.consts.DataSourceType.CSV:return Qs.CSVConnectionInfo.fromObject(i);case Ks.consts.DataSourceType.JSON:return Qs.JSONConnectionInfo.fromObject(i);default:return new s}},s.toPlainObject=function(t){var i={};return e.x4C!=t.dataSourceType&&(i.dataSourceType=t.dataSourceType),e.x4C!=t.filename&&(i.filename=t.filename),e.x4C!=t.requestHeader&&(i.requestHeader=t.requestHeader),e.x4C!=t.browseForFile&&(i.browseForFile=t.browseForFile),e.x4C!=t.fieldSeparator&&(i.fieldSeparator=t.fieldSeparator),e.x4C!=t.recordsetDelimiter&&(i.recordsetDelimiter=t.recordsetDelimiter),e.x4C!=t.ignoreQuotedLineBreaks&&(i.ignoreQuotedLineBreaks=t.ignoreQuotedLineBreaks),e.x4C!=t.embedded&&(i.embedded=t.embedded),e.x4C!=t.embeddedDataOffset&&(i.embeddedDataOffset=t.embeddedDataOffset),e.x4C!=t.embeddedDataToLoad&&(i.embeddedDataToLoad=t.embeddedDataToLoad),e.x4C!=t.data&&(i.data=t.data),e.x4C!=t.checkUpdates&&(i.checkUpdates=t.checkUpdates),e.x4C!=t.url&&(i.url=t.url),e.x4C!=t.hash&&(i.hash=t.hash),e.x4C!=t.username&&(i.username=t.username),e.x4C!=t.password&&(i.password=t.password),e.x4C!=t.dataSource&&(t=t.dataSource,e.x4C!=t.dataSourceType&&(i.dataSourceType=t.dataSourceType),e.x4C!=t.filename&&(i.filename=t.filename),e.x4C!=t.browseForFile&&(i.browseForFile=t.browseForFile),e.x4C!=t.fieldSeparator&&(i.fieldSeparator=t.fieldSeparator),e.x4C!=t.recordsetDelimiter&&(i.recordsetDelimiter=t.recordsetDelimiter),e.x4C!=t.ignoreQuotedLineBreaks&&(i.ignoreQuotedLineBreaks=t.ignoreQuotedLineBreaks),e.x4C!=t.embedded&&(i.embedded=t.embedded),e.x4C!=t.embeddedDataOffset&&(i.embeddedDataOffset=t.embeddedDataOffset),e.x4C!=t.embeddedDataToLoad&&(i.embeddedDataToLoad=t.embeddedDataToLoad),e.x4C!=t.isOCSV2Data&&(i.isOCSV2Data=t.isOCSV2Data),e.x4C!=t.data&&(i.data=t.data),e.x4C!=t.url&&(i.url=t.url),t=t.credentials,e.x4C!=t&&(e.x4C!=t.hash&&(i.hash=t.hash),e.x4C!=t.username&&(i.username=t.username),e.x4C!=t.password&&(i.password=t.password))),i},s.prototype.toObject=function(e){return e={},this.dataSourceType!=Ks.consts.DataSourceType.EMPTY&&(e.dataSourceType=this.dataSourceType),e},s}(),Qs.ConnectionInfo=Js,Zs=De||(De={}),$s=Zs.data_||(Zs.data_={}),en=$s.vo||($s.vo={}),tn=function(e){function t(){var t=r.x4C!==e&&e.apply(this,arguments)||this;return t.browseForFile=!r.O8C,t.requestHeader=r.x4C,t}return Ga(t,e),t.prototype.isEqual=function(t){return e.prototype.isEqual.call(this,t)&&this.filename==t.filename&&!r.O8C==this.browseForFile&&!r.O8C==t.browseForFile},t}(en.ConnectionInfo),en.FileConnectionInfo=tn,rn=De||(De={}),on=rn.data_||(rn.data_={}),sn=on.vo||(on.vo={}),nn=function(e){var t=r;function s(){var i=e.call(this)||this;return i.checkUpdates=!t.O8C,i.dataSourceType=on.consts.DataSourceType.JSON,i}return Ga(s,e),Object.defineProperty(s.prototype,o.Y6B,{get:function(){return Be.nullOrEmpty(this.filename)&&(t.x4C==this.browseForFile||!t.O8C==this.browseForFile)&&Be.nullOrUndefined(this.data)},set:function(e){},enumerable:!t.F8C,configurable:!t.F8C}),Object.defineProperty(s.prototype,i.y9Y,{get:function(){return!Be.nullOrUndefined(this.data)},set:function(e){},enumerable:!t.F8C,configurable:!t.F8C}),s.prototype.isEqual=function(i){return i==this?!t.F8C:e.prototype.isEqual.call(this,i)&&Be.nullOrUndefined(i.data)},s.fromObject=function(e){var i=new s;return void t.F8C!==e.browseForFile&&(i.browseForFile=e.browseForFile),void t.F8C!==e.filename&&t.C4C!=e.filename&&(i.filename=e.filename),void t.F8C!==e.data&&(i.data=e.data),void t.F8C!==e.checkUpdates&&(i.checkUpdates=e.checkUpdates),void t.F8C!==e.requestHeader&&(i.requestHeader=e.requestHeader),i},s.prototype.toObject=function(e){void t.F8C===e&&(e=!t.O8C);var i={};return i.dataSourceType=this.dataSourceType,(e||this.browseForFile)&&(i.browseForFile=this.browseForFile),this.filename&&(i.filename=this.filename),Be.nullOrUndefined(this.data)||(i.data=this.data),i},s}(sn.FileConnectionInfo),sn.JSONConnectionInfo=nn,an=De||(De={}),ln=an.data_||(an.data_={}),hn=ln.vo||(ln.vo={}),cn=function(e){var s=r;function n(){var i=e.call(this)||this;return i.recordsetDelimiter=t.m6C,i.ignoreQuotedLineBreaks=!s.F8C,i.embedded=!s.O8C,i.embeddedDataOffset=s.F8C,i.dataSourceType=ln.consts.DataSourceType.CSV,i}return Ga(n,e),Object.defineProperty(n.prototype,o.Y6B,{get:function(){return Be.nullOrEmpty(this.filename)&&(s.x4C==this.browseForFile||!s.O8C==this.browseForFile)&&(s.x4C==this.embedded||!s.O8C==this.embedded)},set:function(e){},enumerable:!s.F8C,configurable:!s.F8C}),Object.defineProperty(n.prototype,i.y9Y,{get:function(){return!Be.nullOrUndefined(this.data)},set:function(e){},enumerable:!s.F8C,configurable:!s.F8C}),n.prototype.isEqual=function(t){return e.prototype.isEqual.call(this,t)&&!s.O8C==this.embedded&&!s.O8C==t.embedded},n.fromObject=function(e){var t=new n;return void s.F8C!==e.browseForFile&&(t.browseForFile=e.browseForFile),void s.F8C!==e.filename&&s.C4C!=e.filename&&(t.filename=e.filename),void s.F8C!==e.fieldSeparator&&(t.fieldSeparator=e.fieldSeparator),void s.F8C!==e.recordsetDelimiter&&(t.recordsetDelimiter=e.recordsetDelimiter),void s.F8C!==e.ignoreQuotedLineBreaks&&(t.ignoreQuotedLineBreaks=e.ignoreQuotedLineBreaks),void s.F8C!==e.embedded&&(t.embedded=e.embedded),void s.F8C!==e.embeddedDataOffset&&(t.embeddedDataOffset=e.embeddedDataOffset),void s.F8C!==e.embeddedDataToLoad&&(t.embeddedDataToLoad=e.embeddedDataToLoad),void s.F8C!==e.requestHeader&&(t.requestHeader=e.requestHeader),t},n.prototype.toObject=function(e){void s.F8C===e&&(e=!s.O8C);var i={};return i.dataSourceType=this.dataSourceType,(e||this.browseForFile&&!this.embedded)&&(i.browseForFile=this.browseForFile),this.filename&&(i.filename=this.filename),this.fieldSeparator&&(i.fieldSeparator=this.fieldSeparator),this.recordsetDelimiter&&t.m6C!=this.recordsetDelimiter&&(i.recordsetDelimiter=this.recordsetDelimiter),(e||!s.O8C==this.ignoreQuotedLineBreaks)&&(i.ignoreQuotedLineBreaks=this.ignoreQuotedLineBreaks),this.embedded&&(i.embedded=this.embedded),i},n}(hn.FileConnectionInfo),hn.CSVConnectionInfo=cn,dn=De||(De={}),un=dn._view||(dn._view={}),pn=function(e){var n=r;function a(t,i){var r="MSFullscreenChange",s="webkitfullscreenchange",l="mozfullscreenchange",h="fullscreenchange",c=e.call(this)||this;c.isUIReady=!n.O8C,c.model_=dn.model.PivotModel.getInstance(),c.width=n.F8C,c.height=n.F8C,c.lastWidth=n.F8C,c.lastHeight=n.F8C,c.delayedDraws=[],c.notReadyCount=n.F8C,c.drawn=!n.O8C,c.drillthroughClosedHandler=function(){return c.onDrillThroughClosed()},c.isFocused=!n.F8C,c.setId("wdr-pivot-view"),n.x4C!=c.parentContainer&&c.parentContainer.dispose(),t.empty(),c.parentContainer=t,a.stage=c;var d=i.width?n.x2C===typeof i.width?i.width+n.y4C:-n.O8C<i.width.indexOf(n.y4C)||i.width.indexOf(o.o2B)==i.width.length-n.O8C?i.width:i.width+n.y4C:"100%",u=i.height?n.x2C===typeof i.height?i.height+n.y4C:-n.O8C<i.height.indexOf(n.y4C)||i.height.indexOf(o.o2B)==i.height.length-n.O8C?i.height:i.height+n.y4C:"500px",p=/\d+(?=px|%)/;return d=d.match(p)?d:"100%",u=u.match(p)?u:"500px",c.parentContainer.css(n.s2C,d),c.parentContainer.css(n.O2C,u),c.container.css(n.s2C,d),c.container.css(n.O2C,u),c.parentContainer.append(c.container),c.container.requestAnimationFrame(function(){c.toolbar=i.toolbar?new WebDataRocksToolbar(c.parentContainer.element,dn.Pivot.instance.api,"html5",d,dn.model._labels.LabelsManager.getInstance().getCurrentLocalization().toolbar):n.x4C,dn.model.JavaScriptHandlers.getInstance().dispatch(new dn.model.APIEvent(dn.model.JavaScriptHandlers.BEFORE_TOOLBAR_CREATED,c.toolbar)),c.toolbar&&n.x4C!=c.toolbar.create&&c.toolbar.create(),c.setControls(),c.draw()}),c.model_.state_.addEventListener(dn.model._state.StateEvent.LOADING_REPORT_FILE,function(){return c.onLoadingReportFile()}),c.model_.state_.addEventListener(dn.model._state.StateEvent.EMPTY_SLICE,function(){return c.onEmptySlice()}),c.model_.state_.addEventListener(dn.model._state.StateEvent.LOADING_DATA,function(){return c.onLoadingData()}),c.model_.state_.addEventListener(dn.model._state.StateEvent.RUNNING_QUERY,function(){return c.onBeforeDataQuery()}),c.model_.state_.addEventListener(dn.model._state.StateEvent.QUERY_COMPLETE,function(){return c.onDataQueryComplete()}),c.model_.state_.addEventListener(dn.model._state.StateEvent.REPORT_COMPLETE,function(){return c.onReportComplete()}),c.model_.state_.addEventListener(dn.model._state.StateEvent.LOCALIZATION_LOADED,function(){return c.onLocalizationLoaded()}),c.model_.addEventListener(dn.PivotEvent.EXPORT,function(e){return c.onExport(e)}),c.model_.addEventListener(dn.PivotEvent.PRINT,function(){return c.onPrint()}),c.model_.addEventListener(un.ViewEvent.CALCULATED_VIEW_OPEN,function(e){return c.onOpenCalculatedView(e)}),c.model_.addEventListener(un.ViewEvent.CONTEXT_MENU_OPEN,function(e){return c.onOpenContextMenu(e)}),c.addEventListener(un.ViewEvent.AFTER_GRID_DRAW,function(){return c.onAfterGridDraw()}),Be.fmdocument.addEventListener(h,function(e){return c.onDocumentFullScreen(e)},!n.O8C),Be.fmdocument.addEventListener(l,function(e){return c.onDocumentFullScreen(e)},!n.O8C),Be.fmdocument.addEventListener(s,function(e){return c.onDocumentFullScreen(e)},!n.O8C),Be.fmdocument.addEventListener(r,function(e){return c.onDocumentFullScreen(e)},!n.O8C),c.parentContainer.addEventListener(h,function(e){return c.onFullScreen(e)},!n.O8C),c.parentContainer.addEventListener(l,function(e){return c.onFullScreen(e)},!n.O8C),c.parentContainer.addEventListener(s,function(e){return c.onFullScreen(e)},!n.O8C),c.parentContainer.addEventListener(r,function(e){return c.onFullScreen(e)},!n.O8C),c}return Ga(a,e),Object.defineProperty(a.prototype,"toolbarHeight",{get:function(){if(this.toolbar){var e=h.UIElement.convert(document.getElementById("wdr-toolbar-wrapper"));return n.x4C==e?n.F8C:e.height}return n.F8C},enumerable:!n.F8C,configurable:!n.F8C}),Object.defineProperty(a,"stageWidth",{get:function(){var e=a.stage.container.borderWidth;return a.stage.parentContainer.getWidth(Be.isFullscreen())-e.left-e.right},enumerable:!n.F8C,configurable:!n.F8C}),Object.defineProperty(a,"stageHeight",{get:function(){var e=a.stage.container.borderWidth;return a.stage.parentContainer.getHeight(Be.isFullscreen())-e.top-e.bottom},enumerable:!n.F8C,configurable:!n.F8C}),Object.defineProperty(a,"gridWidth",{get:function(){return a.stageWidth},enumerable:!n.F8C,configurable:!n.F8C}),Object.defineProperty(a,"gridHeight",{get:function(){return a.stage.pivotHeight()},enumerable:!n.F8C,configurable:!n.F8C}),a.prototype.pivotHeight=function(){return a.stageHeight-a.stage.toolbarHeight},a.prototype.draw=function(e){var t="Flexmonster:\nPivot cannot be drawn.",i=this;if(void n.F8C===e&&(e=!n.O8C),this.clearDelays(),this.drawn||this.isUIReady){var r=this.container.requestAnimationFrame(function(t){i.clearDelays(),i._draw(e)});this.delayedDraws.push(r)}else n.m0C>this.notReadyCount++?this.notReadyTimeout=Be.fmSetTimeout(function(){i.draw(e)},n.L8C):this.parentContainer.visible&&(console.error(t),console.error("document.visibilityState:",document.visibilityState),o.b5B!=document.visibilityState&&alert(t))},a.prototype.clearDelays=function(){for(;n.F8C<this.delayedDraws.length;)this.container.cancelAnimationFrame(this.delayedDraws.pop());this.delayedDraws=[],Be.fmClearTimeout(this.notReadyTimeout),Be.fmClearTimeout(this.renderCompleteTimeout)},a.prototype.updateContainerSize=function(){if(!this.parentContainer)return!n.O8C;var e=Be.isFullscreen(),t=this.parentContainer.getWidth();e&&(t=window.screen.width);var i=this.parentContainer.getHeight();return e&&(i=window.screen.height),i-=this.toolbarHeight,this.lastWidth===t&&this.lastHeight===i||(this.container.css(n.s2C,t+n.y4C),this.container.css(n.O2C,i+n.y4C)),this.lastWidth!==t||this.lastHeight!==i},a.prototype.onWindowResize=function(e){this.toolbar&&n.x4C!=this.toolbar.applyToolbarLayoutClasses&&this.toolbar.applyToolbarLayoutClasses(),this.draw(!n.F8C)},a.prototype.onLoadingReportFile=function(){this.model_.state_.reportType==dn.model._state.ReportType.INIT&&this.drawEmptyView()},a.prototype.onEmptySlice=function(){this.draw()},a.prototype.onLoadingData=function(){this.model_.state_.reportType!=dn.model._state.ReportType.UPDATE_DATA&&this.model_.state_.reportType!=dn.model._state.ReportType.CONNECT_TO&&this.drawEmptyView()},a.prototype.onBeforeDataQuery=function(){},a.prototype.onDataQueryComplete=function(){this.model_.state_.reportType!=dn.model._state.ReportType.INIT&&this.model_.state_.reportType!=dn.model._state.ReportType.LOAD&&this.draw()},a.prototype.onLocalizationLoaded=function(){n.x4C!=this.toolbar&&this.toolbar.updateLabels(dn.model._labels.LabelsManager.getInstance().getCurrentLocalization().toolbar)},a.prototype.onReportComplete=function(){this.model_.state_.reportType==dn.model._state.ReportType.CLEAR?this.drawEmptyView():this.parentContainer&&this.draw()},a.prototype.onDocumentFullScreen=function(e){this.handleFullScreen()},a.prototype.onFullScreen=function(e){e.stopPropagation(),this.handleFullScreen()},a.prototype.handleFullScreen=function(){var e=this,t=Be.isFullscreen();n.x4C!=dn.model.JavaScriptHandlers.jsFullScreenHandler&&dn.model.JavaScriptHandlers.jsFullScreenHandler.call(n.x4C,t),t=this.container.requestAnimationFrame(function(){e.updateContainerSize()&&e.draw(!n.F8C)}),this.delayedDraws.push(t)},a.prototype.setControls=function(){var e=this;this.toolbar&&(this.container.height-=this.toolbarHeight),this.gridView=new un.grid.GridView,this.gridView.addEventListener(un.ViewEvent.FILTER_OPEN,function(t){return e.onFilterOpenGrid(t)}),this.gridView.addEventListener(un.ViewEvent.DRILL_THROUGH_OPEN,function(t){return e.onDrillThroughOpen(t)}),this.addChild(this.gridView),this.fieldsView=new un.config.FieldsView,this.fieldsView.addEventListener(s._Event.OPENED,function(t){return e.onWindowOpenClose(t)}),this.fieldsView.addEventListener(s._Event.CLOSED,function(t){return e.onWindowOpenClose(t)}),this.fieldsView.addEventListener(un.config.FieldsView.EVENT_OPEN,function(t){return e.onFieldsViewOpen(t)}),this.fieldsView.addEventListener(un.config.FieldsView.EVENT_APPLY_SLICE,function(t){return e.onFieldsViewApplySlice(t)}),this.addChild(this.fieldsView);var r=new h.UILabel;r.html('<a href="https://webdatarocks.com/?r=wdr" target="_blank"></a>'),r.addClass("wdr-credits"),this.addChild(r),Be.fmdocument.addEventListener(t.F1Q,function(t){return e.onKeyDown(t)}),this.container.attr(i.q1Y,n.F8C),this.container.addEventListener(n.X3C,function(t){e.isFocused=!n.F8C}),this.container.addEventListener(n.B3C,function(t){e.isFocused=!n.O8C}),this._resizeListener=new Be.ResizeListener(this.parentContainer.parent),this._resizeListener.addEventListener(s._Event.RESIZE,function(t){return e.onWindowResize(t)}),this.isUIReady=!n.F8C},a.prototype._draw=function(e){void n.F8C===e&&(e=!n.O8C),n.x4C!=this.model_&&(this.drawn=!n.F8C,this.updateContainerSize(),n.x4C!=this.filterView&&this.filterView.draw(),Be.nullOrUndefined(this.model_.state_.connectionInfo_)||this.model_.state_.connectionInfo_.isEmpty||!dn.model._options.OptionsManager.configuratorButton?this.fieldsView.hide():this.fieldsView.show(),e||dn.model._options.OptionsManager.configuratorActive||un.calculated.CalculatedView.addingMeasureFlag||(dn.model._options.OptionsManager.configuratorOpened=!n.O8C),n.x4C!=this.model_.cube_.slice_&&this.model_.cube_.slice_.isEmpty&&(dn.model._options.OptionsManager.configuratorOpened=!n.F8C),dn.model._options.OptionsManager.configuratorOpened&&n.x4C!=this.model_.state_.connectionInfo_&&!this.model_.state_.connectionInfo_.isEmpty?this.fieldsView.open(this.model_.cube_.structure_,this.model_.cube_.slice_,this.model_.state_.connectionInfo_.dataSourceType):this.fieldsView.close(),this.drawGrid(e),n.x4C!=this.drillThroughView&&this.drillThroughView.isVisible()&&(dn.model._options.OptionsManager.flatView?this.drillThroughView.close():this.drillThroughView.redraw()),this.lastWidth=this.getWidth(),this.lastHeight=this.getHeight())},a.prototype.drawEmptyView=function(){this.drawGrid(!n.O8C,!n.F8C),Be.nullOrUndefined(this.fieldsView)||this.fieldsView.close()},a.prototype.drawGrid=function(e,t){void n.F8C===e&&(e=!n.O8C),void n.F8C===t&&(t=!n.O8C),n.x4C!=this.gridView&&(e||n.x4C==this.filterView||this.filterView.close(),this.gridView.dataProvider=t?n.x4C:this.model_.dataProvider_=dn.data_.dataprovider_.DataProviderFactory.getDataProvider(),this.gridView.container.css(n.b2C,n.C4C).css(n.M2C,n.C4C).css(n.j2C,n.C4C).css(n.g2C,n.C4C),this.gridView.container.css(n.F3C,n.O3C),this.gridView.show(),this.gridView.container.css(n.O2C,a.gridHeight+n.y4C),this.gridView.container.css(n.s2C,a.stageWidth+n.y4C),e||this.model_.cube_.connectionInfo_&&this.model_.cube_.connectionInfo_.isUpdateData||this.gridView.clearSizes(),this.gridView.draw(),dn.model._options.OptionsManager.flatView&&this.fieldsView.isOpen&&this.fieldsView.open(this.model_.cube_.structure_,this.model_.cube_.slice_,this.model_.state_.connectionInfo_.dataSourceType))},a.prototype.onDrillThroughOpen=function(e){n.x4C==this.drillThroughView&&this.addDrillThroughView(),this.drillThroughView.addEventListener(un.grid.GridEvent.DRILLTHROUGH_CLOSED,this.drillthroughClosedHandler);var t=this.model_.cube_.structure_.findMeasure(e.data.measure);this.drillThroughView.openView(this.model_.dataProvider_,this.model_.cube_.slice_,e.data.columnTuple,e.data.rowTuple,t)},a.prototype.onDrillThroughClosed=function(){this.drillThroughView.removeEventListener(un.grid.GridEvent.DRILLTHROUGH_CLOSED,this.drillthroughClosedHandler),this.model_.cube_.refresh()},a.prototype.openFieldsList=function(){n.x4C!=this.model_.state_.connectionInfo_&&this.fieldsView.open(this.model_.cube_.structure_,this.model_.cube_.slice_,this.model_.state_.connectionInfo_.dataSourceType)},a.prototype.onFieldsViewApplySlice=function(e){dn.Pivot.instance.runQuery(e.data)},a.prototype.onFilterOpenGrid=function(e){n.x4C==this.filterView&&this.addFilterView(),this.onFilterOpen(e)},a.prototype.onFilterOpen=function(e){var t={hierarchy:dn.data_._structure.GenericHierarchy.toObject(e.hierarchy)};dn.model.JavaScriptHandlers.getInstance().dispatch(new dn.model.APIEvent(dn.model.JavaScriptHandlers.FILTER_OPEN,t)),this.openFilter(e.hierarchy)},a.prototype.openFilter=function(e){n.x4C==this.filterView&&this.addFilterView(),this.filterView.openView(e)},a.prototype.closeFieldsList=function(){this.fieldsView.close()},a.prototype.onFieldsViewOpen=function(e){this.openFieldsList()},a.prototype.onWindowOpenClose=function(e){},a.prototype.onKeyDown=function(e){this.isFocused&&(73===e.keyCode&&e.ctrlKey&&e.altKey&&this.showLicenseInfo(),n.S8C===e.keyCode&&(n.x4C!=this.filterView&&this.filterView.close(),n.x4C!=this.drillThroughView&&this.drillThroughView.close(),n.x4C!=this.calculatedView&&this.calculatedView.isVisible()?this.calculatedView.close():this.fieldsView.close()))},a.prototype.onExport=function(e){this.drillThroughView&&this.drillThroughView.isVisible()?this.drillThroughView.exportTo(e.exportType,e.exportOptions,e.callbackHandler):this.gridView.exportTo(e.exportType,e.exportOptions,e.callbackHandler)},a.prototype.onPrint=function(){this.gridView.print()},a.prototype.showLicenseInfo=function(){var e=new Date(parseFloat(dn.Pivot.BUILD_DATE)/61);e=(e=dn.Pivot.BUILD_VERSION+" (build "+Be.StringUtils.toDateTime(e.getTime())+") <br/><br/>")+dn.model.license.LicenseLabels.getLabel(dn.model.license.LicenseLabels.info),dn.uialert(e,dn.model.license.LicenseLabels.getLabel(dn.model.license.LicenseLabels.componentInfo),dn.AlertType.INFO)},a.prototype.getCell=function(e,t){return this.gridView.getCell(e,t)},a.prototype.getSelectedCell=function(){return this.gridView.getSelectedCell()},a.prototype.setSelectedCell=function(e,t){this.gridView.setSelectedCell(e,t)},a.prototype.removeSelection=function(){this.gridView.removeSelection()},a.prototype.onOpenCalculatedView=function(e){n.x4C==this.calculatedView&&this.addCalculatedView(),this.calculatedView.openView(e.data?e.data.measureName:n.C4C)},a.prototype.onOpenContextMenu=function(e){n.x4C==this.contextMenu&&this.addContextMenu(),this.contextMenu.showWith(this.container,e.data.menuItems,e.data.coords)},a.prototype.onAfterGridDraw=function(){var e=this;n.F8C==this.delayedDraws.length&&(this.renderCompleteTimeout=Be.fmSetTimeout(function(){e.dispatchWith(un.ViewEvent.RENDER_COMPLETE)},n.O8C))},a.prototype.addCalculatedView=function(){this.calculatedView=new un.calculated.CalculatedView,this.addChild(this.calculatedView)},a.prototype.addDrillThroughView=function(){this.drillThroughView=new un.grid.DrillThroughView,this.addChild(this.drillThroughView)},a.prototype.addFilterView=function(){var e=this;this.filterView=new un.filter.FilterView,this.filterView.addEventListener(s._Event.OPENED,function(t){return e.onWindowOpenClose(t)}),this.filterView.addEventListener(s._Event.CLOSED,function(t){return e.onWindowOpenClose(t)}),this.addChild(this.filterView)},a.prototype.getToolbar=function(){return this.toolbar},a.prototype.addContextMenu=function(){this.contextMenu=new un.ContextMenuView,this.contextMenu.hide(),this.addChild(this.contextMenu)},a.prototype.dispose=function(){this.model_=n.x4C,this.gridView.dispose(),this.container.dispose(),this.parentContainer.dispose(),un.AlertView.dispose(),un.filter.FilterModel.dispose(),un.PreloaderView.dispose(),h.dragndrop.DragManager.dispose(),a.stage=n.x4C,this._resizeListener&&(this._resizeListener.dispose(),this._resizeListener=n.x4C)},a}(h.containers.UIContainer),un.PivotView=pn,Cn=De||(De={}),fn=Cn._view||(Cn._view={}),mn=function(){function e(){var e=r;this._timer=e.F8C,this._show=!e.O8C,this._details=this._message=e.C4C,this._transparent=!e.O8C}return e.prototype.show=function(t,i,o,s,n){var a=r,l=this;void a.F8C===s&&(s=!a.F8C),void a.F8C===n&&(n=!a.O8C),t?(n&&this.showImmediately(t,i,o,s),!a.O8C==this._show?(this._show=t,this._message=i,this._details=o,this._transparent=s,this._timer=Be.fmSetTimeout(function(){return l.timerHandler()},e.DELAY)):a.F8C==this._timer?this.showImmediately(t,i,o,s):(this._show=t,this._message=i,this._details=o,this._transparent=s)):(n&&this.showImmediately(t,i,o,s),!a.F8C==this._show&&(this._show=t,this._timer=Be.fmSetTimeout(function(){return l.timerHandler()},e.DELAY)))},e.prototype.showImmediately=function(e,t,i,r){this.resetTimer(),this.preloaderFunction(e,t,i,r)},e.prototype.timerHandler=function(){this.resetTimer(),this.preloaderFunction(this._show,this._message,this._details,this._transparent)},e.prototype.resetTimer=function(){Be.fmClearTimeout(this._timer),this._timer=r.F8C},e.prototype.preloaderFunction=function(e,t,i,r){fn.PreloaderView.getInstance()&&fn.PreloaderView.getInstance().openView(e,t,i,r)},e.getInstance=function(){return r.x4C==e._instance&&(e._instance=new e),e._instance},e.dispose=function(){e._instance=r.x4C},e.DELAY=250,e}(),fn.Preloader=mn,gn=De||(De={}),yn=gn._view||(gn._view={}),_n=function(e){function i(){var o=this;if(r.x4C!=i._instance)throw Error(t.D5C);return(o=e.call(this,yn.PivotView.stage.container)||this).setId("wdr-preloader-view"),o.setControls(),o}return Ga(i,e),i.prototype.openView=function(e,t,i,o){var s=r;void s.F8C===e&&(e=!s.F8C),void s.F8C===t&&(t=s.C4C),void s.F8C===i&&(i=s.C4C),void s.F8C===o&&(o=!s.F8C),this._message=t,this._details=i,this._transparent=o,e?this.open():this.close()},i.prototype.open=function(){e.prototype.open.call(this),this.draw()},i.prototype.setControls=function(){this.overlay.addClass("wdr-overlay-preloader"),this.overlay.removeEventListener(r.H2C,this._overlayClickHandler),this._imgSpinner=new h.UIComponentBase(r.r4C),this._imgSpinner.setId("wdr-spinner"),this.addChild(this._imgSpinner),this._txtMessage=new h.UILabel,this._txtMessage.setId("wdr-message-label"),this.addChild(this._txtMessage),this._txtDetails=new h.UILabel,this._txtDetails.setId("wdr-details-label"),this.addChild(this._txtDetails),this.hide(),yn.PivotView.stage.addChild(this)},i.prototype.draw=function(){this.overlay.setOpaque(!this._transparent),this.setMessage(this._message),this.setDetails(this._details),this.validate()},i.prototype.setMessage=function(e){this._txtMessage.setLabel(e)},i.prototype.setDetails=function(e){this._txtDetails.setLabel(e)},i.prototype.close=function(){e.prototype.close.call(this),this.clear()},i.prototype.clear=function(){this.setMessage(r.C4C),this.setMessage(r.C4C)},i.getInstance=function(){return r.x4C==yn.PivotView.stage?r.x4C:(r.x4C==i._instance&&(i._instance=new i),i._instance)},i.dispose=function(){i._instance=r.x4C},i}(h.containers.UIPopup),yn.PreloaderView=_n,vn=De||(De={}),bn=vn._view||(vn._view={}),wn=function(e){function i(){var i=e.call(this)||this;return i.setId("wdr-context-menu"),i.list=new h.lists.UIList,i.list.setItemRendererFactory(i.itemRendererFactory),i.list.setLabelField(t.W0B),i.list.addEventListener(s._Event.CHANGE,function(e){return i.onListChange(e)}),i.addChild(i.list),i.container.disableSelection(),i}return Ga(i,e),i.prototype.showWith=function(e,t,i){var o=r,s=this;o.F8C!=t.length&&(this.setData(t),this.show(),e=e.getOffset(),i.top-=e.top+o.g8C,i.left-=e.left+o.g8C,this.container.offset(i),this.container.addEventListener(o.m4C,function(){return s.hide()}),Be.browserVersion().isMobile?bn.PivotView.stage.container.addEventListener(o.i4C,function(e){return s.onStageMouseDown(e)}):bn.PivotView.stage.container.addEventListener(o.f4C,function(e){return s.onStageMouseDown(e)}))},i.prototype.onStageMouseDown=function(e){r.x4C==h.UIElement.convert(e.target).closest("#wdr-context-menu")&&this.hide()},i.prototype.setData=function(e){for(var t=[],i=r.F8C;i<e.length;i++)t.push(e[i]);this.list.setDataProvider(t)},i.prototype.onListChange=function(e){r.x4C!=e.data.selectedItem.handler&&e.data.selectedItem.handler(e.data.selectedItem.data),this.hide()},i.prototype.itemRendererFactory=function(e,t){var i=new h.renderers.SelectItemRenderer;return i.setData(e),i.setIndex(t),i},i}(h.containers.UIBorderContainer),bn.ContextMenuView=wn,Fn=De||(De={}),En=Fn._view||(Fn._view={}),On=En.grid||(En.grid={}),Sn=function(e){var s=r;function n(){var t=e.call(this)||this;return t.START_TABLE_ROW=s.F8C,t.START_HEADERS_ROW=s.F8C,t.START_HEADERS_COLUMN=s.F8C,t.FIRST_DATA_ROW=s.F8C,t.FIRST_DATA_COLUMN=s.F8C,t._model=Fn.model.PivotModel.getInstance(),t.conditions=[],t.setId("wdr-grid-view"),Be.browserVersion().isMobile?new h._utils.LongPressListener(t.container).listen(function(e,i){return t.onLongPress(e,i)}):Be.fmdocument.addEventListener("contextmenu",function(e){return t.onContextMenu(e)}),t}return Ga(n,e),n.prototype.dispose=function(){this._model=this.dataProvider=s.x4C,this.gridLayout&&this.gridLayout.dispose(),this._gridLayout=s.x4C},n.prototype.createCompactLayout=function(){var e=this,t=new On.sheet.CompactGridLayout;return t.id=i.j1Y,t.getDataFunction=function(t,i){return e.getData(t,i)},t.addEventListener(On.GridEvent.MOUSE_CLICK,function(t){return e.onGridClick(t)}),t.addEventListener(On.GridEvent.MOUSE_SINGLE_DOUBLE_CLICK,function(t){return e.onGridSingleDoubleClick(t)}),t.addEventListener(On.GridEvent.FILTER_CLICK,function(t){return e.onFilterClick(t)}),t.addEventListener(On.GridEvent.RESIZE_COLUMN,function(t){return e.onResizeColumn(t)}),t.addEventListener(On.GridEvent.RESIZE_ROW,function(t){return e.onResizeRow(t)}),this.container.append(t),t},n.prototype.createClassicLayout=function(){var e=this,t=new On.sheet.classic.ClassicGridLayout;return t.id=i.j1Y,t.getDataFunction=function(t,i){return e.getData(t,i)},t.addEventListener(On.GridEvent.MOUSE_CLICK,function(t){return e.onGridClick(t)}),t.addEventListener(On.GridEvent.MOUSE_SINGLE_DOUBLE_CLICK,function(t){return e.onGridSingleDoubleClick(t)}),t.addEventListener(On.GridEvent.FILTER_CLICK,function(t){return e.onFilterClick(t)}),t.addEventListener(On.GridEvent.RESIZE_COLUMN,function(t){return e.onResizeColumn(t)}),t.addEventListener(On.GridEvent.RESIZE_ROW,function(t){return e.onResizeRow(t)}),this.container.append(t),t},n.prototype.createFlatLayout=function(){var e=this,t=new On.sheet.flat.FlatGridLayout;return t.id=i.j1Y,t.getDataFunction=function(t,i){return e.getData(t,i)},t.addEventListener(On.GridEvent.MOUSE_CLICK,function(t){return e.onGridClick(t)}),t.addEventListener(On.GridEvent.MOUSE_SINGLE_DOUBLE_CLICK,function(t){return e.onGridSingleDoubleClick(t)}),t.addEventListener(On.GridEvent.FILTER_CLICK,function(t){return e.onFilterClick(t)}),t.addEventListener(On.GridEvent.RESIZE_COLUMN,function(t){return e.onResizeColumn(t)}),t.addEventListener(On.GridEvent.RESIZE_ROW,function(t){return e.onResizeRow(t)}),this.container.append(t),t},n.prototype.getCurrentLayout=function(){return Fn.model._options.OptionsManager.classicView?this.gridLayout&&this.gridLayout.type==On.sheet.classic.ClassicGridLayout.TYPE?this.gridLayout:(s.x4C!=this.gridLayout&&this.gridLayout.removeFromParent(!s.F8C),this.createClassicLayout()):Fn.model._options.OptionsManager.flatView?this.gridLayout&&this.gridLayout.type==On.sheet.flat.FlatGridLayout.TYPE?this.gridLayout:(s.x4C!=this.gridLayout&&this.gridLayout.removeFromParent(!s.F8C),this.createFlatLayout()):this.gridLayout&&this.gridLayout.type==On.sheet.CompactGridLayout.TYPE?this.gridLayout:(s.x4C!=this.gridLayout&&this.gridLayout.removeFromParent(!s.F8C),this.createCompactLayout())},n.prototype.draw=function(){if(this._gridLayout=this.getCurrentLayout(),s.x4C!=this.gridLayout){if(this.gridLayout.smoothTimeout=this._model.state_.updateActive?s.o0C:t.N6C,this.dataProvider&&this.dataProvider.dataLoaded&&!this.dataProvider.isEmpty){this.gridLayout.clearData(),this.START_HEADERS_ROW=this.START_HEADERS_COLUMN=this.START_TABLE_ROW=s.F8C;var e,i,r,o,n=this.dataProvider.columnMaxDepth,a=Fn.model._options.OptionsManager.classicView?s.F8C<this.dataProvider.rowsOnly.length?s.O8C:s.F8C:this.dataProvider.rowCount;a>=n+s.O8C?(i=(e=s.F8C)+a,r=e+(a-n)-s.O8C):(r=s.F8C,e=s.F8C<this.dataProvider.columnCount?r+(n-a)+s.O8C:r,s.F8C==this.dataProvider.columnsOnly.length&&s.F8C==this.dataProvider.rowsOnly.length&&(e+=s.O8C),i=e+a),o=r,this.START_TABLE_ROW=Math.min(e,o),this.START_HEADERS_ROW=o,this.START_HEADERS_COLUMN=s.F8C,this.FIRST_DATA_ROW=i,this.FIRST_DATA_COLUMN=this.isFlatTable?s.F8C:Fn.model._options.OptionsManager.classicView?this.dataProvider.rowAxis.hasMeasures&&this.dataProvider.multiMeasures?this.dataProvider.rowLevels.length+s.O8C:this.dataProvider.rowLevels.length:s.F8C==this.dataProvider.rows.length?s.F8C:s.O8C,Fn.model._options.OptionsManager.showHierarchyCaptions||(this.START_HEADERS_ROW=s.O8C==a&&s.F8C==this.dataProvider.columnCount?s.F8C:-s.O8C,this.FIRST_DATA_ROW=n),this.isFlatTable&&s.k2C==Fn.model._options.OptionsManager.showGrandTotals&&s.b2C==Fn.model._options.OptionsManager.grandTotalsPosition&&this.FIRST_DATA_ROW++,this.gridLayout.setDataSize(this.dataProvider.extendedDataHeight+(this.isFlatTable&&s.k2C==Fn.model._options.OptionsManager.showGrandTotals&&s.g2C==Fn.model._options.OptionsManager.grandTotalsPosition?s.O8C:s.F8C),this.dataProvider.extendedDataWidth),this.gridLayout.freezeColumns(this.FIRST_DATA_COLUMN),this.gridLayout.freezeRows(this.FIRST_DATA_ROW),this.gridLayout instanceof On.sheet.CompactGridLayout&&(this.gridLayout.colsFilter.rowIndex=this.FIRST_DATA_ROW-this.dataProvider.columnMaxDepth-s.O8C,this.gridLayout.colsFilter.setHierarchies(this.dataProvider.columnsOnly),this.gridLayout.rowsFilter.setHierarchies(this.dataProvider.rowsOnly),this.gridLayout.pageFilter.setHierarchies(this.dataProvider.pages)),this.gridLayout instanceof On.sheet.classic.ClassicGridLayout&&(this.gridLayout.colsFilter.rowIndex=this.FIRST_DATA_ROW-this.dataProvider.columnMaxDepth-s.O8C,this.gridLayout.colsFilter.setHierarchies(this.dataProvider.columnsOnly),this.gridLayout.rowsFilter.setHierarchies(this.dataProvider.rowsOnly),this.gridLayout.pageFilter.setHierarchies(this.dataProvider.pages)),(s.O8C<this.dataProvider.columns.length||!this.dataProvider.columnAxis.hasMeasures)&&Fn.model._options.OptionsManager.showHierarchyCaptions&&this.addFilterCell(r,this.FIRST_DATA_COLUMN,Fn.data_.consts.AxisName.COLUMNS_AXIS),(s.O8C<this.dataProvider.rows.length||!this.dataProvider.rowAxis.hasMeasures)&&Fn.model._options.OptionsManager.showHierarchyCaptions&&(Fn.model._options.OptionsManager.classicView?this._addFilterCell(e,s.F8C):this.addFilterCell(e,s.F8C,Fn.data_.consts.AxisName.ROWS_AXIS)),this.resizeColumnsByIdx(),this.resizeHeaderColumns(),this.resizeColumns(),this.resizeRowsByIdx(),this.resizeHeaderRows(),this.resizeRows()}else this.gridLayout.clearAll();this.conditions=Fn.model.condition.ConditionManager.conditions.toArray(),this.gridLayout.resize(En.PivotView.gridWidth,En.PivotView.gridHeight),this.gridLayout.draw()}},n.prototype.clearSizes=function(){s.x4C!=this.gridLayout&&(this.gridLayout.clearColSizes(s.F8C),this.gridLayout.clearRowSizes(s.F8C))},n.prototype.getData=function(e,t,i){if(void s.F8C===i&&(i=!s.O8C),s.x4C==this.dataProvider||!this.dataProvider.dataLoaded||e<this.START_HEADERS_ROW||t<this.START_HEADERS_COLUMN)return s.x4C;var r=e-this.FIRST_DATA_ROW,o=t-this.FIRST_DATA_COLUMN;if((r>this.dataProvider.extendedDataHeight-s.O8C||o>this.dataProvider.extendedDataWidth-s.O8C)&&!(this.isFlatTable&&s.k2C==Fn.model._options.OptionsManager.showGrandTotals&&s.g2C==Fn.model._options.OptionsManager.grandTotalsPosition&&r==this.dataProvider.extendedDataHeight&&o<=this.dataProvider.extendedDataWidth-s.O8C))return s.x4C;var n=this.dataProvider.getRowTuple(r,!s.F8C),a=this.dataProvider.getColumnTuple(o,!s.F8C);if(s.x4C==n&&s.x4C==a)return s.x4C;var l=this.dataProvider.getMeasure(r,o);return this.isFlatTable&&s.k2C==Fn.model._options.OptionsManager.showGrandTotals&&s.b2C==Fn.model._options.OptionsManager.grandTotalsPosition&&(Fn.model._options.OptionsManager.showHierarchyCaptions&&s.O8C==e||!Fn.model._options.OptionsManager.showHierarchyCaptions&&s.F8C==e)||this.isFlatTable&&s.k2C==Fn.model._options.OptionsManager.showGrandTotals&&s.g2C==Fn.model._options.OptionsManager.grandTotalsPosition&&(Fn.model._options.OptionsManager.showHierarchyCaptions&&e==this.dataProvider.extendedDataHeight+s.O8C||!Fn.model._options.OptionsManager.showHierarchyCaptions&&e==this.dataProvider.extendedDataHeight)?this.getFlatGrandTotal(n,a,l):s.x4C==n?(i=s.O8C==(Fn.model._options.OptionsManager.classicView?s.O8C:this.dataProvider.rowsOnly.length)&&s.F8C==this.dataProvider.columnCount?e-this.START_HEADERS_ROW:e-this.START_HEADERS_ROW-s.O8C,s.F8C==this.dataProvider.rowsOnly.length&&s.F8C==this.dataProvider.columnsOnly.length&&(i=e-this.START_HEADERS_ROW),e=this.dataProvider.getColumnDepth(o),this.getColumnCell(a,l,e,i,t)):(o=this.dataProvider.getRowDepth(r),r=this.dataProvider.getRowType(r),s.x4C==a?Fn.model._options.OptionsManager.classicView?this._getRowCell(n,l,o,t,r):this.getRowCell(n,l,o):this.getDataCell(n,a,l,e,t,i,o,r))},n.prototype.getDataCell=function(e,i,r,n,a,l,h,c){var d=t,u=o;if(void s.F8C===l&&(l=!s.O8C),void s.F8C===h&&(h=NaN),void s.F8C===c&&(c=-s.O8C),s.x4C==r)return s.x4C;var p=r.getFormat().clone();r.aggregation!=Fn.data_.consts.AggregationName.PERCENT&&r.aggregation!=Fn.data_.consts.AggregationName.PERCENT_COLUMN&&r.aggregation!=Fn.data_.consts.AggregationName.PERCENT_ROW&&r.aggregation!=Fn.data_.consts.AggregationName.PERCENT_DIFFERENCE||(p.currencySymbol=u.o2B,p.currencySymbolAlign=s.j2C);var C=new On.vo.GridCell;if(C.isValue=!s.F8C,C.columnTuple=i,C.measure=r,C.hierarchy=this._model.cube_.structure_.measureToHierarchy(r.uniqueName),C.rowTuple=e,Fn.model._options.OptionsManager.classicView?s.F8C==e.length?C.level=s.F8C:(h=this.getLevelIdxByTuple(e),-s.O8C<h&&(C.level=h)):Fn.model._options.OptionsManager.flatView||(C.level=h),h=this.dataProvider.getValue(e,i,r),C.value=h,this.isFlatTable){if(p=r.getFormat(!s.F8C).clone(),r.type==Fn.data_.types.MeasureType.COUNT){var f=this.dataProvider.getColumnHierarchy(i).members.getItemAt(h);s.x4C!=f&&(C.member=f,C.label=f.caption)}else r.type==Fn.data_.types.MeasureType.NUMBER?s.K2C===typeof h?C.label=h:(C.label=Be.NumberFormatter.format(h,p),C.numeric=!s.F8C):r.type==Fn.data_.types.MeasureType.DATE?C.label=Be.StringUtils.toDate(h,Fn.model._options.OptionsManager.datePattern):r.type==Fn.data_.types.MeasureType.TIME?isNaN(h)||(C.label=Be.StringUtils.toTime(h)):r.type!=Fn.data_.types.MeasureType.DATETIME||isNaN(h)||(C.label=Be.StringUtils.toDateTime(h,Fn.model._options.OptionsManager.dateTimePattern));C.recordId=this.dataProvider.getRecordId(e,i,r)}else r.type==Fn.data_.types.MeasureType.NUMBER||r.type==Fn.data_.types.MeasureType.COUNT?s.K2C===typeof h?C.label=h:(C.label=Be.NumberFormatter.format(h,p),C.numeric=!s.F8C):r.type==Fn.data_.types.MeasureType.DATE?C.label=Fn.data_.consts.AggregationName.validForDateTimeFormatting(r.aggregation)?Be.StringUtils.toDate(C.value,Fn.model._options.OptionsManager.datePattern):Be.NumberFormatter.format(h,p):r.type==Fn.data_.types.MeasureType.TIME?isNaN(h)||(C.label=Fn.data_.consts.AggregationName.validForDateTimeFormatting(r.aggregation)?Be.StringUtils.toTime(h):Be.NumberFormatter.format(h,p)):r.type==Fn.data_.types.MeasureType.DATETIME?isNaN(C.value)||(C.label=Fn.data_.consts.AggregationName.validForDateTimeFormatting(r.aggregation)?Be.StringUtils.toDateTime(h,Fn.model._options.OptionsManager.dateTimePattern):Be.NumberFormatter.format(h,p)):C.label=h;if(l)return C;if(l=!s.O8C,this.dataProvider.rowCount>e.length||this.dataProvider.columnCount>i.length){if(l=!s.F8C,C.isTotalRow=this.dataProvider.rowCount>e.length,C.isTotalColumn=this.dataProvider.columnCount>i.length,s.k2C!=Fn.model._options.OptionsManager.showTotals){if(f=this.dataProvider.measureDepth,s.F8C!=e.length&&(this.dataProvider.isRowExpanded(e)||this.dataProvider.isRowExpanded(e,r))&&(u.N4B==Fn.model._options.OptionsManager.showTotals||d.b8Q==Fn.model._options.OptionsManager.showTotals)||s.F8C!=i.length&&(this.dataProvider.isColumnExpanded(i)||this.dataProvider.isColumnExpanded(i,r))&&(u.N4B==Fn.model._options.OptionsManager.showTotals||d.M8Q==Fn.model._options.OptionsManager.showTotals))return s.x4C;if(s.F8C==f&&s.O8C<this.dataProvider.measures.length)if(!this.dataProvider.rowAxis.hasMeasures||u.N4B!=Fn.model._options.OptionsManager.showTotals&&d.b8Q!=Fn.model._options.OptionsManager.showTotals){if(this.dataProvider.columnAxis.hasMeasures&&(u.N4B==Fn.model._options.OptionsManager.showTotals||d.M8Q==Fn.model._options.OptionsManager.showTotals)&&a<(s.k2C==Fn.model._options.OptionsManager.showGrandTotals||d.M8Q==Fn.model._options.OptionsManager.showGrandTotals?this.FIRST_DATA_COLUMN+this.dataProvider.extendedDataWidth-this.dataProvider.measures.length:this.FIRST_DATA_COLUMN+this.dataProvider.extendedDataWidth)&&this.dataProvider.isColumnExpanded(i,r))return s.x4C}else if(n<(s.k2C==Fn.model._options.OptionsManager.showGrandTotals||d.b8Q==Fn.model._options.OptionsManager.showGrandTotals?this.FIRST_DATA_ROW+this.dataProvider.extendedDataHeight-this.dataProvider.measures.length:this.FIRST_DATA_ROW+this.dataProvider.extendedDataHeight)&&this.dataProvider.isRowExpanded(e,r))return s.x4C}C.isGrandTotalRow=s.F8C==e.length,C.isGrandTotalColumn=s.F8C==i.length,C.isClassicTotalRow=C.isTotalRow&&s.M8C==c&&!C.isGrandTotalRow}if(s.C4C!=p.textAlign&&C.customize({"text-align":p.textAlign}),s.F8C<this.conditions.length&&C.measure)for(c=s.F8C;c<this.conditions.length;c++)if(!((p=this.conditions[c]).row!=n&&-s.O8C!=p.row||p.column!=a&&-s.O8C!=p.column||p.measure!=r.uniqueName&&s.C4C!=p.measure&&p.measure!=r.uniqueName||p.isTotal!==l&&void s.F8C!==p.isTotal||s.C4C!=p.hierarchy&&!this.checkHierarchyCondition(e,i,p.hierarchy,p.member)))if(f=p.params.slice(s.F8C),p.isUpdate){if(this._model.state_.updateActive){var m=this.dataProvider.getUpdatedValue(e,i,r);m&&(-s.O8C<p.formula.toLowerCase().indexOf(Fn.data_.consts.FunctionName.UPDATE_DIFFERENCE)?h=m.difference:-s.O8C<p.formula.toLowerCase().indexOf(Fn.data_.consts.FunctionName.UPDATE_PERCENT)&&(h=s.o0C*m.percent),f=this.dataProvider.calculate(e,i,f,h),s.x4C!=f&&C.customizeWithClass(f))}}else f=this.dataProvider.calculate(e,i,f,h),!s.F8C!=f&&d.W9Q!=f||s.x4C==p.format?s.x4C!=f&&!s.O8C!=f&&C.customizeWithClass(f):(C.customize(p.format.toCSSObject()),C.conditions.push(p.id)),C.showTooltip=!s.F8C;return C},n.prototype.getFlatGrandTotal=function(e,t,i){if(s.x4C==i)return s.x4C;var r=new On.vo.GridCell;if(r.isValue=!s.F8C,r.columnTuple=t,r.measure=i,r.hierarchy=this._model.cube_.structure_.measureToHierarchy(i.uniqueName),r.rowTuple=e,i.type==Fn.data_.types.MeasureType.NUMBER||i.type==Fn.data_.types.MeasureType.TIME||i.type==Fn.data_.types.MeasureType.DATETIME){var n=i.getFormat().clone();if((i.aggregation==Fn.data_.consts.AggregationName.PERCENT||i.aggregation==Fn.data_.consts.AggregationName.PERCENT_COLUMN||i.aggregation==Fn.data_.consts.AggregationName.PERCENT_ROW||i.aggregation==Fn.data_.consts.AggregationName.PERCENT_DIFFERENCE||i.calculated&&-s.O8C<i.formula.indexOf(o.g2B))&&(n.currencySymbol=o.o2B,n.currencySymbolAlign=s.j2C),r.value=this.dataProvider.getValue(s.x4C,s.x4C,i),i.type==Fn.data_.types.MeasureType.NUMBER?(r.label=Be.NumberFormatter.format(r.value,n),r.numeric=!s.F8C):i.type==Fn.data_.types.MeasureType.TIME?isNaN(r.value)||(r.label=Fn.data_.consts.AggregationName.validForDateTimeFormatting(i.aggregation)?Be.StringUtils.toTime(r.value):Be.NumberFormatter.format(r.value,n)):i.type!=Fn.data_.types.MeasureType.DATETIME||isNaN(r.value)||(r.label=Fn.data_.consts.AggregationName.validForDateTimeFormatting(i.aggregation)?Be.StringUtils.toDateTime(r.value,Fn.model._options.OptionsManager.dateTimePattern):Be.NumberFormatter.format(r.value,n)),r.isGrandTotalRow=!s.F8C,s.C4C!=n.textAlign&&r.customize({"text-align":n.textAlign}),s.F8C<this.conditions.length)for(n=s.F8C;n<this.conditions.length;n++){var a=this.conditions[n],l=a.params.slice(s.F8C);if(a.measure==i.uniqueName&&a.isUpdate&&this._model.state_.updateActive){var h,c=this.dataProvider.getUpdatedValue(e,t,i);c&&(-s.O8C<a.formula.toLowerCase().indexOf(Fn.data_.consts.FunctionName.UPDATE_DIFFERENCE)?h=c.difference:-s.O8C<a.formula.toLowerCase().indexOf(Fn.data_.consts.FunctionName.UPDATE_PERCENT)&&(h=s.o0C*c.percent),a=this.dataProvider.calculate(e,t,l,h),s.x4C!=a&&r.customizeWithClass(a))}}}return r},n.prototype.checkHierarchyCondition=function(e,t,i,r){var o=this.dataProvider.columns.indexOf(i);if(-s.O8C<o){if(o<t.length)return e=this.dataProvider.columns.getItem(i),t[o]&&e.members.getItemAt(t[o]).uniqueName==r}else if(t=this.dataProvider.rows.indexOf(i),-s.O8C<t&&t<e.length)return i=this.dataProvider.rows.getItem(i),e[t]&&i.members.getItemAt(e[t]).uniqueName==r;return!s.O8C},n.prototype.getColumnCell=function(e,t,i,r,o){return this.isFlatTable?this._getFlatTableColumnCell(e,t,i,r):this._getColumnCell(e,t,i,r,o)},n.prototype._getColumnCell=function(e,i,r,o,n){if(s.F8C==e.length)return this.dataProvider.rowAxis.hasMeasures&&o==this.dataProvider.columnMaxDepth-s.O8C?this.getGrandTotalCell(i,Fn.data_.consts.AxisName.COLUMNS_AXIS):(e=this.dataProvider.extendedDataWidth-this.dataProvider.measures.length+s.O8C,this.dataProvider.columnAxis.hasMeasures&&o==this.dataProvider.columnMaxDepth-s.O8C&&n>=e&&s.O8C==this.dataProvider.measures.length?this.getGrandTotalCell(i,Fn.data_.consts.AxisName.COLUMNS_AXIS):(e=s.k2C==Fn.model._options.OptionsManager.showGrandTotals||t.M8Q==Fn.model._options.OptionsManager.showGrandTotals?this.FIRST_DATA_COLUMN+this.dataProvider.extendedDataWidth-this.dataProvider.measures.length:this.FIRST_DATA_COLUMN+this.dataProvider.extendedDataWidth,this.dataProvider.columnAxis.hasMeasures&&s.F8C==o&&n>=e&&s.O8C<this.dataProvider.columnMaxDepth?n==e?((n=this.getHeaderCell()).label=Fn.model._labels.Labels.GRID_TOTALS,n):this.getEmptyHeaderCell():this.dataProvider.columnAxis.hasMeasures&&s.F8C==o&&s.O8C<this.dataProvider.columnMaxDepth?this.getGrandTotalCell(i,Fn.data_.consts.AxisName.COLUMNS_AXIS):this.dataProvider.columnAxis.hasMeasures&&o==this.dataProvider.columnMaxDepth-s.O8C?n>=e||s.O8C==this.dataProvider.columnAxis.hierarchies.length?this.getGrandTotalCell(i,Fn.data_.consts.AxisName.COLUMNS_AXIS):this.getHeaderCell():this.dataProvider.columnAxis.hasMeasures&&s.F8C<o&&n<=e?this.getHeaderCell():s.F8C<=o?this.getEmptyHeaderCell():s.x4C));var a=this.dataProvider.columnAxis.hasMeasures&&(e.length>this.dataProvider.measuresPosition||s.F8C==this.dataProvider.measuresPosition)?e.length:e.length-s.O8C,l=this.dataProvider.columns.getItemAt(a);if(this.dataProvider.columnAxis.hasMeasures&&a>this.dataProvider.measuresPosition&&(s.O8C==this.dataProvider.measures.length?a--:r++),r>o)return s.F8C<=o?this.getEmptyHeaderCell():s.x4C;(n=new On.vo.GridCell).isColumnHeader=!s.F8C,n.measure=this.dataProvider.columnAxis.hasMeasures&&(s.O8C<this.dataProvider.measures.length||Fn.model._options.OptionsManager.showExtraTotalLabels)?i:s.x4C;var h=!s.O8C,c=l.members.getItemAt(e[e.length-s.O8C]),d=this.dataProvider.measureDepth;if(this.dataProvider.columnAxis.hasMeasures&&s.O8C<this.dataProvider.measures.length&&o==d-s.O8C||this.dataProvider.columnAxis.hasMeasures&&Fn.model._options.OptionsManager.showExtraTotalLabels&&o==d-s.O8C&&s.O8C!=d||this.dataProvider.columnAxis.hasMeasures&&Fn.model._options.OptionsManager.showExtraTotalLabels&&o==d&&s.O8C==d&&s.M8C>this.dataProvider.measures.length)n.label=i.caption,n.isMeasureHeader=!s.F8C,c=s.x4C;else{if(this.dataProvider.columnAxis.hasMeasures&&s.F8C<this.dataProvider.measures.indexOf(i.uniqueName)&&o<d)return this.getEmptyHeaderCell();r<o?a==o?(h=e.length-s.O8C!=this.dataProvider.columnCount-s.O8C&&!c.isAll,n.label=c.caption):(n.label=this.dataProvider.columnMaxDepth-s.O8C==o&&Fn.model._options.OptionsManager.showExtraTotalLabels?s.x4C!=i?i.caption:Fn.model._labels.Labels.GRID_TOTAL:s.C4C,c=s.x4C):(h=e.length-s.O8C!=this.dataProvider.columnCount-s.O8C&&!c.isAll,n.label=c.caption,this.dataProvider.columnAxis.hasMeasures&&o<d&&(n.measure=i=s.x4C))}return o=s.x4C==c?!s.O8C:this.dataProvider.isColumnDrilledDown(e,c,i),c&&(s.O8C!=c.children.length||c.children.getItemAt(s.F8C).caption!=Fn.model._labels.Labels.MEMBER_BLANK&&c.children.getItemAt(s.F8C).caption!=Fn.model._labels.Labels.INVALID_DATE)&&!c.isAll&&c.hierarchy_.isHierarchy&&!c.level.isLast&&(h||Fn.model._options.OptionsManager.showHierarchies?o?n.drilledDown=!s.F8C:n.drilledUp=!s.F8C:o?n.expanded=!s.F8C:n.collapsed=!s.F8C),h&&!o&&(this.dataProvider.isColumnExpanded(e,i)?n.expanded=!s.F8C:n.collapsed=!s.F8C),s.k2C!=Fn.model._options.OptionsManager.sorting&&t.b8Q!=Fn.model._options.OptionsManager.sorting||s.C4C==n.label||(n.sortable=!s.F8C,!this.dataProvider.columnSortTuple||this.dataProvider.columnSortTuple.toString()!=e.toString()||s.x4C!=i&&this.dataProvider.columnSortMeasure.uniqueName!=i.uniqueName||(this.dataProvider.columnSortType==Fn.data_.consts.SortType.DESC?n.sortedDesc=!s.F8C:this.dataProvider.columnSortType==Fn.data_.consts.SortType.ASC&&(n.sortedAsc=!s.F8C))),n.isTotalColumn=this.dataProvider.columnCount>e.length,n.tuple=e,n.url=void s.F8C,n.hierarchy=l,n.member=c,n},n.prototype._getFlatTableColumnCell=function(e,i,r,o){return o=this.dataProvider.getColumnHierarchy(e),s.x4C==o?s.x4C==i?s.x4C:((r=new On.vo.GridCell).isColumnHeader=!s.F8C,r.label=i.caption,r):((r=new On.vo.GridCell).isColumnHeader=!s.F8C,r.isFilterHeader=!s.F8C,r.hasHierarchyName=o.filterEnabled,r.filtered=o.hasFilter(),r.label=o.caption,r.tuple=e,r.hierarchy=o,r.member=s.x4C,r.measure=i,r.draggable=!s.F8C,s.k2C!=Fn.model._options.OptionsManager.sorting&&t.b8Q!=Fn.model._options.OptionsManager.sorting||(r.sortable=!s.F8C,!this.dataProvider.columnSortTuple||this.dataProvider.columnSortTuple.toString()!=e.toString()||this.dataProvider.columnSortMeasure!=i&&s.x4C!=i||((e=this.dataProvider.columnSortType)==Fn.data_.consts.SortType.DESC?r.sortedDesc=!s.F8C:e==Fn.data_.consts.SortType.ASC&&(r.sortedAsc=!s.F8C))),r)},n.prototype.getHeaderCell=function(){var e=new On.vo.GridCell;return e.isColumnHeader=!s.F8C,e},n.prototype.getEmptyHeaderCell=function(){var e=this.getHeaderCell();return e.isEmpty=!s.F8C,e},n.prototype.getGrandTotalCell=function(e,i){var r=new On.vo.GridCell;return r.label=s.x4C==e?Fn.model._labels.Labels.GRID_GRAND_TOTAL:e.grandTotalCaption,r.isMeasureHeader=s.x4C!=e,i==Fn.data_.consts.AxisName.COLUMNS_AXIS?(r.isColumnHeader=!s.F8C,r.isTotalColumn=r.isGrandTotalColumn=!s.F8C,s.k2C!=Fn.model._options.OptionsManager.sorting&&t.b8Q!=Fn.model._options.OptionsManager.sorting||(r.sortable=!s.F8C,!this.dataProvider.columnSortTuple||s.C4C!=this.dataProvider.columnSortTuple.toString()||this.dataProvider.columnSortMeasure!=e&&s.x4C!=e||(this.dataProvider.columnSortType==Fn.data_.consts.SortType.DESC?r.sortedDesc=!s.F8C:this.dataProvider.columnSortType==Fn.data_.consts.SortType.ASC&&(r.sortedAsc=!s.F8C))),this.dataProvider.columnAxis.hasMeasures?r.measure=e:r.label=Fn.model._labels.Labels.GRID_GRAND_TOTAL):(r.isRowHeader=!s.F8C,r.isTotalRow=r.isGrandTotalRow=!s.F8C,s.k2C!=Fn.model._options.OptionsManager.sorting&&t.M8Q!=Fn.model._options.OptionsManager.sorting||(r.sortable=!s.F8C,!this.dataProvider.rowSortTuple||s.C4C!=this.dataProvider.rowSortTuple.toString()||this.dataProvider.rowSortMeasure!=e&&s.x4C!=e||(this.dataProvider.rowSortType==Fn.data_.consts.SortType.DESC?r.sortedDesc=!s.F8C:this.dataProvider.rowSortType==Fn.data_.consts.SortType.ASC&&(r.sortedAsc=!s.F8C))),this.dataProvider.rowAxis.hasMeasures?r.measure=e:r.label=Fn.model._labels.Labels.GRID_GRAND_TOTAL,r.level=s.F8C),r.tuple=[],r},n.prototype.getRowCell=function(e,i,r){if(s.F8C==e.length)return this.getGrandTotalCell(i,Fn.data_.consts.AxisName.ROWS_AXIS);var o=this.dataProvider.rowAxis.hasMeasures&&e.length>this.dataProvider.measuresPosition?e.length:e.length-s.O8C,n=e[e.length-s.O8C],a=this.dataProvider.rows.getItemAt(o),l=new On.vo.GridCell;l.isRowHeader=!s.F8C;var h=!s.O8C;return n=a.members.getItemAt(n),l.level=r,s.x4C!=i&&this.dataProvider.rowAxis.hasMeasures&&this.dataProvider.multiMeasures&&o<=this.dataProvider.measuresPosition?(l.label=i.caption,n=s.x4C):n&&(l.label=n.caption,h=e.length!=this.dataProvider.rowCount&&!n.isAll),r=s.x4C==n?!s.O8C:this.dataProvider.isRowDrilledDown(e,n,i),n&&!n.isAll&&n.hierarchy_.isHierarchy&&!n.isLeaf&&(s.O8C!=n.children.length||n.children.getItemAt(s.F8C).caption!=Fn.model._labels.Labels.MEMBER_BLANK&&n.children.getItemAt(s.F8C).caption!=Fn.model._labels.Labels.INVALID_DATE)&&(Fn.model._options.OptionsManager.showHierarchies?r?l.drilledDown=!s.F8C:l.drilledUp=!s.F8C:r?l.expanded=!s.F8C:l.collapsed=!s.F8C),h&&!r&&(this.dataProvider.isRowExpanded(e,i)?l.expanded=!s.F8C:l.collapsed=!s.F8C),s.k2C!=Fn.model._options.OptionsManager.sorting&&t.M8Q!=Fn.model._options.OptionsManager.sorting||(l.sortable=!s.F8C,this.dataProvider.rowSortTuple&&this.dataProvider.rowSortTuple.toString()==e.toString()&&this.dataProvider.rowSortMeasure==i&&(this.dataProvider.rowSortType==Fn.data_.consts.SortType.DESC?l.sortedDesc=!s.F8C:this.dataProvider.rowSortType==Fn.data_.consts.SortType.ASC&&(l.sortedAsc=!s.F8C))),l.isTotalRow=this.dataProvider.rowCount>e.length,l.tuple=e,l.url=void s.F8C,l.hierarchy=a,l.member=n,l.measure=this.dataProvider.rowAxis.hasMeasures&&s.O8C<this.dataProvider.measures.length?i:s.x4C,l},n.prototype._getRowCell=function(e,i,r,o,n){if(s.F8C==e.length)return s.F8C==o?this.getGrandTotalCell(i,Fn.data_.consts.AxisName.ROWS_AXIS):((d=new On.vo.GridCell).isRowHeader=!s.F8C,d.isTotalRow=d.isGrandTotalRow=!s.F8C,d.isEmpty=!s.F8C,d.level=r,d);for(var a,l,h,c=o,d=this.dataProvider.rowLevels[o],u=s.F8C;u<this.dataProvider.rowsOnly.length;u++)if(l=(C=this.dataProvider.rowsOnly.getItemAt(u)).findLevel(d),s.x4C!=l){a=C,c=u;break}u=s.x4C==e[c]?s.F8C:e[c],(d=new On.vo.GridCell).isRowHeader=!s.F8C,d.isTotalRow=this.dataProvider.rowCount>e.length,d.isClassicTotalRow=d.isTotalRow&&s.M8C==n,l=!s.O8C,r>o&&(l=!s.F8C),r>o&&s.M8C==n&&(l=!s.F8C),r+s.O8C<o&&s.M8C==n&&(l=!s.F8C),d.level=Math.min(e.length-s.O8C,o);var p=e.slice(s.F8C),C=!s.O8C;if(o==this.dataProvider.rowLevels.length)d.label=i.caption,C=!s.F8C;else{var f=!s.O8C,m=(p=s.x4C==i?s.F8C:this.dataProvider.measures.indexOf(i.uniqueName),a.members.getItemAt(u));h=this.dataProvider.rowLevels.indexOf(m.level.uniqueName)-o;var g=s.x4C!=m&&s.M8C!=n;if(s.F8C>h){if(!m.isAll)return d;C=!s.F8C}else if(s.F8C<h)for(u=s.F8C;u<h;u++)m=m.parent;if(m&&(u=this.dataProvider.rowLevels.indexOf(m.level.uniqueName),-s.O8C<u&&(d.level=u)),d.member=m,s.M8C==n)m&&r==o&&(d.label=this.dataProvider.rowAxis.hasMeasures&&s.O8C<this.dataProvider.measures.length?m.caption+s.s4C+i.caption:m.caption+s.s4C+Fn.model._labels.Labels.GRID_TOTAL,C=!s.F8C);else{if(s.F8C>h)return Be.nullOrEmpty(d.label)&&(d.isEmpty=!s.F8C),u=this.getLevelIdxByTuple(e),-s.O8C<u&&(d.level=u),d;s.F8C<p&&(m=s.x4C),m&&s.F8C!=m.ordinal&&(d.label=m.caption),f=s.O8C==n&&c<this.dataProvider.rowsOnly.length-s.O8C&&s.F8C==p}if(p=e.slice(s.F8C,c+s.O8C),g&&m){p[c]=m.ordinal;var y=this.dataProvider.isRowDrilledDown(p,m,i);m.isAll||!m.hierarchy_.isHierarchy||m.isLeaf||s.M8C==n||s.O8C==m.children.length&&(m.children.getItemAt(s.F8C).caption==Fn.model._labels.Labels.MEMBER_BLANK||m.children.getItemAt(s.F8C).caption==Fn.model._labels.Labels.INVALID_DATE)||(Fn.model._options.OptionsManager.showHierarchies?y?d.drilledDown=!s.F8C:d.drilledUp=!s.F8C:y?d.expanded=!s.F8C:d.collapsed=!s.F8C)}f&&!y&&(this.dataProvider.isRowExpanded(p,i)?d.expanded=!s.F8C:d.collapsed=!s.F8C)}return l?(d.label=s.C4C,d.sortedAsc=d.sortedDesc=d.collapsed=d.expanded=d.drilledDown=d.drilledUp=!s.O8C):(d.tuple=p,d.url=void s.F8C,d.hierarchy=a,d.measure=i,(s.k2C==Fn.model._options.OptionsManager.sorting||t.M8Q==Fn.model._options.OptionsManager.sorting)&&(d.sortable=!s.F8C,this.dataProvider.rowSortTuple&&this.dataProvider.rowSortTuple.toString()==p.toString()&&this.dataProvider.rowSortMeasure==i&&(this.dataProvider.rowSortType==Fn.data_.consts.SortType.DESC?d.sortedDesc=!s.F8C:this.dataProvider.rowSortType==Fn.data_.consts.SortType.ASC&&(d.sortedAsc=!s.F8C)))),C&&(u=this.getLevelIdxByTuple(e),-s.O8C<u&&(d.level=u)),Be.nullOrEmpty(d.label)&&(d.isEmpty=!s.F8C,d.isExpandedArea=s.M8C==n&&m&&o-s.O8C>r?!s.O8C:!s.F8C),d},n.prototype.getLevelIdxByTuple=function(e){return(e=this.dataProvider.getRowHierarchy(e).members.getItemAt(e[e.length-s.O8C]))?this.dataProvider.rowLevels.indexOf(e.level.uniqueName):-s.O8C},n.prototype.onGridClick=function(e){Be.nullOrUndefined(e.cell)||!e.cell.isColumnHeader&&!e.cell.isRowHeader||(e.cell.activeElementType==On.vo.GridCellElementType.DRILL?this.drill(e.cell):e.cell.activeElementType==On.vo.GridCellElementType.LINK&&e.cell.isLink||(Be.nullOrUndefined(e.cell.member)||e.cell.activeElementType==On.vo.GridCellElementType.RIGHT_ICON?e.cell.activeElementType==On.vo.GridCellElementType.RIGHT_ICON&&(e.cell.isColumnHeader&&this.sortColumn(e.cell),e.cell.isRowHeader&&this.sortRow(e.cell)):Fn.model._options.OptionsManager.showHierarchies||e.cell.member.isLeaf?this.expandCollapse(e.cell):this.drill(e.cell)))},n.prototype.onFilterClick=function(e){Fn.model._options.OptionsManager.showFilter&&this.dispatch(new En.FilterOpenEvent(e.hierarchy))},n.prototype.drill=function(e){if(e.drilledUp||e.drilledDown||e.expanded||e.collapsed){var t,i=e.tuple,r=Fn.model._options.OptionsManager.classicView?s.x4C:e.measure,o=e.member;s.x4C==o||o.isAll||o.isLeaf||(e.isRowHeader?(e=Fn.data_.consts.AxisName.ROWS_AXIS,t=this.dataProvider.isRowDrilledDown(i,o,r)):(e=Fn.data_.consts.AxisName.COLUMNS_AXIS,t=this.dataProvider.isColumnDrilledDown(i,o,r)),t?this.dataProvider.drillUp(i,o,e,r):this.dataProvider.drillDown(i,o,e,r))}},n.prototype.expandCollapse=function(e){if(e.expanded||e.collapsed){var t=e.tuple,i=e.isColumnHeader?Fn.data_.consts.AxisName.COLUMNS_AXIS:Fn.data_.consts.AxisName.ROWS_AXIS,r=Fn.model._options.OptionsManager.classicView&&i==Fn.data_.consts.AxisName.ROWS_AXIS?s.x4C:e.measure;e.expanded?(this.gridLayout.clearData(),this.dataProvider.collapse(t,i,r)):e.collapsed&&(this.gridLayout.clearData(),this.dataProvider.expand(t,i,r)),e.isColumnHeader?this.gridLayout.clearColSizes(e.colIdx+s.O8C):this.gridLayout.clearRowSizes(e.rowIdx+s.O8C)}},n.prototype.onGridSingleDoubleClick=function(e){e.isSingleClick?this.singleClick(e.cell):(this.isDrillThroughAvailable&&Fn.model._options.OptionsManager.drillThrough&&!this.isFlatTable&&this.drillThrough(e.cell),this.doubleClick(e.cell))},n.prototype.drillThrough=function(e){e.isValue&&!e.measure.calculated&&this.dispatchWith(En.ViewEvent.DRILL_THROUGH_OPEN,this,{measure:e.measure.uniqueName,columnTuple:e.columnTuple,rowTuple:e.rowTuple})},n.prototype.singleClick=function(e){var t=e.toObject();this.setCoordsToCell(t,e.colIdx,e.rowIdx),Fn.model.JavaScriptHandlers.getInstance().dispatch(new Fn.model.APIEvent(Fn.model.JavaScriptHandlers.CELL_CLICK,t))},n.prototype.doubleClick=function(e){var t=e.toObject();this.setCoordsToCell(t,e.colIdx,e.rowIdx),Fn.model.JavaScriptHandlers.getInstance().dispatch(new Fn.model.APIEvent(Fn.model.JavaScriptHandlers.CELL_DOUBLE_CLICK,t))},n.prototype.setCoordsToCell=function(e,t,i){e.x=this.gridLayout.coords.getRelativeColX(t,this.gridLayout.isSmooth),e.y=this.gridLayout.coords.getRelativeRowY(i,this.gridLayout.isSmooth),e.width=this.gridLayout.coords.getColWidth(t),e.height=this.gridLayout.coords.getRowHeight(i)},n.prototype.sortRow=function(e,t){void s.F8C===t&&(t=s.C4C);var i=e.tuple,r=e.measure;s.x4C==r&&(r=this.dataProvider.measures.getItemAt(s.F8C)),this.dataProvider.rowSortTuple&&this.dataProvider.rowSortTuple.toString()==i.toString()&&this.dataProvider.rowSortMeasure==r?this.dataProvider.rowSortType=this.dataProvider.rowSortType==Fn.data_.consts.SortType.DESC?Fn.data_.consts.SortType.ASC:Fn.data_.consts.SortType.DESC:(this.dataProvider.rowSortType=Fn.data_.consts.SortType.DESC,this.dataProvider.rowSortTuple=i,this.dataProvider.rowSortMeasure=r),s.C4C!=t&&(this.dataProvider.rowSortType=t),this.dataProvider.sort(),this.gridLayout.clearColSizes(s.F8C),this.draw()},n.prototype.sortColumn=function(e,t){void s.F8C===t&&(t=s.C4C);var i=e.tuple,r=e.measure;s.x4C==r&&(r=this.dataProvider.measures.getItemAt(s.F8C)),i&&this.dataProvider.columnSortTuple&&this.dataProvider.columnSortTuple.toString()==i.toString()&&this.dataProvider.columnSortMeasure==r?this.dataProvider.columnSortType=this.dataProvider.columnSortType==Fn.data_.consts.SortType.DESC?Fn.data_.consts.SortType.ASC:Fn.data_.consts.SortType.DESC:(this.dataProvider.columnSortType=r.type==Fn.data_.types.MeasureType.COUNT?Fn.data_.consts.SortType.ASC:Fn.data_.consts.SortType.DESC,this.dataProvider.columnSortTuple=i,this.dataProvider.columnSortMeasure=r),s.C4C!=t&&(this.dataProvider.columnSortType=t),this.dataProvider.sort(),this.gridLayout.clearRowSizes(s.F8C),this.draw()},n.prototype.clearColumnSorting=function(){this.dataProvider.columnSortType=Fn.data_.consts.SortType.UNSORTED,this.dataProvider.columnSortTuple=s.x4C,this.dataProvider.columnSortMeasure=s.x4C,this._model.cube_.clearSortValues(this.dataProvider.rowAxis),this.dataProvider.sort(),this.gridLayout.clearRowSizes(s.F8C),this.draw()},n.prototype.clearRowSorting=function(){this.dataProvider.rowSortType=Fn.data_.consts.SortType.UNSORTED,this.dataProvider.rowSortTuple=s.x4C,this.dataProvider.rowSortMeasure=s.x4C,this._model.cube_.clearSortValues(this.dataProvider.columnAxis),this.dataProvider.sort(),this.gridLayout.clearColSizes(s.F8C),this.draw()},n.prototype.onLongPress=function(e,t){var i=this.gridLayout.getCellByElement(e.target);s.x4C==i||Be.nullOrEmpty(i.label)&&isNaN(i.value)||(this.showContextMenu(i,{left:t.clientX,top:t.clientY}),this.gridLayout.deselect())},n.prototype.onContextMenu=function(e){var t=this.gridLayout.selectedCell||this.gridLayout.getCellByElement(e.target);s.x4C==t||Be.nullOrEmpty(t.label)&&isNaN(t.value)||(e.preventDefault(),this.showContextMenu(t,{left:e.clientX,top:e.clientY}),this.gridLayout.deselect())},n.prototype.showContextMenu=function(e,t){var i=this;if(s.x4C!=e){var r=[];!e.isValue||isNaN(e.value)||this.isFlatTable||e.measure.calculated||!Fn.model._options.OptionsManager.drillThrough||r.push({caption:Fn.model._labels.Labels.CONTEXT_MENU_DRILL_THROUGH,handler:function(){i.drillThrough(e)}}),e.isFilterHeader&&Fn.model._options.OptionsManager.showFilter&&r.push({caption:Fn.model._labels.Labels.CONTEXT_MENU_OPEN_FILTER,handler:function(){i.dispatch(new En.FilterOpenEvent(e.hierarchy))}}),(e.isRowHeader||e.isColumnHeader)&&(e.expanded&&r.push({caption:Fn.model._labels.Labels.CONTEXT_MENU_COLLAPSE,handler:function(){i.expandCollapse(e)}}),e.collapsed&&r.push({caption:Fn.model._labels.Labels.CONTEXT_MENU_EXPAND,handler:function(){i.expandCollapse(e)}})),e.isRowHeader&&!e.isFilterHeader&&(e.sortedDesc||r.push({caption:Fn.model._labels.Labels.CONTEXT_MENU_SORT_ROW_DESC,handler:function(){i.sortRow(e,Fn.data_.consts.SortType.DESC)}}),e.sortedAsc||r.push({caption:Fn.model._labels.Labels.CONTEXT_MENU_SORT_ROW_ASC,handler:function(){i.sortRow(e,Fn.data_.consts.SortType.ASC)}}),(e.sortedAsc||e.sortedDesc)&&r.push({caption:Fn.model._labels.Labels.CONTEXT_MENU_CLEAR_SORTING,handler:function(){i.clearRowSorting()}})),e.isColumnHeader&&!e.isFilterHeader&&(e.sortedDesc||r.push({caption:Fn.model._labels.Labels.CONTEXT_MENU_SORT_COLUMN_DESC,handler:function(){i.sortColumn(e,Fn.data_.consts.SortType.DESC)}}),e.sortedAsc||r.push({caption:Fn.model._labels.Labels.CONTEXT_MENU_SORT_COLUMN_ASC,handler:function(){i.sortColumn(e,Fn.data_.consts.SortType.ASC)}}),(e.sortedAsc||e.sortedDesc)&&r.push({caption:Fn.model._labels.Labels.CONTEXT_MENU_CLEAR_SORTING,handler:function(){i.clearColumnSorting()}})),s.F8C<r.length&&this._model.dispatchWith(En.ViewEvent.CONTEXT_MENU_OPEN,this,{menuItems:r,coords:t})}},n.prototype.addFilterCell=function(e,t,i){for(var r,o=i==Fn.data_.consts.AxisName.COLUMNS_AXIS?this.dataProvider.columnsOnly:this.dataProvider.rowsOnly,n=s.F8C,a=s.F8C;a<o.length;a++){var l=o.getItemAt(a);l.isMeasures||((r=new On.vo.GridCell).label=l.caption,r.isFilterHeader=!s.F8C,r.draggable=!s.F8C,r.hasHierarchyName=!s.F8C,r.filtered=l.hasFilter(),r.level=n,r.hierarchy=l,i==Fn.data_.consts.AxisName.COLUMNS_AXIS?(r.isFrozen=!this.isFlatTable,this.gridLayout.dataProvider.setDataFrozen(e,t+a,r)):(r.isRowHeader=!s.F8C,this.gridLayout.dataProvider.setDataFrozen(e+n,t,r),n++))}},n.prototype._addFilterCell=function(e,t){for(var i,r=this.dataProvider.rowsOnly,o=s.F8C,n=this.dataProvider.rowAxis.hasMeasures&&s.O8C<this.dataProvider.measures.length?this.FIRST_DATA_COLUMN-s.O8C:this.FIRST_DATA_COLUMN,a=s.F8C;a<r.length;a++){var l,h=r.getItemAt(a);if((i=new On.vo.GridCell).label=h.caption,i.isFilterHeader=!s.F8C,i.draggable=!s.F8C,i.hasHierarchyName=!s.F8C,i.filtered=h.hasFilter(),i.hierarchy=h,this.gridLayout.dataProvider.setDataFrozen(e,t+o,i),o++,s.M8C<h.levels_.length)for(var c=s.M8C;c<h.levels_.length&&(l=h.levels_.getItemAt(c),-s.O8C!=this.dataProvider.rowLevels.indexOf(l.uniqueName)&&((i=new On.vo.GridCell).label=l.caption,i.isRowHeader=!s.F8C,i.hasHierarchyName=!s.F8C,this.gridLayout.dataProvider.setDataFrozen(e,t+o,i),o++),!(o>=n));c++);if(o>=n)break}},Object.defineProperty(n.prototype,i.g1Y,{get:function(){return Fn.model._options.OptionsManager.flatView},enumerable:!s.F8C,configurable:!s.F8C}),Object.defineProperty(n.prototype,"isDrillThroughAvailable",{get:function(){return!Fn.model._options.OptionsManager.flatView},enumerable:!s.F8C,configurable:!s.F8C}),Object.defineProperty(n.prototype,"gridLayout",{get:function(){return this._gridLayout},enumerable:!s.F8C,configurable:!s.F8C}),n.prototype.exportTo=function(e,t,i){e==Fn.model._export.ExportType.HTML&&Fn.model._export.ExportHTML.run(this,t,this.dataProvider.extendedDataWidth,this.dataProvider.extendedDataHeight),e==Fn.model._export.ExportType.PDF&&Fn.model._export.ExportPDF.run(this,t,this.dataProvider.extendedDataWidth,this.dataProvider.extendedDataHeight),e==Fn.model._export.ExportType.EXCEL&&Fn.model._export.ExportXLS.run(this,t,this.dataProvider.extendedDataWidth,this.dataProvider.extendedDataHeight)},n.prototype.print=function(){Fn.model.printing.PrintingManager.getInstance().run(this,this.dataProvider)},n.prototype.getCell=function(e,t){var i=this.gridLayout.getCell(e,t,!s.F8C,!s.F8C);if(s.x4C==i){(i=new On.vo.GridCell).rowIdx=e,i.colIdx=t;var r=this.getData(e,t,!s.F8C);i.value=r?r.value:NaN,isNaN(i.value)||(i.label=Be.NumberFormatter.format(i.value))}return-s.O8C==i.rowIdx&&(i.rowIdx=e),-s.O8C==i.colIdx&&(i.colIdx=t),r=i.toObject(),this.setCoordsToCell(r,i.colIdx,i.rowIdx),r},n.prototype.getSelectedCell=function(){if(s.x4C==this.gridLayout.selectedCell)return s.x4C;var e=this.gridLayout.selectedCell.toObject();return this.setCoordsToCell(e,this.gridLayout.selectedCell.colIdx,this.gridLayout.selectedCell.rowIdx),e},n.prototype.setSelectedCell=function(e,t){this.gridLayout.select(e,t,e,t)},n.prototype.removeSelection=function(){this.gridLayout.deselect()},Object.defineProperty(n.prototype,"gridRowCount",{get:function(){return this.dataProvider.dataLoaded?this.dataProvider.extendedDataHeight+this.FIRST_DATA_ROW:s.F8C},enumerable:!s.F8C,configurable:!s.F8C}),Object.defineProperty(n.prototype,"gridColumnCount",{get:function(){return this.dataProvider.dataLoaded?this.dataProvider.extendedDataWidth+this.FIRST_DATA_COLUMN:s.F8C},enumerable:!s.F8C,configurable:!s.F8C}),n.prototype.onResizeColumn=function(e){this._onResizeColumn(e.data.colIdx,e.data.width)},n.prototype.onResizeRow=function(e){this._onResizeRow(e.data.rowIdx,e.data.height)},n.prototype._onResizeColumn=function(e,i){if(e<this.FIRST_DATA_COLUMN)s.F8C<i?Fn.model.sizes.SizesManager.columnHeaderSizes[e]=i:delete Fn.model.sizes.SizesManager.columnHeaderSizes[e];else{var r=this.dataProvider.getColumnTuple(e-this.FIRST_DATA_COLUMN,!s.F8C);if(s.x4C!=r){var o=this.dataProvider.getColumnMeasureIndex(e-this.FIRST_DATA_COLUMN);this.dataProvider.columnAxis.hasMeasures&&r.push(o),s.F8C<i?Fn.model.sizes.SizesManager.columnSizes[r.join(t.k6C)]=i:delete Fn.model.sizes.SizesManager.columnSizes[r.join(t.k6C)]}}},n.prototype.resizeColumnsByIdx=function(){var e=Fn.model.sizes.SizesManager.columnSizesByIdx;Fn.model.sizes.SizesManager.columnSizesByIdx={};var t,i=[];for(t in e)e[t]&&(i[parseInt(t)]=e[t]);for(var r in i)this.gridLayout.resizeColumn(parseInt(r),i[r]),this._onResizeColumn(parseInt(r),i[r])},n.prototype.resizeHeaderColumns=function(){var e,t=Fn.model.sizes.SizesManager.columnHeaderSizes,i=[];for(e in t)t[e]&&(i[e]=t[e]);for(var r in i)(t=parseInt(r))<this.FIRST_DATA_COLUMN&&this.gridLayout.resizeColumn(t,i[t])},n.prototype.resizeColumns=function(){var e,i=Fn.model.sizes.SizesManager.columnSizes,r=[];for(e in i)if(i[e]){var o=s.C4C==e?[]:e.split(t.k6C);o=this.dataProvider.getColumnTupleIndex(o),-s.O8C!=o&&(r[o+=this.FIRST_DATA_COLUMN]=i[e])}for(var n in r)this.gridLayout.resizeColumn(parseInt(n),r[n])},n.prototype.resizeRowsByIdx=function(){var e=Fn.model.sizes.SizesManager.rowSizesByIdx;Fn.model.sizes.SizesManager.rowSizesByIdx={};var t,i=[];for(t in e)e[t]&&(i[parseInt(t)]=e[t]);for(var r in i)this.gridLayout.resizeRow(parseInt(r),i[r]),this._onResizeRow(parseInt(r),i[r])},n.prototype.resizeHeaderRows=function(){Fn.model.sizes.SizesManager.startTableRow=this.START_TABLE_ROW;var e,t=Fn.model.sizes.SizesManager.rowHeaderSizes,i=[];for(e in t)t[e]&&(i[parseInt(e)+this.START_TABLE_ROW]=t[e]);for(var r in i)parseInt(r)<this.FIRST_DATA_ROW&&this.gridLayout.resizeRow(parseInt(r),i[r])},n.prototype.resizeRows=function(){var e,i=Fn.model.sizes.SizesManager.rowSizes,r=[];for(e in i)if(i[e]){var o=s.C4C==e?[]:e.split(t.k6C);o=this.dataProvider.getRowTupleIndex(o),-s.O8C!=o&&(r[o+=this.FIRST_DATA_ROW]=i[e])}for(var n in r)this.gridLayout.resizeRow(parseInt(n),r[n])},n.prototype._onResizeRow=function(e,i){if(Fn.model.sizes.SizesManager.startTableRow=this.START_TABLE_ROW,e<this.START_TABLE_ROW)s.F8C<i?Fn.model.sizes.SizesManager.rowFilterSizes[e]=i:delete Fn.model.sizes.SizesManager.rowFilterSizes[e];else if(e<this.FIRST_DATA_ROW)s.F8C<i?Fn.model.sizes.SizesManager.rowHeaderSizes[e-this.START_TABLE_ROW]=i:delete Fn.model.sizes.SizesManager.rowHeaderSizes[e-this.START_TABLE_ROW];else{var r=this.dataProvider.getRowTuple(e-this.FIRST_DATA_ROW,!s.F8C);if(s.x4C!=r){var o=this.dataProvider.getRowMeasureIndex(e-this.FIRST_DATA_ROW);this.dataProvider.rowAxis.hasMeasures&&r.push(o),s.F8C<i?Fn.model.sizes.SizesManager.rowSizes[r.join(t.k6C)]=i:delete Fn.model.sizes.SizesManager.rowSizes[r.join(t.k6C)]}}},n}(h.containers.UIContainer),On.GridView=Sn,Tn=De||(De={}),function(e){var t=function(){function e(){}return e.MOUSE_CLICK="mclick",e.MOUSE_DOUBLE_CLICK=i.a1Y,e.MOUSE_SINGLE_DOUBLE_CLICK="singledoubleclick",e.MOUSE_UP="mup",e.MOUSE_DOWN="mdown",e.MOUSE_MOVE="mmove",e.MOUSE_LEAVE="mleave",e.HEADER_RESIZED="hresized",e.HEADER_RESIZING="hresizing",e.SHRINK_TO_FIT="shrink",e.DRILLTHROUGH_CLOSED="dthclosed",e.LONG_PRESS="long",e.FILTER_CLICK="filter_click",e.RESIZE_COLUMN="resize_c",e.RESIZE_ROW="resize_r",e}();e.GridEvent=t;var o=function(e){function i(i,o){void r.F8C===o&&(o=r.x4C);var s=e.call(this,t.MOUSE_CLICK)||this;return s.cell=i,s.element=o,s}return Ga(i,e),i}(s._Event);e.GridClickEvent=o,o=function(e){function i(i){var r=e.call(this,t.MOUSE_DOUBLE_CLICK)||this;return r.cell=i,r}return Ga(i,e),i}(s._Event),e.GridDoubleClickEvent=o,o=function(e){function i(i,o,s){void r.F8C===s&&(s=r.x4C);var n=e.call(this,t.MOUSE_SINGLE_DOUBLE_CLICK)||this;return n.cell=i,n.isSingleClick=o,n.element=s,n}return Ga(i,e),i}(s._Event),e.GridSingleDoubleClickEvent=o,o=function(e){function i(i){var r=e.call(this,t.MOUSE_DOWN)||this;return r.cell=i,r}return Ga(i,e),i}(s._Event),e.GridMouseDownEvent=o,o=function(e){function i(i){var r=e.call(this,t.MOUSE_MOVE)||this;return r.cell=i,r}return Ga(i,e),i}(s._Event),e.GridMouseMoveEvent=o,o=function(e){function i(i){var r=e.call(this,t.MOUSE_UP)||this;return r.cell=i,r}return Ga(i,e),i}(s._Event),e.GridMouseUpEvent=o,o=function(e){function i(i,r){var o=e.call(this,t.LONG_PRESS)||this;return o.cell=i,o.coords=r,o}return Ga(i,e),i}(s._Event),e.GridLongPressEvent=o,o=function(e){function i(i,o,s){void r.F8C===s&&(s=r.x4C);var n=e.call(this,t.FILTER_CLICK)||this;return n.hierarchy=i,n.cell=o,n.element=s,n}return Ga(i,e),i}(s._Event),e.FilterClickEvent=o}((xn=Tn._view||(Tn._view={})).grid||(xn.grid={})),Ln=De||(De={}),An=Ln._view||(Ln._view={}),In=An.grid||(An.grid={}),Rn=function(){function e(){}return e.validate=function(t){return t==e.COMPACT||t==e.CLASSIC||t==e.FLAT?t:e.COMPACT},e.COMPACT=i.d1Y,e.CLASSIC=i.S1Y,e.FLAT=o.F6B,e}(),In.GridType=Rn,Dn=De||(De={}),Nn=Dn._view||(Dn._view={}),Mn=function(e){var o="wdr-circle";function s(){var i=this;if(r.x4C!=s._instance)throw Error(t.D5C);return(i=e.call(this,Nn.PivotView.stage.container)||this).setId("wdr-alert-view"),i.setControls(),i}return Ga(s,e),s.getInstance=function(){return r.x4C==s._instance&&(s._instance=new s),s._instance},s.dispose=function(){s._instance=r.x4C},s.prototype.setControls=function(){this.overlay.addClass("wdr-overlay-alert"),this._buttons=[];var e=new h.UIComponentBase(r.r4C,"wdr-content");this.addChild(e),this._txtTitle=new h.UILabel,this._txtTitle.addClass(i.m1Y),e.addChild(this._txtTitle),this._txtMessage=new h.UILabel,e.addChild(this._txtMessage),this._toolbar=new h.UIComponentBase(r.r4C,"wdr-ui-btns-row"),e.addChild(this._toolbar),this._icon=new h.UIComponentBase(r.r4C,"wdr-alert-icon"),this.addChild(this._icon)},s.prototype.openView=function(e,t,i,o,s,n){var a=r;void a.F8C===e&&(e=a.C4C),void a.F8C===t&&(t=a.C4C),void a.F8C===i&&(i=Dn.AlertType.ALERT),void a.F8C===o&&(o=a.x4C),void a.F8C===s&&(s=a.x4C),void a.F8C===n&&(n=!a.O8C),this.clear(),this.setTitle(t),this.setMessage(e),this.setIcon(i),this.setButtons(o,s),Nn.PivotView.stage.addChild(this),this.isOpaque=n,this.open(),this.centerPosition()},s.prototype.clear=function(){var e=r;for(this.setTitle(e.C4C),this.setMessage(e.C4C);e.F8C<this._buttons.length;)this._buttons.pop().removeFromParent();this.container.toggleClass("wdr-alert",!e.O8C),this.container.toggleClass("wdr-confirmation",!e.O8C),this.container.toggleClass("wdr-error",!e.O8C),this.container.toggleClass("wdr-info",!e.O8C),this.container.toggleClass("wdr-question",!e.O8C)},s.prototype.setTitle=function(e){this._txtTitle.setSelectable(!r.O8C),this._txtTitle.setLabel(e)},s.prototype.setMessage=function(e){this._txtMessage.setLabel(e,!r.F8C)},s.prototype.setButtons=function(e,t){var o=this;r.x4C==e&&(e=[Dn.model._labels.Labels.BUTTON_OK]),e.reverse(),r.x4C!=t&&t.reverse(),this._handlers=t;for(var s,n=r.F8C;n<e.length;n++)(s=new h.UIButton).setLabel(e[n]),s.addEventListener(h.UIButton.CLICK_EVENT,function(e){return o.buttonClickHandler(e)}),this._buttons.push(s),this.isPrimary(e[n])&&s.addClass(i.V8Y),this.isPrimary(e[n])&&(Be.OSUtil.isMac||Be.OSUtil.isIOS)?this._toolbar.addChild(s):this.isPrimary(e[n])?this._toolbar.container.prepend(s.container):this._toolbar.addChild(s)},s.prototype.isPrimary=function(e){switch(e){case Dn.model._labels.Labels.BUTTON_OK:case Dn.model._labels.Labels.BUTTON_SAVE:case Dn.model._labels.Labels.BUTTON_YES:return!r.F8C}return!r.O8C},s.prototype.buttonClickHandler=function(e){var t=r;e=e.target;for(var i=-t.O8C,o=t.F8C;o<this._buttons.length;o++)if(this._buttons[o]==e){i=o;break}t.F8C>i||(this.close(),t.x4C==this._handlers||t.x4C==this._handlers[i])||this._handlers[i]()},s.prototype.setIcon=function(e){this._icon.container.removeAllChildren(),e==Dn.AlertType.ALERT?this._icon.container.addChild(this.createIconAlert()):e==Dn.AlertType.CONFIRMATION?this._icon.container.addChild(this.createIconConfirmation()):e==Dn.AlertType.ERROR?this._icon.container.addChild(this.createIconError()):e==Dn.AlertType.INFO&&this._icon.container.addChild(this.createIconInfo())},s.prototype.createIconConfirmation=function(){var e=new h.UIElement(r.I2C,o);return e.addChild(new h.UIElement(r.I2C,"wdr-ui-icon wdr-icon-notif_confirm")),e},s.prototype.createIconInfo=function(){var e=new h.UIElement(r.I2C,o);return e.addChild(new h.UIElement(r.I2C,"wdr-ui-icon wdr-icon-notif_info")),e},s.prototype.createIconAlert=function(){var e=new h.UIElement(r.I2C,"wdr-triangle-wrap");return e.addChild(new h.UIElement(r.I2C,"wdr-triangle")),e.addChild(new h.UIElement(r.I2C,"wdr-ui-icon wdr-icon-notif_warning")),e},s.prototype.createIconError=function(){var e=new h.UIElement(r.I2C,"wdr-hexagon");return e.addChild(new h.UIElement(r.I2C,"wdr-ui-icon wdr-icon-notif_arrow")),e},s.prototype.close=function(){e.prototype.close.call(this),this.clear()},s.prototype.onOverlayClick=function(){this.isOpaque||e.prototype.onOverlayClick.call(this)},s}(h.containers.UIPopup),Nn.AlertView=Mn,Pn=De||(De={}),Hn=Pn._view||(Pn._view={}),Un=Hn.grid||(Hn.grid={}),Bn=function(e){function o(){var t=r,i=e.call(this,Hn.PivotView.stage.container)||this;return i.slice=t.x4C,i.originalSlice=t.x4C,i.columnTuple=t.x4C,i.rowTuple=t.x4C,i.measure=t.x4C,i.START_TABLE_ROW=t.F8C,i.START_HEADERS_ROW=t.F8C,i.START_HEADERS_COLUMN=t.F8C,i.FIRST_DATA_ROW=t.F8C,i.FIRST_DATA_COLUMN=t.F8C,i.setId("wdr-drillthrough-view"),i.setControls(),i}return Ga(o,e),o.prototype.setControls=function(){var e=i,t=this;this.headerGroup=new h.containers.UIContainer("wdr-header-container"),this.addChild(this.headerGroup),this._txtTitle=new h.UILabel,this._txtTitle.addClass(e.m1Y),this._txtTitle.setSelectable(!r.O8C),this.headerGroup.addChild(this._txtTitle),this._btnClose=new h.UIButton,this._btnClose.addClass("wdr-ui-btn-close"),this._btnClose.addEventListener(h.UIButton.CLICK_EVENT,function(){return t.close()}),this.headerGroup.addChild(this._btnClose),this.detailsGroup=new h.containers.UIContainer("wdr-details-container"),this.addChild(this.detailsGroup),this._txtRowDetails=new h.UILabel,this._txtRowDetails.addClass(e.K8Y),this.detailsGroup.addChild(this._txtRowDetails),this._txtColDetails=new h.UILabel,this._txtColDetails.addClass(e.K8Y),this.detailsGroup.addChild(this._txtColDetails),this._txtMeasureDetails=new h.UILabel,this._txtMeasureDetails.addClass(e.K8Y),this.detailsGroup.addChild(this._txtMeasureDetails),this.sheetGroup=new h.containers.UIContainer("wdr-grid-container"),this.addChild(this.sheetGroup),this.gridLayout=new Un.sheet.flat.FlatGridLayout,this.gridLayout.isDrillThrough=!r.F8C,this.gridLayout.getDataFunction=function(e,i){return t.getData(e,i)},this.sheetGroup.container.addChild(this.gridLayout)},o.prototype.openView=function(e,t,i,o,s){var n=r,a=this;void n.F8C===e&&(e=n.x4C),void n.F8C===t&&(t=n.x4C),void n.F8C===i&&(i=n.x4C),void n.F8C===o&&(o=n.x4C),void n.F8C===s&&(s=n.x4C),this.dataProvider=e,this.setSlice(t.clone()),this.originalSlice=t,this.rowTuple=o,this.columnTuple=i,this.measure=s,this.tmpShowHeaders=Pn.model._options.OptionsManager.showHeaders,Pn.model._options.OptionsManager.showHeaders=!n.F8C,this.data=this.dataProvider.drillThrough(this.rowTuple,this.columnTuple,this.measure),this.keys=this.data.shift(),Pn.model._options.OptionsManager.showDrillThroughConfigurator&&n.x4C==this._fieldsView&&(this._fieldsView=new Hn.config.FieldsView,this._fieldsView.modalParent=Hn.PivotView.stage.container,this._fieldsView.isForDillThrough=!n.F8C,this._fieldsView.containtment=this.gridLayout.element,this._fieldsView.addEventListener(Hn.config.FieldsView.EVENT_OPEN,function(){return a.onFieldsViewOpen()}),this._fieldsView.addEventListener(Hn.config.FieldsView.EVENT_APPLY_SLICE,function(e){return a.onFieldsViewApplySlice(e)}),this.sheetGroup.addChild(this._fieldsView)),this.gridLayout.addEventListener(Hn.config.FieldsView.EVENT_APPLY_SLICE,function(e){return a.onFieldsViewApplySlice(e)}),this.open(),this.redraw()},o.prototype.onDataLoaded=function(e){this.data=e,Pn.preloader(!r.O8C),r.x4C!=this.data&&(this.open(),this.redraw())},o.prototype.setSlice=function(e){this.slice=e},o.prototype.redraw=function(){var e=r;this._txtTitle.setLabel(Pn.model._labels.Labels.DRILL_THROUGH_TITLE),this._txtRowDetails.setLabel(this.getRowDetails(),!e.F8C),this._txtColDetails.setLabel(this.getColDetails(),!e.F8C),this._txtMeasureDetails.setLabel(this.getMeasureDetails(),!e.F8C),this.setWidth(Hn.PivotView.stageWidth-80);var t=Hn.PivotView.stage.container.getHeight(!e.F8C)-this.detailsGroup.container.getHeight(!e.F8C)-this.headerGroup.container.getHeight(!e.F8C)-e.I8C-this.container.padding.top-this.container.padding.bottom-e.v0C,i=this.getWidth()-e.M8C;this.gridLayout.clearAll(),this.gridLayout.resize(i,t),this.gridLayout.width=i,this.gridLayout.height=t,this.gridLayout.freezeRows(e.O8C),this.gridLayout.setDataSize(this.data.length,this.slice.flatten().length),this.gridLayout.draw(),this.centerPosition()},o.prototype.close=function(){e.prototype.close.call(this),!r.O8C==Be.nullOrUndefined(this.tmpShowHeaders)&&(Pn.model._options.OptionsManager.showHeaders=this.tmpShowHeaders),this.dispatchWith(Un.GridEvent.DRILLTHROUGH_CLOSED)},o.prototype.getData=function(e,t){var i=r;if(i.F8C==e)return this.getHeaderCell(t);var o,s=new Un.vo.GridCell;if(s.isDrillThrough=!i.F8C,s.isValue=!i.F8C,i.x4C==this.data||i.x4C==this.data[e-i.O8C])return i.x4C;if(o=this.slice.flatten(),!(t<this.data[e-i.O8C].length))return i.x4C;var n=o.getItemAt(t);if(i.x4C==n)return i.x4C;o=this.keys.indexOf(n.uniqueName),i.M8C<n.levels_.length&&(o=this.keys.indexOf(n.levels_.getKeyAt(n.levels_.length-i.O8C)));var a=this.getNotNullMemberIdx(e,o);s.hierarchy=n,s.label=this.getMemberFullCaption(n.members.getItemAt(a));var l=this.slice.hierarchyToMeasure(n.uniqueName);return i.x4C==l?i.x4C:(o=l.getFormat(!i.F8C).clone(),this.originalSlice.measures_.keyExists(l.uniqueName)&&(n=n.members.getItemAt(a),i.x4C!=n&&(s.value=n.levelOrdinal,s.label=l.type==Pn.data_.types.MeasureType.NUMBER?Be.NumberFormatter.format(s.value,o):n.caption)),i.C4C!=o.textAlign&&s.customize({"text-align":o.textAlign}),s.measure=l,s)},o.prototype.getNotNullMemberIdx=function(e,t){for(;r.x4C==this.data[e-r.O8C][t];)t--;return this.data[e-r.O8C][t]},o.prototype.getMemberFullCaption=function(e){for(var t=[];e&&e.parent;)t.unshift(e.caption),e=e.parent;return t.join(i.F8Y)},o.prototype.getHeaderCell=function(e){var t=r,i=new Un.vo.GridCell;return i.isDrillThrough=!t.F8C,i.isColumnHeader=!t.F8C,e=this.slice.flatten().getItemAt(e),t.x4C==e?t.x4C:(i.label=e.caption,i)},o.prototype.getRowDetails=function(){for(var e,t=r,o=[],s=t.F8C;s<this.rowTuple.length;s++){if(e=this.originalSlice.rowsOnly.getItemAt(s),t.x4C==e)return t.x4C;e=e.members.getItemAt(this.rowTuple[s]),o.push(e.caption)}return(o=t.F8C<o.length?Be.StringUtils.bind(Pn.model._labels.Labels.DRILL_THROUGH_ROW,o.join(i.O8Y)):t.C4C).replace(/<br\s*[\/]?>/gi,t.s4C)},o.prototype.getColDetails=function(){for(var e,t=r,o=[],s=t.F8C;s<this.columnTuple.length;s++){if(e=this.originalSlice.columnsOnly.getItemAt(s),t.x4C==e)return t.x4C;e=e.members.getItemAt(this.columnTuple[s]),o.push(e.caption)}return(o=t.F8C<o.length?Be.StringUtils.bind(Pn.model._labels.Labels.DRILL_THROUGH_COLUMN,o.join(i.O8Y)):t.C4C).replace(/<br\s*[\/]?>/gi,t.s4C)},o.prototype.getMeasureDetails=function(){var e=this.measure.getFormat().clone(),t=this.dataProvider.getValue(this.rowTuple,this.columnTuple,this.measure);return e=Be.NumberFormatter.format(t,e),e=(e=Be.StringUtils.bind(Pn.model._labels.Labels.DRILL_THROUGH_VALUE,this.measure.caption,e)).replace(/<br\s*[\/]?>/gi,r.s4C),this.value=t,e},o.prototype.onFieldsViewOpen=function(){this._fieldsView&&this._fieldsView.open(Pn.data_.Cube.getInstance().structure_,this.slice)},o.prototype.onFieldsViewApplySlice=function(e){e=e.data instanceof Pn.data_._structure.Slice?e.data:Pn.data_._structure.Slice.fromObject(Pn.model.report.SliceValueObject.fromObject(e.data),Pn.data_.Cube.getInstance().structure_),this.setSlice(e),this.redraw()},o.prototype.exportTo=function(e,t,i){var o=r;i=this.slice?this.slice.flatten().length:this.data[o.F8C]?this.data[o.F8C].length:o.F8C;var s=this.data?this.data.length+o.O8C:o.F8C;e==Pn.model._export.ExportType.HTML&&Pn.model._export.ExportHTML.run(this,t,i,s),e==Pn.model._export.ExportType.PDF&&Pn.model._export.ExportPDF.run(this,t,i,s),e==Pn.model._export.ExportType.EXCEL&&Pn.model._export.ExportXLS.run(this,t,i,s)},o.prototype.saveData=function(e,i,o){var s=this;this.timer&&this.timer.running&&this.timer.stop(),r.x4C==this.timer&&(this.timer=new Be.Timer(t.N6C,r.O8C)),this.timer.addEventListener(Be.TimerEvent.TIMER_COMPLETE,function(){return s.onTimeComplete()}),this.timer.start(),(i=this.getData(e,i))&&i.label!=o&&i.value!=o&&this.dataProvider.save(this.rowTuple,this.columnTuple,i.hierarchy,o,e-r.O8C),this.draw()},o.prototype.onTimeComplete=function(){this._txtRowDetails.setLabel(this.getRowDetails(),!r.F8C),this._txtColDetails.setLabel(this.getColDetails(),!r.F8C),this._txtMeasureDetails.setLabel(this.getMeasureDetails(),!r.F8C),this.timer.stop()},o}(h.containers.UIPopup),Un.DrillThroughView=Bn,kn=De||(De={}),Vn=kn._view||(kn._view={}),zn=Vn.grid||(Vn.grid={}),qn=zn.vo||(zn.vo={}),Gn=function(){var e=r;function t(){this.value=NaN,this.label=e.C4C,this.level=NaN,this.sortedDesc=this.sortedAsc=this.sortable=this.drilledDown=this.drilledUp=this.draggable=this.collapsed=this.expanded=this.filtered=this.hasHierarchyName=this.showTooltip=this.isLink=this.isValue=this.isClassicTotalRow=this.isGrandTotalColumn=this.isGrandTotalRow=this.isTotalColumn=this.isTotalRow=this.isMeasureHeader=this.isColumnHeader=this.isRowHeader=this.isFrozen=this.isFilterHeader=this.isCustomized=this.numeric=!e.O8C,this.colIdx=this.rowIdx=-e.O8C,this.recordId=e.x4C,this.isDrillThrough=this.isExpandedArea=this.isEmpty=!e.O8C,this.conditions=[],this.url=e.C4C,this.isKPIStatus=this.isKPITrend=!e.O8C,this.activeElementType=qn.GridCellElementType.BACKGROUND}return Object.defineProperty(t.prototype,"isTotal",{get:function(){return this.isTotalRow||this.isTotalColumn},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(t.prototype,"isGrandTotal",{get:function(){return this.isGrandTotalRow||this.isGrandTotalColumn},enumerable:!e.F8C,configurable:!e.F8C}),t.prototype.getDrillLabel=function(){return this.drilledDown||this.drilledUp?this.hierarchy.levels_.getItemAt(this.member.level.num+e.O8C).caption:e.C4C},t.prototype.getLabel=function(){if(e.x4C!=t.customizeCellFunction){var i=new Lu;i.clear(),i.tag=e.r4C,i.text+=this.label,t.customizeCellFunction(i.node,this.toObject());var r=i.text;return r=kn.model.XSSCheck.valid(r)?r:kn.model.XSSCheck.validate(r),i.clear(),(i=document.createElement(e.r4C)).innerHTML=r,i.textContent?i.textContent.trim():r}return this.label},t.prototype.customize=function(t){this.isCustomized=!e.F8C,e.x4C==this.style&&(this.style=new qn.CellStyle),this.style.addCSS(t)},t.prototype.customizeWithClass=function(t){this.isCustomized=!e.F8C,e.x4C==this.style&&(this.style=new qn.CellStyle),this.style.addStyle(t),this.style.addCustomStyle(t)},t.prototype.toObject=function(){if(this.obj)return this.obj;var t,r,o=kn.model.PivotModel.getInstance(),s=[];if(!kn.model._options.OptionsManager.flatView&&(r=this.isColumnHeader&&this.tuple?this.tuple:this.columnTuple))for(var n=o.cube_.slice_?o.cube_.slice_.columnsOnly:new Be.AssociativeArray,a=e.F8C;a<r.length;a++)t=(t=n.getItemAt(a)).members.getItemAt(r[a]),s.push({caption:t.caption,uniqueName:t.uniqueName,hierarchyCaption:t.hierarchy_.caption,hierarchyUniqueName:t.hierarchy_.uniqueName});if(n=[],!kn.model._options.OptionsManager.flatView&&(r=this.isRowHeader&&this.tuple?this.tuple:this.rowTuple))for(o=o.cube_.slice_?o.cube_.slice_.rowsOnly:new Be.AssociativeArray,a=e.F8C;a<r.length;a++)t=(t=o.getItemAt(a)).members.getItemAt(r[a]),n.push({caption:t.caption,uniqueName:t.uniqueName,hierarchyCaption:t.hierarchy_.caption,hierarchyUniqueName:t.hierarchy_.uniqueName});return r={columnIndex:this.colIdx,columns:s,label:this.label,measure:this.measure?kn.data_._structure.GenericMeasure.toObject(this.measure):e.x4C,hierarchy:this.hierarchy?kn.data_._structure.GenericHierarchy.toObject(this.hierarchy):e.x4C,member:this.member?kn.data_._structure.GenericMember.toObject(this.member):e.x4C,rowIndex:this.rowIdx,rows:n,type:this.isColumnHeader||this.isRowHeader||this.isFilterHeader?"header":i.a9Y,value:this.value,recordId:this.recordId,isTotal:this.isTotal,isTotalRow:this.isTotalRow,isTotalColumn:this.isTotalColumn,isClassicTotalRow:this.isClassicTotalRow,isGrandTotal:this.isGrandTotal,isGrandTotalRow:this.isGrandTotalRow,isGrandTotalColumn:this.isGrandTotalColumn,isDrillThrough:this.isDrillThrough},isNaN(this.level)||(r.level=this.level),e.F8C<this.conditions.length&&(r.conditions=this.conditions),this.obj=r},t.customizeCellFunction=e.x4C,t}(),qn.GridCell=Gn,Wn=De||(De={}),jn=Wn._view||(Wn._view={}),Yn=jn.grid||(jn.grid={}),Xn=Yn.vo||(Yn.vo={}),Kn=function(){function e(){this.styleNames=[],this.customStyleNames=[],this.css={}}return e.prototype.addStyle=function(e){-r.O8C==this.styleNames.indexOf(e)&&this.styleNames.push(e)},e.prototype.addCustomStyle=function(e){-r.O8C==this.customStyleNames.indexOf(e)&&this.customStyleNames.push(e)},e.prototype.addCSS=function(e){for(var t in e)this.css[t]=e[t]},e.prototype.getClassString=function(){return this.styleNames.join(r.s4C)},e.prototype.getCustomClassString=function(){return this.customStyleNames.join(r.s4C)},e.prototype.getStyleString=function(){var e,i=r.C4C;for(e in this.css)i+=e+t.t7C+this.css[e]+t.F9Q;return i},e}(),Xn.CellStyle=Kn,Qn=De||(De={}),Jn=Qn._view||(Qn._view={}),Zn=Jn.grid||(Jn.grid={}),$n=Zn.vo||(Zn.vo={}),ea=function(){function e(){}return e.getFontStyle=function(t){return r.m0C<t?e.BOLD:e.NORMAL},e.NORMAL=r.C4C,e.BOLD="Bold",e}(),$n.FontStylePDFType=ea,ea=function(){var e="fill",s="border-color",n="background-image";function a(){}return a.prototype.merge=function(e){this.color=this.color||e.color,this.backgroundColor=this.backgroundColor||e.backgroundColor,this.backgroundImage=this.backgroundImage||e.backgroundImage,this.borderColor=this.borderColor||e.borderColor,this.fontSize=this.fontSize||e.fontSize,this.fontWeight=this.fontWeight||e.fontWeight,this.textAlign=this.textAlign||e.textAlign,this.fontFamily=this.fontFamily||e.fontFamily,this.width=this.width||e.width,this.maxWidth=this.maxWidth||e.maxWidth,this.height=this.height||e.height,this.maxHeight=this.maxHeight||e.maxHeight},a.prototype.clone=function(){var e=new a;return e.color=this.color,e.backgroundColor=this.backgroundColor,e.backgroundImage=this.backgroundImage,e.borderColor=this.borderColor,e.fontSize=this.fontSize,e.fontWeight=this.fontWeight,e.textAlign=this.textAlign,e.fontFamily=this.fontFamily,e.width=this.width,e.maxWidth=this.maxWidth,e.height=this.height,e.maxHeight=this.maxHeight,e},a.fromItem=function(t,l){var h=i,c=o,d=r;void d.F8C===l&&(l=d.x4C);var u=new a;return(d.x4C==l||d.x4C!=l&&l.css(c.W2B)!=t.css(c.W2B))&&(u.color=t.css(c.W2B)),(d.x4C==l||d.x4C!=l&&l.css(c.F4B)!=t.css(c.F4B))&&(u.backgroundColor=t.css(c.F4B)),(d.x4C==l||d.x4C!=l&&l.css(n)!=t.css(n))&&(u.backgroundImage=t.css(n)),(d.x4C==l||d.x4C!=l&&l.css(s)!=t.css(s))&&(u.borderColor=t.css(s)),(d.x4C==l||d.x4C!=l&&l.css(c.b0B)!=t.css(c.b0B))&&(u.fontSize=parseInt(t.css(c.b0B))),(d.x4C==l||d.x4C!=l&&l.css(c.M4B)!=t.css(c.M4B))&&(u.fontWeight=t.css(c.M4B)),(d.x4C==l||d.x4C!=l&&l.css(e)!=t.css(e))&&(u.fill=t.css(e)),(d.x4C==l||d.x4C!=l&&l.css(c.b4B)!=t.css(c.b4B))&&(u.textAlign=t.css(c.b4B)),(d.x4C==l||d.x4C!=l&&l.css(c.M0B)!=t.css(c.M0B))&&(u.fontFamily=t.css(c.M0B)),(d.x4C==l||d.x4C!=l&&l.css(d.s2C)!=t.css(d.s2C))&&(u.width=parseInt(t.css(d.s2C))),(d.x4C==l||d.x4C!=l&&l.css(h.L8Y)!=t.css(h.L8Y))&&(u.maxWidth=parseInt(t.css(h.L8Y))),(d.x4C==l||d.x4C!=l&&l.css(d.O2C)!=t.css(d.O2C))&&(u.height=parseInt(t.css(d.O2C))),(d.x4C==l||d.x4C!=l&&l.css(h.a8Y)!=t.css(h.a8Y))&&(u.maxHeight=parseInt(t.css(h.a8Y))),u},a.fromClass=function(e,t,i){var o=r;void o.F8C===t&&(t=o.x4C),void o.F8C===i&&(i=!o.F8C);var s=new h.UIElement(o.r4C);return s.addClass(e).hide(),e=new h.UIElement(o.r4C),o.x4C==t?Jn.PivotView.stage.container.append(s).append(e):t.append(s).append(e),t=a.fromItem(s,i?e:o.x4C),s.remove(),e.remove(),t},a.fromString=function(e){var i=r,o=new a,s=i.F8C;for(e=e.replace(/ /g,t.F9Q);-i.O8C<(s=e.indexOf(t.F9Q));)this.defineStyle(e.substring(i.F8C,s),o),e=e.substring(s+i.O8C);return o},a.hexToRgb=function(e){var i=r;return e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,i,r){return t+t+i+i+r+r}),e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),i.x4C==e?i.C4C:"rgb("+parseInt(e[i.O8C],i.Q8C)+t.k6C+parseInt(e[i.M8C],i.Q8C)+t.k6C+parseInt(e[i.b8C],i.Q8C)+t.z9Q},a.defineStyle=function(t,a){var l=o,h=r;-h.O8C<t.indexOf(l.F4B)?a.backgroundColor=this.hexToRgb(t.substring(h.k8C,t.length)):-h.O8C<t.indexOf(n)?a.backgroundImage=t.substring(h.k8C,t.length):-h.O8C<t.indexOf(s)?a.borderColor=this.hexToRgb(t.substring(h.h8C,t.length)):-h.O8C<t.indexOf(l.W2B)?a.color=this.hexToRgb(t.substring(h.o8C,t.length)):-h.O8C<t.indexOf(l.b0B)?a.fontSize=parseInt(t.substring(h.L8C,t.length)):-h.O8C<t.indexOf(e)?a.fill=this.hexToRgb(t.substring(h.g8C,t.length)):-h.O8C<t.indexOf(l.b4B)?a.textAlign=t.substring(h.a8C,t.length):-h.O8C<t.indexOf(i.L8Y)?a.maxWidth=parseInt(t.substring(h.L8C,t.length)):-h.O8C<t.indexOf(i.a8Y)?a.maxHeight=parseInt(t.substring(h.a8C,t.length)):-h.O8C<t.indexOf(h.s2C)&&(a.width=parseInt(t.substring(h.o8C,t.length)))},a.fromItemToString=function(e,i,o){var s=r;void s.F8C===i&&(i=s.x4C),void s.F8C===o&&(o=s.x4C);var n=s.C4C;s.x4C==i&&(i=a.DEFAULT_CSS_PROPERIES);for(var l=s.F8C;l<i.length;l++)(s.x4C==o||s.x4C!=o&&e.css(i[l])!=o.css(i[l]))&&(n+=i[l]+t.t7C+e.css(i[l])+t.F9Q);return n},a.fromClassToString=function(e,t,i,o){var s=r;void s.F8C===t&&(t=s.x4C),void s.F8C===i&&(i=s.x4C),void s.F8C===o&&(o=void s.F8C);var n=new h.UIElement(s.r4C);return n.addClass(e).hide(),void s.F8C===o&&(o=new h.UIElement(s.r4C)).hide(),s.x4C==t?Jn.PivotView.stage.container.append(n).append(o):t.append(n).append(o),e=a.fromItemToString(n,i,o),n.remove(),s.x4C!=o&&o.remove(),e},a.parseRGB=function(e){var i=r,o=[],s=e.split("rgb");for(i.M8C<s.length&&(e=s[i.M8C]),e=(e=e.replace(/[^\d,]/g,i.C4C)).split(t.k6C),s=i.F8C;s<e.length;s++)o[s]=parseInt(e[s]);return void i.F8C==o[i.b8C]&&(o[i.b8C]=i.O8C),o},a.DEFAULT_CSS_PROPERIES="background-color background-image color font-family font-size font-weight text-align padding-top padding-left padding-right padding-bottom border border-top-width border-top-color border-top-style border-bottom-width border-bottom-color border-bottom-style border-left-width border-left-color border-left-style border-right-width border-right-color border-right-style".split(r.s4C),a}(),$n.StyleValueObject=ea,ta=De||(De={}),ia=ta._view||(ta._view={}),ra=ia.grid||(ia.grid={}),oa=ra.vo||(ra.vo={}),sa=function(){function e(){}return e.TITLE=i.k8Y,e.CELL="wdr-cell",e.CELL_EMPTY="wdr-empty",e.SHEET_HEADER="wdr-sheet-header",e.HEADER="wdr-header",e.HEADER_COLUMN="wdr-header-c",e.HEADER_ROW="wdr-header-r",e.MEASURE_HEADER="wdr-measure-header",e.FILTER_HEADER="wdr-filter-header",e.PAGE_HEADER="wdr-page-header",e.PAGE_HEADER_ITEMS="wdr-page-header-items",e.FILTER_ICON="wdr-filter-icon",e.FILTERED=i.m8Y,e.FILTERED_ICON="wdr-filtered-icon",e.HEADER_DRAGGABLE=r.k4C,e.HEADER_DROPPABLE=r.I4C,e.TOTAL="wdr-total",e.GRAND_TOTAL="wdr-grand-total",e.HIERARCHY="wdr-hierarchy-link",e.LINK="wdr-link",e.V_SORT="wdr-v-sort",e.V_SORT_ICON="wdr-v-sort-icon",e.V_SORT_ASC="wdr-v-sort-asc",e.V_SORT_DESC="wdr-v-sort-desc",e.H_SORT="wdr-h-sort",e.H_SORT_ICON="wdr-h-sort-icon",e.H_SORT_ASC="wdr-h-sort-asc",e.H_SORT_DESC="wdr-h-sort-desc",e.SORT_ICON="wdr-sort-icon",e.EXPANDED="wdr-expanded",e.EXPANDED_ICON="wdr-expanded-icon",e.COLLAPSED="wdr-collapsed",e.COLLAPSED_ICON="wdr-collapsed-icon",e.LEVEL=i.D0Y,e.DRILLED_UP="wdr-drilled-up",e.DRILLED_DOWN="wdr-drilled-down",e.ICON="wdr-icon",e}(),oa.GridStyleName=sa,na=De||(De={}),aa=na._view||(na._view={}),la=aa.grid||(aa.grid={}),ha=la.vo||(la.vo={}),ca=function(){function e(){}return e.LEFT_ICON="left icon",e.MAIN_ICON="main icon",e.RIGHT_ICON="right icon",e.LABEL=t.m3C,e.DRILL="drill",e.LINK="link",e.BACKGROUND="backgroud",e}(),ha.GridCellElementType=ca,da=De||(De={}),ua=da._view||(da._view={}),pa=ua.grid||(ua.grid={}),Ca=pa.sheet||(pa.sheet={}),fa=function(){var e=r,t=15e5;function s(){this._cellMaxHeight=this._cellMaxWidth=this._dataContentHeight=this._dataContentWidth=-e.O8C,this.filtersHeight=this.titleHeight=this.scrollLeft=this.scrollTop=this.firstDataColIdx=this.firstDataRowIdx=this.frozenRowsCount=this.frozenColsCount=this.dataRowsCount=this.dataColsCount=this._sheetHeaderHeight=this._sheetHeaderWidth=e.F8C,this._scaleTreshold=t,this._scaleY=this._scaleX=e.O8C,this._colsWidth=[],this._rowsHeight=[],this._colsWidthPending=[],this._rowsHeightPending=[],this._colsWidthExplicit=[],this._rowsHeightExplicit=[],this._scrollBarSize=s.getScrollBarSize(),this._scaleTreshold=s.getScaleTreshold(),this._sheetHeaderWidth=s.SHEET_HEADER_WIDTH,this._sheetHeaderHeight=s.SHEET_HEADER_HEIGHT,this.setDefaults()}return Object.defineProperty(s.prototype,"gridStartY",{get:function(){return this.titleHeight+this.filtersHeight},enumerable:!e.F8C,configurable:!e.F8C}),s.getScrollBarSize=function(){return Be.browserVersion().isMobile||Be.OSUtil.isMac?e.F8C:Be.browserVersion().isEdge?e.e8C:e.k8C},s.getScaleTreshold=function(){return Be.detectBrowser().isChrome||Be.detectBrowser().isFirefox?1e7:t},s.prototype.clearColSizes=function(t){this._colsWidth.length>t&&(this._colsWidth.length=t),this._colsWidthPending.length>t&&(this._colsWidthPending.length=t),this._colsWidthExplicit.length>t&&(this._colsWidthExplicit.length=t),this._dataContentWidth=-e.O8C},s.prototype.clearRowSizes=function(t){this._rowsHeight.length>t&&(this._rowsHeight.length=t),this._rowsHeightPending.length>t&&(this._rowsHeightPending.length=t),this._rowsHeightExplicit.length>t&&(this._rowsHeightExplicit.length=t),this._dataContentHeight=-e.O8C},s.prototype.reset=function(){this._colsWidth.length=e.F8C,this._rowsHeight.length=e.F8C,this._colsWidthPending.length=e.F8C,this._rowsHeightPending.length=e.F8C,this._colsWidthExplicit.length=e.F8C,this._rowsHeightExplicit.length=e.F8C,this._dataContentHeight=this._dataContentWidth=-e.O8C,this.filtersHeight=this.titleHeight=this.scrollLeft=this.scrollTop=this.firstDataColIdx=this.firstDataRowIdx=this.frozenRowsCount=this.frozenColsCount=this.dataRowsCount=this.dataColsCount=e.F8C,this._sheetHeaderWidth=s.SHEET_HEADER_WIDTH,this._sheetHeaderHeight=s.SHEET_HEADER_HEIGHT,this._scaleY=this._scaleX=e.O8C,this._cellMaxHeight=this._cellMaxWidth=-e.O8C,this.setDefaults()},s.prototype.setDefaults=function(){var t=ua.grid.vo.StyleValueObject.fromClass(Be.browserVersion().isMobile?"wdr-grid-column-mobile":"wdr-grid-column");s.CELL_WIDTH=isNaN(t.width)?e.o0C:Math.max(s.CELL_MIN_WIDTH,t.width),isNaN(t.maxWidth)||(this._cellMaxWidth=Math.max(s.CELL_MIN_WIDTH,t.maxWidth)),t=ua.grid.vo.StyleValueObject.fromClass(Be.browserVersion().isMobile?"wdr-grid-row-mobile":"wdr-grid-row"),s.CELL_HEIGHT=isNaN(t.height)?e.I8C:Math.max(s.CELL_MIN_HEIGHT,t.height),isNaN(t.maxHeight)||(this._cellMaxHeight=Math.max(s.CELL_MIN_HEIGHT,t.maxHeight))},Object.defineProperty(s.prototype,"cellMaxWidth",{get:function(){return this._cellMaxWidth},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(s.prototype,"cellMaxHeight",{get:function(){return this._cellMaxHeight},enumerable:!e.F8C,configurable:!e.F8C}),s.prototype.setScale=function(){var t=this.calcRangeHeight(this.frozenRowsCount,this.frozenRowsCount+this.dataRowsCount);this._scaleY=t>this._scaleTreshold?this._scaleTreshold/t:e.O8C,t=this.calcRangeWidth(this.frozenColsCount,this.frozenColsCount+this.dataColsCount),this._scaleX=t>this._scaleTreshold?this._scaleTreshold/t:e.O8C},s.prototype.resize=function(t,i,r){void e.F8C===r&&(r=!e.O8C),this._layoutWidth=t,this._layoutHeight=i,r&&(this._originalWidth=t,this._originalHeight=i)},Object.defineProperty(s.prototype,"scrollBarWidth",{get:function(){return this.hasVerticalScroll?this._scrollBarSize:e.F8C},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(s.prototype,"scrollBarHeight",{get:function(){return this.hasHorizontalScroll?this._scrollBarSize:e.F8C},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(s.prototype,"scrollBarSize",{get:function(){return this._scrollBarSize},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(s.prototype,"originalWidth",{get:function(){return this._originalWidth},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(s.prototype,"originalHeight",{get:function(){return this._originalHeight},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(s.prototype,"layoutWidth",{get:function(){return this._layoutWidth},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(s.prototype,"layoutHeight",{get:function(){return this._layoutHeight},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(s.prototype,"availableHeight",{get:function(){return this._layoutHeight-this.scrollBarHeight-this.gridStartY},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(s.prototype,"availableWidth",{get:function(){return this._layoutWidth-this.scrollBarWidth},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(s.prototype,o.q6B,{get:function(){return this._layoutWidth-this.rowHeadersWidth},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(s.prototype,o.u6B,{get:function(){return this._layoutHeight-this.colHeadersHeight-this.gridStartY},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(s.prototype,"maxColsCount",{get:function(){return this.frozenColsCount+this.dataColsCount},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(s.prototype,"maxRowsCount",{get:function(){return this.frozenRowsCount+this.dataRowsCount},enumerable:!e.F8C,configurable:!e.F8C}),s.prototype.getRowHeight=function(t){var i=isNaN(this._rowsHeight[t])?s.CELL_HEIGHT:this._rowsHeight[t];return e.F8C<this.cellMaxHeight&&!this.isRowHeightExplicit(t)?Math.min(this.cellMaxHeight,i):i},s.prototype.setRowHeight=function(t,i,r,o){void e.F8C===r&&(r=!e.O8C),void e.F8C===o&&(o=!e.O8C),i=Math.max(i,s.CELL_MIN_HEIGHT),r?(isNaN(this._rowsHeightPending[t])||i>this._rowsHeightPending[t])&&(this._rowsHeightPending[t]=i):(this._rowsHeight[t]=i,this._dataContentHeight=-e.O8C),o&&(this._rowsHeightExplicit[t]=!e.F8C)},s.prototype.resetRowHeight=function(t){this.isRowHeightExplicit(t)&&(delete this._rowsHeight[t],delete this._rowsHeightPending[t],delete this._rowsHeightExplicit[t],this._dataContentHeight=-e.O8C)},s.prototype.getColWidth=function(t){if(-e.O8C==t)return this.getSheetHeaderWidth();if(t>=this.maxColsCount)return Math.max(e.o0C,s.CELL_WIDTH);var i=isNaN(this._colsWidth[t])?s.CELL_WIDTH:this._colsWidth[t];return e.F8C<this.cellMaxWidth&&!this.isColWidthExplicit(t)?Math.min(this.cellMaxWidth,i):i},s.prototype.setColWidth=function(t,i,r,o){void e.F8C===r&&(r=!e.O8C),void e.F8C===o&&(o=!e.O8C),i=Math.max(i,s.CELL_MIN_WIDTH),r?(isNaN(this._colsWidthPending[t])||i>this._colsWidthPending[t])&&(this._colsWidthPending[t]=i):(-e.O8C==t?this._sheetHeaderWidth=i:this._colsWidth[t]=i,this._dataContentWidth=-e.O8C),o&&(this._colsWidthExplicit[t]=!e.F8C)},s.prototype.resetColWidth=function(t){this.isColWidthExplicit(t)&&(delete this._colsWidth[t],delete this._colsWidthPending[t],delete this._colsWidthExplicit[t],this._dataContentWidth=-e.O8C)},s.prototype.isColWidthExplicit=function(t){return!e.F8C===this._colsWidthExplicit[t]},s.prototype.isRowHeightExplicit=function(t){return!e.F8C===this._rowsHeightExplicit[t]},s.prototype.applyPendingSizes=function(){for(var t=e.F8C;t<this._rowsHeightPending.length;t++)if(!this.isRowHeightExplicit(t)){var i=this._rowsHeightPending[t];!isNaN(i)&&i>this.getRowHeight(t)&&this.setRowHeight(t,i)}for(this._rowsHeightPending.length=e.F8C,t=-e.O8C;t<this._colsWidthPending.length;t++)this.isColWidthExplicit(t)||(i=this._colsWidthPending[t],!isNaN(i)&&i>this.getColWidth(t)&&this.setColWidth(t,i));this._colsWidthPending.length=e.F8C},s.prototype.getRowIndexAtPosition=function(t,i){void e.F8C===i&&(i=!e.O8C);var r=t/this.dataContentHeight*(this.layoutHeight/this._scaleY-this.layoutHeight)*this._scaleY;if(e.O8C!=this._scaleY&&t+r>=this.dataContentHeight-this.layoutHeight){var o=this.maxRowsCount;for(r=this.dataContentHeight;r>t;)r-=this.getRowHeight(o),o--;return o+e.O8C}o=i?e.F8C:this.frozenRowsCount;for(var s=e.F8C;s<t+r;)s+=this.getRowHeight(o)*this._scaleY,o++;return o},s.prototype.getColIndexAtPosition=function(t,i){void e.F8C===i&&(i=!e.O8C);var r=t/this.dataContentWidth*(this.layoutWidth/this._scaleX-this.layoutWidth)*this._scaleX;if(e.O8C!=this._scaleX&&t+r>=this.dataContentWidth-this.layoutWidth){var o=this.maxColsCount;for(r=this.dataContentWidth;r>t;)r-=this.getColWidth(o),o--;return o+e.O8C}o=i?e.F8C:this.frozenColsCount;for(var s=e.F8C;s<t+r;)s+=this.getColWidth(o)*this._scaleX,o++;return o},s.prototype.getVisibleRowsCount=function(t){for(var i=e.F8C,r=e.F8C,o=this.dataHeight;r<o;)r+=this.getRowHeight(t+i),i++;return i},s.prototype.getVisibleColsCount=function(t){for(var i=e.F8C,r=e.F8C,o=this.dataWidth;r<o;)r+=this.getColWidth(t+i),i++;return i},Object.defineProperty(s.prototype,"dataContentWidth",{get:function(){return e.F8C<=this._dataContentWidth?this._dataContentWidth:this._dataContentWidth=e.O8C>this._scaleX?this._scaleTreshold:this.calcRangeWidth(this.frozenColsCount,this.frozenColsCount+this.dataColsCount)},enumerable:!e.F8C,configurable:!e.F8C}),s.prototype.calcRangeWidth=function(t,i){if(t>=i)return e.F8C;var r,o=e.F8C,n=e.F8C,a=e.F8C;for(r in this._colsWidth)a=parseInt(r),!isNaN(a)&&!isNaN(this._colsWidth[a])&&a>=t&&a<i&&(n++,o+=this.getColWidth(a));return o+=((a=Math.min(i,this.maxColsCount))-t-n)*(e.F8C<this.cellMaxWidth?Math.min(this.cellMaxWidth,s.CELL_WIDTH):s.CELL_WIDTH),i>=this.maxColsCount&&(o+=(i-this.maxColsCount)*this.getColWidth(i)),o},Object.defineProperty(s.prototype,"dataContentHeight",{get:function(){return e.F8C<=this._dataContentHeight?this._dataContentHeight:this._dataContentHeight=e.O8C>this._scaleY?this._scaleTreshold:this.calcRangeHeight(this.frozenRowsCount,this.frozenRowsCount+this.dataRowsCount)},enumerable:!e.F8C,configurable:!e.F8C}),s.prototype.calcRangeHeight=function(t,i){if(t>=i)return e.F8C;var r,o=e.F8C,n=e.F8C,a=e.F8C;for(r in this._rowsHeight)a=parseInt(r),!isNaN(a)&&!isNaN(this._rowsHeight[a])&&a>=t&&a<i&&(n++,o+=this.getRowHeight(a));return o+(i-t-n)*(e.F8C<this.cellMaxHeight?Math.min(this.cellMaxHeight,s.CELL_HEIGHT):s.CELL_HEIGHT)},s.prototype.clearCache=function(){this._dataContentWidth=this._dataContentHeight=-e.O8C},Object.defineProperty(s.prototype,"minDataWidth",{get:function(){for(var t=e.F8C,i=this.frozenColsCount+this.dataColsCount,r=this.frozenColsCount;r<i;r++)if((t+=this.getColWidth(r))>s.MIN_DATA_WIDTH)return s.MIN_DATA_WIDTH;return t},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(s.prototype,"rowHeadersWidth",{get:function(){for(var t=this.getSheetHeaderWidth(),i=e.F8C;i<this.frozenColsCount;i++)t+=this.getColWidth(i);return t},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(s.prototype,"colHeadersHeight",{get:function(){for(var t=this.getSheetHeaderHeight(),i=e.F8C;i<this.frozenRowsCount;i++)t+=this.getRowHeight(i);return t},enumerable:!e.F8C,configurable:!e.F8C}),s.prototype.getSheetHeaderWidth=function(){return da.model._options.OptionsManager.showHeaders?this._sheetHeaderWidth:e.F8C},s.prototype.getSheetHeaderHeight=function(){return da.model._options.OptionsManager.showHeaders?this._sheetHeaderHeight:e.F8C},s.prototype.getColIndexWithUndefinedWidth=function(){for(var t=this.frozenColsCount;t<this.dataColsCount;t++)if(!this.isColWidthDefined(t))return t;return e.x4C},s.prototype.getColIndicesWithUndefinedWidth=function(e){for(var t=[],i=this.frozenColsCount;i<this.dataColsCount&&(this.isColWidthDefined(i)||(t.push(i),!(t.length>=e)));i++);return t},s.prototype.isColWidthDefined=function(t,i){return void e.F8C===i&&(i=!e.F8C),!isNaN(this._colsWidth[t])||(i?!isNaN(this._colsWidthPending[t]):!e.O8C)},Object.defineProperty(s.prototype,"hasHorizontalScroll",{get:function(){return this.dataContentWidth+(this.dataContentHeight>this.dataHeight?this.scrollBarSize:e.F8C)>this.dataWidth},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(s.prototype,"hasVerticalScroll",{get:function(){return this.dataContentHeight+(this.dataContentWidth>this.dataWidth?this.scrollBarSize:e.F8C)>this.dataHeight},enumerable:!e.F8C,configurable:!e.F8C}),s.prototype.getRowY=function(t,i){return void e.F8C===i&&(i=!e.O8C),(da.model._options.OptionsManager.showHeaders&&i?this.getSheetHeaderHeight():e.F8C)+this.calcRangeHeight(i?e.F8C:this.frozenRowsCount,t)},s.prototype.getColX=function(t,i){return void e.F8C===i&&(i=!e.O8C),(da.model._options.OptionsManager.showHeaders&&i?this.getSheetHeaderWidth():e.F8C)+this.calcRangeWidth(i?e.F8C:this.frozenColsCount,t)},Object.defineProperty(s.prototype,"canDrawAll",{get:function(){return Be.browserVersion().isEdge||Be.browserVersion().isMsie?!e.O8C:e.m0C>this.maxColsCount*this.maxRowsCount},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(s.prototype,"canDrawSmooth",{get:function(){return Be.browserVersion().isEdge||Be.browserVersion().isMsie?!e.O8C:(this.hasVerticalScroll||this.hasHorizontalScroll)&&i.v4Y>this.maxColsCount*this.maxRowsCount},enumerable:!e.F8C,configurable:!e.F8C}),s.prototype.getBoundTop=function(t){return void e.F8C===t&&(t=!e.O8C),this.canDrawAll?this.frozenRowsCount:t?Math.max(this.frozenRowsCount,this.firstDataRowIdx-s.ROWS_OFFSET):Math.max(this.frozenRowsCount,this.firstDataRowIdx)},s.prototype.getBoundLeft=function(t){return void e.F8C===t&&(t=!e.O8C),this.canDrawAll?this.frozenColsCount:t?Math.max(this.frozenColsCount,this.firstDataColIdx-s.COLS_OFFSET):Math.max(this.frozenColsCount,this.firstDataColIdx)},s.prototype.getBoundBottom=function(t){void e.F8C===t&&(t=!e.O8C);var i=this.getVisibleRowsCount(this.firstDataRowIdx);return this.canDrawAll?this.hasVerticalScroll?this.maxRowsCount:this.firstDataRowIdx+i:t?Math.min(this.firstDataRowIdx+i+(this.hasVerticalScroll?s.ROWS_OFFSET:e.F8C),this.hasVerticalScroll?this.maxRowsCount:Number.MAX_VALUE):this.firstDataRowIdx+i},s.prototype.getBoundRight=function(t){void e.F8C===t&&(t=!e.O8C);var i=this.getVisibleColsCount(this.firstDataColIdx);return this.canDrawAll?this.hasHorizontalScroll?this.maxColsCount:this.firstDataColIdx+i:t?Math.min(this.firstDataColIdx+i+(this.hasHorizontalScroll?s.COLS_OFFSET:e.F8C),this.hasHorizontalScroll?this.maxColsCount:Number.MAX_VALUE):this.firstDataColIdx+i},s.prototype.isOnColEdge=function(t){return void e.F8C===t&&(t=NaN),isNaN(t)&&(t=this.getBoundRight()),e.F8C<this.scrollLeft&&t>=this.maxColsCount},s.prototype.isOnRowEdge=function(t){return void e.F8C===t&&(t=NaN),isNaN(t)&&(t=this.getBoundBottom()),e.F8C<this.scrollTop&&t>=this.maxRowsCount},s.prototype.getColEdgeOffset=function(t){return void e.F8C===t&&(t=NaN),isNaN(t)&&(t=this.firstDataColIdx),this.isOnColEdge()?this.dataContentWidth-this.scrollLeft-this.calcRangeWidth(t,this.maxColsCount):e.F8C},s.prototype.getRowEdgeOffset=function(t){return void e.F8C===t&&(t=NaN),isNaN(t)&&(t=this.firstDataRowIdx),this.isOnRowEdge()?this.dataContentHeight-this.scrollTop-this.calcRangeHeight(t,this.maxRowsCount):e.F8C},s.prototype.getRowIdxByRelativePosition=function(t,i){if(t<this.gridStartY)return NaN;if(da.model._options.OptionsManager.showHeaders&&t<this.gridStartY+this.getSheetHeaderHeight())return-e.O8C;var r=e.F8C,o=this.gridStartY+this.getSheetHeaderHeight();if(t>this.colHeadersHeight)if(r=this.firstDataRowIdx,o=this.gridStartY+this.colHeadersHeight,i&&r>this.frozenRowsCount){var s=this.scrollTop-this.getRowY(r-e.O8C);e.F8C<s&&(o-=s,r--)}else i||(t-=this.getRowEdgeOffset());for(;o<t;)o+=this.getRowHeight(r),r++;return r-e.O8C},s.prototype.getColIdxByRelativePosition=function(t,i){if(da.model._options.OptionsManager.showHeaders&&t<this.getSheetHeaderWidth())return-e.O8C;var r=e.F8C,o=this.getSheetHeaderWidth();if(t>this.rowHeadersWidth)if(r=this.firstDataColIdx,o=this.rowHeadersWidth,i&&r>this.frozenColsCount){var s=this.scrollLeft-this.getColX(r-e.O8C);e.F8C<s&&(o-=s,r--)}else i||(t-=this.getColEdgeOffset());for(;o<t;)o+=this.getColWidth(r),r++;return r-e.O8C},s.prototype.getRelativeRowY=function(t,i,r){void e.F8C===r&&(r=!e.F8C);var o=e.F8C,s=(r?this.gridStartY:e.F8C)+this.getSheetHeaderHeight();return t>this.frozenRowsCount&&(o=this.firstDataRowIdx,s=(r?this.gridStartY:e.F8C)+this.colHeadersHeight,o<=t&&(s+=i?this.getRowY(this.firstDataRowIdx)-this.scrollTop:this.getRowEdgeOffset())),s+this.calcRangeHeight(o,t)},s.prototype.getRelativeColX=function(t,i){var r=e.F8C,o=this.getSheetHeaderWidth();return t>this.frozenColsCount&&(r=this.firstDataColIdx,o=this.rowHeadersWidth,r<=t&&(o+=i?this.getColX(this.firstDataColIdx)-this.scrollLeft:this.getColEdgeOffset())),o+this.calcRangeWidth(r,t)},s.prototype.isRowHeightDefault=function(e){return isNaN(this._rowsHeight[e])},Object.defineProperty(s.prototype,"freeSpaceRight",{get:function(){return this.scrollLeft+this.dataWidth-this.dataContentWidth-this.scrollBarWidth},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(s.prototype,"freeSpaceTop",{get:function(){return this.scrollTop+this.dataHeight-this.dataContentHeight-this.scrollBarHeight},enumerable:!e.F8C,configurable:!e.F8C}),s.ROWS_OFFSET=e.g8C,s.COLS_OFFSET=e.g8C,s.CELL_WIDTH=e.o0C,s.CELL_HEIGHT=e.I8C,s.CELL_MIN_WIDTH=e.V0C,s.CELL_MIN_HEIGHT=e.I8C,s.SHEET_HEADER_HEIGHT=e.y8C,s.SHEET_HEADER_WIDTH=e.y8C,s.MIN_DATA_WIDTH=e.A0C,s}(),Ca.GridCoords=fa,ma=De||(De={}),ga=ma._view||(ma._view={}),ya=ga.grid||(ga.grid={}),_a=ya.sheet||(ya.sheet={}),va=function(e){function o(t,i){var o=e.call(this,r.r4C)||this;return o._isDirty=!r.O8C,o.cell=new Lu,o._coords=t,o._getDataFunc=i,o.element.addEventListener(r.H2C,function(e){return o.onMouseEvent(e)}),o}return Ga(o,e),o.prototype.calculateSizes=function(e){var t=r;void t.F8C===e&&(e=!t.O8C);for(var i=!t.O8C,o=this.element.children,s=t.F8C;s<o.length;s++)for(var n=o.item(s),a=(i=this.updateRowHeight(n,!t.F8C)||i,n=n.children,t.F8C);a<n.length;a++)i=this.updateColWidth(n.item(a),e)||i;this._isDirty=i},Object.defineProperty(o.prototype,"isDirty",{get:function(){return this._isDirty},enumerable:!r.F8C,configurable:!r.F8C}),o.prototype.updateRowHeight=function(e,t){var o=r;if(void o.F8C===t&&(t=!o.O8C),o.x4C!=this._coords){var s=!o.O8C,n=parseInt(e.getAttribute(i.l4Y));if(isNaN(n)||this._coords.isRowHeightExplicit(n))return!o.O8C;var a=e.clientHeight;return this._coords.getRowHeight(n)<a?(this._coords.setRowHeight(n,Math.round(a+o.O8C),t),s=!o.F8C):a<=_a.GridCoords.CELL_HEIGHT&&this._coords.setRowHeight(n,_a.GridCoords.CELL_HEIGHT,t),s}},o.prototype.updateColWidth=function(e,t){var o=r;if(void o.F8C===t&&(t=!o.O8C),o.x4C!=this._coords){var s=!o.O8C,n=parseInt(e.getAttribute(i.p4Y));if(isNaN(n)||e.classList.contains(ya.vo.GridStyleName.SHEET_HEADER)&&o.F8C<=n||this._coords.isColWidthExplicit(n))return!o.O8C;var a=e.clientWidth;return this._coords.getColWidth(n)<a?(this._coords.setColWidth(n,Math.round(a+o.M8C),t),s=!o.F8C):-o.O8C!=n&&a<=_a.GridCoords.CELL_WIDTH&&this._coords.setColWidth(n,_a.GridCoords.CELL_WIDTH,t),s}},o.prototype.createCell=function(e,t,o){var s=r;void s.F8C===o&&(o=!s.O8C);var n=this._getDataFunc?this._getDataFunc(e,t):s.x4C;this.cell.clear(),this.cell.tag=s.r4C,this.cell.addClass(ya.vo.GridStyleName.CELL);var a=e>=this._coords.maxRowsCount||t>=this._coords.maxColsCount;if(!n&&a&&this.cell.addClass(ya.vo.GridStyleName.CELL_EMPTY),n&&n.isRowHeader&&(this.cell.addClass(ya.vo.GridStyleName.HEADER),this.cell.addClass(ya.vo.GridStyleName.HEADER_ROW),this.cell.addClass(ya.vo.GridStyleName.LEVEL+n.level)),n&&n.isColumnHeader&&(this.cell.addClass(ya.vo.GridStyleName.HEADER),this.cell.addClass(ya.vo.GridStyleName.HEADER_COLUMN)),n&&n.isMeasureHeader&&this.cell.addClass(ya.vo.GridStyleName.MEASURE_HEADER),n&&n.isTotal&&this.cell.addClass(ya.vo.GridStyleName.TOTAL),n&&n.isGrandTotal&&this.cell.addClass(ya.vo.GridStyleName.GRAND_TOTAL),n&&n.expanded&&(this.cell.addClass(ya.vo.GridStyleName.EXPANDED),this.cell.text+=this.createIcon(ya.vo.GridStyleName.EXPANDED_ICON,ma.model._labels.Labels.TOOLTIPS_COLLAPSE_ICON)),n&&n.collapsed&&(this.cell.addClass(ya.vo.GridStyleName.COLLAPSED),this.cell.text+=this.createIcon(ya.vo.GridStyleName.COLLAPSED_ICON,ma.model._labels.Labels.TOOLTIPS_EXPAND_ICON)),this.cell.text+=n?n.label:s.C4C,n&&(n.drilledUp||n.drilledDown)&&(this.cell.text+='<span class="'+ya.vo.GridStyleName.HIERARCHY+'" title="'+(n.drilledUp?ma.model._labels.Labels.TOOLTIPS_DRILL_DOWN:ma.model._labels.Labels.TOOLTIPS_DRILL_UP)+i.Y4Y+n.getDrillLabel()+"</span>",n.drilledUp&&this.cell.addClass(ya.vo.GridStyleName.DRILLED_UP),n.drilledDown&&this.cell.addClass(ya.vo.GridStyleName.DRILLED_DOWN)),n&&n.isColumnHeader&&(n.sortable&&!n.isEmpty&&(this.cell.text=n.sortedAsc?this.cell.text+this.createIcon([ya.vo.GridStyleName.SORT_ICON,ya.vo.GridStyleName.V_SORT_ASC],ma.model._labels.Labels.TOOLTIPS_SORTED_ASC):n.sortedDesc?this.cell.text+this.createIcon([ya.vo.GridStyleName.SORT_ICON,ya.vo.GridStyleName.V_SORT_DESC],ma.model._labels.Labels.TOOLTIPS_SORTED_DESC):this.cell.text+this.createIcon([ya.vo.GridStyleName.SORT_ICON,ya.vo.GridStyleName.V_SORT_ICON],ma.model._labels.Labels.TOOLTIPS_SORT_ICON)),n.isEmpty&&this.cell.addClass(ya.vo.GridStyleName.CELL_EMPTY),n.isEmpty||this.cell.addClass(ya.vo.GridStyleName.V_SORT)),n&&n.isRowHeader&&(n.sortable&&!n.isEmpty&&(this.cell.text=n.sortedAsc?this.cell.text+this.createIcon([ya.vo.GridStyleName.SORT_ICON,ya.vo.GridStyleName.H_SORT_ASC],ma.model._labels.Labels.TOOLTIPS_SORTED_ASC):n.sortedDesc?this.cell.text+this.createIcon([ya.vo.GridStyleName.SORT_ICON,ya.vo.GridStyleName.H_SORT_DESC],ma.model._labels.Labels.TOOLTIPS_SORTED_DESC):this.cell.text+this.createIcon([ya.vo.GridStyleName.SORT_ICON,ya.vo.GridStyleName.H_SORT_ICON],ma.model._labels.Labels.TOOLTIPS_SORT_ICON)),this.cell.addClass(ya.vo.GridStyleName.H_SORT)),this.cell.attr[i.p4Y]=t,this.cell.attr[i.l4Y]=e,s.F8C!=t||ma.model._options.OptionsManager.showHeaders||(this.cell.style.height=this._coords.getRowHeight(e)+s.y4C),n&&n.style){for(var l=s.F8C;l<n.style.styleNames.length;l++)this.cell.addClass(n.style.styleNames[l]);var h;for(h in l=n.style.css)this.cell.style[h]=l[h]}return this.setCellSize(this.cell,e,t,n&&n.isValue),o&&(this.cell.style.top=this._coords.getRowY(e,e<this._coords.frozenRowsCount)+s.y4C,this.cell.style.left=this._coords.getColX(t,t<this._coords.frozenColsCount)+s.y4C),s.x4C==ya.vo.GridCell.customizeCellFunction||a||(s.x4C==n&&((n=new ya.vo.GridCell).rowIdx=e,n.colIdx=t),ya.vo.GridCell.customizeCellFunction(this.cell.node,n.toObject())),this.cell},o.prototype.isCellEmpty=function(e,t){if(this._getDataFunc){var i=this._getDataFunc(e,t);return Be.nullOrUndefined(i)||Be.nullOrEmpty(i.label)}return!r.F8C},o.prototype.setCellSize=function(e,t,o,s){var n=r;void n.F8C===s&&(s=!n.O8C),this._coords.isColWidthExplicit(o)||this._coords.isRowHeightExplicit(t)?(e.style.width=this._coords.getColWidth(o)+n.y4C,e.style.height=this._coords.getRowHeight(t)+n.y4C):(e.style["min-width"]=this._coords.getColWidth(o)+n.y4C,e.style[s?n.O2C:i.z4Y]=this._coords.getRowHeight(t)+n.y4C),!this._coords.isColWidthExplicit(o)&&n.F8C<this._coords.cellMaxWidth&&(e.style[i.L8Y]=this._coords.cellMaxWidth+n.y4C),!this._coords.isRowHeightExplicit(t)&&n.F8C<this._coords.cellMaxHeight&&(e.style[i.a8Y]=this._coords.cellMaxHeight+n.y4C)},o.prototype.createIcon=function(e,i){var o=r;void o.F8C===i&&(i=o.x4C),e instanceof Array&&(e=e.join(o.s4C));var s='<i class="'+ya.vo.GridStyleName.ICON+o.s4C+e+t.U9Q;return i&&(s+='title="'+i+t.U9Q),s+"></i>"},o.prototype.createSheetHeaderCell=function(){return this.cell.clear(),this.cell.tag=r.r4C,this.cell.addClass(ya.vo.GridStyleName.CELL),this.cell.addClass(ya.vo.GridStyleName.SHEET_HEADER),this.cell.style.width=this._coords.getSheetHeaderWidth()+r.y4C,this.cell.style.height=this._coords.getSheetHeaderHeight()+r.y4C,this.cell},o.prototype.createColumnSheetHeaderCell=function(e,t){var o=r;return void o.F8C===t&&(t=!o.O8C),this.cell.clear(),this.cell.tag=o.r4C,this.cell.addClass(ya.vo.GridStyleName.CELL),this.cell.addClass(ya.vo.GridStyleName.SHEET_HEADER),this.cell.text+=e+o.O8C,this.cell.style.width=this._coords.getColWidth(e)+o.y4C,o.F8C<this._coords.cellMaxWidth&&!this._coords.isColWidthExplicit(e)&&(this.cell.style[i.L8Y]=this._coords.cellMaxWidth+o.y4C),this.cell.style.height=this._coords.getSheetHeaderHeight()+o.y4C,this.cell.attr[i.l4Y]=-o.O8C,this.cell.attr[i.p4Y]=e,t&&(this.cell.style.left=this._coords.getColX(e,!o.O8C)+o.y4C),this.cell},o.prototype.createRowSheetHeaderCell=function(e,t){var o=i,s=r;return void s.F8C===t&&(t=!s.O8C),this.cell.clear(),this.cell.tag=s.r4C,this.cell.addClass(ya.vo.GridStyleName.CELL),this.cell.addClass(ya.vo.GridStyleName.SHEET_HEADER),this.cell.text+=e+s.O8C,this.cell.style["min-width"]=this._coords.getSheetHeaderWidth()+s.y4C,this.cell.style.height=this._coords.getRowHeight(e)+s.y4C,this.cell.style[o.K4Y]=this._coords.getRowHeight(e)-s.M8C+s.y4C,s.F8C<this._coords.cellMaxHeight&&!this._coords.isRowHeightExplicit(e)&&(this.cell.style[o.a8Y]=this._coords.cellMaxHeight+s.y4C),this.cell.attr[o.l4Y]=e,this.cell.attr[o.p4Y]=-s.O8C,t&&(this.cell.style.top=this._coords.getRowY(e,!s.O8C)+s.y4C),this.cell},o.prototype.getCellByPosition=function(e,t){var i=r,o=this._coords.getColIndexAtPosition(e)-i.O8C,s=this._coords.getRowIndexAtPosition(t)-i.O8C,n=i.x4C;return i.x4C!=this._getDataFunc&&(n=this._getDataFunc(s,o)),i.x4C==n&&((n=new ya.vo.GridCell).rowIdx=s,n.colIdx=o),n},o.prototype.getCellByElement=function(e){for(var t=r;!e.hasClass(ya.vo.GridStyleName.CELL);)if(e=e.parent,t.x4C==e)return t.x4C;var o=parseInt(e.attr(i.p4Y));e=parseInt(e.attr(i.l4Y));var s=t.x4C;return t.x4C!=this._getDataFunc&&(s=this._getDataFunc(e,o)),t.x4C==s&&((s=new ya.vo.GridCell).rowIdx=e,s.colIdx=o),s},o.prototype.onMouseEvent=function(e){var t,i=h.UIElement.convert(e.target),o=this.getCellByElement(i)||this.getCellByPosition(e.offsetX,e.offsetY);switch(e.type){case r.H2C:t=new ya.GridClickEvent(o,i)}t&&this.dispatch(t)},o.prototype.dispose=function(){e.prototype.dispose.call(this),this._coords=this._getDataFunc=r.x4C},o}(h.UIElement),_a.AbstractSheet=va,ba=De||(De={}),wa=ba._view||(ba._view={}),Fa=wa.grid||(wa.grid={}),Ea=Fa.sheet||(Fa.sheet={}),Oa=function(e){var o=r;function s(i,r){var s=e.call(this,i,r)||this;return s.SWITCH_TO_SMOOTH_DELAY=t.N6C,s._isSmooth=!o.O8C,s.addClass("wdr-sheet-canvas"),s._scrollPane=new Qa,s.addChild(s._scrollPane),s._bounds=new Ea.Bounds,s._boundsSmooth=new Ea.Bounds,s}return Ga(s,e),s.prototype.draw=function(){},s.prototype.drawSmooth=function(){},Object.defineProperty(s.prototype,i.F4Y,{get:function(){return this._isSmooth},set:function(e){this._isSmooth!=e&&(this._isSmooth=e,this.dispatchWith(this.isSmooth?s.EVENT_SWITCHED_TO_SMOOTH:s.EVENT_SWITCHED_TO_SIMPLE))},enumerable:!o.F8C,configurable:!o.F8C}),s.prototype.switchToSimple=function(){!o.O8C!=this.isSmooth&&(this._bounds.reset(),this._boundsSmooth.reset(),this.draw())},s.prototype.clearBounds=function(){this._bounds.reset()},s.prototype.clearBoundsSmooth=function(){this._boundsSmooth.reset()},s.prototype.clearAllBounds=function(){this.clearBounds(),this.clearBoundsSmooth()},s.prototype.calculateSizes=function(e){void o.F8C===e&&(e=!o.O8C);for(var t=!o.O8C,i=this._scrollPane.content.element.children,r=o.F8C;r<i.length;r++)for(var s=i.item(r),n=(t=this.updateRowHeight(s,e)||t,s=s.children,o.F8C);n<s.length;n++){var a=s.item(n);t=this.updateColWidth(a,e)||t}this._isDirty=t},s.prototype.calculateSizesSmooth=function(e){void o.F8C===e&&(e=!o.O8C);for(var t=!o.O8C,i=this.scrollPane.placeholder.element.children,r=o.F8C;r<i.length;r++){var s=i.item(r);t=this.updateColWidth(s,e)||t,t=this.updateRowHeight(s,e)||t}this._isDirty=t},s.prototype.setContentSize=function(){this._scrollPane.content.width=this._width-this._coords.scrollBarWidth,this._scrollPane.content.height=this._height-this._coords.scrollBarHeight},Object.defineProperty(s.prototype,"scrollPane",{get:function(){return this._scrollPane},enumerable:!o.F8C,configurable:!o.F8C}),Object.defineProperty(s.prototype,o.s2C,{get:function(){return this._width},set:function(e){this._width!=e&&(this.element.style.minWidth=e+o.y4C,this._width=e,this._scrollPane.width=e)},enumerable:!o.F8C,configurable:!o.F8C}),Object.defineProperty(s.prototype,o.O2C,{get:function(){return this._height},set:function(e){this._height!=e&&(this.element.style.height=e+o.y4C,this._height=e,this._scrollPane.height=e)},enumerable:!o.F8C,configurable:!o.F8C}),s.prototype.onMouseEvent=function(e){var t,i=o.x4C,r=o.x4C;if(e.target==this.scrollPane.placeholder.element?i=this.getCellByPosition(e.offsetX,e.offsetY):(r=h.UIElement.convert(e.target),i=this.getCellByElement(r)||this.getCellByPosition(e.offsetX,e.offsetY)),o.x4C!=i&&o.x4C!=r){var s=Fa.vo.GridCellElementType.BACKGROUND;r.hasClass(Fa.vo.GridStyleName.HIERARCHY)?s=Fa.vo.GridCellElementType.DRILL:r.hasClass(Fa.vo.GridStyleName.EXPANDED_ICON)||r.hasClass(Fa.vo.GridStyleName.COLLAPSED_ICON)?s=Fa.vo.GridCellElementType.LEFT_ICON:r.hasClass(Fa.vo.GridStyleName.SORT_ICON)?s=Fa.vo.GridCellElementType.RIGHT_ICON:r.hasClass(Fa.vo.GridStyleName.LINK)&&(s=Fa.vo.GridCellElementType.LINK),i.activeElementType=s}switch(e.type){case o.H2C:t=new Fa.GridClickEvent(i,r);break;case o.f4C:t=new Fa.GridMouseDownEvent(i);break;case o.R4C:t=new Fa.GridMouseUpEvent(i);break;case o.e4C:t=new Fa.GridMouseMoveEvent(i)}t&&this.dispatch(t)},s.EVENT_SWITCHED_TO_SMOOTH="switched_to_smooth",s.EVENT_SWITCHED_TO_SIMPLE="switched_to_simple",s}(Ea.AbstractSheet),Ea.BaseSheet=Oa,Sa=De||(De={}),Ta=Sa._view||(Sa._view={}),xa=Ta.grid||(Ta.grid={}),La=xa.sheet||(xa.sheet={}),Aa=function(){function e(e,t,i,o){var s=r;void s.F8C===e&&(e=s.F8C),void s.F8C===t&&(t=s.F8C),void s.F8C===i&&(i=s.F8C),void s.F8C===o&&(o=s.F8C),this.left=e,this.top=t,this.right=i,this.bottom=o}return e.prototype.set=function(e){this.left=e.left,this.top=e.top,this.right=e.right,this.bottom=e.bottom},e.prototype.reset=function(){this.bottom=this.right=this.top=this.left=r.F8C},e.prototype.contains=function(e){return this.left<=e.left&&this.top<=e.top&&this.right>=e.right&&this.bottom>=e.bottom},e.prototype.clone=function(){return new e(this.left,this.top,this.right,this.bottom)},e}(),La.Bounds=Aa,Ia=De||(De={}),Ra=Ia._view||(Ia._view={}),Da=Ra.grid||(Ra.grid={}),Na=Da.sheet||(Da.sheet={}),Ma=function(){function e(e){this.frozenCells=[],this.data=[],this.coords=e}return e.prototype.reset=function(){this.data=[],this.frozenCells=[]},e.prototype.setData=function(e,t,i,o){void r.F8C===o&&(o=!r.O8C),i.rowIdx=e,i.colIdx=t,(t<this.coords.frozenColsCount||o)&&(r.x4C==this.data[e]&&(this.data[e]=[]),this.data[e][t]=i)},e.prototype.setDataFrozen=function(e,t,i){r.x4C==this.frozenCells[e]&&(this.frozenCells[e]=[]),this.frozenCells[e][t]=i},e.prototype.positionFrozenCells=function(e){var t=r;if(t.x4C!=this.frozenCells[e]){for(var i=[],o=!t.O8C,s=t.F8C;s<this.frozenCells[e].length;s++){if(t.x4C!=this.frozenCells[e][s]||!o){var n=this.frozenCells[e][s];t.x4C!=n&&(n.colIdx=i.length),i.push(n)}t.x4C!=this.frozenCells[e][s]&&(o=!t.F8C)}this.frozenCells[e]=i}},e.prototype.cellExists=function(e,t){return void r.F8C===this.data[e]&&(this.data[e]=[]),void r.F8C!==this.data[e][t]},e.prototype.getData=function(e,t,i){var o=r;if(void o.F8C===i&&(i=!o.F8C),!o.O8C==this.cellExists(e,t)){var s=this.getDataFunction(e,t);if(o.x4C!=s&&(s.rowIdx=e,s.colIdx=t),!i)return s;this.data[e][t]=s}return o.x4C===this.data[e][t]?void o.F8C:this.data[e][t]},e.prototype.clearDataRow=function(e){var t=r;if(e<this.coords.frozenRowsCount)for(var i=this.data[e]?this.data[e].length:t.F8C,o=t.O8C;o<i;o++)this.data[e]&&(this.data[e][o]=t.x4C);else this.data[e]&&(this.data[e]=t.x4C)},e.prototype.clearDataColumn=function(e){for(var t=this.data.length,i=r.F8C;i<t;i++)r.F8C==e&&i<this.coords.frozenRowsCount||this.data[i]&&(this.data[i][e]=r.x4C)},e.prototype.getDataFrozen=function(e,t){return this.frozenCells[e]&&this.frozenCells[e][t]?this.frozenCells[e][t]:r.x4C},e.prototype.clearCell=function(e,t){r.x4C!=this.data[e]&&(this.data[e][t]=this.getData(e,t))},e.prototype.dispose=function(){this.reset(),this.getDataFunction=r.x4C},e}(),Na.SheetDataProvider=Ma,Pa=De||(De={}),Ha=Pa._view||(Pa._view={}),function(e){var o=function(){var o=r,n="blur",a="focus";function l(r){var s=this;this._to=this._from=o.x4C,this._column=this._row=-o.O8C,this._isFocused=!o.O8C,this.focusHandler=function(){s._isFocused=!o.F8C},this.blurHandler=function(){s._isFocused=!o.O8C},this.keydownHandler=function(e){return s.onKeyDown(e)},this.gridLayout=r,this.gridLayout.element.setAttribute(i.q1Y,t.O7C),this.gridLayout.element.addEventListener(a,this.focusHandler),this.gridLayout.element.addEventListener(n,this.blurHandler),this.coords=this.gridLayout.coords,this.selectionCanvas=new e.SelectionCanvas(this,this.gridLayout),this.gridLayout.addChild(this.selectionCanvas),this.keyboardListener=Be.KeyboardListener.getInstance(),this.keyboardListener.addEventListener(Be.KeyboardEvent.KEY_DOWN,this.keydownHandler)}return l.prototype.dispose=function(){this.gridLayout.element&&this.gridLayout.element.removeEventListener(a,this.focusHandler),this.gridLayout.element&&this.gridLayout.element.removeEventListener(n,this.blurHandler),this.keyboardListener.removeEventListener(Be.KeyboardEvent.KEY_DOWN,this.keydownHandler),this.keyboardListener=this.gridLayout=o.x4C},l.prototype.draw=function(){this.selectionCanvas.redraw()},l.prototype.select=function(e,t){this.deselect(),this._from=e,this._to=t,this.draw()},l.prototype.selectAll=function(){this.select(new s(o.F8C,o.F8C),new s(this.coords.getBoundRight(),this.coords.getBoundBottom()))},l.prototype.selectTo=function(e){var t=this._from;this.deselect(),this._from=t,this._to=e,this.draw()},l.prototype.selectRow=function(e){this.deselect(),this._row=e,this.draw()},l.prototype.selectColumn=function(e){this.deselect(),this._column=e,this.draw()},l.prototype.deselect=function(){this._to=this._from=o.x4C,this._column=this._row=-o.O8C},l.prototype.clear=function(){this.deselect(),this.draw()},l.prototype.isSelectedRow=function(e){return o.x4C==this._from||o.x4C==this._to?!o.O8C:this._row==e||e>=this._from.y&&e<=this._to.y||e>=this._to.y&&e<=this._from.y},l.prototype.isSelectedColumn=function(e){return o.x4C==this._from||o.x4C==this._to?!o.O8C:this._column==e||e>=this._from.x&&e<=this._to.x||e>=this._to.x&&e<=this._from.x},Object.defineProperty(l.prototype,"to",{get:function(){return this._to},enumerable:!o.F8C,configurable:!o.F8C}),Object.defineProperty(l.prototype,"from",{get:function(){return this._from},enumerable:!o.F8C,configurable:!o.F8C}),Object.defineProperty(l.prototype,"column",{get:function(){return this._column},enumerable:!o.F8C,configurable:!o.F8C}),Object.defineProperty(l.prototype,"row",{get:function(){return this._row},enumerable:!o.F8C,configurable:!o.F8C}),l.prototype.move=function(e,t,i){switch(void o.F8C===t&&(t=!o.O8C),void o.F8C===i&&(i=!o.O8C),e){case o.C8C:this.moveLeft(t,i);break;case o.P8C:this.moveUp(t,i);break;case o.U0C:this.moveRight(t,i);break;case o.v0C:this.moveDown(t,i)}},l.prototype.moveLeft=function(e,t){void o.F8C===t&&(t=!o.O8C),o.x4C!=this.from&&this.moveHorizontal(-o.O8C,t)},l.prototype.moveRight=function(e,t){void o.F8C===t&&(t=!o.O8C),o.x4C!=this.from&&this.moveHorizontal(o.O8C,t)},l.prototype.moveUp=function(e,t){void o.F8C===t&&(t=!o.O8C),o.x4C!=this.from&&this.moveVertical(-o.O8C,t)},l.prototype.moveDown=function(e,t){void o.F8C===t&&(t=!o.O8C),o.x4C!=this.from&&this.moveVertical(o.O8C,t)},l.prototype.moveHorizontal=function(e,t){void o.F8C===t&&(t=!o.O8C);var i=t?this.to.x:this.from.x,r=t?this.to.x:this.from.x,n=(i=Math.max(o.F8C,Math.min(i+e,this.coords.maxColsCount-o.O8C)),o.F8C);i<this.coords.firstDataColIdx?(n=Math.max(i,this.coords.frozenColsCount),this.gridLayout.scrollToColumn(n)):i>=this.coords.getBoundRight()-o.O8C&&(n=this.coords.firstDataColIdx+(i-r),this.gridLayout.scrollToColumn(n)),r=t?this.to.y:this.from.y,n=i,this.select(new s(t?this.from.x:i,this.from.y),new s(n,r))},l.prototype.moveVertical=function(e,t){void o.F8C===t&&(t=!o.O8C);var i=t?this.to.y:this.from.y,r=t?this.to.y:this.from.y,n=(i=Math.max(o.F8C,Math.min(i+e,this.coords.maxRowsCount-o.O8C)),o.F8C);i<this.coords.firstDataRowIdx?(n=Math.max(i,this.coords.frozenRowsCount),this.gridLayout.scrollToRow(n)):i>=this.coords.getBoundBottom()-o.O8C&&(n=this.coords.firstDataRowIdx+(i-r),this.gridLayout.scrollToRow(n)),r=i,n=t?this.to.x:this.from.x,this.select(new s(this.from.x,t?this.from.y:i),new s(n,r))},l.prototype.onKeyDown=function(e){if(o.x4C!=this.keyboardListener&&(this._isFocused||this.keyboardListener.isFocused)){var t=e.ctrlKey||e.metaKey;switch(e.keyCode){case o.m8C:t||this.gridLayout.triggerCellAction(this.gridLayout.selectedCell);break;case 65:t&&this.selectAll();break;case o.C8C:case o.P8C:case o.U0C:case o.v0C:this.move(e.keyCode,e.ctrlKey,e.shiftKey)}!t||e.altKey||e.shiftKey||this.keyboardListener.isFocused||this.copy()}},l.prototype.copy=function(){if(o.x4C!=this.from&&o.x4C!=this.to&&!(t.x1Q===typeof window.getSelection&&o.F8C<window.getSelection().toString().length||!Be.nullOrUndefined(document.selection)&&o.F8C<document.selection.createRange().text.length)){var e,i=o.C4C,r=Math.min(this.from.x,this.to.x),s=Math.max(this.from.x,this.to.x);e=Math.min(this.from.y,this.to.y);for(var n=Math.max(this.from.y,this.to.y),a=e;a<=n;a++){for(var l=r;l<=s;l++)l>r&&(i+=t.i7C),e=this.gridLayout.getCell(a,l,!o.F8C),o.x4C!=e&&(e.isFrozen&&l>e.colIdx||(i+=e.label));a<n&&(i+=t.m6C)}o.F8C<i.length&&this.keyboardListener.copy(i)}},l}();e.SelectionManager=o;var s=function(){function e(e,t){var i=r;void i.F8C===e&&(e=i.F8C),void i.F8C===t&&(t=i.F8C),this.x=e,this.y=t}return e.prototype.equals=function(e){return e.x==this.x&&e.y==this.y},e}();e.Point=s}((Ua=Ha.grid||(Ha.grid={})).sheet||(Ua.sheet={})),Ba=De||(De={}),ka=Ba._view||(Ba._view={}),Va=ka.grid||(ka.grid={}),za=Va.sheet||(Va.sheet={}),qa=function(e){var t="wdr-clear-border";function o(t,i){var o=r,s="wdr-sheet-selection-header",n="wdr-sheet-selection-canvas",a=e.call(this,o.r4C,n)||this;return a._started=!o.O8C,a.allowed=!o.F8C,a.mouseEventHandler=function(e){return a.onMouseEvent(e)},a.mouseLeaveHandler=function(e){return a.onMouseLeave(e)},a.manager=t,a.gridLayout=i,a.coords=a.gridLayout.coords,a.colOverlay=new h.UIElement(o.r4C,n),a.colOverlay.addClass(s),a.colOverlay.hide(),a.gridLayout.addChild(a.colOverlay),a.rowOverlay=new h.UIElement(o.r4C,n),a.rowOverlay.addClass(s),a.rowOverlay.hide(),a.gridLayout.addChild(a.rowOverlay),a.colFix=new h.UIElement(o.r4C,n),a.colFix.addClass("wdr-clear-border-left"),a.colFix.hide(),a.gridLayout.addChild(a.colFix),a.rowFix=new h.UIElement(o.r4C,n),a.rowFix.addClass("wdr-clear-border-top"),a.rowFix.hide(),a.gridLayout.addChild(a.rowFix),a.gridLayout.element.addEventListener(o.f4C,a.mouseEventHandler),a.gridLayout.element.addEventListener(o.R4C,a.mouseEventHandler),a}return Ga(o,e),Object.defineProperty(o.prototype,"started",{get:function(){return this._started},set:function(e){this._started=e,this.started||(this.gridLayout.element.removeEventListener(r.e4C,this.mouseEventHandler),document.removeEventListener(r.e4C,this.mouseLeaveHandler))},enumerable:!r.F8C,configurable:!r.F8C}),o.prototype.onMouseEvent=function(e){var t=r;if(!((s=e.target).classList.contains(Va.vo.GridStyleName.FILTER_HEADER)||s.classList.contains(Va.vo.GridStyleName.FILTER_ICON)||s.classList.contains(Va.vo.GridStyleName.FILTERED_ICON)||t.x4C!=h.UIElement.convert(s).closest(i.a4Y))){var o=this.gridLayout.getOffset(),s=e.clientX-o.left;if(o=e.clientY-o.top,!(s>this.coords.availableWidth||o>this.coords.gridStartY+this.coords.availableHeight||(o=this.coords.getRowIdxByRelativePosition(o,this.gridLayout.isSmooth),s=this.coords.getColIdxByRelativePosition(s,this.gridLayout.isSmooth),isNaN(o)||isNaN(s))))switch(e.type){case t.f4C:this.onMouseDown(o,s);break;case t.e4C:this.onMouseMove(o,s);break;case t.R4C:this.onMouseUp(o,s)}}},o.prototype.onMouseLeave=function(e){var t=h.UIElement.convert(this.gridLayout.element),i=e.clientX;e=e.clientY,(i<t.left||e<t.top||i>t.left+this.gridLayout.width||e>t.top+this.gridLayout.height)&&this.stopSelection()},o.prototype.select=function(e,t,i,o){this.started=!r.O8C,this.manager.select(new za.Point(t,e),new za.Point(o,i))},o.prototype.stopSelection=function(){this.started=!r.O8C},o.prototype.onMouseDown=function(e,t){this.started=!r.F8C,this.manager.select(new za.Point(t,e),new za.Point(t,e)),this.gridLayout.element.addEventListener(r.e4C,this.mouseEventHandler),Be.fmdocument.addEventListener(r.e4C,this.mouseLeaveHandler)},o.prototype.onMouseUp=function(e,t){this.started&&(this.started=!r.O8C,-r.O8C==e?this.manager.selectColumn(t):-r.O8C==t?this.manager.selectRow(e):this.manager.selectTo(new za.Point(t,e)))},o.prototype.onMouseMove=function(e,t){this.started&&(!this.manager.to||this.manager.to.x==t&&this.manager.to.y==e||this.manager.selectTo(new za.Point(t,e)))},o.prototype.preventSelection=function(){this.started=this.allowed=!r.O8C},o.prototype.allowSelection=function(){this.allowed=!r.F8C,this.started=!r.O8C},o.prototype.redraw=function(){var e=r,i="wdr-clear-border-right",o="wdr-clear-border-bottom";if(this.colOverlay.hide(),this.rowOverlay.hide(),this.colFix.hide(),this.rowFix.hide(),-e.O8C!=this.manager.row&&this.drawSelectedRow(this.manager.row),-e.O8C!=this.manager.column&&this.drawSelectedColumn(this.manager.column),e.x4C!=this.manager.from&&this.allowed){var s=Math.min(this.manager.from.x,this.manager.to.x),n=Math.min(this.manager.from.y,this.manager.to.y),a=Math.max(this.manager.from.x,this.manager.to.x),l=Math.max(this.manager.from.y,this.manager.to.y);Ba.model._options.OptionsManager.showHeaders&&this.drawHeaderSelection(s,a,n,l);var h=this.coords.availableWidth,c=this.coords.gridStartY+this.coords.availableHeight,d=Math.max(this.coords.gridStartY,this.coords.getRelativeRowY(n,this.gridLayout.isSmooth)-e.O8C),u=this.coords.getRelativeRowY(l+e.O8C,this.gridLayout.isSmooth),p=Math.min(c,u),C=Math.max(e.F8C,this.coords.getRelativeColX(s,this.gridLayout.isSmooth)-e.O8C),f=this.coords.getRelativeColX(a+e.O8C,this.gridLayout.isSmooth),m=Math.min(h,f),g=p-d,y=m-C;e.M8C>=y||e.M8C>=g?this.hide():C<h&&d<c?(this.show(),this.top=d,this.left=C,this.width=y,this.height=g,n<this.coords.frozenRowsCount&&f>m&&(this.colFix.top=d,this.colFix.left=m,this.colFix.width=Math.min(f,this.coords.layoutWidth)-m,this.colFix.height=Math.min(p,this.coords.gridStartY+this.coords.colHeadersHeight)-d,this.colFix.toggleClass(o,l>this.coords.frozenRowsCount),this.colFix.toggleClass(i,f>this.coords.layoutWidth),this.colFix.removeClass(t),this.colFix.show()),s<this.coords.frozenColsCount&&u>p&&(this.rowFix.top=p,this.rowFix.left=C,this.rowFix.width=Math.min(m,this.coords.rowHeadersWidth)-C,this.rowFix.height=Math.min(u,this.coords.layoutHeight)-p,this.rowFix.toggleClass(o,u>this.coords.layoutHeight),this.rowFix.toggleClass(i,a>this.coords.frozenColsCount),this.rowFix.removeClass(t),this.rowFix.show()),this.toggleClass(i,f>m),this.toggleClass(o,u>p)):this.hide()}else this.hide()},o.prototype.drawSelectedRow=function(e){if(!isNaN(e)){var i=this.coords.getRelativeRowY(e,this.gridLayout.isSmooth);e=this.coords.getRelativeRowY(e+r.O8C,this.gridLayout.isSmooth);var o=Math.min(this.coords.gridStartY+this.coords.availableHeight,e);i<this.coords.gridStartY+this.coords.availableHeight?(this.rowOverlay.left=r.F8C,this.rowOverlay.top=i,this.rowOverlay.width=this.coords.availableWidth,this.rowOverlay.height=o-i,this.rowOverlay.show(),e>o&&(this.rowFix.top=o,this.rowFix.left=r.F8C,this.rowFix.width=this.coords.rowHeadersWidth,this.rowFix.height=Math.min(e,this.coords.layoutHeight)-o,this.rowFix.addClass(t),this.rowFix.show())):this.rowOverlay.hide()}},o.prototype.drawSelectedColumn=function(e){if(!isNaN(e)){var i=this.coords.getRelativeColX(e,this.gridLayout.isSmooth);e=this.coords.getRelativeColX(e+r.O8C,this.gridLayout.isSmooth);var o=Math.min(this.coords.availableWidth,e);i<this.coords.availableWidth?(this.colOverlay.left=i,this.colOverlay.top=this.coords.gridStartY,this.colOverlay.width=o-i,this.colOverlay.height=this.coords.availableHeight,this.colOverlay.show(),e>o&&(this.colFix.top=this.coords.gridStartY,this.colFix.left=o,this.colFix.width=Math.min(e,this.coords.layoutWidth)-o,this.colFix.height=this.coords.colHeadersHeight,this.colFix.addClass(t),this.colFix.show())):this.colOverlay.hide()}},o.prototype.drawHeaderSelection=function(e,t,i,o){e=this.coords.getRelativeColX(e,this.gridLayout.isSmooth),t=Math.min(this.coords.layoutWidth,this.coords.getRelativeColX(t+r.O8C,this.gridLayout.isSmooth)),e<this.coords.layoutWidth?(this.colOverlay.left=e,this.colOverlay.top=this.coords.gridStartY,this.colOverlay.width=t-e,this.colOverlay.height=this.coords.getSheetHeaderHeight(),this.colOverlay.show()):this.colOverlay.hide(),i=this.coords.getRelativeRowY(i,this.gridLayout.isSmooth),o=Math.min(this.coords.layoutHeight,this.coords.getRelativeRowY(o+r.O8C,this.gridLayout.isSmooth)),this.rowOverlay.left=r.F8C,this.rowOverlay.top=i,this.rowOverlay.width=this.coords.getSheetHeaderWidth(),this.rowOverlay.height=o-i,this.rowOverlay.show()},o}(h.UIElement),za.SelectionCanvas=qa;var Wa,ja,Ya,Xa,Ka,Qa=function(e){var i=r;function s(){var t=e.call(this,i.r4C,"wdr-scroll-pane")||this;return t._placeholder=new h.UIElement(i.r4C,"wdr-scroll-placeholder"),t._content=new h.UIElement(i.r4C,"wdr-scroll-content"),t.addChild(t._content),t.addChild(t._placeholder),t}return Ga(s,e),Object.defineProperty(s.prototype,"contentWidth",{get:function(){return this._placeholder.width},set:function(e){this._placeholder.width=e},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(s.prototype,"contentHeight",{get:function(){return this._placeholder.height},set:function(e){this._placeholder.height=e},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(s.prototype,"scrollLeft",{get:function(){return this.element.scrollLeft},set:function(e){this.element.scrollLeft=e},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(s.prototype,"scrollTop",{get:function(){return this.element.scrollTop},set:function(e){this.element.scrollTop=e},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(s.prototype,"content",{get:function(){return this._content},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(s.prototype,"placeholder",{get:function(){return this._placeholder},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(s.prototype,"horizontalScroll",{set:function(e){this.element.style.overflowX=e?t.V6C:o.b5B},enumerable:!i.F8C,configurable:!i.F8C}),Object.defineProperty(s.prototype,"verticalScroll",{set:function(e){this.element.style.overflowY=e?t.V6C:o.b5B},enumerable:!i.F8C,configurable:!i.F8C}),s}(h.UIElement);Wa=De||(De={}),ja=Wa._view||(Wa._view={}),Ya=ja.grid||(ja.grid={}),Xa=Ya.sheet||(Ya.sheet={}),Ka=function(e){function t(t){var i=e.call(this,t,r.x4C)||this;return i._coords=t,i}return Ga(t,e),t.prototype.draw=function(){var e=r,t=[],o=new Lu;if(Wa.model._options.OptionsManager.showHeaders){o.tag=e.r4C,o.addClass(i.w4Y),o.text+=this.createSheetHeaderCell().toHtml();for(var s=e.F8C;s<this._coords.frozenColsCount;s++)o.text+=this.createColumnSheetHeaderCell(s).toHtml();for(t.push(o.toHtml()),s=e.F8C;s<this._coords.frozenRowsCount;s++)o.text=this.createRowSheetHeaderCell(s).toHtml(),t.push(o.toHtml())}t=t.join(e.C4C),this.element.innerHTML!=t&&this.html(t)},t.prototype.clear=function(){},t}(Xa.AbstractSheet),Xa.SheetHeaders=Ka;var Ja,Za,$a,el,tl,il,rl,ol,sl,nl,al,ll,hl,cl,dl,ul,pl,Cl,fl,ml,gl,yl,_l,vl,bl,wl,Fl,El,Ol,Sl,Tl,xl,Ll,Al,Il,Rl,Dl,Nl,Ml,Pl,Hl,Ul,Bl,kl,Vl,zl,ql,Gl,Wl,jl,Yl,Xl,Kl,Ql,Jl,Zl,$l,eh,th,ih,rh,oh,sh,nh,ah,lh,hh,ch,dh,uh,ph,Ch,fh,mh,gh,yh,_h,vh,bh,wh,Fh,Eh,Oh,Sh,Th,xh,Lh,Ah,Ih,Rh,Dh,Nh,Mh,Ph,Hh,Uh,Bh,kh,Vh,zh,qh,Gh,Wh,jh,Yh,Xh,Kh,Qh,Jh,Zh,$h,ec,tc,ic,rc,oc,sc,nc,ac,lc,hc,cc,dc,uc,pc,Cc,fc,mc,gc,yc,_c,vc,bc,wc,Fc,Ec,Oc,Sc,Tc,xc,Lc,Ac,Ic,Rc,Dc,Nc,Mc,Pc,Hc,Uc,Bc,kc,Vc,zc,qc,Gc,Wc,jc,Yc,Xc,Kc,Qc,Jc,Zc,$c,ed,td,id,rd,od,sd,nd,ad,ld,hd,cd,dd,ud,pd,Cd,fd,md,gd,yd,_d,vd,bd,wd,Fd,Ed,Od,Sd,Td,xd,Ld,Ad,Id,Rd,Dd,Nd,Md,Pd,Hd,Ud,Bd,kd,Vd,zd,qd,Gd,Wd,jd,Yd,Xd,Kd,Qd,Jd,Zd,$d,eu,tu,iu,ru,ou,su,nu,au,lu,hu,cu,du,uu,pu,Cu,fu,mu,gu,yu,_u,vu,bu,wu,Fu,Eu,Ou,Su,Tu,xu=function(){function e(e){void r.F8C===e&&(e=r.r4C),this.text=this.tag=r.C4C,this.style={},this.attr={},this.classes=[],this.tag=e}return e.prototype.addClass=function(e){r.F8C>this.classes.indexOf(e)&&this.classes.push(e)},e.prototype.toHtml=function(){var e,o=r,s=t,n=i.O9Y+this.tag,a=[];for(e in this.style)a.push(e+s.t7C+this.style[e]);for(var l in o.F8C<a.length&&(n+=' style="'+a.join(s.F9Q)+';"'),o.F8C<this.classes.length&&(n+=' class="'+this.classes.join(o.s4C)+s.U9Q),this.attr)n+=o.s4C+l+'="'+this.attr[l]+s.U9Q;return n+(i.M9Y+(this.text||o.C4C)+"</")+this.tag+i.M9Y},e}(),Lu=function(){var e=r;function t(t){void e.F8C===t&&(t=e.r4C),this._node=new xu,this.clear(),this.tag=t}return Object.defineProperty(t.prototype,"node",{get:function(){return this._node},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(t.prototype,"tag",{get:function(){return this.node.tag},set:function(e){this.node.tag=e},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(t.prototype,e.p3C,{get:function(){return this.node.text},set:function(e){this.node.text=e},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(t.prototype,"style",{get:function(){return this.node.style},set:function(e){this.node.style=e},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(t.prototype,"attr",{get:function(){return this.node.attr},set:function(e){this.node.attr=e},enumerable:!e.F8C,configurable:!e.F8C}),t.prototype.addClass=function(e){this.node.addClass(e)},t.prototype.clear=function(){this.tag=e.r4C,this.text=e.C4C,this.style={},this.attr={},this.node.classes=[]},t.prototype.toHtml=function(t){void e.F8C===t&&(t=!e.F8C);var i=this.node.toHtml();return t&&this.clear(),e.x4C!=De._view.grid.vo.GridCell.customizeCellFunction&&(i=De.model.XSSCheck.valid(i)?i:De.model.XSSCheck.validate(i)),i},t}();return Ja=De||(De={}),Za=Ja._view||(Ja._view={}),$a=Za.grid||(Za.grid={}),el=$a.sheet||($a.sheet={}),tl=function(e){function t(){return r.x4C!==e&&e.apply(this,arguments)||this}return Ga(t,e),t.prototype.draw=function(){var e=r;this.setContentSize();var t=this.getBounds();if(this.isSmooth||this._coords.isOnRowEdge(t.bottom)||this._coords.isOnColEdge(t.right)||!this._bounds.contains(t)){var o=t.clone();if(e.F8C!=this._coords.maxColsCount&&(o.right=Math.min(o.right,this._coords.maxColsCount)),e.F8C!=this._coords.maxRowsCount&&(o.bottom=Math.min(o.bottom,this._coords.maxRowsCount)),!this.isSmooth||!this._boundsSmooth.contains(o)||!this._coords.canDrawAll&&(t.left>this._coords.frozenColsCount&&t.left<=this._boundsSmooth.left||t.top>this._coords.frozenRowsCount&&t.top<=this._boundsSmooth.top)){this._coords.isOnColEdge(t.right)&&(t.left=Math.max(t.left-e.O8C,this._coords.frozenColsCount)),this._coords.isOnRowEdge(t.bottom)&&(t.top=Math.max(t.top-e.O8C,this._coords.frozenRowsCount)),o=[];for(var s=new Lu,n=t.top;n<t.bottom;n++){s.tag=e.r4C,s.addClass(i.w4Y),s.attr[i.l4Y]=n;for(var a=t.left;a<t.right;++a)s.text+=this.createCell(n,a).toHtml();o.push(s.toHtml())}this.scrollPane.placeholder.html(e.C4C),this.scrollPane.placeholder.visible=this._coords.hasHorizontalScroll||this._coords.hasVerticalScroll,this.scrollPane.content.html(o.join(e.C4C)),this.scrollPane.content.show(),o.length=e.F8C,this.isSmooth=!e.O8C,this._bounds.set(t)}}},t.prototype.adjustScrollPaneOffset=function(){this.scrollPane.content.left=this._coords.getColEdgeOffset(this._bounds.left),this.scrollPane.content.top=this._coords.getRowEdgeOffset(this._bounds.top)},t.prototype.drawSmooth=function(){var e=r,t=this.getBounds(!e.F8C);if(!(this.isSmooth&&this._coords.canDrawAll&&this._boundsSmooth.contains(t))){this._boundsSmooth=t,t=[];for(var i=this._boundsSmooth.top;i<this._boundsSmooth.bottom;i++){this._coords.getRowHeight(i);for(var o=this._boundsSmooth.left;o<this._boundsSmooth.right;++o)t.push(this.createCell(i,o,!e.F8C).toHtml())}this.scrollPane.placeholder.html(t.join(e.C4C)),this.scrollPane.placeholder.show(),this.scrollPane.content.hide(),this.scrollPane.content.html(e.C4C),t=this.getBounds(),this.isSmooth||this._coords.isOnRowEdge(t.bottom)||(this.scrollPane.scrollTop=this._coords.getRowY(this._coords.firstDataRowIdx,!e.O8C)),this.isSmooth||this._coords.isOnColEdge(t.right)||(this.scrollPane.scrollLeft=this._coords.getColX(this._coords.firstDataColIdx,!e.O8C)),this.isSmooth=!e.F8C}},t.prototype.getBounds=function(e){void r.F8C===e&&(e=!r.O8C);var t=new el.Bounds;return t.top=this._coords.getBoundTop(e),t.left=this._coords.getBoundLeft(e),t.bottom=this._coords.getBoundBottom(e),t.right=this._coords.getBoundRight(e),t},t.prototype.setContentSize=function(){this.scrollPane.contentWidth=Math.max(this._coords.dataContentWidth,this._coords.dataWidth-this._coords.scrollBarWidth),this.scrollPane.contentHeight=Math.max(this._coords.dataContentHeight,this._coords.dataHeight-this._coords.scrollBarHeight),this.scrollPane.content.right=this._coords.scrollBarWidth,this.scrollPane.content.bottom=this._coords.scrollBarHeight,this.scrollPane.horizontalScroll=this._coords.hasHorizontalScroll,this.scrollPane.verticalScroll=this._coords.hasVerticalScroll},t}(el.BaseSheet),el.DataSheet=tl,il=De||(De={}),rl=il._view||(il._view={}),ol=rl.grid||(rl.grid={}),sl=ol.sheet||(ol.sheet={}),nl=function(e){function t(){return r.x4C!==e&&e.apply(this,arguments)||this}return Ga(t,e),t.prototype.draw=function(){var e=r;this.setContentSize();var t=this.getBounds();if(this.isSmooth||this._coords.isOnRowEdge(t.bottom)||!this._bounds.contains(t)){var o=t.clone();if(e.F8C!=this._coords.maxRowsCount&&(o.bottom=Math.min(o.bottom,this._coords.maxRowsCount)),!this.isSmooth||!this._boundsSmooth.contains(o)){this._coords.isOnRowEdge(t.bottom)&&(t.top=Math.max(t.top-e.O8C,this._coords.frozenRowsCount)),o=[];for(var s=new Lu,n=t.top;n<t.bottom;n++){s.tag=e.r4C,s.addClass(i.w4Y),s.attr[i.l4Y]=n,il.model._options.OptionsManager.showHeaders&&(s.text+=this.createRowSheetHeaderCell(n).toHtml());for(var a=t.left;a<t.right;++a)s.text+=this.createCell(n,a).toHtml();o.push(s.toHtml())}this.scrollPane.placeholder.html(e.C4C),this.scrollPane.placeholder.hide(),this.scrollPane.content.html(o.join(e.C4C)),this.scrollPane.content.show(),o.length=e.F8C,this._isSmooth=!e.O8C,this._bounds.set(t)}}},t.prototype.createRowSheetHeaderCell=function(t,o){return void r.F8C===o&&(o=!r.O8C),this.cell=e.prototype.createRowSheetHeaderCell.call(this,t,o),o||(this.cell.style[i.z4Y]=this.cell.style.height,delete this.cell.style.height,delete this.cell.style[i.K4Y]),this.cell},t.prototype.adjustScrollPaneOffset=function(){this.scrollPane.content.top=this._coords.getRowEdgeOffset(this._bounds.top)},t.prototype.getBounds=function(e){void r.F8C===e&&(e=!r.O8C);var t=new sl.Bounds;return t.top=this._coords.getBoundTop(e),t.left=r.F8C,t.bottom=this._coords.getBoundBottom(e),t.right=this._coords.frozenColsCount,e&&t.bottom==this._coords.maxRowsCount&&t.bottom++,t},t.prototype.drawSmooth=function(){var e=r,t=this.getBounds(!e.F8C);if(!(this.isSmooth&&this._coords.canDrawAll&&this._boundsSmooth.contains(t))){this._boundsSmooth=t,t=[];for(var i=this._boundsSmooth.top;i<this._boundsSmooth.bottom;i++){il.model._options.OptionsManager.showHeaders&&t.push(this.createRowSheetHeaderCell(i,!e.F8C).toHtml());for(var o=this._boundsSmooth.left;o<this._boundsSmooth.right;++o)t.push(this.createCell(i,o,!e.F8C).toHtml())}this.scrollPane.placeholder.html(t.join(e.C4C)),this.scrollPane.content.hide(),this.scrollPane.content.html(e.C4C),this.scrollPane.placeholder.show(),this.isSmooth||this._coords.isOnRowEdge(this._bounds.bottom)?this._scrollPane.scrollTop=this._coords.scrollTop:this.scrollPane.scrollTop=this._coords.getRowY(this._coords.firstDataRowIdx,!e.O8C),this.isSmooth=!e.F8C}},t.prototype.setContentSize=function(){this.scrollPane.contentHeight=this._coords.dataContentHeight+this._coords.scrollBarHeight,this.scrollPane.content.bottom=r.F8C,this.scrollPane.scrollTop=this._coords.scrollTop},t.prototype.getCellByPosition=function(e,t){var i=r,o=this._coords.getColIndexAtPosition(e,!i.F8C)-i.O8C,s=this._coords.getRowIndexAtPosition(t)-i.O8C,n=this._getDataFunc(s,o);return i.x4C==n&&((n=new ol.vo.GridCell).rowIdx=s,n.colIdx=o),n},t}(sl.BaseSheet),sl.RowHeadersSheet=nl,al=De||(De={}),ll=al._view||(al._view={}),hl=ll.grid||(ll.grid={}),cl=hl.sheet||(hl.sheet={}),dl=function(e){function t(){return r.x4C!==e&&e.apply(this,arguments)||this}return Ga(t,e),t.prototype.draw=function(){var e=r;Be.fmClearTimeout(this._bgTimeout),this.setContentSize();var t=this.getBounds();if(this.isSmooth||this._coords.isOnColEdge(t.right)||!this._bounds.contains(t)){var o=t.clone();if(e.F8C!=this._coords.maxColsCount&&(o.right=Math.min(o.right,this._coords.maxColsCount)),!this.isSmooth||!this._boundsSmooth.contains(o)){this._coords.isOnColEdge(t.right)&&(t.left=Math.max(t.left-e.O8C,this._coords.frozenColsCount)),o=[],al.model._options.OptionsManager.showHeaders&&o.push(this.createSheetHeaders(t));for(var s=new Lu,n=t.top;n<t.bottom;n++){s.tag=e.r4C,s.addClass(i.w4Y),s.attr[i.l4Y]=n;for(var a=t.left;a<t.right;++a)s.text+=this.createCell(n,a).toHtml();o.push(s.toHtml())}this.scrollPane.placeholder.html(e.C4C),this.scrollPane.placeholder.hide(),this.scrollPane.content.html(o.join(e.C4C)),this.scrollPane.content.show(),o.length=e.F8C,this.isSmooth=!e.O8C,this._bounds.set(t)}}},t.prototype.adjustScrollPaneOffset=function(){this.scrollPane.content.left=this._coords.getColEdgeOffset(this._bounds.left)},t.prototype.getBounds=function(e){void r.F8C===e&&(e=!r.O8C);var t=new cl.Bounds;return t.top=r.F8C,t.left=this._coords.getBoundLeft(e),t.bottom=this._coords.frozenRowsCount,t.right=this._coords.getBoundRight(e),e&&t.right==this._coords.maxColsCount&&t.right++,t},t.prototype.drawSmooth=function(){var e=r,t=this.getBounds(!e.F8C);if(!(this.isSmooth&&this._coords.canDrawAll&&this._boundsSmooth.contains(t))){this._boundsSmooth=t,Be.fmClearTimeout(this._bgTimeout),t=[];for(var i=this._boundsSmooth.top;i<this._boundsSmooth.bottom;i++)for(var o=this._boundsSmooth.left;o<this._boundsSmooth.right;++o)t.push(this.createCell(i,o,!e.F8C).toHtml());i=e.C4C,al.model._options.OptionsManager.showHeaders&&(i+=this.createSheetHeaders(this._boundsSmooth,!e.F8C)),i+=t.join(e.C4C),this.scrollPane.placeholder.html(i),this.scrollPane.content.hide(),this.scrollPane.content.html(e.C4C),this.scrollPane.placeholder.show(),this.isSmooth||this._coords.isOnColEdge(this._bounds.right)?this.scrollPane.scrollLeft=this._coords.scrollLeft:this.scrollPane.scrollLeft=this._coords.getColX(this._coords.firstDataColIdx,!e.O8C),this.isSmooth=!e.F8C}},t.prototype.setContentSize=function(){this.scrollPane.contentWidth=this._coords.dataContentWidth+this._coords.scrollBarWidth,this.scrollPane.content.right=r.F8C},t.prototype.backgroundProcess=function(){var e=r,t=this;Be.fmClearTimeout(this._bgTimeout);for(var i=[],o=this._coords.getColIndicesWithUndefinedWidth(e.V0C),s=e.F8C;s<this._coords.frozenRowsCount;s++)for(var n=e.F8C;n<o.length;n++){var a=o[n];this.isCellEmpty(s,a)||i.push(this.createCell(s,a,!e.F8C).toHtml())}if(e.F8C<i.length){var l=this._scrollPane.placeholder.element,h=l.children.length,c=l.innerHTML;l.innerHTML=c+i.join(),this.requestAnimationFrame(function(){for(;h<l.children.length;h++)t.updateColWidth(l.children.item(h));l.innerHTML=c,t._bgTimeout=Be.fmSetTimeout(function(){return t.backgroundProcess()},e.m0C)})}},t.prototype.createSheetHeaders=function(e,t){var o=r;void o.F8C===t&&(t=!o.O8C);for(var s=o.C4C,n=e.left;n<e.right;++n)s+=this.createColumnSheetHeaderCell(n,t).toHtml();return t||((n=new Lu).tag=o.r4C,n.addClass(i.w4Y),n.text=s,s=n.toHtml()),s},t.prototype.getCellByPosition=function(e,t){var i=r,o=this._coords.getColIndexAtPosition(e)-i.O8C,s=this._coords.getRowIndexAtPosition(t,!i.F8C)-i.O8C,n=this._getDataFunc(s,o);return i.x4C==n&&((n=new hl.vo.GridCell).rowIdx=s,n.colIdx=o),n},t.prototype.clearDrawings=function(){Be.fmClearTimeout(this._bgTimeout)},t.prototype.dispose=function(){this.clearDrawings(),e.prototype.dispose.call(this)},t}(cl.BaseSheet),cl.ColumnHeadersSheet=dl,ul=De||(De={}),pl=ul._view||(ul._view={}),Cl=pl.grid||(pl.grid={}),fl=Cl.sheet||(Cl.sheet={}),ml=function(e){var o=r,s="wdr-header-drop-indicator";function n(){var r=e.call(this,o.r4C,i.j1Y)||this;return r.smoothTimeout=t.N6C,r.animationDraws=[],r._isHeadersDirty=!o.O8C,r.colsScrollHandler=function(e){return r.onColsScroll(e)},r.rowsScrollHandler=function(e){return r.onRowsScroll(e)},r.dataScrollHandler=function(){return r.onDataScroll()},r.sheetHeaderDbClickHandler=function(e){return r.onSheetHeaderDbClick(e)},r.clicks=o.F8C,r.disableSelection(),r._coords=new fl.GridCoords,r._dataProvider=new fl.SheetDataProvider(r._coords),r._selectionManager=new fl.SelectionManager(r),r.setControls(),r}return Ga(n,e),n.prototype.setControls=function(){this.createTitle(),this.createSheetHeaders(),this.createColsSheet(),this.createRowsSheet(),this.createDataSheet(),this.createResizeHandles()},n.prototype.createTitle=function(){this._title=new h.UILabel,this._title.container.display=o.R2C,this._title.setId("wdr-grid-title"),this._title.addClass(i.k8Y),this._title.setSelectable(!o.F8C),this._title.container.css(o.F3C,t.J5C),this._title.hide(),this.addComponent(this._title)},n.prototype.createSheetHeaders=function(){this._sheetHeaders=new fl.SheetHeaders(this._coords),this._sheetHeaders.id="wdr-sheet-headers",this.addChild(this._sheetHeaders)},n.prototype.createColsSheet=function(){var e=this;this._colsSheet=new fl.ColumnHeadersSheet(this._coords,function(t,i){return e.getCell(t,i)}),this._colsSheet.id=i.B2Y,this._colsSheet.scrollPane.element.addEventListener(i.Y2Y,this.colsScrollHandler),this._colsSheet.addEventListener(Cl.GridEvent.MOUSE_CLICK,function(t){return e.onClick(t)}),this.addChild(this._colsSheet)},n.prototype.createRowsSheet=function(){var e=this;this._rowsSheet=new fl.RowHeadersSheet(this._coords,function(t,i){return e.getCell(t,i)}),this._rowsSheet.id="wdr-rows-sheet",this._rowsSheet.scrollPane.element.addEventListener(i.Y2Y,this.rowsScrollHandler),this._rowsSheet.addEventListener(Cl.GridEvent.MOUSE_CLICK,function(t){return e.onClick(t)}),this.addChild(this._rowsSheet)},n.prototype.createDataSheet=function(){var e=this;this._dataSheet=new fl.DataSheet(this._coords,function(t,i){return e.getCell(t,i)}),this._dataSheet.id="wdr-data-sheet",this._dataSheet.scrollPane.element.addEventListener(t.V6C,this.dataScrollHandler,!o.F8C),this._dataSheet.addEventListener(fl.BaseSheet.EVENT_SWITCHED_TO_SIMPLE,function(t){return e.onModeSwitched(t)}),this._dataSheet.addEventListener(fl.BaseSheet.EVENT_SWITCHED_TO_SMOOTH,function(t){return e.onModeSwitched(t)}),this._dataSheet.addEventListener(Cl.GridEvent.MOUSE_CLICK,function(t){return e.onClick(t)}),this.addChild(this._dataSheet)},n.prototype.createResizeHandles=function(){var e=this;this._colResizeHandles=new fl.ColumnResizeHandles(this),this._colResizeHandles.id=i.z2Y,this._colResizeHandles.addEventListener(Cl.GridEvent.RESIZE_COLUMN,function(t){return e.onColResize(t)}),this.addChild(this._colResizeHandles),this._rowResizeHandles=new fl.RowResizeHandles(this),this._rowResizeHandles.id=i.N2Y,this._rowResizeHandles.addEventListener(Cl.GridEvent.RESIZE_ROW,function(t){return e.onRowResize(t)}),this.addChild(this._rowResizeHandles),this.element.addEventListener(i.a1Y,this.sheetHeaderDbClickHandler)},n.prototype.draw=function(){var e=this;this._coords.clearCache(),this._dataSheet.width&&this._dataSheet.height||this.drawLayout(),this._coords.setScale(),this.adjustScrollPosition()||(Be.fmClearTimeout(this._drawSmoothTimer),this.disposeAnimationDraws(),this.animationDraws.push(this.requestAnimationFrame(function(){return e._draw()})))},n.prototype.disposeAnimationDraws=function(){for(;o.F8C<this.animationDraws.length;)this.cancelAnimationFrame(this.animationDraws.pop())},n.prototype._draw=function(){var e=this;pl.PivotView.stage.dispatchWith(pl.ViewEvent.BEFORE_GRID_DRAW,this,{smooth:!o.O8C}),this._coords.applyPendingSizes(),this.drawFirst(),this._isHeadersDirty&&(this.calculateSizesFirst()&&(this._coords.applyPendingSizes(),this._colsSheet.clearBounds(),this._rowsSheet.clearBounds(),this.drawFirst()),this._isHeadersDirty=!o.O8C),this.drawLast(),ul.model.JavaScriptHandlers.getInstance().dispatch(new ul.model.APIEvent(ul.model.JavaScriptHandlers.AFTER_GRID_DRAW,{smooth:!o.O8C})),this.animationDraws.push(this.requestAnimationFrame(function(){e.drawLayout(),e._selectionManager.draw()})),this.animationDraws.push(this.requestAnimationFrame(function(){var t=e.calculateSizesAll();t?(e._colsSheet.clearBounds(),e._rowsSheet.clearBounds(),e._dataSheet.clearBounds(),e.draw()):e._coords.canDrawSmooth&&(Be.fmClearTimeout(e._drawSmoothTimer),e._drawSmoothTimer=Be.fmSetTimeout(function(){return e.drawSmooth()},e.smoothTimeout)),t||e.makeFieldsDraggable()})),this.animationDraws.push(this.requestAnimationFrame(function(){pl.PivotView.stage.dispatchWith(pl.ViewEvent.AFTER_GRID_DRAW,e,{smooth:!o.O8C})}))},n.prototype.drawFirst=function(){this._coords.titleHeight=Be.nullOrEmpty(ul.model._options.OptionsManager.gridTitle)?o.F8C:this._title.getHeight(!o.F8C),this._colsSheet.draw(),this._colsSheet.adjustScrollPaneOffset(),this._rowsSheet.draw(),this._rowsSheet.adjustScrollPaneOffset()},n.prototype.drawLast=function(){this._sheetHeaders.draw(),this._selectionManager.draw(),this._colResizeHandles.draw(),this._rowResizeHandles.draw(),this._dataSheet.draw(),this._dataSheet.adjustScrollPaneOffset()},n.prototype.calculateSizesFirst=function(){return this._colsSheet.calculateSizes(!o.F8C),this._rowsSheet.calculateSizes(!o.F8C),this._colsSheet.isDirty||this._rowsSheet.isDirty},n.prototype.calculateSizesAll=function(){return this._dataSheet.calculateSizes(!o.F8C),this._colsSheet.calculateSizes(!o.F8C),this._rowsSheet.calculateSizes(!o.F8C),this._dataSheet.isDirty||this._colsSheet.isDirty||this._rowsSheet.isDirty},n.prototype.drawSmooth=function(){var e=this;this.disposeAnimationDraws(),this.animationDraws.push(this.requestAnimationFrame(function(){return e._drawSmooth()}))},n.prototype._drawSmooth=function(){var e=this;pl.PivotView.stage.dispatchWith(pl.ViewEvent.BEFORE_GRID_DRAW,this,{smooth:!o.F8C}),this._colsSheet.drawSmooth(),this._rowsSheet.drawSmooth(),this._dataSheet.drawSmooth(),ul.model.JavaScriptHandlers.getInstance().dispatch(new ul.model.APIEvent(ul.model.JavaScriptHandlers.AFTER_GRID_DRAW,{smooth:!o.F8C})),this.type==fl.flat.FlatGridLayout.TYPE&&this.makeFieldsDraggable(),this.animationDraws.push(this.requestAnimationFrame(function(){e._colsSheet.calculateSizesSmooth(!o.F8C),e._rowsSheet.calculateSizesSmooth(!o.F8C),e._dataSheet.calculateSizesSmooth(!o.F8C),(e._colsSheet.isDirty||e._rowsSheet.isDirty||e._dataSheet.isDirty)&&(e._colsSheet.clearBoundsSmooth(),e._rowsSheet.clearBoundsSmooth(),e._dataSheet.clearBoundsSmooth()),e._coords.canDrawAll||e._colsSheet.backgroundProcess()})),this.animationDraws.push(this.requestAnimationFrame(function(){pl.PivotView.stage.dispatchWith(pl.ViewEvent.AFTER_GRID_DRAW,e,{smooth:!o.F8C})}))},n.prototype.onModeSwitched=function(e){var t=this;e.type==fl.BaseSheet.EVENT_SWITCHED_TO_SIMPLE&&this.animationDraws.push(this.requestAnimationFrame(function(){t._colsSheet.switchToSimple(),t._rowsSheet.switchToSimple()}))},n.prototype.onDataScroll=function(){this.setScroll(this._dataSheet.scrollPane.scrollTop,this._dataSheet.scrollPane.scrollLeft)},n.prototype.onRowsScroll=function(e){this.coords.hasVerticalScroll&&(e=e.wheelDeltaY||e.deltaY||e.wheelDelta||o.F8C,Be.browserVersion().isFirefox&&(e*=-o.v0C),Be.browserVersion().isMsie&&(e*=-o.O8C),isNaN(e)||o.F8C==e||(this._dataSheet.scrollPane.scrollTop=this._coords.scrollTop-e))},n.prototype.onColsScroll=function(e){this.coords.hasHorizontalScroll&&(e=e.wheelDeltaX||e.deltaX||o.F8C,Be.browserVersion().isFirefox&&(e*=-o.v0C),Be.browserVersion().isMsie&&(e*=-o.O8C),o.F8C!=e&&(this._dataSheet.scrollPane.scrollLeft=this._coords.scrollLeft-e))},Object.defineProperty(n.prototype,o.W3C,{get:function(){return this._type},enumerable:!o.F8C,configurable:!o.F8C}),Object.defineProperty(n.prototype,"coords",{get:function(){return this._coords},enumerable:!o.F8C,configurable:!o.F8C}),n.prototype.drawLayout=function(){this.width=this.coords.layoutWidth,this.height=this.coords.layoutHeight,Be.nullOrEmpty(ul.model._options.OptionsManager.gridTitle)?this._title.hide():(this._title.setLabel(ul.model._options.OptionsManager.gridTitle),this._title.show()),this._colResizeHandles.left=o.F8C,this._colResizeHandles.top=this.coords.gridStartY,this._colResizeHandles.right=o.F8C,this._colResizeHandles.height=this.coords.getSheetHeaderHeight(),this._rowResizeHandles.left=o.F8C,this._rowResizeHandles.top=this.coords.gridStartY,this._rowResizeHandles.bottom=o.F8C,this._rowResizeHandles.width=this.coords.getSheetHeaderWidth()},n.prototype.triggerCellAction=function(e){o.x4C!=e&&this.dispatch(new Cl.GridClickEvent(e))},Object.defineProperty(n.prototype,"selectedCell",{get:function(){var e;return o.x4C!=this._selectionManager.from&&(e=this.getCell(this._selectionManager.from.y,this._selectionManager.from.x,!o.F8C),o.x4C==e&&((e=new Cl.vo.GridCell).rowIdx=this._selectionManager.from.y,e.colIdx=this._selectionManager.from.x)),e},enumerable:!o.F8C,configurable:!o.F8C}),n.prototype.getCell=function(e,t,i,r){return void o.F8C===r&&(r=!o.O8C),i=this._dataProvider.getData(e,t,!r),r&&o.x4C==i?this._dataProvider.getDataFrozen(e,t):i},n.prototype.insertCell=function(e,t,i,r){void o.F8C===r&&(r=!o.O8C),this._dataProvider.setData(e,t,i,r)},n.prototype.resize=function(e,t){this._coords.resize(e,t,!o.F8C)},Object.defineProperty(n.prototype,"getDataFunction",{set:function(e){this._dataProvider.getDataFunction=e},enumerable:!o.F8C,configurable:!o.F8C}),n.prototype.setDataSize=function(e,t){this._coords.dataRowsCount=e,this._coords.dataColsCount=t},n.prototype.freezeRows=function(e){e!=this._coords.frozenRowsCount&&(this._coords.firstDataRowIdx=e+(this._coords.firstDataRowIdx-this._coords.frozenRowsCount)),this._coords.frozenRowsCount=e},n.prototype.freezeColumns=function(e){e!=this._coords.frozenColsCount&&(this._coords.firstDataColIdx=e+(this._coords.firstDataColIdx-this._coords.frozenColsCount)),this._coords.firstDataColIdx<e&&(this._coords.firstDataColIdx=e),this._coords.frozenColsCount=e},n.prototype.clearAll=function(){this._isHeadersDirty=!o.F8C,this._dataProvider.reset(),this._coords.reset(),this._colsSheet.clearAllBounds(),this._rowsSheet.clearAllBounds(),this._dataSheet.clearAllBounds(),this._selectionManager.clear(),this._dataSheet.scrollPane.scrollTop=o.F8C,this._dataSheet.scrollPane.scrollLeft=o.F8C,this.clearDrawings()},n.prototype.clearData=function(){this._dataProvider.reset(),this._colsSheet.clearAllBounds(),this._rowsSheet.clearAllBounds(),this._dataSheet.clearAllBounds(),this._coords.clearCache()},n.prototype.clearColSizes=function(e){this._isHeadersDirty=!o.F8C,this._coords.clearColSizes(e)},n.prototype.clearRowSizes=function(e){this._isHeadersDirty=!o.F8C,this._coords.clearRowSizes(e)},n.prototype.select=function(e,t,i,r){this._selectionManager.select(new fl.Point(t,e),new fl.Point(r,i))},n.prototype.deselect=function(){this._selectionManager.clear()},n.prototype.clearDrawings=function(){this.disposeAnimationDraws(),Be.fmClearTimeout(this._drawSmoothTimer),Be.fmClearTimeout(this.clickTimeout),this._colsSheet.clearDrawings()},n.prototype.dispose=function(){this._dataProvider.dispose(),this._selectionManager.dispose(),this.clearDrawings(),this._colsSheet.removeAllEventListeners(),this._colsSheet.scrollPane.element&&this._colsSheet.scrollPane.element.removeEventListener(i.Y2Y,this.colsScrollHandler),this._colsSheet.dispose(),this._rowsSheet.removeAllEventListeners(),this._rowsSheet.scrollPane.element&&this._rowsSheet.scrollPane.element.removeEventListener(i.Y2Y,this.rowsScrollHandler),this._rowsSheet.dispose(),this._dataSheet.removeAllEventListeners(),this._dataSheet.scrollPane.element&&this._dataSheet.scrollPane.element.removeEventListener(t.V6C,this.dataScrollHandler),this._dataSheet.dispose(),this._colResizeHandles.removeAllEventListeners(),this._colResizeHandles.dispose(),this._rowResizeHandles.removeAllEventListeners(),this._rowResizeHandles.dispose(),this.element&&this.element.removeEventListener("dbclick",this.sheetHeaderDbClickHandler),e.prototype.dispose.call(this)},n.prototype.onClick=function(e){o.x4C!=e.cell&&this.dispatch(e),this.onClickForApi(e)},n.prototype.onFilterClick=function(e){this.dispatch(e)},n.prototype.onClickForApi=function(e){var t=this;this.clicks++,o.O8C==this.clicks&&(this.clickTimeout=Be.fmSetTimeout(function(){if(o.O8C==t.clicks){if(e.cell){var i=new Cl.GridSingleDoubleClickEvent(e.cell,!o.F8C,e.element);t.dispatch(i)}}else e.cell&&(i=new Cl.GridSingleDoubleClickEvent(e.cell,!o.O8C,e.element),t.dispatch(i));t.clicks=o.F8C},300))},n.prototype.setScroll=function(e,t){void o.F8C===e&&(e=NaN),void o.F8C===t&&(t=NaN);var i=!o.O8C;isNaN(e)||e==this.coords.scrollTop||(this.coords.scrollTop=e,this.coords.firstDataRowIdx=this.coords.getRowIndexAtPosition(e),this._rowsSheet.scrollPane.scrollTop=e,i=!o.F8C),isNaN(t)||t==this.coords.scrollLeft||(this.coords.scrollLeft=t,this.coords.firstDataColIdx=this.coords.getColIndexAtPosition(t),this._colsSheet.scrollPane.scrollLeft=t,i=!o.F8C),i&&this.draw()},n.prototype.onColResize=function(e){this.dispatch(e),this._coords.applyPendingSizes(),o.F8C<e.data.width?this._coords.setColWidth(e.data.colIdx,e.data.width,!o.O8C,!o.F8C):this._coords.resetColWidth(e.data.colIdx),this.drawAfterResize()},n.prototype.onRowResize=function(e){this.dispatch(e),this._coords.applyPendingSizes(),o.F8C<e.data.height?this._coords.setRowHeight(e.data.rowIdx,e.data.height,!o.O8C,!o.F8C):this._coords.resetRowHeight(e.data.rowIdx),this.drawAfterResize()},n.prototype.onSheetHeaderDbClick=function(e){if(!o.O8C!=ul.model._options.OptionsManager.showHeaders){var t=this.getOffset(),i=e.clientX-t.left;e=e.clientY-t.top,i>this.coords.getSheetHeaderWidth()&&e>this.coords.gridStartY+this.coords.getSheetHeaderHeight()||(e=this.coords.getRowIdxByRelativePosition(e,this.isSmooth),i=this.coords.getColIdxByRelativePosition(i,this.isSmooth),-o.O8C!=e||isNaN(i)||this._colResizeHandles.dispatchWith(Cl.GridEvent.RESIZE_COLUMN,this,{width:-o.O8C,colIdx:i}),-o.O8C!=i||isNaN(e)||this._rowResizeHandles.dispatchWith(Cl.GridEvent.RESIZE_ROW,this,{height:-o.O8C,rowIdx:e}))}},n.prototype.drawAfterResize=function(){this._colsSheet.clearAllBounds(),this._rowsSheet.clearAllBounds(),this._dataSheet.clearAllBounds(),this.adjustScrollPosition()||this.draw()},n.prototype.adjustScrollPosition=function(){var e=!o.O8C;return o.F8C<this._coords.scrollLeft&&this._coords.freeSpaceRight>this._coords.scrollLeft&&(this._dataSheet.scrollPane.scrollLeft=o.F8C,e=!o.F8C),o.F8C<this._coords.scrollTop&&this._coords.freeSpaceTop>this._coords.scrollTop&&(this._dataSheet.scrollPane.scrollTop=o.F8C,e=!o.F8C),e},n.prototype.getCellByElement=function(e){var t=h.UIElement.convert(e).closest(i.F2Y);return o.x4C!=t?(e=parseInt(t.attr(i.l4Y)),t=parseInt(t.attr(i.p4Y)),this.getCell(e,t,!o.F8C,!o.F8C)):o.x4C},Object.defineProperty(n.prototype,i.F4Y,{get:function(){return this._dataSheet.isSmooth},enumerable:!o.F8C,configurable:!o.F8C}),n.prototype.scrollToRow=function(e){this._dataSheet.scrollPane.scrollTop=this.coords.getRowY(e)},n.prototype.scrollToColumn=function(e){this._dataSheet.scrollPane.scrollLeft=this.coords.getColX(e)},Object.defineProperty(n.prototype,"dataProvider",{get:function(){return this._dataProvider},enumerable:!o.F8C,configurable:!o.F8C}),Object.defineProperty(n.prototype,"selectionManager",{get:function(){return this._selectionManager},enumerable:!o.F8C,configurable:!o.F8C}),n.prototype.resizeColumn=function(e,t){this.coords.setColWidth(e,t,!o.O8C,!o.F8C)},n.prototype.resizeRow=function(e,t){this.coords.setRowHeight(e,t,!o.O8C,!o.F8C)},n.prototype.makeFieldsDraggable=function(){var e=this;this.droppable({onDrop:function(t,i,r,o){return e.onDrop(t,i,r,o)},onDragOver:function(t,i,r,o){return e.onDragOver(t,i,r,o)},onDragLeave:function(t,i,r,o){return e.onDragLeave(t,i,r,o)}})},n.prototype.createHeaderDragHelper=function(e){var t=new h.UIElement(o.I2C);return t.addClass(i.b2Y),t.addClass(o.k4C),t.addClass("wdr-header-helper"),t.css(o.F3C,o.O3C),t.css(i.g2Y,o.o0C),t.text(e.element.firstChild.textContent),t},n.prototype.onDragOver=function(e,t,i,r){(e=h.UIElement.convert(r.target)).hasClass(s)||this.showIndicator(e,e)},n.prototype.onDragLeave=function(e,t,i,r){this.removeDropIndicator()},n.prototype.onDrop=function(e,t,i,r){},n.prototype.showIndicator=function(e,t){},n.prototype.createDropIndicator=function(){return this._dropIndicator?this._dropIndicator:new h.UIElement(o.r4C,s)},n.prototype.removeDropIndicator=function(){this._dropIndicator&&(this._dropIndicator.removeFromParent(!o.F8C),this._dropIndicator=o.x4C)},n}(h.UIElement),fl.BaseGridLayout=ml,gl=De||(De={}),yl=gl._view||(gl._view={}),_l=yl.grid||(yl.grid={}),vl=_l.sheet||(_l.sheet={}),bl=function(e){function t(t){var o=e.call(this,t,r.x4C)||this;return o._coords=t,o._hierarchies=[],o.addClass(i.t2Y),o.addEventListener(_l.GridEvent.MOUSE_CLICK,function(e){return o.onClick(e)}),o}return Ga(t,e),t.prototype.draw=function(){for(var e=r,t=[],o=new Lu,s=e.F8C;s<this._coords.frozenRowsCount;s++){o.tag=e.r4C,o.addClass(i.w4Y);for(var n=e.F8C;n<this._coords.frozenColsCount;n++)if(gl.model._options.OptionsManager.showHierarchyCaptions){var a=s-this._coords.frozenRowsCount+this._hierarchies.length;o.text+=this.createFilterCell(s,n,e.F8C<=a?this._hierarchies[a]:e.x4C).toHtml()}else o.text+=this.createCell(s,n).toHtml();t.push(o.toHtml())}t=t.join(e.C4C),this.element.innerHTML!=t&&this.html(t)},t.prototype.createFilterCell=function(e,t,o){var s=this._hierarchies.indexOf(o);return this.cell.clear(),this.cell.tag=r.r4C,this.cell.addClass(_l.vo.GridStyleName.CELL),this.cell.addClass(_l.vo.GridStyleName.HEADER),this.cell.addClass(_l.vo.GridStyleName.HEADER_ROW),o?(this.cell.addClass(_l.vo.GridStyleName.LEVEL+s),this.cell.text=o.caption,gl.model._options.OptionsManager.showFilter&&(this.cell.addClass(_l.vo.GridStyleName.FILTER_HEADER),o.hasFilter()&&(this.cell.addClass(_l.vo.GridStyleName.FILTERED),this.cell.text+=this.createIcon(_l.vo.GridStyleName.FILTERED_ICON,gl.model._labels.Labels.TOOLTIPS_FILTERED)),this.cell.attr.title=gl.model._labels.Labels.TOOLTIPS_FILTER_ICON,this.cell.text+=this.createIcon(_l.vo.GridStyleName.FILTER_ICON))):this.cell.addClass(_l.vo.GridStyleName.CELL_EMPTY),this.setCellSize(this.cell,e,t),this.cell.attr[i.p4Y]=t,this.cell.attr[i.l4Y]=e,r.F8C<=s&&(this.cell.attr[i.n2Y]=s),this.cell},t.prototype.setHierarchies=function(e){for(var t=this._hierarchies.length=r.F8C;t<e.length;t++){var i=e.getItemAt(t);!r.O8C==i.isMeasures&&this._hierarchies.push(i)}},t.prototype.onClick=function(e){var t=e.element;t.hasClass(_l.vo.GridStyleName.FILTER_HEADER)&&(t=parseInt(t.attr(i.n2Y)),isNaN(t)||this.dispatch(new _l.FilterClickEvent(this._hierarchies[t],e.cell)))},t.prototype.clear=function(){this._hierarchies.length=r.F8C,this.draw()},t}(vl.AbstractSheet),vl.RowsFilter=bl,wl=De||(De={}),Fl=wl._view||(wl._view={}),El=Fl.grid||(Fl.grid={}),Ol=El.sheet||(El.sheet={}),Sl=function(e){function t(t){var o=e.call(this,t,r.x4C)||this;return o.rowIndex=r.F8C,o._coords=t,o._hierarchies=[],o.addClass(i.t2Y),o.hide(),o.addEventListener(El.GridEvent.MOUSE_CLICK,function(e){return o.onClick(e)}),o}return Ga(t,e),t.prototype.draw=function(){var e=r;if(this.removeAllChildren(),wl.model._options.OptionsManager.showHierarchyCaptions){var t=new Lu(e.r4C);t.addClass(i.w4Y),t.style.height=this._coords.getRowHeight(this.rowIndex)+e.y4C;for(var o=e.F8C;o<this._hierarchies.length;o++)t.text+=this.createFilterCell(this.rowIndex,o,this._hierarchies[o]).toHtml();this.html(t.toHtml()),e.F8C==this._hierarchies.length?this.hide():this.show()}else this.hide()},t.prototype.createFilterCell=function(e,t,o){return this.cell.clear(),this.cell.tag=r.r4C,this.cell.addClass(El.vo.GridStyleName.CELL),this.cell.addClass(El.vo.GridStyleName.HEADER),o&&(this.cell.text=o.caption,wl.model._options.OptionsManager.showFilter&&(this.cell.addClass(El.vo.GridStyleName.FILTER_HEADER),this.cell.attr.title=wl.model._labels.Labels.TOOLTIPS_FILTER_ICON,o.hasFilter()&&(this.cell.addClass(El.vo.GridStyleName.FILTERED),this.cell.text+=this.createIcon(El.vo.GridStyleName.FILTERED_ICON,wl.model._labels.Labels.TOOLTIPS_FILTERED)),this.cell.text+=this.createIcon(El.vo.GridStyleName.FILTER_ICON))),this.cell.style[i.z4Y]=this._coords.getRowHeight(e)+r.y4C,this.cell.attr[i.l4Y]=e,this.cell.attr[i.n2Y]=t,this.cell},t.prototype.setHierarchies=function(e){for(var t=this._hierarchies.length=r.F8C;t<e.length;t++){var i=e.getItemAt(t);!r.O8C==i.isMeasures&&this._hierarchies.push(i)}r.F8C==this._hierarchies.length?this.hide():this.show()},t.prototype.onClick=function(e){if((e=e.element).hasClass(El.vo.GridStyleName.FILTER_HEADER)){var t=parseInt(e.attr(i.n2Y));isNaN(t)||this.dispatch(new El.FilterClickEvent(this._hierarchies[t],r.x4C,e))}},t.prototype.clear=function(){this._hierarchies.length=r.F8C,this.draw()},t}(Ol.AbstractSheet),Ol.ColumnsFilter=Sl,Tl=De||(De={}),xl=Tl._view||(Tl._view={}),function(e){var s=function(e){function s(){var r=e.call(this)||this;return r._hierarchies=[],r.addClass(t.a3C),r.addClass(i.t2Y),r.hide(),r}return Ga(s,e),s.prototype.draw=function(){var e=this;if(this.removeAllChildren(),Tl.model._options.OptionsManager.showFilter&&Tl.model._options.OptionsManager.showReportFiltersArea){for(var t=r.F8C;t<this._hierarchies.length;t++){var o=new n(this._hierarchies[t],!r.F8C);o.container.attr(i.n2Y,t),o.addEventListener(h.UIButton.CLICK_EVENT,function(t){return e.onClick(t)}),this.addChild(o.container)}r.F8C==this._hierarchies.length?this.hide():this.show()}else this.hide()},s.prototype.setHierarchies=function(e){for(var t=this._hierarchies.length=r.F8C;t<e.length;t++){var i=e.getItemAt(t);!r.O8C==i.isMeasures&&this._hierarchies.push(i)}this.draw()},s.prototype.onClick=function(e){e=e.target,this.dispatch(new Ll.FilterClickEvent(e.hierarchy,r.x4C,e.container))},s.prototype.clear=function(){this._hierarchies.length=r.F8C,this.draw()},Object.defineProperty(s.prototype,o.Y6B,{get:function(){return r.F8C==this._hierarchies.length},enumerable:!r.F8C,configurable:!r.F8C}),s}(h.UIElement);e.PagesFilter=s;var n=function(e){var t=r;function s(r,o){void t.F8C===o&&(o=!t.O8C);var s=e.call(this)||this;return s._isPage=!t.O8C,s._hierarchy=r,s._isPage=o,s.setLabel(s._hierarchy.caption),s.removeClass(t.E2C),s.addClass(Ll.vo.GridStyleName.FILTER_HEADER),s.addClass(Ll.vo.GridStyleName.HEADER),s._filterIcon=new h.UIElement(i.L2Y,Ll.vo.GridStyleName.ICON),s._filterIcon.addClass(Ll.vo.GridStyleName.FILTER_ICON),s.container.append(s._filterIcon),s._filteredIcon=new h.UIElement(i.L2Y,Ll.vo.GridStyleName.ICON),s._filteredIcon.addClass(Ll.vo.GridStyleName.FILTERED_ICON),s.container.append(s._filteredIcon),s.isFiltered=s._hierarchy.hasFilter(),s._isPage&&(s._description=new h.UILabel,s._description.setLabel(s.getFilterDescription()),s._description.addClass("wdr-filter-desc"),s.addChild(s._description)),s}return Ga(s,e),Object.defineProperty(s.prototype,o.U5B,{get:function(){return this._hierarchy},enumerable:!t.F8C,configurable:!t.F8C}),Object.defineProperty(s.prototype,"isFiltered",{get:function(){return this.container.hasClass(i.m8Y)},set:function(e){this.container.toggleClass(i.m8Y,e)},enumerable:!t.F8C,configurable:!t.F8C}),s.prototype.getFilterDescription=function(){var e=Tl.model._labels.Labels.FILTER_ALL;return this.hierarchy.hasFilter()&&(e=t.O8C==this.hierarchy.filter.length?this.hierarchy.filter.getItemAt(t.F8C).caption:Tl.model._labels.Labels.FILTER_MULTIPLE_ITEMS),e},s}(h.UIButton);e.FilterCell=n}((Ll=xl.grid||(xl.grid={})).sheet||(Ll.sheet={})),Al=De||(De={}),Il=Al._view||(Al._view={}),Rl=Il.grid||(Il.grid={}),Dl=Rl.sheet||(Rl.sheet={}),Nl=function(e){var t=r,o=".wdr-header:not(.wdr-empty)";function s(){var t=e.call(this)||this;return t._type=s.TYPE,t.addClass(i.i2Y),t}return Ga(s,e),s.prototype.setControls=function(){e.prototype.setControls.call(this),this.createColsFilter(),this.createRowsFilter(),this.createPageFilter()},s.prototype.createColsFilter=function(){var e=this;this._colsFilter=new Dl.ColumnsFilter(this._coords),this._colsFilter.id="wdr-cols-filter",this._colsFilter.addEventListener(Rl.GridEvent.FILTER_CLICK,function(t){return e.onFilterClick(t)}),this.addChild(this._colsFilter)},s.prototype.createRowsFilter=function(){var e=this;this._rowsFilter=new Dl.RowsFilter(this._coords),this._rowsFilter.id=i.h2Y,this._rowsFilter.addEventListener(Rl.GridEvent.FILTER_CLICK,function(t){return e.onFilterClick(t)}),this._rowsFilter.addEventListener(Rl.GridEvent.MOUSE_CLICK,function(t){return e.onClick(t)}),this.addChild(this._rowsFilter)},s.prototype.createPageFilter=function(){var e=this;this._pageFilter=new Dl.PagesFilter,this._pageFilter.id="wdr-page-filter",this._pageFilter.addEventListener(Rl.GridEvent.FILTER_CLICK,function(t){return e.onFilterClick(t)}),this.addChild(this._pageFilter)},s.prototype.drawFirst=function(){this._coords.filtersHeight=this._pageFilter.isEmpty?t.F8C:this._pageFilter.element.offsetHeight,e.prototype.drawFirst.call(this),this._rowsFilter.draw()},s.prototype.drawLast=function(){e.prototype.drawLast.call(this),this._colsFilter.draw()},s.prototype.calculateSizesFirst=function(){return this._rowsFilter.calculateSizes(!t.F8C),e.prototype.calculateSizesFirst.call(this)||this._rowsFilter.isDirty},s.prototype.calculateSizesAll=function(){return this._rowsFilter.calculateSizes(!t.F8C),e.prototype.calculateSizesAll.call(this)||this._rowsFilter.isDirty},s.prototype.drawLayout=function(){e.prototype.drawLayout.call(this),this._pageFilter.isEmpty||(this._pageFilter.top=this._coords.titleHeight,this._pageFilter.left=t.F8C,this._pageFilter.right=t.F8C),this._colResizeHandles.top=this._coords.gridStartY,this._rowResizeHandles.top=this._coords.gridStartY,this._sheetHeaders.top=this._coords.gridStartY,this._sheetHeaders.left=t.F8C,this._sheetHeaders.width=this._coords.rowHeadersWidth,this._sheetHeaders.height=this._coords.colHeadersHeight,this._rowsFilter.left=this._coords.getColX(t.F8C,!t.F8C),this._rowsFilter.top=this._coords.gridStartY+this._coords.getRowY(t.F8C,!t.F8C),this._colsFilter.top=this._coords.gridStartY+this._coords.getRowY(this._colsFilter.rowIndex,!t.F8C),this._colsFilter.left=this._coords.rowHeadersWidth,this._colsFilter.right=Math.max(t.F8C,this._coords.layoutWidth-this._coords.getRelativeColX(this._coords.maxColsCount,this.isSmooth)),this._colsSheet.left=this._coords.rowHeadersWidth,this._colsSheet.top=this._coords.gridStartY,this._colsSheet.width=this._coords.dataWidth,this._colsSheet.height=this._coords.layoutHeight-this._coords.gridStartY,this._rowsSheet.left=t.F8C,this._rowsSheet.top=this._coords.colHeadersHeight+this._coords.gridStartY,this._rowsSheet.width=this._coords.layoutWidth,this._rowsSheet.height=this._coords.dataHeight,this._dataSheet.left=this._coords.rowHeadersWidth-t.O8C,this._dataSheet.top=this._coords.colHeadersHeight+this._coords.gridStartY-t.O8C,this._dataSheet.width=this._coords.dataWidth,this._dataSheet.height=this._coords.dataHeight+t.O8C},s.prototype.drawAfterResize=function(){e.prototype.drawAfterResize.call(this),this._rowsFilter.draw(),this._colsFilter.draw()},s.prototype.makeFieldsDraggable=function(){var i=this;e.prototype.makeFieldsDraggable.call(this);for(var r={createHelper:function(e){return i.createHeaderDragHelper(e)}},s=this._colsFilter.find(o,!t.F8C),n=t.F8C;n<s.length;n++)s[n].draggable(r);for(s=this._rowsFilter.find(o,!t.F8C),n=t.F8C;n<s.length;n++)s[n].draggable(r);for(s=this._pageFilter.find(o,!t.F8C),n=t.F8C;n<s.length;n++)s[n].draggable(r)},s.prototype.onDrop=function(e,r,o,s){if(o=this.getDropTargetFilter(o),t.x4C==o)this.removeDropIndicator();else if(s=this.getDropPosition(o,this._dropIndicator),this.removeDropIndicator(),!isNaN(s)){var n,a=parseInt(e.attr(i.n2Y)),l=e.closest(i.a4Y);r=Al.data_.Cube.getInstance().slice_.clone(),l==this._colsFilter?(n=r.columnsOnly.getItemAt(a),a=r.columns.indexOf(n.uniqueName)):l==this._rowsFilter?(n=r.rowsOnly.getItemAt(a),a=r.rows.indexOf(n.uniqueName)):l==this._pageFilter&&(n=r.pages.getItemAt(a),a=r.pages.indexOf(n.uniqueName)),t.x4C==n||o==l&&a==s||(e.hide(),o==l?o==this._colsFilter?r.columns.moveItemAt(a,s):o==this._rowsFilter?r.rows.moveItemAt(a,s):o==this._pageFilter&&r.pages.moveItemAt(a,s):(r.columns.removeItem(n.uniqueName),r.rows.removeItem(n.uniqueName),r.pages.removeItem(n.uniqueName),o==this._colsFilter?r.columns.addItemAt(n.uniqueName,n,s):o==this._rowsFilter?r.rows.addItemAt(n.uniqueName,n,s):o==this._pageFilter&&r.pages.addItemAt(n.uniqueName,n,s)),t.O8C<r.columns.length&&r.columns.getItemAt(t.F8C).isMeasures&&(e=r.columns.getItemAt(t.F8C),r.columns.splice(t.F8C,t.O8C),r.columns.addItemAt(e.uniqueName,e,r.columns.length)),Al.model.PivotModel.getInstance().runQuery(r))}},s.prototype.getDropPosition=function(e,t){return e==this._colsFilter?this.getColumnDropPosition(t):e==this._rowsFilter?this.getRowDropPosition(t):e==this._pageFilter?this.getPageDropPosition(t):NaN},s.prototype.getColumnDropPosition=function(e){var r=Al.data_.Cube.getInstance().slice_;return t.x4C!=e?(e=e.index())>r.columns.length?r.columns.length:(r=r.columns.indexOf(i.Q2Y),t.F8C<=r&&r<=e&&t.F8C!=e&&e++,e):NaN},s.prototype.getRowDropPosition=function(e){var r=i,o=Al.data_.Cube.getInstance().slice_;return t.x4C!=e?(e=e.parent.hasClass(r.t2Y)?o.rows.length:(e=e.parent.find(r.k2Y))?parseInt(e.attr(r.n2Y)):t.F8C)>o.rows.length?o.rows.length:(o=o.rows.indexOf(r.Q2Y),t.F8C<=o&&o<=e&&t.F8C!=e&&e++,e):NaN},s.prototype.getPageDropPosition=function(e){var i=Al.data_.Cube.getInstance().slice_;return t.x4C!=e?(e=e.index())>i.columns.length?i.columns.length:e:NaN},s.prototype.getDropTargetFilter=function(e){var r=i,o=e.closest(r.a4Y);if(t.x4C==o){var s=e.closest(r.F2Y);t.x4C!=s?(e=parseInt(s.attr(r.l4Y)),s=parseInt(s.attr(r.p4Y)),this.isOverColumns(e,s)?o=this._colsFilter:this.isOverRows(e,s)&&(o=this._rowsFilter)):(s=e.closest(".wdr-resize-handles"),t.x4C!=s&&(r.z2Y==s.id?o=this._colsFilter:r.N2Y==s.id&&(o=this._rowsFilter)))}return o},s.prototype.isOverColumns=function(e,t){return t>=this.coords.frozenColsCount},s.prototype.isOverRows=function(e,t){return t<=this.coords.frozenColsCount},s.prototype.showIndicator=function(e,r){var s=i;if(e=this.getDropTargetFilter(e),t.x4C==e)this.removeDropIndicator();else{var n=r.closest(o);t.x4C!=r.closest(s.a4Y)&&t.x4C!=n?(this._dropIndicator=this.createDropIndicator(),e==this._pageFilter?n.before(this._dropIndicator):r.before(this._dropIndicator)):(this._dropIndicator=this.createDropIndicator(),e==this._colsFilter?this._colsFilter.find(".wdr-row").append(this._dropIndicator):e==this._rowsFilter?t.x4C!=r.closest(s.a4Y)?this._rowsFilter.find(s.k2Y).before(this._dropIndicator):this._type==Dl.classic.ClassicGridLayout.TYPE?this._rowsFilter.find(s.k2Y).parent.append(this._dropIndicator):this._rowsFilter.append(this._dropIndicator):e==this._pageFilter&&this._pageFilter.append(this._dropIndicator))}},s.prototype.clearAll=function(){e.prototype.clearAll.call(this),this._colsFilter.clear(),this._pageFilter.clear(),this._rowsFilter.clear()},Object.defineProperty(s.prototype,"colsFilter",{get:function(){return this._colsFilter},enumerable:!t.F8C,configurable:!t.F8C}),Object.defineProperty(s.prototype,"rowsFilter",{get:function(){return this._rowsFilter},enumerable:!t.F8C,configurable:!t.F8C}),Object.defineProperty(s.prototype,"pageFilter",{get:function(){return this._pageFilter},enumerable:!t.F8C,configurable:!t.F8C}),s.prototype.dispose=function(){this._colsFilter.removeAllEventListeners(),this._colsFilter.dispose(),this._rowsFilter.removeAllEventListeners(),this._rowsFilter.dispose(),this._pageFilter.removeAllEventListeners(),e.prototype.dispose.call(this)},s.TYPE=i.d1Y,s}(Dl.BaseGridLayout),Dl.CompactGridLayout=Nl,Ml=De||(De={}),Pl=Ml._view||(Ml._view={}),Hl=Pl.grid||(Pl.grid={}),Ul=Hl.sheet||(Hl.sheet={}),Bl=function(e){var t="wdr-active",o="data-idx",s="wdr-handle";function n(t){var o=r,s=e.call(this,o.r4C,"wdr-resize-handles")||this;return s._mouseDownHandler=function(e){return s.onMouseDown(e)},s._mouseUpHandler=function(e){return s.onMouseUp(e)},s._mouseMoveHandler=function(e){return s.onMouseMove(e)},s._handle=new Lu,s._gridLayout=t,s._coords=t.coords,s.element.addEventListener(o.f4C,s._mouseDownHandler),document.body.addEventListener(o.R4C,s._mouseUpHandler),s._indicator=new h.UIElement(o.r4C,"wdr-indicator"),s._indicator.hide(),s.addChild(s._indicator),s._wrapper=new h.UIElement(o.r4C,"wdr-wrapper"),s._wrapper.attr(i.y2Y,Ml.model._labels.Labels.TOOLTIPS_HEADER_FIT),s.addChild(s._wrapper),s}return Ga(n,e),n.prototype.draw=function(){this._wrapper.attr(i.y2Y,Ml.model._labels.Labels.TOOLTIPS_HEADER_FIT)},n.prototype.createHandle=function(e){return this._handle.tag=r.r4C,this._handle.addClass(s),this._handle.attr[o]=e,this._handle.attr.title=Ml.model._labels.Labels.TOOLTIPS_HEADER_RESIZE,this._handle},n.prototype.onMouseDown=function(e){if(e.target.classList.contains(s)){this._currentHandle=e.target,this._currentHandle.classList.add(t),this._baseOffset=this.getOffset(),document.body.addEventListener(r.e4C,this._mouseMoveHandler),e.stopImmediatePropagation();var i=parseInt(this._currentHandle.getAttribute(o));this.startResizing(this._currentHandle,i),e.preventDefault(),e.stopImmediatePropagation()}},n.prototype.startResizing=function(e,t){},n.prototype.onMouseUp=function(e){document.body.removeEventListener(r.e4C,this._mouseMoveHandler),this._currentHandle&&(this._currentHandle.classList.remove(t),e=parseInt(this._currentHandle.getAttribute(o)),this.stopResizing(this._currentHandle,e),this._currentHandle=r.x4C,this._indicator.hide())},n.prototype.stopResizing=function(e,t){},n.prototype.onMouseMove=function(e){var t=e.clientX-this._baseOffset.left,i=e.clientY-this._baseOffset.top;r.F8C>t||r.F8C>i||t>this._coords.layoutWidth||i>this._coords.layoutHeight?this.onMouseUp(e):(this.positionHandle(this._currentHandle,t,i),this._indicator.show())},n.prototype.positionHandle=function(e,t,i){},n.prototype.dispose=function(){this.element&&this.element.removeEventListener(r.f4C,this._mouseDownHandler),document.body.removeEventListener(r.e4C,this._mouseMoveHandler),document.body.removeEventListener(r.R4C,this._mouseUpHandler),e.prototype.dispose.call(this)},n}(h.UIElement),Ul.ResizeHandles=Bl,kl=De||(De={}),Vl=kl._view||(kl._view={}),zl=Vl.grid||(Vl.grid={}),ql=zl.sheet||(zl.sheet={}),Gl=function(e){function t(){return r.x4C!==e&&e.apply(this,arguments)||this}return Ga(t,e),t.prototype.draw=function(){var t=r;e.prototype.draw.call(this),this._wrapper.removeAllChildren();for(var i=t.C4C,o=t.F8C;o<this._coords.frozenRowsCount;o++)i+=this.createHandle(o).toHtml(!t.F8C);o=this._coords.getBoundTop();for(var s=Math.min(this._coords.maxRowsCount,this._coords.getBoundBottom());o<s;o++)i+=this.createHandle(o).toHtml(!t.F8C);this._wrapper.html(i)},t.prototype.createHandle=function(t){return e.prototype.createHandle.call(this,t),this._handle.style.top=this._coords.getRelativeRowY(t,this._gridLayout.isSmooth,!r.O8C)+this._coords.getRowHeight(t)+r.y4C,this._handle},t.prototype.startResizing=function(e,t){this._startY=this._coords.getRelativeRowY(t,this._gridLayout.isSmooth,!r.O8C)},t.prototype.stopResizing=function(e,t){var i=Math.round(e.offsetTop+e.clientHeight/r.M8C-this._startY);i=Math.max(ql.GridCoords.CELL_MIN_HEIGHT,i),this.dispatchWith(zl.GridEvent.RESIZE_ROW,this,{height:i,rowIdx:t})},t.prototype.positionHandle=function(e,t,i){i=Math.max(this._startY+ql.GridCoords.CELL_MIN_HEIGHT,i),e.style.top=i+r.y4C,this._indicator.top=i,this._indicator.width=this._coords.availableWidth},t}(ql.ResizeHandles),ql.RowResizeHandles=Gl,Wl=De||(De={}),jl=Wl._view||(Wl._view={}),Yl=jl.grid||(jl.grid={}),Xl=Yl.sheet||(Yl.sheet={}),Kl=function(e){function t(){return r.x4C!==e&&e.apply(this,arguments)||this}return Ga(t,e),t.prototype.draw=function(){var t=r;e.prototype.draw.call(this),this._wrapper.removeAllChildren();for(var i=t.C4C,o=t.F8C;o<this._coords.frozenColsCount;o++)i+=this.createHandle(o).toHtml(!t.F8C);var s=Math.min(this._coords.maxColsCount,this._coords.getBoundRight());for(o=this._coords.getBoundLeft();o<s;o++)i+=this.createHandle(o).toHtml(!t.F8C);this._wrapper.html(i)},t.prototype.createHandle=function(t){return e.prototype.createHandle.call(this,t),this._handle.style.left=this._coords.getRelativeColX(t,this._gridLayout.isSmooth)+this._coords.getColWidth(t)+r.y4C,this._handle},t.prototype.startResizing=function(e,t){this._startX=this._coords.getRelativeColX(t,this._gridLayout.isSmooth)},t.prototype.stopResizing=function(e,t){var i=Math.round(e.offsetLeft+e.clientWidth/r.M8C-this._startX);i=Math.max(Xl.GridCoords.CELL_MIN_WIDTH,i),this.dispatchWith(Yl.GridEvent.RESIZE_COLUMN,this,{width:i,colIdx:t})},t.prototype.positionHandle=function(e,t,i){t=Math.max(this._startX+Xl.GridCoords.CELL_MIN_WIDTH,t),e.style.left=t+r.y4C,this._indicator.left=t,this._indicator.height=this._coords.availableHeight},t}(Xl.ResizeHandles),Xl.ColumnResizeHandles=Kl,Ql=De||(De={}),Jl=Ql._view||(Ql._view={}),Zl=Jl.grid||(Jl.grid={}),$l=Zl.sheet||(Zl.sheet={}),eh=$l.classic||($l.classic={}),th=function(e){function t(){var r=e.call(this)||this;return r._type=t.TYPE,r.removeClass(i.i2Y),r.addClass("wdr-classic-view"),r}return Ga(t,e),t.prototype.createRowsFilter=function(){var e=this;this._rowsFilter=new eh.ClassicRowsFilter(this._coords),this._rowsFilter.id=i.h2Y,this._rowsFilter.addEventListener(Zl.GridEvent.FILTER_CLICK,function(t){return e.onFilterClick(t)}),this._rowsFilter.addEventListener(Zl.GridEvent.MOUSE_CLICK,function(t){return e.onClick(t)}),this.addChild(this._rowsFilter)},t.prototype.drawFirst=function(){this.isClassicViewOk?e.prototype.drawFirst.call(this):(Ql.uialert(Ql.model._labels.Labels.MESSAGE_TOO_MANY_COLUMNS_IN_CLASSIC_MODE,Ql.model._labels.Labels.CONFIRMATION,Ql.AlertType.CONFIRMATION),Ql.model.PivotModel.getInstance().setOptions({gridType:Zl.GridType.COMPACT}),Ql.model.PivotModel.getInstance().refresh())},Object.defineProperty(t.prototype,"isClassicViewOk",{get:function(){return this._coords.dataWidth>this._coords.minDataWidth},enumerable:!r.F8C,configurable:!r.F8C}),t.prototype.clearDrawings=function(){e.prototype.clearDrawings.call(this),this._rowsFilter.clearDrawings()},t.prototype.getRowDropPosition=function(e){var t=Ql.data_.Cube.getInstance().slice_;return r.x4C!=e?(e=e.index())>t.rows.length?t.rows.length:(t=t.rows.indexOf(i.Q2Y),r.F8C<=t&&t<=e&&r.F8C!=e&&e++,e):NaN},t.TYPE=i.S1Y,t}($l.CompactGridLayout),eh.ClassicGridLayout=th,ih=De||(De={}),rh=ih._view||(ih._view={}),oh=rh.grid||(rh.grid={}),sh=oh.sheet||(oh.sheet={}),nh=sh.classic||(sh.classic={}),ah=function(e){function t(t){return e.call(this,t)||this}return Ga(t,e),t.prototype.dispose=function(){Be.fmClearTimeout(this._timeout),e.prototype.dispose.call(this)},t.prototype.draw=function(){for(var e=r,t=this,o=[],s=new Lu,n=e.F8C;n<this._coords.frozenRowsCount;n++){s.tag=e.r4C,s.addClass(i.w4Y);for(var a=e.F8C;a<this._coords.frozenColsCount;a++)s.text=ih.model._options.OptionsManager.showHierarchyCaptions?s.text+this.createFilterCell(n,a,n==this._coords.frozenRowsCount-e.O8C?this._hierarchies[a]:e.x4C).toHtml():s.text+this.createCell(n,a).toHtml();o.push(s.toHtml())}this.html(o.join(e.C4C)),this._timeout=Be.fmSetTimeout(function(){return t.calculateSizes(!e.F8C)},e.F8C)},t.prototype.clearDrawings=function(){Be.fmClearTimeout(this._timeout)},t}(sh.RowsFilter),nh.ClassicRowsFilter=ah,lh=De||(De={}),hh=lh._view||(lh._view={}),ch=hh.grid||(hh.grid={}),dh=ch.sheet||(ch.sheet={}),uh=dh.flat||(dh.flat={}),ph=function(e){function t(){var i=e.call(this)||this;return i._isDrillThrough=!r.O8C,i._hierachiesList=r.x4C,i.colsScrollHander=function(e){return i.onColsScroll(e)},i._type=t.TYPE,i.addClass("wdr-flat-view"),i}return Ga(t,e),t.prototype.createColsSheet=function(){var e=this;this._colsSheet=new uh.FlatColumnsSheet(this._coords,function(t,i){return e.getCell(t,i)}),this._colsSheet.id=i.B2Y,this._colsSheet.scrollPane.element.addEventListener(i.Y2Y,this.colsScrollHander),this._colsSheet.addEventListener(ch.GridEvent.MOUSE_CLICK,function(t){return e.onClick(t)}),this._colsSheet.addEventListener(ch.GridEvent.MOUSE_CLICK,function(t){return e.onClickForApi(t)}),this._colsSheet.addEventListener(ch.GridEvent.FILTER_CLICK,function(t){return e.onFilterClick(t)}),this.addChild(this._colsSheet)},t.prototype.drawLayout=function(){var t=r;e.prototype.drawLayout.call(this),this._sheetHeaders.top=this._coords.gridStartY,this._sheetHeaders.left=t.F8C,this._sheetHeaders.width=this._coords.rowHeadersWidth,this._sheetHeaders.height=this._coords.colHeadersHeight,this._colsSheet.left=this._coords.rowHeadersWidth,this._colsSheet.top=this._coords.gridStartY,this._colsSheet.width=this._coords.dataWidth,this._colsSheet.height=this._coords.layoutHeight-this._coords.gridStartY,this._rowsSheet.left=t.F8C,this._rowsSheet.top=this._coords.colHeadersHeight+this._coords.gridStartY,this._rowsSheet.width=this._coords.layoutWidth,this._rowsSheet.height=this._coords.dataHeight,this._dataSheet.left=this._coords.rowHeadersWidth-t.O8C,this._dataSheet.top=this._coords.colHeadersHeight+this._coords.gridStartY-t.O8C,this._dataSheet.width=this._coords.dataWidth,this._dataSheet.height=this._coords.dataHeight+t.O8C},t.prototype.drawLast=function(){e.prototype.drawLast.call(this)},Object.defineProperty(t.prototype,"isDrillThrough",{get:function(){return this._isDrillThrough},set:function(e){this._isDrillThrough=e},enumerable:!r.F8C,configurable:!r.F8C}),t.prototype.makeFieldsDraggable=function(){var t=this;e.prototype.makeFieldsDraggable.call(this);for(var o={createHelper:function(e){return t.createHeaderDragHelper(e)}},s=this._colsSheet.find(i.k2Y,!r.F8C),n=r.F8C;n<s.length;n++)s[n].draggable(o)},t.prototype.showIndicator=function(e,t){var o=r,s=t.closest(i.F2Y);o.x4C!=s?(s=parseInt(s.attr(i.p4Y)),s=Math.min(s,this.coords.dataColsCount),this._dropIndicator=this.createDropIndicator(),this._dropIndicator.left=this.coords.getRelativeColX(s,this.isSmooth)-(s==this.coords.dataColsCount?o.F8C:this._dropIndicator.width),this._dropIndicator.top=this._coords.gridStartY+this.coords.getRelativeRowY(o.F8C,this.isSmooth)-o.O8C,this._dropIndicator.height=this.coords.getRowHeight(o.F8C)+o.O8C,this.append(this._dropIndicator)):this.removeDropIndicator()},t.prototype.onDrop=function(e,t,o,s){var n=r;this.removeDropIndicator(),s=o.closest(i.F2Y),n.x4C!=s&&(t=lh.data_.Cube.getInstance().slice_.clone(),o=this.isDrillThrough&&n.x4C!=this._hierachiesList?this._hierachiesList:t.flatten(),s=parseInt(s.attr(i.p4Y)),(e=parseInt(e.attr(i.p4Y)))!=(s=Math.max(n.F8C,Math.min(s,o.length-n.O8C)))&&(o.moveItemAt(e,s),n.F8C<t.flatOrder.length&&(t.flatOrder=o.toKeyArray()),this.isDrillThrough?(this._hierachiesList=o,t.flatOrder=o.toKeyArray(),this.dispatchWith(hh.config.FieldsView.EVENT_APPLY_SLICE,this,t)):(t.rows=o,lh.model.PivotModel.getInstance().runQuery(t))))},t.TYPE=o.F6B,t}(dh.BaseGridLayout),uh.FlatGridLayout=ph,Ch=De||(De={}),fh=Ch._view||(Ch._view={}),mh=fh.grid||(fh.grid={}),gh=mh.sheet||(mh.sheet={}),yh=gh.flat||(gh.flat={}),_h=function(e){function t(t,i){var r=e.call(this,t,i)||this;return r.addEventListener(mh.GridEvent.MOUSE_CLICK,function(e){return r.onFilterClick(e)}),r}return Ga(t,e),t.prototype.onFilterClick=function(e){r.x4C!=e.cell&&e.cell.isFilterHeader&&r.x4C!=e.cell.hierarchy&&e.cell.activeElementType!=mh.vo.GridCellElementType.RIGHT_ICON&&this.dispatch(new mh.FilterClickEvent(e.cell.hierarchy,e.cell))},t.prototype.createCell=function(t,i,o){return void r.F8C===o&&(o=!r.O8C),this.cell=e.prototype.createCell.call(this,t,i,o),(t=this._getDataFunc?this._getDataFunc(t,i):r.x4C)&&t.isFilterHeader&&(this.cell.addClass(mh.vo.GridStyleName.FILTER_HEADER),t.filtered&&(this.cell.addClass(mh.vo.GridStyleName.FILTERED),this.cell.text+=this.createIcon(mh.vo.GridStyleName.FILTERED_ICON,Ch.model._labels.Labels.TOOLTIPS_FILTERED)),this.cell.attr.title=Ch.model._labels.Labels.TOOLTIPS_FILTER_ICON,this.cell.text+=this.createIcon(mh.vo.GridStyleName.FILTER_ICON)),this.cell},t}(gh.ColumnHeadersSheet),yh.FlatColumnsSheet=_h,vh=De||(De={}),bh=vh._view||(vh._view={}),wh=bh.config||(bh.config={}),Fh=function(e){var i="#wdr-aggregations-view";function o(){var i=e.call(this,r.r4C)||this;i.leaveHandler=function(e){return i.onMouseLeave(e)},i.list=new h.lists.UIList,i.list.markSelected=!r.F8C,i.list.setItemRendererFactory(i.itemRendererFactory),i.list.setLabelField(t.W0B),i.list.addEventListener(s._Event.CHANGE,function(e){return i.onListChange(e)}),i.addChild(i.list),i.container.disableSelection();var o=new h.UIElement(r.r4C,"wdr-arrow");return i.container.addChild(o),i}return Ga(o,e),o.prototype.showWith=function(e,t){var i=r;this.origin=t,this.fieldData=e,this.setData(e),this.show(),this.container.addEventListener(i.m4C,this.leaveHandler),document.body.addEventListener(i.f4C,this.leaveHandler);var o=t.getOffset(this.container.element.offsetParent);this.container.css(i.j2C,this.container.element.offsetParent.clientWidth-o.left+i.y4C),this.container.css(i.b2C,o.top-this.getHeight()/i.M8C+t.getHeight()/i.M8C+i.y4C)},o.prototype.onMouseLeave=function(e){var t=r;t.f4C==e.type&&t.x4C!=h.UIElement.convert(event.target).closest(i)||(this.container.removeEventListener(t.m4C,this.leaveHandler),document.body.removeEventListener(t.f4C,this.leaveHandler),this.hide())},o.prototype.onStageMouseDown=function(e){r.x4C==h.UIElement.convert(e.target).closest(i)&&this.hide()},o.prototype.setData=function(e){for(var t,i=r,o=i.F8C,s=[],n=i.F8C;n<e.availableAggregations.length;n++)t={caption:e.availableAggregationsCaptions[n],aggregation:e.availableAggregations[n]},void i.F8C!=e.availableAggregationsTotalCaptions&&(t.totalCaption=e.availableAggregationsTotalCaptions[n]),s.push(t),e.availableAggregations[n]==e.aggregation&&(o=n);this.list.setDataProvider(s),this.list.setSelectedIndex(o),this.list.container.setScrollTop(i.F8C)},o.prototype.onListChange=function(e){this.dispatchWith(s._Event.CHANGE,this,{fieldData:this.fieldData,aggrData:e.data.selectedItem,origin:this.origin}),this.hide()},o.prototype.itemRendererFactory=function(e,t){var i=new h.renderers.SelectItemRenderer;return i.setData(e),i.setIndex(t),i},o}(h.UIComponentBase),wh.AggregationsView=Fh,Eh=De||(De={}),Oh=Eh._view||(Eh._view={}),Sh=Oh.config||(Oh.config={}),Th=Sh._pivot||(Sh._pivot={}),xh=function(){var e=r;function s(){}return s.prototype.update=function(e,t,i){this._structure=e,this._slice=t,this._dataSourceType=i,this.clearSearch(),this.updateSlice(),this.updateStructure()},s.prototype.updateSlice=function(){this.pages=this.getPages(),this.rows=this.getRows(),this.markValues(this.rows),this.columns=this.getColumns(),this.markValues(this.columns),this.measures=this.getMeasures(),this.markMeasures(this.measures)},s.prototype.updateStructure=function(){if(this._hierarchies=[],this.allHierarchies=[],this.addHierarchies(this._hierarchies,this.getAllHierarchies()),this.removeSingleDimensions(this._hierarchies),this.addMeasures(this._hierarchies,this.getAllMeasures()),this.sortHierarchies(this._hierarchies),s.expandFormulas){s.expandFormulas=!e.O8C;var i=Be.ArrayUtils.find(this._hierarchies,t.l5C+Eh.model._labels.Labels.FIELDS_LIST_FORMULAS_GROUP_NAME,o.M6B);e.x4C!=i&&this.expandField(i)}this.markSelected(this.pages),this.markSelected(this.columns),this.markSelected(this.rows),this.markSelected(this.measures)},s.prototype.onCalculatedValueAdded=function(t){if(e.x4C!=this._structure){var i=Be.ArrayUtils.find(this.getAllMeasures(),t,o.M6B);e.x4C!=i&&(i.isMeasure=!e.F8C,i.showAggregations=this.isMeasuresAsHierarchies,t=Be.ArrayUtils.findIndex(this.measures,t,o.M6B),e.F8C<=t?(i.isChanged=!e.F8C,this.measures[t]=i):this.measures.push(i)),this.updateStructure()}},s.prototype.onCalculatedValueRemoved=function(t){e.x4C!=this._slice&&e.x4C!=this._structure&&(this.updateSlice(),this.updateStructure())},s.prototype.removeItemByName=function(t,i){for(var r=e.F8C;r<t.length;r++)if(t[r].uniqueName==i){t.splice(r,e.O8C);break}},s.prototype.markValues=function(t){t=Be.ArrayUtils.find(t,Eh.data_.Cube.MEASURES_NAME,o.M6B),e.x4C!=t&&(t.caption=Eh.model._labels.Labels.FIELDS_LIST_VALUES,t.isValues=!e.F8C)},s.prototype.markMeasures=function(t){for(var i=e.F8C;i<t.length;i++)t[i].isMeasure=!e.F8C,t[i].showAggregations=Eh.model._options.OptionsManager.showAggregations},s.prototype.markSelected=function(t){for(var i,r=e.F8C;r<t.length;r++)t[r].isSelected=!e.F8C,i=this.findItem(t[r].uniqueName,t[r].isMeasure),this._slice.allHierarchies().getItem(t[r].uniqueName),e.x4C!=i&&this.selectField(i,!e.F8C)},s.prototype.selectField=function(t,i){if(t.isSelected=i,e.x4C!=t.parent&&t.parent.isSelected!=i&&(!e.F8C==i?this.selectField(t.parent,i):!e.O8C==this.hasSelected(t.parent.children)&&this.selectField(t.parent,i)),t.isLevelFolder&&!e.O8C==i)for(var r=e.F8C;r<t.children.length;r++)this.selectField(t.children[r],i)},s.prototype.hasSelected=function(t){for(var i=e.F8C;i<t.length;i++)if(!e.F8C===t[i].isSelected)return!e.F8C;return!e.O8C},s.prototype.addHierarchies=function(t,i){for(var r,s,n=o,a=e.F8C;a<i.length;a++)r=this._structure.hierarchyToMeasure(i[a].uniqueName),e.x4C!=r&&r.type!=Eh.data_.types.MeasureType.COUNT&&e.C4C!=i[a].folder?(s=Be.ArrayUtils.find(this.allHierarchies,"Folder."+i[a].folder,n.M6B),e.x4C==s&&((s={isFolder:!e.F8C}).uniqueName="Folder."+i[a].folder,s.caption=i[a].folder,s.children=[],t.push(s),this.allHierarchies.push(s)),i[a].level=e.O8C,i[a].parent=s,s.children.push(i[a])):(r=Be.ArrayUtils.find(t,i[a].dimensionUniqueName,n.M6B),e.x4C==r&&((r={isFolder:!e.F8C}).uniqueName=i[a].dimensionUniqueName,r.caption=i[a].dimensionCaption,r.children=[],r.level=e.F8C,t.push(r),this.allHierarchies.push(r)),i[a].isLevel?(r=e.C4C==i[a].folder?r:s,r=Be.ArrayUtils.find(r.children,i[a].hierarchyName,n.M6B),i[a].level=r.level+e.O8C,i[a].parent=r,e.x4C==r.children&&(r.children=[]),r.children.push(i[a]),r.isLevelFolder=!e.F8C):e.C4C!=i[a].folder?(s=Be.ArrayUtils.find(r.children,r.uniqueName+i[a].folder,n.M6B),e.x4C==s&&((s={isFolder:!e.F8C}).uniqueName=r.uniqueName+i[a].folder,s.caption=i[a].folder,s.children=[],s.level=e.O8C,s.parent=r,r.children.push(s),this.allHierarchies.push(s)),i[a].level=e.M8C,i[a].parent=s,s.children.push(i[a])):(i[a].level=e.O8C,i[a].parent=r,r.children.push(i[a]))),this.allHierarchies.push(i[a])},s.prototype.addMeasures=function(t,i){for(var r,s={},n=e.F8C;n<i.length;n++){if(i[n].isMeasure=!e.F8C,i[n].showAggregations=Eh.model._options.OptionsManager.showAggregations,i[n].calculated&&(i[n].groupName=Eh.model._labels.Labels.FIELDS_LIST_FORMULAS_GROUP_NAME),this.isMeasuresAsHierarchies&&(r=this.toHierarchyUniqueName(i[n].uniqueName),r=Be.ArrayUtils.find(this.allHierarchies,r,o.M6B)),this.isMeasuresAsHierarchies&&e.x4C!=r)r.measureItem=i[n],r.measureItem.hierarchyItem=r,i[n].parent=r.parent;else if(e.C4C!=i[n].groupName){var a=this.addMeasureFolders(s,i[n].groupName,i[n].folder.split(o.F3B),i[n].calculated),l=a.folder;e.x4C!=l&&e.F8C>l.children.indexOf(i[n])&&l.children.push(i[n]),e.x4C!=a.root&&e.F8C>t.indexOf(a.root)&&t.push(a.root),i[n].level=a.folder.level+e.O8C,i[n].parent=l}else i[n].level=e.F8C,t.push(i[n]);this.allHierarchies.push(i[n])}},s.prototype.addMeasureFolders=function(i,r,o,s){void e.F8C===s&&(s=!e.O8C),o.unshift(r),r=e.C4C;for(var n,a,l,h=e.F8C,c=e.F8C;c<o.length;c++){var d=r+t.l5C+o[c];Be.nullOrEmpty(o[c])||(a=i[d],e.x4C==a&&((a={}).caption=o[c],a.uniqueName=d,a.folder=r,a.children=[],a.level=h,a.isFolder=!e.F8C,a.isMeasuresFolder=!e.F8C,a.isCalculatedMeasuresFolder=s,this.allHierarchies.push(a),i[a.uniqueName]=a),(a.parent=n)&&n.children&&e.F8C>n.children.indexOf(a)&&n.children.push(a),e.x4C==l&&(l=a),i=i[r+=t.l5C+o[c]],n=a,h++)}return{folder:a,root:l}},s.prototype.removeSingleDimensions=function(t){for(var i,r=e.F8C;r<t.length;r++)if(!e.F8C===t[r].isFolder&&e.O8C==t[r].children.length&&!e.F8C!==t[r].children[e.F8C].isFolder&&!t[r].children[e.F8C].calculated&&((i=t[r].children[e.F8C]).level=e.F8C,i.parent=e.x4C,t.splice(r,e.O8C,i),i.children))for(var o=e.F8C;o<i.children.length;o++)i.children[o].level-=e.O8C},s.prototype.sortHierarchies=function(e){var t=this;e.sort(function(e,i){var r=t.getFieldRank(e),o=t.getFieldRank(i);return r==o?e.caption.localeCompare(i.caption):o-r})},s.prototype.getFieldRank=function(t){return!e.F8C===t.isLevel?e.F8C:!e.F8C===t.isFolder&&!e.F8C!==t.isMeasuresFolder?e.b8C:!e.F8C!==t.isFolder&&!e.F8C!==t.isMeasure?e.M8C:!e.F8C===t.isFolder&&!e.F8C===t.isMeasuresFolder?e.O8C:e.F8C},s.prototype.collapseField=function(t){if(!this.isSearch){for(var i=this._hierarchies.indexOf(t)+e.O8C,r=e.F8C;r<t.children.length;r++)!e.F8C===t.children[r].isExpanded&&this.collapseField(t.children[r]);this._hierarchies.splice(i,t.children.length),t.isExpanded=!e.O8C}},s.prototype.expandField=function(t){if(!this.isSearch){var i=this._hierarchies.indexOf(t)+e.O8C;t.isLevelFolder||this.sortHierarchies(t.children),Be.ArrayUtils.insert(this._hierarchies,t.children,i),t.isExpanded=!e.F8C}},s.prototype.toHierarchyUniqueName=function(t){return t=this._structure.measureToHierarchy(t),e.x4C!=t?t.uniqueName:e.C4C},s.prototype.toMeasureUniqueName=function(t){return t=this._structure.hierarchyToMeasure(t),e.x4C!=t?t.uniqueName:e.C4C},s.prototype.findHierarchy=function(t){for(var i=e.F8C;i<this.allHierarchies.length;i++)if(!this.allHierarchies[i].isMeasure&&!this.allHierarchies[i].isFolder&&this.allHierarchies[i].uniqueName==t)return this.allHierarchies[i]},s.prototype.findMeasure=function(t){for(var i=e.F8C;i<this.allHierarchies.length;i++)if(this.allHierarchies[i].isMeasure&&!this.allHierarchies[i].isFolder&&this.allHierarchies[i].uniqueName==t)return this.allHierarchies[i]},s.prototype.findItem=function(t,i){return void e.F8C===i&&(i=!e.O8C),i?this.findMeasure(t):this.findHierarchy(t)},s.prototype.isValidSlice=function(){return e.F8C<this.measures.length},s.prototype.getSlice=function(){return{pages:this.toPlainArray(this.pages),rows:this.toPlainArray(this.rows),columns:this.toPlainArray(this.columns),measures:this.toPlainArray(this.measures),flatOrder:this._slice?this._slice.flatOrder:[]}},s.prototype.isSliceDifferent=function(t){return e.x4C==this._slice?!e.F8C:this.isDifferent(t.pages,this._slice.pages.toArray())||this.isDifferent(t.rows,this._slice.rows.toArray())||this.isDifferent(t.columns,this._slice.columns.toArray())||this.isDifferent(t.measures,this._slice.measures_.toArray())},s.prototype.toPlainArray=function(t){for(var i,r=[],o=e.F8C;o<t.length;o++)i={uniqueName:t[o].uniqueName},t[o].isMeasure&&(i.aggregation=t[o].aggregation,i.isChanged=t[o].isChanged),t[o].isLevel&&(i.activeLevelName=t[o].uniqueName,i.uniqueName=t[o].hierarchyName),r.push(i);return r},s.prototype.isDifferent=function(t,i){if(t.length!=i.length)return!e.F8C;for(var r=e.F8C;r<i.length;r++)if(t[r].uniqueName!=i[r].uniqueName||t[r].aggregation!=i[r].aggregation||t[r].activeLevelName!=i[r].activeLevelName||t[r].isChanged)return!e.F8C;return!e.O8C},Object.defineProperty(s.prototype,"isMeasuresAsHierarchies",{get:function(){var e=this._dataSourceType;return e==Eh.data_.consts.DataSourceType.CSV||e==Eh.data_.consts.DataSourceType.JSON},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(s.prototype,i.l3Y,{get:function(){for(var t=e.F8C;t<this._hierarchies.length;t++)if((this._hierarchies[t].isFolder||this._hierarchies[t].isMeasuresFolder||this._hierarchies[t].isLevelFolder)&&!this._hierarchies[t].isExpanded)return!e.F8C;return!e.O8C},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(s.prototype,"hasFolders",{get:function(){for(var t=e.F8C;t<this._hierarchies.length;t++)if(this._hierarchies[t].isFolder||this._hierarchies[t].isMeasuresFolder||this._hierarchies[t].isLevelFolder)return!e.F8C;return!e.O8C},enumerable:!e.F8C,configurable:!e.F8C}),s.prototype.collapseAll=function(){if(!this.isSearch){for(var t=e.F8C;t<this._hierarchies.length;t++)(this._hierarchies[t].isFolder||this._hierarchies[t].isMeasuresFolder||this._hierarchies[t].isLevelFolder)&&(this._hierarchies[t].isExpanded=!e.O8C);var i=[];for(t=e.F8C;t<this._hierarchies.length;t++)e.F8C==this._hierarchies[t].level&&i.push(this._hierarchies[t]);this._hierarchies.splice(e.F8C,this._hierarchies.length),Be.ArrayUtils.insert(this._hierarchies,i,e.F8C)}},s.prototype.expandAll=function(){if(!this.isSearch){this.collapseAll();for(var t=e.F8C;t<this._hierarchies.length;t++)(this._hierarchies[t].isFolder||this._hierarchies[t].isLevelFolder)&&this._expandField(this._hierarchies[t],t+e.O8C)}},s.prototype._expandField=function(t,i){t.isExpanded=!e.F8C,e.x4C!=t.children&&e.F8C<t.children.length&&(this.sortHierarchies(t.children),Be.ArrayUtils.insert(this._hierarchies,t.children,i))},s.prototype.getPages=function(){return e.x4C!=this._slice?this.convertHierarchies(this._slice.pages):[]},s.prototype.getRows=function(){return e.x4C!=this._slice?this.convertHierarchies(this._slice.rows):[]},s.prototype.getColumns=function(){return e.x4C!=this._slice?this.convertHierarchies(this._slice.columns):[]},s.prototype.getMeasures=function(){return e.x4C!=this._slice?this.convertMeasures(this._slice.measures_):[]},s.prototype.getAllHierarchies=function(){return e.x4C!=this._structure?this.convertHierarchies(this._structure.allHierarchies(!e.O8C),!e.F8C):[]},s.prototype.getAllMeasures=function(){return e.x4C!=this._structure?this.convertMeasures(this._structure.measures_):[]},s.prototype.convertHierarchies=function(t,i){void e.F8C===i&&(i=!e.O8C);for(var r=[],o=e.F8C;o<t.length;o++){var s=t.getItemAt(o);if(r.push({caption:s.caption,uniqueName:s.uniqueName,dimensionUniqueName:s.dimension.uniqueName,dimensionCaption:s.dimension.caption,folder:s.folder,isLevel:!e.O8C,isLevelFolder:s.isHierarchy&&i}),s.isHierarchy&&i)for(var n=e.F8C;n<s.levels_.length;n++)if(e.F8C!=n){var a=s.levels_.getItemAt(n);r.push({caption:a.caption,uniqueName:a.uniqueName,dimensionUniqueName:s.dimension.uniqueName,dimensionCaption:s.dimension.caption,folder:s.folder,hierarchyName:s.uniqueName,hierarchyCaption:s.caption,isLevel:!e.F8C,isLevelFolder:!e.O8C})}}return r},s.prototype.convertMeasures=function(t){for(var i=[],r=e.F8C;r<t.length;r++){var o=t.getItemAt(r),s=Eh.data_._structure.GenericMeasure.toObject(o),n=o.availableAggregations;e.F8C!=o.availableAggregations.length||o.calculated||(n=Eh.data_.consts.AggregationName.ALL_AGGREGATIONS),s.availableAggregations=n,s.availableAggregationsCaptions=Eh.data_.consts.AggregationName.aggregationCaptions(n),s.availableAggregationsTotalCaptions=Eh.data_.consts.AggregationName.aggregationTotalCaptions(n),i.push(s)}return i},s.prototype.search=function(t){if(t=t.toLowerCase(),this.searchPhrase!=t){this.searchPhrase=t,this.searchedHierarchies=[];for(var i=this.allHierarchies.length,r=e.F8C;r<i;r++){var o=this.allHierarchies[r];o.isFolder||o.isMeasure&&this.isMeasuresAsHierarchies||!Be.StringUtils.contains(o.caption,t)||(this.addParents(o,this.searchedHierarchies),this.searchedHierarchies.push(o))}}},s.prototype.addParents=function(t,i){if(t.parent&&e.F8C>i.indexOf(t.parent)){for(var r=[];e.x4C!=t.parent;)r.push(t.parent),t=t.parent;r=r.reverse();for(var o=e.F8C;o<r.length;o++)e.F8C>i.indexOf(r[o])&&i.push(r[o])}},s.prototype.clearSearch=function(){this.searchPhrase=e.C4C,this.searchedHierarchies=e.x4C},Object.defineProperty(s.prototype,"isSearch",{get:function(){return!Be.nullOrEmpty(this.searchPhrase)},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(s.prototype,"isSearchNeeded",{get:function(){return this.allHierarchies&&e.V0C<this.allHierarchies.length},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(s.prototype,"isCalculatedAvailable",{get:function(){return Eh.model._options.OptionsManager.showCalculatedValuesButton},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(s.prototype,o.c5B,{get:function(){return this.isSearch?this.searchedHierarchies:this._hierarchies},enumerable:!e.F8C,configurable:!e.F8C}),s.expandFormulas=!e.O8C,s}(),Th.PivotFieldsModel=xh,Lh=De||(De={}),Ah=Lh._view||(Lh._view={}),Ih=Ah.config||(Ah.config={}),Rh=Ih._pivot||(Ih._pivot={}),Dh=function(e){function n(n){var a=i,l=r,c=e.call(this)||this;return c.type=o.s6B,c.calculatedValueAddedHandler=function(e){return c.onCalculatedValueAdded(e)},c.calculatedValueRemovedHandler=function(e){return c.onCalculatedValueRemoved(e)},c.model=new Rh.PivotFieldsModel,c.view=new Rh.PivotFieldsView(c,n),c.view.addEventListener(s._Event.CLOSED,function(e){return c.dispatch(e)}),c.lists=[c.view.lstPages,c.view.lstRows,c.view.lstColumns,c.view.lstMeasures],c.view.btnOk&&c.view.btnOk.addEventListener(h.UIButton.CLICK_EVENT,function(){return c.onOkClick()}),c.view.btnCancel&&c.view.btnCancel.addEventListener(h.UIButton.CLICK_EVENT,function(){return c.onCancelClick()}),l.x4C!=c.view.aggrView&&c.view.aggrView.addEventListener(s._Event.CHANGE,function(e){return c.onAggregationChange(e)}),c.view.lstHierarchies&&(c.view.lstHierarchies.container.addEventListener(l.H2C,function(e){return c.onHierarchyFieldClick(e)}),c.view.lstHierarchies.droppable({onDrop:function(e,t,i,r){return c.onHierarchiesDrop(e,t,i,r)},onDragEnter:function(e,t,i,r){return c.onHierarchiesDragEnterOrOver(e,t,i,r)},onDragOver:function(e,t,i,r){return c.onHierarchiesDragEnterOrOver(e,t,i,r)},onDragLeave:function(e,t,i,r){return c.onDragLeave(e,t,i,r)},itemSelector:t.y3C}),c.view.lstHierarchies.container.disableSelection()),n={onDrop:function(e,t,i,r){return c.onDrop(e,t,i,r)},onDragEnter:function(e,t,i,r){return c.onDragEnterOrOver(e,t,i,r)},onDragOver:function(e,t,i,r){return c.onDragEnterOrOver(e,t,i,r)},onDragLeave:function(e,t,i,r){return c.onDragLeave(e,t,i,r)},itemSelector:t.y3C},c.view.lstPages&&(c.view.lstPages.droppable(n),c.view.lstPages.container.addEventListener(a.a1Y,function(e){return c.onFieldDoubleClick(e)}),c.view.lstPages.container.disableSelection()),c.view.lstRows&&(c.view.lstRows.droppable(n),c.view.lstRows.container.addEventListener(a.a1Y,function(e){return c.onFieldDoubleClick(e)}),c.view.lstRows.container.disableSelection()),c.view.lstColumns&&(c.view.lstColumns.droppable(n),c.view.lstColumns.container.addEventListener(a.a1Y,function(e){return c.onFieldDoubleClick(e)}),c.view.lstColumns.container.disableSelection()),c.view.lstMeasures&&(c.view.lstMeasures.container.addEventListener(l.H2C,function(e){return c.onMeasureFieldClick(e)}),c.view.lstMeasures.container.addEventListener(a.a1Y,function(e){return c.onFieldDoubleClick(e)}),c.view.lstMeasures.droppable(n),c.view.lstMeasures.container.disableSelection()),c.view.btnAddMeasure&&c.view.btnAddMeasure.addEventListener(h.UIButton.CLICK_EVENT,function(){return c.onAddMeasureClick()}),c.view.btnCollapseExpand&&c.view.btnCollapseExpand.addEventListener(h.UIButton.CLICK_EVENT,function(){return c.onCollapseExpandClick()}),c.view.inpSearch&&(c.view.inpSearch.setChangeDelay(l.m0C),c.view.inpSearch.addEventListener(h.UITextInput.CHANGE_EVENT,function(){return c.onSearchChange()})),c}return Ga(n,e),n.prototype.onCancelClick=function(){this.view.close()},n.prototype.onOkClick=function(){this.applySlice(),this.view.close()},n.prototype.onSearchChange=function(){this.model.search(this.view.inpSearch.getText()),this.view.lstHierarchies.container.toggleClass("wdr-searched",this.model.isSearch),this.view.lstHierarchies.setDataProvider(this.model.hierarchies),this.validateList(this.view.lstHierarchies),this.view.btnCollapseExpand&&this.view.btnCollapseExpand.isVisible(this.model.hasFolders&&!this.model.isSearch)},n.prototype.applySlice=function(){var e=this.model.getSlice();this.model.isSliceDifferent(e)&&this.dispatchWith(Ih.FieldsView.EVENT_APPLY_SLICE,this,e)},n.prototype.onCalculatedValueAdded=function(e){Lh.model.PivotModel.getInstance().removeEventListener(Ah.calculated.CalculatedView.EVENT_CALCULATED_VALUE_ADDED,this.calculatedValueAddedHandler),this.model.onCalculatedValueAdded(e.data.measureUniqueName),this.updateView()},n.prototype.onCalculatedValueRemoved=function(e){Lh.model.PivotModel.getInstance().removeEventListener(Ah.calculated.CalculatedView.EVENT_CALCULATED_VALUE_REMOVED,this.calculatedValueRemovedHandler),this.model.onCalculatedValueRemoved(e.data),this.updateView()},n.prototype.onAddMeasureClick=function(){Lh.model.PivotModel.getInstance().dispatchWith(Ah.ViewEvent.CALCULATED_VIEW_OPEN),Lh.model.PivotModel.getInstance().addEventListener(Ah.calculated.CalculatedView.EVENT_CALCULATED_VALUE_ADDED,this.calculatedValueAddedHandler)},n.prototype.onCollapseExpandClick=function(){this.model.isExpandAll?this.model.expandAll():this.model.collapseAll(),this.validateList(this.view.lstHierarchies),this.view.setLabels()},n.prototype.onFieldDoubleClick=function(e){var i=h.UIElement.convert(e.target).closest(t.I3C);r.x4C!=i&&(i=this.getListById(i.attr(r.G2C)),e=h.UIElement.convert(e.target).closest(t.y3C),r.x4C!=e&&(e=parseInt(e.attr(t.d3C)),this.removeField(i,e)))},n.prototype.onMeasureFieldClick=function(e){var o=h.UIElement.convert(e.target).closest(t.y3C);r.x4C!=o&&(o=parseInt(o.attr(t.d3C)),o=this.model.measures[o],i.u3Y==h.UIElement.convert(e.target).attr(r.G2C)&&this.view.aggrView.showWith(o,h.UIElement.convert(e.target)))},n.prototype.onAggregationChange=function(e){var t=e.data.fieldData,i=e.data.aggrData;h.UIElement.convert(e.data.origin),t.aggregation=i.aggregation,t.caption=Lh.model._options.OptionsManager.showAggregationLabels?Be.StringUtils.bind(i.totalCaption,t.name):t.name,this.view.lstMeasures.validateItem(t),e=Be.ArrayUtils.find(this.model.hierarchies,t.uniqueName,o.M6B),r.x4C!=e&&(this.model.isMeasuresAsHierarchies&&r.x4C!=e.measureItem&&(e=e.measureItem),e.aggregation=t.aggregation,e.caption=t.caption,this.view.lstHierarchies.validateItem(e))},n.prototype.onHierarchyFieldClick=function(e){var o=r,s=h.UIElement.convert(e.target).closest(t.y3C);if(o.x4C!=s){s=parseInt(s.attr(t.d3C));var n=this.model.hierarchies[s];if(i.u3Y==h.UIElement.convert(e.target).attr(o.G2C))this.view.aggrView.showWith(n,h.UIElement.convert(e.target));else if(i.z3Y==h.UIElement.convert(e.target).attr(o.G2C))Lh.model.PivotModel.getInstance().dispatchWith(Ah.ViewEvent.CALCULATED_VIEW_OPEN,o.x4C,{measureName:n.uniqueName}),Lh.model.PivotModel.getInstance().addEventListener(Ah.calculated.CalculatedView.EVENT_CALCULATED_VALUE_ADDED,this.calculatedValueAddedHandler),Lh.model.PivotModel.getInstance().addEventListener(Ah.calculated.CalculatedView.EVENT_CALCULATED_VALUE_REMOVED,this.calculatedValueRemovedHandler);else if(n.isFolder||n.isLevelFolder&&i.N3Y!=h.UIElement.convert(e.target).attr(o.G2C))!o.F8C===n.isExpanded?this.model.collapseField(n):this.model.expandField(n),this.validateList(this.view.lstHierarchies),this.view.setLabels();else{if(!o.F8C==n.isSelected||o.x4C!=n.measureItem&&!o.F8C==n.measureItem.isSelected)!o.F8C==n.isSelected&&(this.model.selectField(n,!o.O8C),this.findAndRemoveField(n)),o.x4C!=n.measureItem&&!o.F8C==n.measureItem.isSelected&&(this.model.selectField(n.measureItem,!o.O8C),this.findAndRemoveField(n.measureItem));else if(n.isMeasure)this.model.selectField(n,!o.F8C),this.model.measures.push(n),this.validateList(this.view.lstMeasures);else if(n.measureItem&&n.measureItem.type!=Lh.data_.types.MeasureType.COUNT&&n.measureItem.type!=Lh.data_.types.MeasureType.DATE)this.model.selectField(n.measureItem,!o.F8C),this.model.measures.push(n.measureItem),this.validateList(this.view.lstMeasures);else{if(n.isLevel)for(n.parent.isSelected&&this.findAndRemoveField(n.parent),e=o.F8C;e<n.parent.children.length;e++){var a=n.parent.children[e];a.uniqueName!=n.uniqueName&&(a.isSelected&&this.findAndRemoveField(a),a.isSelected=!o.O8C)}this.model.selectField(n,!o.F8C),this.model.rows.push(n),this.validateList(this.view.lstRows)}this.validateItemRecursivelyAt(this.view.lstHierarchies,s),this.validateSlice()}}},n.prototype.validateItemRecursivelyAt=function(e,t){e.validateItemAt(t);var i=e.getDataProvider()[t];if(r.x4C!=i.parent&&this.validateItemRecursively(e,i.parent),i.isLevelFolder)for(var o=r.F8C;o<i.children.length;o++)e.validateItem(i.children[o]);if(i.isLevel)for(o=r.F8C;o<i.parent.children.length;o++)e.validateItem(i.parent.children[o])},n.prototype.validateItemRecursively=function(e,t){if(e.validateItem(t),t.parent&&this.validateItemRecursively(e,t.parent),t.isLevelFolder)for(var i=r.F8C;i<t.children.length;i++)e.validateItem(t.children[i]);if(t.isLevel)for(i=r.F8C;i<t.parent.children.length;i++)e.validateItem(t.parent.children[i])},n.prototype.onDragStart=function(e){return!r.F8C},n.prototype.onHierarchiesDrop=function(e,i,o,s){e&&e.closest(t.I3C)&&(i=parseInt(e.attr(t.d3C)),(e=this.getListById(e.closest(t.I3C).attr(r.G2C)))!=this.view.lstHierarchies&&this.removeField(e,i))},n.prototype.onHierarchiesDragEnterOrOver=function(e,o,s,n){e&&e.closest(t.I3C)&&(e=this.getListById(e.closest(t.I3C).attr(r.G2C)))!=this.view.lstHierarchies&&(e.container.hasClass(r.I4C)?o&&o.addClass(i.D3Y):o&&o.addClass(i.x3Y))},n.prototype.onDragEnterOrOver=function(e,i,o,s){var n=r;this.removeDropIndicator(),e&&e.closest(t.I3C)&&(o instanceof h.lists.UIList||(o=this.getListById(o.attr(n.G2C))),(i=this.getListById(e.closest(t.I3C).attr(n.G2C))).container.hasClass(n.I4C)&&this.isDropAllowed(this.getDataByElement(e,i),i,o)&&(s instanceof MouseEvent?this.showIndicator(h.UIElement.convert(s.target)):(e=s.changedTouches[n.F8C],this.showIndicator(h.UIElement.convert(document.elementFromPoint(e.clientX,e.clientY))))))},n.prototype.isDropAllowed=function(e,t,i){var s=r;return e.isValues&&i!=this.view.lstColumns&&i!=this.view.lstRows||!s.O8C==this.model.isMeasuresAsHierarchies&&(i!=this.view.lstMeasures&&e.isMeasure||i==this.view.lstMeasures&&!e.isMeasure)||e.calculated&&i!=this.view.lstMeasures||t==this.view.lstHierarchies&&s.x4C!=Be.ArrayUtils.find(i.getDataProvider(),e.uniqueName,o.M6B)?!s.O8C:!s.F8C},n.prototype.getDataByElement=function(e,i){var r=parseInt(e.attr(t.d3C));return i.getDataProvider()[r]},n.prototype.onDragLeave=function(e,r,o,s){this.removeDropIndicator(),e&&e.closest(t.I3C)&&r&&(r.removeClass(i.D3Y),r.removeClass(i.x3Y))},n.prototype.onDrop=function(e,i,o,s){var n=t;this.removeDropIndicator(),e&&e.closest(n.I3C)&&(i instanceof h.lists.UIList||(i=this.getListById(i.attr(r.G2C))),s=this.getListById(e.closest(n.I3C).attr(r.G2C)),!r.O8C!=this.isDropAllowed(this.getDataByElement(e,s),s,i)&&(o=o?parseFloat(o.attr(n.d3C)):i.getDataProvider().length,e=parseInt(e.attr(n.d3C)),s!=i||e!=o))&&(s==this.view.lstHierarchies&&i!=this.view.lstHierarchies?this.addField(s,i,e,o):this.moveField(s,i,e,o),this.validateView())},n.prototype.showIndicator=function(e){var i=e.closest(t.y3C);r.x4C!=i?(this._dropIndicator=this.createDropIndicator(),i.before(this._dropIndicator)):(e=e.closest(t.I3C),r.x4C!=e&&(this._dropIndicator=this.createDropIndicator(),r.F8C<e.element.children.length?e.append(this._dropIndicator):e.prepend(this._dropIndicator)))},n.prototype.createDropIndicator=function(){return new h.UIElement(r.r4C,i.K3Y)},n.prototype.removeDropIndicator=function(){this._dropIndicator&&(this._dropIndicator.removeFromParent(!r.F8C),this._dropIndicator=r.x4C)},n.prototype.moveField=function(e,t,i,o){var s=r,n=e.getDataProvider()[i];e==t?(e=t.getDataProvider(),i<o&&(o-=s.O8C),e.splice(o,s.F8C,e.splice(i,s.O8C)[s.F8C])):(n=e.getDataProvider()[i],e.getDataProvider().splice(i,s.O8C),e.validateNow(),t==this.view.lstMeasures&&(this.model.selectField(n,!s.O8C),n=this.model.findMeasure(this.model.toMeasureUniqueName(n.uniqueName))),e==this.view.lstMeasures&&(this.model.selectField(n,!s.O8C),n=this.model.findHierarchy(this.model.toHierarchyUniqueName(n.uniqueName))),s.x4C!=n&&(this.model.selectField(n,!s.F8C),this.findAndRemoveField(n),t.getDataProvider().splice(o,s.F8C,n))),this.validateList(t),this.validateSlice()},n.prototype.addField=function(e,t,i,s){var n=r;if((i=e.getDataProvider()[i]).isLevel){i.parent.isSelected&&this.findAndRemoveField(i.parent);for(var a=n.F8C;a<i.parent.children.length;a++){var l=i.parent.children[a];l.uniqueName!=i.uniqueName&&(l.isSelected&&this.findAndRemoveField(l),l.isSelected=!n.O8C)}this.validateItemRecursively(this.view.lstHierarchies,i)}this.model.isMeasuresAsHierarchies&&t==this.view.lstMeasures&&n.x4C!=i.measureItem&&(i=i.measureItem),i.isSelected?(this.model.selectField(i,!n.O8C),this.findAndRemoveField(i,e,!n.F8C),this.model.selectField(i,!n.F8C)):(this.model.selectField(i,!n.F8C),e=Be.ArrayUtils.findIndex(this.view.lstHierarchies.getDataProvider(),i.uniqueName,o.M6B),this.validateItemRecursivelyAt(this.view.lstHierarchies,e),this.view.lstHierarchies.validateItemAt(e)),t.getDataProvider().splice(s,n.F8C,i),this.validateList(t),this.validateSlice()},n.prototype.removeField=function(e,t){var i=r;if(!(e.getDataProvider().length<=t)){var o=e.getDataProvider()[t];o.isValues||(e.getDataProvider().splice(t,i.O8C),this.validateList(e),o=this.model.findItem(o.uniqueName,o.isMeasure),i.x4C!=o&&(this.model.selectField(o,!i.O8C),this.validateItemRecursively(this.view.lstHierarchies,i.x4C!=o.hierarchyItem?o.hierarchyItem:o),o.isLevel&&(this.model.selectField(o.parent,!i.O8C),this.validateItemRecursively(this.view.lstHierarchies,o.parent))),this.validateSlice())}},n.prototype.findAndRemoveField=function(e,t,i){var s=r;void s.F8C===t&&(t=s.x4C),void s.F8C===i&&(i=!s.O8C);for(var n=-s.O8C,a=s.F8C;a<this.lists.length;a++)this.lists[a]==t||this.lists[a]==this.view.lstMeasures&&i||(n=Be.ArrayUtils.findIndex(this.lists[a].getDataProvider(),e.uniqueName,o.M6B),-s.O8C==n&&(n=Be.ArrayUtils.findIndex(this.lists[a].getDataProvider(),e.uniqueName,"hierarchyName")),-s.O8C<n&&(this.lists[a].getDataProvider().splice(n,s.O8C),this.validateList(this.lists[a])))},n.prototype.getListById=function(e){switch(e){case this.view.lstHierarchies.getId():return this.view.lstHierarchies;case this.view.lstPages.getId():return this.view.lstPages;case this.view.lstRows.getId():return this.view.lstRows;case this.view.lstColumns.getId():return this.view.lstColumns;case this.view.lstMeasures.getId():return this.view.lstMeasures}return r.x4C},n.prototype.update=function(e,t,i,o){var s=r;void s.F8C===i&&(i=s.C4C),void s.F8C===o&&(o=!s.F8C),o&&this.model.update(e,t,i),this.updateView()},n.prototype.validateSlice=function(){this.view.btnOk&&this.view.btnOk.setEnabled(this.model.isValidSlice())},Object.defineProperty(n.prototype,i.l3Y,{get:function(){return this.model.isExpandAll},enumerable:!r.F8C,configurable:!r.F8C}),n.prototype.updateView=function(){var e=r,t=this;this.view.reset&&this.view.reset(),this.view.btnAddMeasure&&this.view.btnAddMeasure.isVisible(this.model.isCalculatedAvailable),this.view.lstHierarchies&&this.view.lstHierarchies.setDataProvider(this.model.hierarchies,!e.O8C),this.view.lstPages&&this.view.lstPages.setDataProvider(this.model.pages,!e.O8C),this.view.lstRows&&this.view.lstRows.setDataProvider(this.model.rows,!e.O8C),this.view.lstColumns&&this.view.lstColumns.setDataProvider(this.model.columns,!e.O8C),this.view.lstMeasures&&this.view.lstMeasures.setDataProvider(this.model.measures,!e.O8C),this.view.btnCollapseExpand&&this.view.btnCollapseExpand.isVisible(this.model.hasFolders),this.view.searchWrap&&this.view.searchWrap.isVisible(this.model.isSearchNeeded),this.view.inpSearch&&(this.view.inpSearch.clear(!e.O8C),this.model.clearSearch()),this.view.setLabels(),this.view.container.requestAnimationFrame(function(){t.validateView()})},n.prototype.validateList=function(e){var o=this;e.validateNow();var s={onDragStart:function(e){return o.onDragStart(e)},createHelper:function(e){return o.view.createHelper(e)}};Be.browserVersion().isMobile&&(s.handle=i.F3Y);var n=e.container.find(t.y3C,!r.F8C);if(e==this.view.lstHierarchies)for(e=r.F8C;e<n.length;e++)n[e].hasClass(i.O3Y)&&!n[e].hasClass(i.M3Y)||n[e].draggable(s);else for(e.droppable({onDrop:function(e,t,i,r){return o.onDrop(e,t,i,r)},onDragEnter:function(e,t,i,r){return o.onDragEnterOrOver(e,t,i,r)},onDragOver:function(e,t,i,r){return o.onDragEnterOrOver(e,t,i,r)},onDragLeave:function(e,t,i,r){return o.onDragLeave(e,t,i,r)},itemSelector:t.y3C}),e=r.F8C;e<n.length;e++)n[e].draggable(s)},n.prototype.validateView=function(){try{this.validateSlice(),this.validateList(this.view.lstHierarchies),this.validateList(this.view.lstPages),this.validateList(this.view.lstRows),this.validateList(this.view.lstColumns),this.validateList(this.view.lstMeasures)}catch(e){}},n}(s.EventDispatcher),Rh.PivotFieldsController=Dh,Nh=De||(De={}),Mh=Nh._view||(Nh._view={}),Ph=Mh.config||(Mh.config={}),Hh=Ph._pivot||(Ph._pivot={}),Uh=function(e){function o(t,i){var o=e.call(this,i)||this;return o.toolbarHeight=r.F8C,o.controller=t,o.addClass("wdr-pivot-fields"),o.setControls(),o.container.disableSelection(),o.container.resizable({sides:[r.M2C,r.j2C],resize:function(e){return o.onViewResize(e)}}),o}return Ga(o,e),o.prototype.onViewResize=function(e){this.setWidth(e.size.width+(e.size.width-e.originalSize.width)),this.addLayoutClasses(),this.centerPosition()},o.prototype.setControls=function(){var e=t,o=i,s=r,n="wdr-ui-col-3",a=this,l=new h.UIComponentBase(s.r4C,o.j3Y);this.addChild(l);var c=new h.UIComponentBase(s.r4C,o.g3Y);l.addChild(c),this.lblTitle=new h.UILabel(Nh.model._labels.Labels.FIELDS_LIST_TITLE),this.lblTitle.addClass(o.m1Y),c.addChild(this.lblTitle),this.lblSubtitle=new h.UILabel(Nh.model._labels.Labels.FIELDS_LIST_SUBTITLE),this.lblSubtitle.addClass(o.o3Y),c.addChild(this.lblSubtitle),c=new h.UIComponentBase(s.r4C,o.n3Y),l.addChild(c),this.btnAddMeasure=new h.UIButton(o.t3Y),this.btnAddMeasure.setId(o.c3Y),this.btnAddMeasure.setLabel(Nh.model._labels.Labels.FIELDS_LIST_ADD_CALCULATED_MEASURE),c.addChild(this.btnAddMeasure),this.btnCancel=new h.UIButton,this.btnCancel.setLabel(Nh.model._labels.Labels.BUTTON_CANCEL),this.btnOk=new h.UIButton(o.V8Y),this.btnOk.setLabel(Nh.model._labels.Labels.BUTTON_APPLY),Be.OSUtil.isIOS||Be.OSUtil.isMac?(c.addChild(this.btnCancel),c.addChild(this.btnOk)):(c.addChild(this.btnOk),c.addChild(this.btnCancel)),l=new h.UIComponentBase(s.r4C,o.L3Y),this.addChild(l);var d=new h.UIComponentBase(s.r4C,o.a3Y);l.addChild(d),c=new h.UIComponentBase(s.r4C,n),d.addChild(c);var u=new h.UIComponentBase(s.r4C,"wdr-list-wrap wdr-list-wrap-all");c.addChild(u);var p=new h.UIComponentBase(s.r4C,"wdr-list-header wdr-list-header-wide");u.addChild(p),c=new h.UIComponentBase(s.r4C,"wdr-list-header-label-wrap"),p.addChild(c),this.lblHierarchies=new h.UILabel(Nh.model._labels.Labels.FIELDS_LIST_ALL_FIELDS),c.addChild(this.lblHierarchies),this.btnCollapseExpand=new h.UIButton("wdr-ui-link-btn"),this.btnCollapseExpand.removeClass(s.E2C),this.btnCollapseExpand.setId("wdr-btn-collapse-expand-all"),this.btnCollapseExpand.setLabel(Nh.model._labels.Labels.FIELDS_LIST_COLLAPSE_ALL),c.addChild(this.btnCollapseExpand),this.searchWrap=new h.UIComponentBase(s.r4C,o.f3Y),p.addChild(this.searchWrap),(c=new h.UIComponentBase("button",o.J3Y)).addEventListener(s.H2C,function(){return a.onSearchClick()}),this.searchWrap.addChild(c),p=new h.UIComponentBase(s.I2C,o.E3Y),c.addChild(p),this.inpSearch=new h.UITextInput,this.inpSearch.addClass(o.H3Y),this.searchWrap.addChild(this.inpSearch),(c=new h.UIComponentBase(s.I2C,o.Z3Y)).addEventListener(s.H2C,function(){return a.onSearchCloseClick()}),this.searchWrap.addChild(c),p=new h.UIComponentBase(s.r4C,o.y3Y),u.addChild(p),this.lstHierarchies=new h.lists.UIList,this.lstHierarchies.setId(o.d3Y),this.lstHierarchies.setItemRendererFactory(function(e,t){return a.selectableItemRendererFactory(e,t)}),this.lstHierarchies.setLabelField(e.W0B),p.addChild(this.lstHierarchies),c=new h.UIComponentBase(s.r4C,n),d.addChild(c),(u=new h.UIComponentBase(s.r4C,"wdr-list-wrap wdr-list-wrap-pages")).setId("wdr-wrap-pages"),c.addChild(u),p=new h.UIComponentBase(s.r4C,o.T3Y),u.addChild(p),this.lblPages=new h.UILabel(Nh.model._labels.Labels.FIELDS_LIST_FILTERS),p.addChild(this.lblPages),p=new h.UIComponentBase(s.r4C,o.y3Y),u.addChild(p),this.lstPages=new h.lists.UIList,this.lstPages.setId("wdr-lst-pages"),this.lstPages.setItemRendererFactory(function(e,t){return a.fieldItemRendererFactory(e,t)}),this.lstPages.setLabelField(e.W0B),p.addChild(this.lstPages),this.lblPagesPrompt=new h.UILabel(Nh.model._labels.Labels.FIELDS_LIST_DROP_FIELD),this.lblPagesPrompt.addClass(o.w3Y),u.addChild(this.lblPagesPrompt),(u=new h.UIComponentBase(s.r4C,"wdr-list-wrap wdr-list-wrap-rows")).setId("wdr-wrap-rows"),c.addChild(u),p=new h.UIComponentBase(s.r4C,o.T3Y),u.addChild(p),this.lblRows=new h.UILabel(Nh.model._labels.Labels.FIELDS_LIST_ROWS),p.addChild(this.lblRows),p=new h.UIComponentBase(s.r4C,o.y3Y),u.addChild(p),this.lstRows=new h.lists.UIList,this.lstRows.setId("wdr-lst-rows"),this.lstRows.setItemRendererFactory(function(e,t){return a.fieldItemRendererFactory(e,t)}),this.lstRows.setLabelField(e.W0B),p.addChild(this.lstRows),this.lblRowsPrompt=new h.UILabel(Nh.model._labels.Labels.FIELDS_LIST_DROP_FIELD),this.lblRowsPrompt.addClass(o.w3Y),u.addChild(this.lblRowsPrompt),c=new h.UIComponentBase(s.r4C,n),d.addChild(c),(u=new h.UIComponentBase(s.r4C,"wdr-list-wrap wdr-list-wrap-cols")).setId("wdr-wrap-columns"),c.addChild(u),p=new h.UIComponentBase(s.r4C,o.T3Y),u.addChild(p),this.lblColumns=new h.UILabel(Nh.model._labels.Labels.FIELDS_LIST_COLUMNS),p.addChild(this.lblColumns),p=new h.UIComponentBase(s.r4C,o.y3Y),u.addChild(p),this.lstColumns=new h.lists.UIList,this.lstColumns.setId("wdr-lst-columns"),this.lstColumns.setItemRendererFactory(function(e,t){return a.fieldItemRendererFactory(e,t)}),this.lstColumns.setLabelField(e.W0B),p.addChild(this.lstColumns),this.lblColumnsPrompt=new h.UILabel(Nh.model._labels.Labels.FIELDS_LIST_DROP_FIELD),this.lblColumnsPrompt.addClass(o.w3Y),u.addChild(this.lblColumnsPrompt),(u=new h.UIComponentBase(s.r4C,"wdr-list-wrap wdr-list-wrap-measures")).setId("wdr-wrap-measures"),c.addChild(u),p=new h.UIComponentBase(s.r4C,o.T3Y),u.addChild(p),this.lblMeasures=new h.UILabel(Nh.model._labels.Labels.FIELDS_LIST_VALUES),p.addChild(this.lblMeasures),p=new h.UIComponentBase(s.r4C,o.y3Y),u.addChild(p),this.lstMeasures=new h.lists.UIList,this.lstMeasures.setId(o.l6Y),this.lstMeasures.setItemRendererFactory(function(e,t){return a.fieldItemRendererFactory(e,t)}),this.lstMeasures.setLabelField(e.W0B),p.addChild(this.lstMeasures),this.lblMeasuresPrompt=new h.UILabel(Nh.model._labels.Labels.FIELDS_LIST_DROP_FIELD),this.lblMeasuresPrompt.addClass(o.w3Y),u.addChild(this.lblMeasuresPrompt),this.aggrView=new Ph.AggregationsView,this.aggrView.setId(o.p6Y),this.aggrView.hide(),l.addChild(this.aggrView)},o.prototype.setLabels=function(){this.lblTitle.setLabel(Nh.model._labels.Labels.FIELDS_LIST_TITLE),this.lblSubtitle.setLabel(Nh.model._labels.Labels.FIELDS_LIST_SUBTITLE),this.btnCancel.setLabel(Nh.model._labels.Labels.BUTTON_CANCEL),this.btnOk.setLabel(Nh.model._labels.Labels.BUTTON_APPLY),this.lblHierarchies.setLabel(Nh.model._labels.Labels.FIELDS_LIST_ALL_FIELDS),this.lblPages.setLabel(Nh.model._labels.Labels.FIELDS_LIST_FILTERS),this.lblRows.setLabel(Nh.model._labels.Labels.FIELDS_LIST_ROWS),this.lblColumns.setLabel(Nh.model._labels.Labels.FIELDS_LIST_COLUMNS),this.lblMeasures.setLabel(Nh.model._labels.Labels.FIELDS_LIST_VALUES),this.btnAddMeasure.setLabel(Nh.model._labels.Labels.FIELDS_LIST_ADD_CALCULATED_MEASURE),this.lblPagesPrompt.setLabel(Nh.model._labels.Labels.FIELDS_LIST_DROP_FIELD),this.lblRowsPrompt.setLabel(Nh.model._labels.Labels.FIELDS_LIST_DROP_FIELD),this.lblColumnsPrompt.setLabel(Nh.model._labels.Labels.FIELDS_LIST_DROP_FIELD),this.lblMeasuresPrompt.setLabel(Nh.model._labels.Labels.FIELDS_LIST_DROP_FIELD),this.btnCollapseExpand.setLabel(this.controller.isExpandAll?Nh.model._labels.Labels.FIELDS_LIST_EXPAND_ALL:Nh.model._labels.Labels.FIELDS_LIST_COLLAPSE_ALL)},o.prototype.fieldItemRendererFactory=function(e,t){var i=new Ph.renderers.FieldItemRenderer;return i.setData(e),i.setIndex(t),i},o.prototype.selectableItemRendererFactory=function(e,t){var i=new Ph.renderers.SelectableItemRenderer(e,t);return i.setIndex(t),i},o.prototype.onSearchClick=function(){this.searchWrap.addClass(i.X6Y),this.inpSearch.container.focus()},o.prototype.onSearchCloseClick=function(){this.searchWrap.removeClass(i.X6Y),this.inpSearch.clear()},o.prototype.reset=function(){this.searchWrap.removeClass(i.X6Y),this.inpSearch.clear(!r.O8C)},o.prototype.createHelper=function(e){var o=i,s=r,n=new h.UIElement(s.I2C);return n.attr(s.G2C,o.B6Y),n.addClass(o.b2Y),n.addClass(s.k4C),n.toggleClass(o.Y6Y,e.hasClass(o.Y6Y)),n.css(s.s2C,e.css(s.s2C)),n.css(s.F3C,s.O3C),n.css(o.g2Y,s.o0C),n.attr(t.d3C,e.attr(t.d3C)),n.text(e.text()),n},o.prototype.addLayoutClasses=function(t){e.prototype.addLayoutClasses.call(this,!r.F8C)},o}(h.containers.UIPopup),Hh.PivotFieldsView=Uh,Bh=De||(De={}),kh=Bh._view||(Bh._view={}),Vh=kh.config||(kh.config={}),zh=function(e){var t=r,i="wdr-fields-opened";function n(){var t=e.call(this)||this;return t.addClass("wdr-fields-view-wrap"),t.setControls(),t}return Ga(n,e),n.prototype.setControls=function(){var e=this;this.openBtn=new h.UIButton,this.openBtn.setId("wdr-btn-open-fields"),this.openBtn.addEventListener(h.UIButton.CLICK_EVENT,function(t){return e.onOpenClick()}),this.addChild(this.openBtn)},n.prototype.open=function(e,r,o){void t.F8C===o&&(o=t.C4C),this.container.toggleClass(i,!t.F8C),this.isForDillThrough||(Bh.model.JavaScriptHandlers.getInstance().dispatch(new Bh.model.APIEvent(Bh.model.JavaScriptHandlers.FILDS_LIST_OPEN)),Bh.model._options.OptionsManager.configuratorOpened=!t.F8C),this._isFlat=Bh.model._options.OptionsManager.flatView,this.controller=this.getController(),this.controller.update(e,r,o,this.hasChanged),this.controller.view.setId("wdr-fields-view"),this.controller.view.container.toggleClass("wdr-dt-fields",this.isForDillThrough),this.controller.view.overlay.container.toggleClass("wdr-dt-fields-overlay",this.isForDillThrough),this._modalParent?this._modalParent.addChild(this.controller.view.container):this.addChild(this.controller.view),this.isVisible()||this.show(),this.controller.view.open(),this._isActive=!t.F8C,this._prevSlice=Bh.data_.Cube.getInstance().slice_?Bh.data_.Cube.getInstance().slice_.clone():t.x4C,this._connectionInfo=Bh.data_.Cube.getInstance().connectionInfo_},Object.defineProperty(n.prototype,"isFlatChange",{get:function(){return this._isFlat!=Bh.model._options.OptionsManager.flatView},enumerable:!t.F8C,configurable:!t.F8C}),Object.defineProperty(n.prototype,"isActiveChange",{get:function(){return this._isActive!=Bh.model._options.OptionsManager.configuratorOpened},enumerable:!t.F8C,configurable:!t.F8C}),Object.defineProperty(n.prototype,"isDataSourceChange",{get:function(){return t.x4C==this._connectionInfo||t.x4C==Bh.data_.Cube.getInstance().structure_||!this._connectionInfo.isEqual(Bh.data_.Cube.getInstance().connectionInfo_)},enumerable:!t.F8C,configurable:!t.F8C}),Object.defineProperty(n.prototype,"isSliceChange",{get:function(){return t.x4C==Bh.data_.Cube.getInstance().slice_&&t.x4C!=this._prevSlice||t.x4C!=Bh.data_.Cube.getInstance().slice_&&t.x4C==this._prevSlice||Bh.data_.Cube.getInstance().slice_&&this._prevSlice&&!Bh.data_.Cube.getInstance().slice_.isEqual(this._prevSlice)},enumerable:!t.F8C,configurable:!t.F8C}),Object.defineProperty(n.prototype,"hasChanged",{get:function(){return this.isActiveChange||this.isDataSourceChange||this.isSliceChange||this.isFlatChange},enumerable:!t.F8C,configurable:!t.F8C}),n.prototype.getController=function(){var e=this,i=t.x4C,r=this._isFlat||this._isForDillThrough,a=this._modalParent||kh.PivotView.stage.container;return t.x4C==this.controller?i=r?new Vh.flat.FlatFieldsController(a):new Vh._pivot.PivotFieldsController(a):r&&o.F6B!=this.controller.type?i=new Vh.flat.FlatFieldsController(a):r||o.s6B==this.controller.type||(i=new Vh._pivot.PivotFieldsController(a)),t.x4C==i?this.controller:(this.controller&&this.controller.removeAllEventListeners(),i.addEventListener(s._Event.CLOSED,function(){return e.onViewClosed()}),i.addEventListener(n.EVENT_APPLY_SLICE,function(t){return e.onApplySlice(t)}),i)},n.prototype.onApplySlice=function(e){this.dispatch(e)},n.prototype.onViewClosed=function(){this._isActive=void t.F8C,this._connectionInfo=t.x4C,this._isFlat=void t.F8C,this.isForDillThrough||(Bh.model.JavaScriptHandlers.getInstance().dispatch(new Bh.model.APIEvent(Bh.model.JavaScriptHandlers.FILDS_LIST_CLOSE)),Bh.model._options.OptionsManager.getInstance(),Bh.model._options.OptionsManager.configuratorButton?this.show():this.hide(),Bh.model._options.OptionsManager.configuratorOpened=!t.O8C,this.dispatchWith(s._Event.CLOSED)),this.container.toggleClass(i,!t.O8C)},n.prototype.close=function(){this.controller&&this.controller.view.close()},n.prototype.onOpenClick=function(){this.dispatchWith(n.EVENT_OPEN)},Object.defineProperty(n.prototype,"isForDillThrough",{get:function(){return this._isForDillThrough},set:function(e){this._isForDillThrough=e},enumerable:!t.F8C,configurable:!t.F8C}),Object.defineProperty(n.prototype,"modalParent",{set:function(e){this._modalParent=e},enumerable:!t.F8C,configurable:!t.F8C}),Object.defineProperty(n.prototype,"containtment",{set:function(e){},enumerable:!t.F8C,configurable:!t.F8C}),Object.defineProperty(n.prototype,"isOpen",{get:function(){return this._isActive},enumerable:!t.F8C,configurable:!t.F8C}),n.EVENT_APPLY_SLICE="EVENT_APPLY_SLICE",n.EVENT_OPEN="EVENT_OPEN",n}(h.UIComponentBase),Vh.FieldsView=zh,qh=De||(De={}),Gh=qh._view||(qh._view={}),Wh=Gh.config||(Gh.config={}),jh=Wh.renderers||(Wh.renderers={}),Yh=function(e){function t(){var t=e.call(this)||this;return t.createTextDisplay(),t}return Ga(t,e),t.prototype.createTextDisplay=function(){r.x4C==this.textDisplay&&(this.textDisplay=new h.UIElement(r.I2C),this.textDisplay.attr(r.G2C,i.c6Y))},t.prototype.createArrgDisplay=function(){r.x4C==this.aggrDisplay&&(this.aggrDisplay=new h.UIElement(r.I2C),this.aggrDisplay.attr(r.G2C,i.u3Y))},t.prototype.createDragHandle=function(){r.x4C==this.dragHandle&&(this.dragHandle=new h.UIElement(r.I2C),this.dragHandle.attr(r.G2C,i.B6Y))},t.prototype.draw=function(){var e=i,t=r,o=this.getData();this.container.empty();var s=t.C4C;s=t.x4C!=this.getLabelFunction()?this.getLabelFunction()(o):o.isLevel?o.hierarchyCaption+e.F8Y+o[this.getLabelField()]:o[this.getLabelField()],this.textDisplay.text(s),this.textDisplay.attr(e.y2Y,s),this.container.append(this.textDisplay),!t.F8C==o.isMeasure&&!t.F8C==o.showAggregations&&t.O8C<o.availableAggregations.length&&qh.model._options.OptionsManager.showAggregations&&(this.createArrgDisplay(),this.container.append(this.aggrDisplay)),this.createDragHandle(),this.container.append(this.dragHandle),this.container.toggleClass(e.L6Y,!t.F8C===o.isMeasure),this.container.toggleClass(e.Y6Y,!t.F8C===o.isValues),this.container.toggleClass(t.Y3C,!t.F8C===o.isSelected),this.container.toggleClass(e.a6Y,!t.F8C===o.isLevel)},t}(h.renderers.UIItemRenderer),jh.FieldItemRenderer=Yh,Xh=De||(De={}),Kh=Xh._view||(Xh._view={}),Qh=Kh.config||(Kh.config={}),Jh=Qh.renderers||(Qh.renderers={}),Zh=function(e){function t(t,i){void r.F8C===t&&(t=r.x4C);var o=e.call(this)||this;return o.data=t,o.createIconDisplay(),o.createTextDisplay(),o}return Ga(t,e),t.prototype.createIconDisplay=function(){r.x4C==this.iconDisplay&&(this.iconDisplay=new h.UIElement(r.I2C),this.iconDisplay.attr(r.G2C,"wdr-icon-display"))},t.prototype.createMoreIconDisplay=function(){r.x4C==this.moreIconDisplay&&(this.moreIconDisplay=new h.UIElement(r.I2C),this.moreIconDisplay.attr(r.G2C,i.N3Y))},t.prototype.createTextDisplay=function(){r.x4C==this.textDisplay&&(this.textDisplay=new h.UIElement(r.I2C),this.textDisplay.attr(r.G2C,i.c6Y))},t.prototype.createArrgDisplay=function(){r.x4C==this.aggrDisplay&&(this.aggrDisplay=new h.UIElement(r.I2C),this.aggrDisplay.attr(r.G2C,i.u3Y))},t.prototype.createCalcDisplay=function(){r.x4C==this.calcDisplay&&(this.calcDisplay=new h.UIElement(r.I2C),this.calcDisplay.attr(r.G2C,i.z3Y))},t.prototype.createDragHandle=function(){r.x4C==this.dragHandle&&(this.dragHandle=new h.UIElement(r.I2C),this.dragHandle.attr(r.G2C,i.B6Y))},t.prototype.draw=function(){var e=r,t=i,o=this.getData();this.container.empty(),this.container.append(this.iconDisplay),o.isLevelFolder&&(this.createMoreIconDisplay(),this.container.append(this.moreIconDisplay)),this.textDisplay.text(o[this.getLabelField()]),this.textDisplay.attr(t.y2Y,o[this.getLabelField()]),this.container.append(this.textDisplay),!e.F8C===o.isMeasure&&!e.F8C===o.calculated&&!e.F8C===o.showAggregations&&(this.createCalcDisplay(),this.container.append(this.calcDisplay)),o.isFolder||o.isMeasuresFolder?e.x4C!=this.dragHandle&&this.dragHandle.remove():(this.createDragHandle(),this.container.append(this.dragHandle));for(var s=!e.F8C===o.isSelected||e.x4C!=o.measureItem&&!e.F8C===o.measureItem.isSelected,n=e.O8C;e.L8C>n;n++)this.container.toggleClass(t.D0Y+n,o.level===n);this.container.toggleClass(e.Y3C,!e.F8C===s),this.container.toggleClass("wdr-checked",!e.F8C!==o.isFolder&&!e.F8C!==o.isLevel&&!e.F8C===s),this.container.toggleClass("wdr-unchecked",!e.F8C!==o.isFolder&&!e.F8C!==o.isLevel&&!e.F8C!==s),this.container.toggleClass(t.L6Y,!e.F8C===o.isMeasure),this.container.toggleClass(t.O3Y,!e.F8C===o.isFolder||!e.F8C===o.isLevelFolder),this.container.toggleClass(t.M3Y,!e.F8C===o.isLevelFolder),this.container.toggleClass(t.a6Y,!e.F8C===o.isLevel),this.container.toggleClass("wdr-measures-folder",!e.F8C===o.isMeasuresFolder),this.container.toggleClass("wdr-measures-calculated-folder",!e.F8C===o.isMeasuresFolder&&!e.F8C===o.isCalculatedMeasuresFolder),this.container.toggleClass("wdr-calculated",!e.F8C===o.calculated),this.container.toggleClass(Kh.grid.vo.GridStyleName.COLLAPSED,(!e.F8C===o.isFolder||!e.F8C===o.isLevelFolder)&&!e.F8C!==o.isExpanded),this.container.toggleClass(Kh.grid.vo.GridStyleName.EXPANDED,(!e.F8C===o.isFolder||!e.F8C===o.isLevelFolder)&&!e.F8C===o.isExpanded)},t}(h.renderers.UIItemRenderer),Jh.SelectableItemRenderer=Zh,$h=De||(De={}),ec=$h._view||($h._view={}),tc=ec.config||(ec.config={}),ic=tc.flat||(tc.flat={}),rc=function(){function e(){this.newCalculated=[]}return e.prototype.update=function(e,t){var i=r;this._structure=e,this._slice=t,this.hierarchies=[];var o,s=i.x4C,n=this._structure.calculatedMeasures;if(i.x4C!=this._slice){s=this._slice.flatten(!i.F8C);for(var a=i.F8C;a<s.length;a++)o=s.getItemAt(a),n.keyExists(o.uniqueName)&&((o=n.getItem(o.uniqueName)).showAggregations=$h.model._options.OptionsManager.showAggregations,o.isMeasure=!i.F8C),o.isSelected=!i.F8C,this.hierarchies.push(o)}var l=[],h=this._structure.allHierarchies(!i.O8C);for(a=i.F8C;a<h.length;a++)o=h.getItemAt(a),i.x4C==s||s.keyExists(o.uniqueName)||(o.isSelected=!i.O8C,l.push(o));for(a=i.F8C;a<n.length;a++)o=n.getItemAt(a),i.x4C==s||s.keyExists(o.uniqueName)||(o.isSelected=t.measures_.keyExists(o.uniqueName)||-i.O8C<this.newCalculated.indexOf(o.uniqueName),o.showAggregations=$h.model._options.OptionsManager.showAggregations,o.isMeasure=!i.F8C,l.push(o));for(l.sort(function(e,t){return e.caption<t.caption?-i.O8C:e.caption>t.caption?i.O8C:i.F8C}),a=i.F8C;a<l.length;a++)o=l[a],this.hierarchies.push(o)},e.prototype.isValidSlice=function(){return!r.F8C},e.prototype.toPlainArray=function(e,t){for(var i=[],o=r.F8C;o<t.length;o++){var s=e[t[o]];s.isSelected&&i.push(s.uniqueName)}return i},e.prototype.getSlice=function(e){var t=r,i=this._slice.clone();e=this.toPlainArray(this.hierarchies,e),i.flatOrder=e;for(var o,s=i.flatten(!t.F8C),n=i.measures_,a=t.F8C;a<e.length;a++){var l=e[a];s.keyExists(l)||((o=this._structure.allHierarchies().getItem(l))?i.rows.addItem(l,o):this._structure.calculatedMeasures.keyExists(l)&&(n.addItem(l,this._structure.calculatedMeasures.getItem(l)),i.measures_=n))}for(a=t.F8C;a<s.length;a++)o=s.getItemAt(a),-t.O8C==e.indexOf(o.uniqueName)&&(i.columns.keyExists(o.uniqueName)&&i.columns.removeItem(o.uniqueName),i.rows.keyExists(o.uniqueName)&&i.rows.removeItem(o.uniqueName),l=this._structure.hierarchyToMeasure(o.uniqueName),t.x4C==l&&(l=this._structure.calculatedMeasures.getItem(o.uniqueName)),n.keyExists(l.uniqueName)&&n.removeItem(l.uniqueName));return i.measures_=n,this.newCalculated=[],i},e.prototype.onCalculatedValueAdded=function(e){var t=r;if(t.x4C!=this._slice&&t.x4C!=this._structure){this.update(this._structure,this._slice);var i=Be.ArrayUtils.find(this.hierarchies,e,o.M6B);t.x4C!=i&&(i.isSelected=!t.F8C),this.newCalculated.push(e)}},e.prototype.onCalculatedValueRemoved=function(e){r.x4C!=this._slice&&r.x4C!=this._structure&&this.update(this._structure,this._slice)},e.prototype.isSliceDifferent=function(e){var t=r;e=e.flatten(!t.F8C);var i=this._slice.flatten(!t.F8C);if(e.length!=i.length)return!t.F8C;for(var o=t.F8C;o<e.length;o++)if(e.getKeyAt(o)!=i.getKeyAt(o))return!t.F8C;return!t.O8C},e.prototype.getSelectAllSelection=function(){for(var e=r.F8C,t=r.F8C;t<this.hierarchies.length;t++)this.hierarchies[t].isSelected&&e++;return r.F8C==e?h.UICheckBox.UNSELECTED:e==this.hierarchies.length?h.UICheckBox.SELECTED:h.UICheckBox.SEMI_SELECTED},e}(),ic.FlatFieldsModel=rc,oc=De||(De={}),sc=oc._view||(oc._view={}),nc=sc.config||(sc.config={}),ac=nc.flat||(nc.flat={}),lc=function(e){var n="wdr-drag-over";function a(i){var n=e.call(this)||this;return n.type=o.F6B,n.calculatedValueAddedHandler=function(e){return n.onCalculatedValueAdded(e)},n.calculatedValueRemovedHandler=function(e){return n.onCalculatedValueRemoved(e)},n.model_=new ac.FlatFieldsModel,n.view=new ac.FlatFieldsView(n,i),n.view.addEventListener(s._Event.CLOSED,function(e){return n.dispatch(e)}),n.view.btnOk&&n.view.btnOk.addEventListener(h.UIButton.CLICK_EVENT,function(){return n.onOkClick()}),n.view.btnCancel&&n.view.btnCancel.addEventListener(h.UIButton.CLICK_EVENT,function(){return n.onCancelClick()}),n.view.lstHierarchies&&(n.view.lstHierarchies.container.addEventListener(r.H2C,function(e){return n.onHierarchyFieldClick(e)}),n.view.lstHierarchies.container.droppable({onDrop:function(e,t,i,r){return n.onDrop(e,t,i,r)},onDragEnter:function(e,t,i,r){return n.onDragEnterOrOver(e,t,i,r)},onDragOver:function(e,t,i,r){return n.onDragEnterOrOver(e,t,i,r)},onDragLeave:function(e,t,i,r){return n.onDragLeave(e,t,i,r)},itemSelector:t.y3C})),n.view.selectAllCbx&&n.view.selectAllCbx.addEventListener(s._Event.CHANGE,function(){return n.onSelectAllChange()}),n.view.btnAddMeasure&&n.view.btnAddMeasure.addEventListener(h.UIButton.CLICK_EVENT,function(){return n.onAddMeasureClick()}),n}return Ga(a,e),a.prototype.onDragEnterOrOver=function(e,r,o,s){this.removeDropIndicator(),e&&e.closest(t.I3C)&&(r&&r.addClass(i.D3Y),e.addClass(n),this.showIndicator(h.UIElement.convert(s.target)))},a.prototype.onDragLeave=function(e,r,o,s){this.removeDropIndicator(),e&&e.closest(t.I3C)&&(r&&r.removeClass(i.D3Y),r&&r.removeClass(i.x3Y),e.removeClass(n))},a.prototype.onDrop=function(e,i,o,s){var n=r;this.removeDropIndicator(),e&&e.closest(t.I3C)&&(e=parseInt(e.attr(t.d3C)))!=(o=o?parseFloat(o.attr(t.d3C)):this.view.lstHierarchies.getDataProvider().length)&&(i=this.view.lstHierarchies.getDataProvider(),e<o&&(o-=n.O8C),i.splice(o,n.F8C,i.splice(e,n.O8C)[n.F8C]),this.updateView())},a.prototype.onCancelClick=function(){this.view.close()},a.prototype.onOkClick=function(){this.applySlice(),this.view.close()},a.prototype.onSelectAllChange=function(){for(var e=this.view.selectAllCbx.checked,t=this.model_.hierarchies,i=r.F8C;i<t.length;i++)t[i].isSelected=e;this.view.lstHierarchies.validateNow()},a.prototype.onHierarchyFieldClick=function(e){var o=h.UIElement.convert(e.target).closest(t.y3C);if(r.x4C!=o){o=parseInt(o.attr(t.d3C));var s=this.model_.hierarchies[o];i.z3Y==h.UIElement.convert(e.target).attr(r.G2C)?oc.model.PivotModel.getInstance().dispatchWith(sc.ViewEvent.CALCULATED_VIEW_OPEN,r.x4C,{measureName:s.uniqueName}):(s.isSelected=!s.isSelected,this.view.lstHierarchies&&this.view.lstHierarchies.validateItemAt(o),this.view.selectAllCbx&&this.view.selectAllCbx.setSelection(this.model_.getSelectAllSelection()))}},a.prototype.onAddMeasureClick=function(){oc.model.PivotModel.getInstance().dispatchWith(sc.ViewEvent.CALCULATED_VIEW_OPEN),oc.model.PivotModel.getInstance().addEventListener(sc.calculated.CalculatedView.EVENT_CALCULATED_VALUE_ADDED,this.calculatedValueAddedHandler),oc.model.PivotModel.getInstance().addEventListener(sc.calculated.CalculatedView.EVENT_CALCULATED_VALUE_REMOVED,this.calculatedValueRemovedHandler)},a.prototype.onCalculatedValueAdded=function(e){oc.model.PivotModel.getInstance().removeEventListener(sc.calculated.CalculatedView.EVENT_CALCULATED_VALUE_ADDED,this.calculatedValueAddedHandler),this.model_.onCalculatedValueAdded(e.data.measureUniqueName),this.updateView()},a.prototype.onCalculatedValueRemoved=function(e){oc.model.PivotModel.getInstance().removeEventListener(sc.calculated.CalculatedView.EVENT_CALCULATED_VALUE_REMOVED,this.calculatedValueRemovedHandler),this.model_.onCalculatedValueRemoved(e.data),this.updateView()},a.prototype.updateView=function(){var e=this;if(this.view.lstHierarchies){this.view.lstHierarchies.setDataProvider(this.model_.hierarchies),this.validateSlice(),this.view.lstHierarchies.validateNow();var o={createHelper:function(t){return e.view.createHelper(t)}};Be.browserVersion().isMobile&&(o.handle=i.F3Y);for(var s=this.view.lstHierarchies.container.find(t.y3C,!r.F8C),n=r.F8C;n<s.length;n++)s[n].draggable(o)}},a.prototype.update=function(e,t){this.model_.update(e,t),this.updateView(),this.view.selectAllCbx&&this.view.selectAllCbx.setSelection(this.model_.getSelectAllSelection()),this.view.setLabels()},a.prototype.validateSlice=function(){this.view.btnOk&&this.view.btnOk.setEnabled(this.model_.isValidSlice())},a.prototype.applySlice=function(){for(var e=[],i=this.view.lstHierarchies.container.find(t.y3C,!r.F8C),o=r.F8C;o<i.length;o++){var s=parseInt(i[o].attr(t.d3C));e.push(s)}e=this.model_.getSlice(e),this.model_.isSliceDifferent(e)&&this.dispatchWith(nc.FieldsView.EVENT_APPLY_SLICE,this,e)},a.prototype.showIndicator=function(e){var i=e.closest(t.y3C);r.x4C!=i?(this._dropIndicator=this.createDropIndicator(),i.before(this._dropIndicator)):(e=e.closest(t.I3C),r.x4C!=e&&(this._dropIndicator=this.createDropIndicator(),r.F8C<e.element.children.length?e.append(this._dropIndicator):e.prepend(this._dropIndicator)))},a.prototype.createDropIndicator=function(){return new h.UIElement(r.r4C,i.K3Y)},a.prototype.removeDropIndicator=function(){this._dropIndicator&&(this._dropIndicator.removeFromParent(!r.F8C),this._dropIndicator=r.x4C)},a}(s.EventDispatcher),ac.FlatFieldsController=lc,hc=De||(De={}),cc=hc._view||(hc._view={}),dc=cc.config||(cc.config={}),uc=dc.flat||(dc.flat={}),pc=function(e){function o(t,i){var r=e.call(this,i)||this;return r.addClass("wdr-flat-fields"),r.controller=t,r.setControls(),r}return Ga(o,e),o.prototype.setControls=function(){var e=i,o=r,s=new h.UIComponentBase(o.r4C,e.j3Y);this.addChild(s);var n=new h.UIComponentBase(o.r4C,e.g3Y);s.addChild(n),this.lblTitle=new h.UILabel(hc.model._labels.Labels.FIELDS_LIST_TITLE),this.lblTitle.addClass(e.m1Y),n.addChild(this.lblTitle),this.lblSubtitle=new h.UILabel(hc.model._labels.Labels.FIELDS_LIST_FLAT_HIERARCHY_BOX),this.lblSubtitle.addClass(e.o3Y),n.addChild(this.lblSubtitle),n=new h.UIComponentBase(o.r4C,e.n3Y),s.addChild(n),this.btnAddMeasure=new h.UIButton(e.t3Y),this.btnAddMeasure.setId(e.c3Y),n.addChild(this.btnAddMeasure),this.btnCancel=new h.UIButton,this.btnCancel.setLabel(hc.model._labels.Labels.BUTTON_CANCEL),this.btnOk=new h.UIButton(e.V8Y),this.btnOk.setLabel(hc.model._labels.Labels.BUTTON_APPLY),Be.OSUtil.isIOS||Be.OSUtil.isMac?(n.addChild(this.btnCancel),n.addChild(this.btnOk)):(n.addChild(this.btnOk),n.addChild(this.btnCancel)),n=new h.UIComponentBase(o.r4C,e.L3Y),this.addChild(n),s=new h.UIComponentBase(o.r4C,"wdr-list-wrap"),n.addChild(s),n=new h.UIComponentBase(o.r4C,e.T3Y),s.addChild(n),this.selectAllCbx=new h.UICheckBox,this.selectAllCbx.setId("wdr-select-all-cbx"),this.selectAllCbx.setLabel(hc.model._labels.Labels.FILTER_SELECT_ALL),n.addChild(this.selectAllCbx),n=new h.UIComponentBase(o.r4C,e.y3Y),s.addChild(n),this.lstHierarchies=new h.lists.UIList,this.lstHierarchies.setId(e.d3Y),this.lstHierarchies.setItemRendererFactory(this.selectableItemRendererFactory),this.lstHierarchies.setLabelField(t.W0B),n.addChild(this.lstHierarchies)},o.prototype.selectableItemRendererFactory=function(e,t){var i=new dc.renderers.SelectableItemRenderer(e,t);return i.setData(e),i.setIndex(t),i},o.prototype.setLabels=function(){this.lblTitle.setLabel(hc.model._labels.Labels.FIELDS_LIST_TITLE),this.lblSubtitle.setLabel(hc.model._labels.Labels.FIELDS_LIST_FLAT_HIERARCHY_BOX),this.btnCancel.setLabel(hc.model._labels.Labels.BUTTON_CANCEL),this.btnOk.setLabel(hc.model._labels.Labels.BUTTON_APPLY),this.selectAllCbx.setLabel(hc.model._labels.Labels.FILTER_SELECT_ALL)},o.prototype.createHelper=function(e){var o=i,s=r,n=new h.UIElement(s.I2C);return n.attr(s.G2C,o.B6Y),n.addClass(o.b2Y),n.addClass(s.k4C),n.toggleClass(o.Y6Y,e.hasClass(o.Y6Y)),n.css(s.s2C,e.css(s.s2C)),n.css(s.F3C,s.O3C),n.css(o.g2Y,s.o0C),n.attr(t.d3C,e.attr(t.d3C)),n.text(e.text()),n},o}(h.containers.UIPopup),uc.FlatFieldsView=pc,Cc=De||(De={}),fc=Cc._view||(Cc._view={}),mc=fc.calculated||(fc.calculated={}),gc=function(e){function t(){var t=e.call(this,fc.PivotView.stage.container)||this;return t.setId("wdr-calculated-view"),t.container.disableSelection(),t.overlay.addClass("wdr-calculated-view-overlay"),t.controller=new mc.CalculatedController,t.controller.addEventListener(s._Event.CLOSE,function(){return t.close()}),t.addChild(t.controller.view),t}return Ga(t,e),t.prototype.openView=function(e){this.controller.update(e),this.open()},t.prototype.close=function(){e.prototype.close.call(this),this.controller.clear()},t.EVENT_CALCULATED_VALUE_ADDED="EVENT_CALCULATED_VALUE_ADDED",t.EVENT_CALCULATED_VALUE_REMOVED="EVENT_CALCULATED_VALUE_REMOVED",t.addingMeasureFlag=!r.O8C,t}(h.containers.UIPopup),mc.CalculatedView=gc,yc=De||(De={}),_c=yc._view||(yc._view={}),vc=_c.calculated||(_c.calculated={}),bc=function(){function e(){var e=i;this.model_=yc.model.PivotModel.getInstance(),this.funcButtonsDataProvider=[{name:"_addBtn",label:t.D7C,func:yc.data_.consts.FunctionName.ADD},{name:"_subtractBtn",label:r.L2C,func:yc.data_.consts.FunctionName.SUBTRACT},{name:"_multiplyBtn",label:"",func:yc.data_.consts.FunctionName.MULTIPLY},{name:"_divideBtn",label:"",func:yc.data_.consts.FunctionName.DIVIDE},{name:"_powerBtn",label:t.g9Q,func:yc.data_.consts.FunctionName.POWER},{name:"_equalBtn",label:t.h6C,func:yc.data_.consts.FunctionName.EQUAL},{name:"_lessBtn",label:e.O9Y,func:yc.data_.consts.FunctionName.LESS},{name:"_greaterBtn",label:e.M9Y,func:yc.data_.consts.FunctionName.GREATER},{name:"_lessOrEqualBtn",label:"",func:yc.data_.consts.FunctionName.LESS_OR_EQUAL},{name:"_greaterOrEqualBtn",label:"",func:yc.data_.consts.FunctionName.GREATER_OR_EQUAL},{name:"_equalBtn2",label:e.b9Y,func:yc.data_.consts.FunctionName.EQUAL_2},{name:"_notEqualBtn",label:e.j9Y,func:yc.data_.consts.FunctionName.NOT_EQUAL},{name:"_orBtn",label:"OR",func:yc.data_.consts.FunctionName.OR},{name:"_andBtn",label:"AND",func:yc.data_.consts.FunctionName.AND},{name:"_ifBtn",label:"IF",func:yc.data_.consts.FunctionName.IF},{name:"_absBtn",label:"ABS",func:yc.data_.consts.FunctionName.ABS},{name:"_minBtn",label:"MIN",func:yc.data_.consts.FunctionName.MIN},{name:"_maxBtn",label:"MAX",func:yc.data_.consts.FunctionName.MAX}]}return e.prototype.update=function(e){Be.nullOrEmpty(e)||(this.currentMeasure=this.model_.cube_.structure_.findMeasure(e))},Object.defineProperty(e.prototype,o.T0B,{get:function(){return!r.F8C},enumerable:!r.F8C,configurable:!r.F8C}),e.prototype.getAllMeasures=function(){return this.model_.getAllMeasures()},e.prototype.removeMeasure=function(e){vc.CalculatedView.addingMeasureFlag=!r.F8C,this.model_.removeCalculatedMeasure(e.uniqueName),this.model_.dispatchWith(vc.CalculatedView.EVENT_CALCULATED_VALUE_REMOVED,r.x4C,e.uniqueName),Be.fmSetTimeout(function(){vc.CalculatedView.addingMeasureFlag=!r.O8C},t.N6C)},e.prototype.addMeasure=function(e,i,o){var s,n=r;void n.F8C===i&&(i=n.C4C),void n.F8C===o&&(o=!n.O8C),i=n.F8C<i.length?i:this.generateMeasureName(),n.x4C!=this.currentMeasure?this.currentMeasure.caption==i&&this.currentMeasure.formula==e&&this.currentMeasure.individual==o||((s=new yc.data_._structure.GenericMeasure(this.currentMeasure.uniqueName,i)).formula=e,s.individual=o):((s=new yc.data_._structure.GenericMeasure(i,i)).formula=e,s.individual=o),n.x4C!=s&&(vc.CalculatedView.addingMeasureFlag=!n.F8C,_c.config._pivot.PivotFieldsModel.expandFormulas=!n.F8C,this.model_.addCalculatedMeasure(s),this.model_.dispatchWith(vc.CalculatedView.EVENT_CALCULATED_VALUE_ADDED,n.x4C,{measureUniqueName:s.uniqueName}),Be.fmSetTimeout(function(){vc.CalculatedView.addingMeasureFlag=!n.O8C},t.N6C))},e.prototype.isValidFormula=function(e){return e=(new Be.Lexer).parse(e),r.x4C!=e&&void r.F8C!=e.length},e.prototype.generateMeasureName=function(){for(var e=r,t=yc.model._labels.Labels.CALCULATED_VIEW_FORMULA+" #",i=e.F8C,o=this.model_.cube_.structure_.calculatedMeasures,s=RegExp(yc.model._labels.Labels.CALCULATED_VIEW_FORMULA+" #"),n=e.F8C;n<o.length;n++){var a=o.getItemAt(n).caption;s.test(a)&&(i=Math.max(i,parseInt(a.substr(yc.model._labels.Labels.CALCULATED_VIEW_FORMULA.length+e.M8C))))}return t+(i+e.O8C)},e}(),vc.CalculatedModel=bc,wc=De||(De={}),Fc=wc._view||(wc._view={}),Ec=Fc.calculated||(Fc.calculated={}),Oc=function(e){var o=r,n="wdr-droppable-over";function a(){var i=e.call(this)||this;if(i.model_=new Ec.CalculatedModel,i.view=new Ec.CalculatedViewContent(i),i.view.removeButton&&i.view.removeButton.addEventListener(h.UIButton.CLICK_EVENT,function(e){return i.onRemoveBtnClick(e)}),i.view.measuresDragList&&i.view.measuresDragList.setItemRendererFactory(function(e,t){return i.fieldItemRendererFactory(e,t)}),i.view.formulaInput&&i.view.formulaInput.container.droppable({onDrop:function(e){return i.onMeasureDrop(e)},onDragEnter:function(){return i.onFormulaDragEnterOrOver()},onDragOver:function(){return i.onFormulaDragEnterOrOver()},onDragLeave:function(){return i.onFormulaDragLeave()},itemSelector:t.y3C}),i.view.btnOk&&i.view.btnOk.addEventListener(h.UIButton.CLICK_EVENT,function(){return i.onOkClick()}),i.view.btnCancel&&i.view.btnCancel.addEventListener(h.UIButton.CLICK_EVENT,function(){return i.onCancelClick()}),i.view.aggrView&&i.view.aggrView.addEventListener(s._Event.CHANGE,function(e){return i.onAggrChange(e)}),i.view.funcBtns)for(var r=o.F8C;r<i.view.funcBtns.length;r++)i.view.funcBtns[r].addEventListener(h.UIButton.CLICK_EVENT,function(e){return i.onFuncBtnClick(e)});return i}return Ga(a,e),a.prototype.onFormulaDragEnterOrOver=function(){this.view.formulaInput.addClass(n)},a.prototype.onFormulaDragLeave=function(){this.view.formulaInput.removeClass(n)},a.prototype.onMeasureDrop=function(e){this.view.formulaInput.removeClass(n),e=parseInt(e.attr(t.d3C)),(e=this.view.measuresDragList.getDataProvider()[e]).aggregation==wc.data_.consts.AggregationName.NONE?this.insertText(Be.StringUtils.bind('"{0}"',e.uniqueName)):this.insertText(Be.StringUtils.bind('{0}("{1}")',e.aggregation,e.uniqueName))},a.prototype.fieldItemRendererFactory=function(e,i){var r=this,s=new Fc.config.renderers.FieldItemRenderer;return s.setData(e),s.setIndex(i),s.setLabelFunction(function(e){return e.name+" ("+wc.data_.consts.AggregationName.aggregationCaption(e.aggregation)+t.z9Q}),s.addEventListener(o.H2C,function(e){return r.onAggrClick(e)}),s},Object.defineProperty(a.prototype,"funcButtonsDataProvider",{get:function(){return this.model_.funcButtonsDataProvider},enumerable:!o.F8C,configurable:!o.F8C}),Object.defineProperty(a.prototype,"isFormulaEmpty",{get:function(){return o.F8C==this.view.formulaInput.getText().length},enumerable:!o.F8C,configurable:!o.F8C}),a.prototype.update=function(e){var t="wdr-compact";this.model_.update(e),o.x4C!=this.model_.currentMeasure?(this.view.nameInput&&(this.view.nameInput.setText(this.model_.currentMeasure.caption),this.view.nameInput.container.toggleClass(t,!o.F8C)),this.view.formulaInput&&this.view.formulaInput.setText(this.model_.currentMeasure.formula),this.view.removeButton&&this.view.removeButton.isVisible(!o.F8C)):(this.view.nameInput&&this.view.nameInput.container.toggleClass(t,!o.O8C),this.view.cbxIndiValues&&(this.view.cbxIndiValues.checked=!o.O8C),this.view.removeButton&&this.view.removeButton.isVisible(!o.O8C)),this.view.cbxIndiValues&&(this.view.cbxIndiValues.checked=this.model_.currentMeasure?this.model_.currentMeasure.individual:!o.O8C),this.view.setLabels(),this.updateMeasuresList()},a.prototype.updateMeasuresList=function(){for(var e=this,r=this.model_.getAllMeasures(),s=[],n=o.F8C;n<r.length;n++)o.x4C!=this.model_.currentMeasure&&this.model_.currentMeasure.uniqueName==r[n].uniqueName||(r[n].isMeasure=!o.F8C,r[n].showAggregations=this.model_.showAggregations&&!r[n].calculated&&r[n].type!=wc.data_.types.MeasureType.COUNT,s.push(r[n]));if(s.sort(this.compareFunction),this.view.measuresDragList)for(this.view.measuresDragList.setDataProvider(s),r={createHelper:function(t){return e.view.createHelper(t)}},Be.browserVersion().isMobile&&(r.handle=i.F3Y),s=this.view.measuresDragList.container.find(t.y3C,!o.F8C),n=o.F8C;n<s.length;n++)s[n].draggable(r)},a.prototype.clear=function(){this.view.nameInput&&this.view.nameInput.setText(o.C4C),this.view.formulaInput&&this.view.formulaInput.setText(o.C4C),this.model_.currentMeasure=o.x4C},a.prototype.compareFunction=function(e,t){return e.name>t.name?o.O8C:-o.O8C},a.prototype.onRemoveBtnClick=function(e){Be.browserVersion().isMobile?this.onRemoveMeasure():this.showRemoveAlert()},a.prototype.showRemoveAlert=function(){var e,t,i=this;Be.OSUtil.isIOS||Be.OSUtil.isMac?(e=[wc.model._labels.Labels.BUTTON_NO,wc.model._labels.Labels.BUTTON_YES],t=[o.x4C,function(){return i.onRemoveMeasure()}]):(e=[wc.model._labels.Labels.BUTTON_YES,wc.model._labels.Labels.BUTTON_NO],t=[function(){return i.onRemoveMeasure()},o.x4C]);var r=wc.model.XSSCheck.valid(this.model_.currentMeasure.caption)?this.model_.currentMeasure.caption:wc.model.XSSCheck.validate(this.model_.currentMeasure.caption);wc.uialert(wc.model._labels.Labels.CALCULATED_VIEW_REMOVE_VALUE_MESSAGE,Be.StringUtils.bind(wc.model._labels.Labels.CALCULATED_VIEW_REMOVE_VALUE_TITLE,r),wc.AlertType.ALERT,e,t)},a.prototype.onRemoveMeasure=function(){this.model_.removeMeasure(this.model_.currentMeasure),this.close()},a.prototype.onAggrClick=function(e){if(i.u3Y==e.target.id){var r=parseInt(h.UIElement.convert(e.target).closest(t.y3C).attr(t.d3C));r=this.view.measuresDragList.getDataProvider()[r],this.view.aggrView.showWith(r,h.UIElement.convert(e.target))}},a.prototype.onAggrChange=function(e){var t=e.data.fieldData;e=e.data.aggrData,t.aggregation=e.aggregation,t.caption=e.caption+" of "+t.name,this.view.measuresDragList.validateItem(t)},a.prototype.onFuncBtnClick=function(e){e=parseInt(e.target.container.attr(t.d3C)),(e=this.funcButtonsDataProvider[e].func)==wc.data_.consts.FunctionName.IF||e==wc.data_.consts.FunctionName.ABS||e==wc.data_.consts.FunctionName.MIN||e==wc.data_.consts.FunctionName.MAX||e==wc.data_.consts.FunctionName.VALUE?this.addSpecialOperation(e):this.addOperation(e)},a.prototype.onCancelClick=function(){this.close()},a.prototype.onOkClick=function(){var e=this.view.formulaInput.getText();o.F8C==e.length?this.close():!o.O8C==this.model_.isValidFormula(e)?wc.uialert(wc.model._labels.Labels.MESSAGE_WRONG_FORMULA_FORMAT):(this.model_.addMeasure(e,this.view.nameInput.getText(),this.view.cbxIndiValues.checked),this.close())},a.prototype.close=function(){this.dispatchWith(s._Event.CLOSE)},a.prototype.insertText=function(e,t){void o.F8C===t&&(t=o.F8C);var i=this.view.formulaInput.getSelectionBeginIndex();this.view.formulaInput.getSelectionEndIndex();var r=this.view.formulaInput.getText();-o.O8C==i&&(i=this.lastPosition),o.F8C==i||o.s4C==r.charAt(i-o.O8C)?(this.view.formulaInput.insertText(e+o.s4C),this.lastPosition=i+e.length+o.O8C):(this.view.formulaInput.insertText(o.s4C+e+o.s4C),this.lastPosition=i+e.length+o.M8C),this.lastPosition-=t,this.view.formulaInput.setSelection(this.lastPosition)},a.prototype.addOperation=function(e){this.insertText(e)},a.prototype.addSpecialOperation=function(e){var i=t,r=this.view.formulaInput.getSelectionBeginIndex(),s=this.view.formulaInput.getSelectionEndIndex(),n=this.view.formulaInput.getText();i.R1B==e?this.insertText(e+i.K9Q+n.slice(r,s)+", , )",o.o8C):this.insertText(e+i.K9Q+n.slice(r,s)+i.z9Q,o.M8C)},a}(s.EventDispatcher),Ec.CalculatedController=Oc,Sc=De||(De={}),Tc=Sc._view||(Sc._view={}),xc=Tc.calculated||(Tc.calculated={}),Lc=function(e){function o(t){var i=e.call(this)||this;return i.controller=t,i.setControls(),i}return Ga(o,e),o.prototype.setControls=function(){var e=i,o=r,s=this,n=new h.UIComponentBase(o.r4C,e.j3Y);this.addChild(n);var a=new h.UIComponentBase(o.r4C,e.g3Y);n.addChild(a),this.titleLabel=new h.UILabel(Sc.model._labels.Labels.CALCULATED_VIEW_TITLE),this.titleLabel.addClass(e.m1Y),a.addChild(this.titleLabel),this.subtitleLabel=new h.UILabel(Sc.model._labels.Labels.CALCULATED_VIEW_MEASURE_BOX),this.subtitleLabel.addClass(e.o3Y),a.addChild(this.subtitleLabel),a=new h.UIComponentBase(o.r4C,e.n3Y),n.addChild(a),this.removeButton=new h.UIButton("wdr-ui-btn-light wdr-icon-act_trash"),this.removeButton.setId("wdr-remove-btn"),this.removeButton.container.attr(e.y2Y,Sc.model._labels.Labels.CALCULATED_VIEW_REMOVE_VALUE),a.addChild(this.removeButton),this.btnCancel=new h.UIButton(o.E2C),this.btnCancel.setLabel(Sc.model._labels.Labels.BUTTON_CANCEL),this.btnOk=new h.UIButton(e.V8Y),this.btnOk.setLabel(Sc.model._labels.Labels.BUTTON_APPLY),Be.OSUtil.isIOS||Be.OSUtil.isMac?(a.addChild(this.btnCancel),a.addChild(this.btnOk)):(a.addChild(this.btnOk),a.addChild(this.btnCancel)),n=new h.UIComponentBase(o.r4C,e.L3Y),this.addChild(n),this.nameInput=new h.UITextInput,this.nameInput.setId("wdr-name-input"),this.nameInput.setPrompt(Sc.model._labels.Labels.CALCULATED_VIEW_MEASURE_NAME),n.addChild(this.nameInput),this.measuresDragList=new h.lists.UIList,this.measuresDragList.setId(e.l6Y),this.measuresDragList.useCache=!o.O8C,this.measuresDragList.setLabelField(t.W0B),n.addChild(this.measuresDragList),this.cbxIndiValues=new h.UICheckBox,this.cbxIndiValues.setLabel(Sc.model._labels.Labels.CALCULATED_VIEW_CALCULATE_INDI_VALUES),n.addChild(this.cbxIndiValues),this.funcBtnsContainer=new h.UIComponentBase(o.r4C,e.a3Y),this.funcBtnsContainer.setId("wdr-func-btn-group"),n.addChild(this.funcBtnsContainer),this.funcBtns=[],a=this.controller.funcButtonsDataProvider;for(var l=o.F8C;l<a.length;l++){var c=new h.UIButton("wdr-ui-col-9 wdr-calc-action");c.removeClass(o.E2C),c.setName(a[l].name),c.setLabel(a[l].label),c.container.attr(t.d3C,l),this.funcBtnsContainer.addChild(c),this.funcBtns.push(c)}a=new h.UIComponentBase(o.r4C,"wdr-formula-wrap"),n.addChild(a),this.formulaInput=new h.UITextArea,this.formulaInput.setId("wdr-formula-input"),this.formulaInput.addEventListener(h.UITextInput.CHANGE_EVENT,function(){return s.onFormulaChange()}),a.addChild(this.formulaInput),this.lblFormulaPrompt=new h.UILabel(Sc.model._labels.Labels.CALCULATED_VIEW_FORMULA_PROMPT),this.lblFormulaPrompt.addClass(e.w3Y),a.addChild(this.lblFormulaPrompt),this.aggrView=new Tc.config.AggregationsView,this.aggrView.setId(e.p6Y),this.aggrView.hide(),n.addChild(this.aggrView)},o.prototype.setLabels=function(){this.titleLabel.setLabel(Sc.model._labels.Labels.CALCULATED_VIEW_TITLE),this.subtitleLabel.setLabel(Sc.model._labels.Labels.CALCULATED_VIEW_MEASURE_BOX),this.btnOk.setLabel(Sc.model._labels.Labels.BUTTON_APPLY),this.btnCancel.setLabel(Sc.model._labels.Labels.BUTTON_CANCEL),this.nameInput.setPrompt(Sc.model._labels.Labels.CALCULATED_VIEW_MEASURE_NAME),this.cbxIndiValues.setLabel(Sc.model._labels.Labels.CALCULATED_VIEW_CALCULATE_INDI_VALUES),this.lblFormulaPrompt.setLabel(Sc.model._labels.Labels.CALCULATED_VIEW_FORMULA_PROMPT),this.removeButton.container.attr(i.y2Y,Sc.model._labels.Labels.CALCULATED_VIEW_REMOVE_VALUE)},o.prototype.createHelper=function(e){var o=r,s=new h.UIElement(o.I2C);return s.attr(o.G2C,i.B6Y),s.addClass(i.b2Y),s.addClass(o.k4C),s.css(o.s2C,e.css(o.s2C)),s.css(o.F3C,o.O3C),s.css(i.g2Y,o.o0C),s.attr(t.d3C,e.attr(t.d3C)),s.text(e.text()),s},o.prototype.onFormulaChange=function(){this.lblFormulaPrompt.isVisible(r.F8C==this.formulaInput.getText().length)},o}(h.UIComponentBase),xc.CalculatedViewContent=Lc,function(e){var i=function(){function e(){}return e.FILTER_OPEN="FILTER_OPEN",e.FILTER_CLOSE="FILTER_CLOSE",e.FILTER_SELECTION_CHANGE="FILTER_SELECTION_CHANGE",e.FILTER_COLLAPSE_EXPAND="FILTER_COLLAPSE_EXPAND",e.CALCULATED_VIEW_OPEN="CALCULATED_VIEW_OPEN",e.CALCULATED_VIEW_CLOSE="CALCULATED_VIEW_CLOSE",e.DRILL_THROUGH_OPEN="DRILL_THROUGH_OPEN",e.DRILL_THROUGH_CLOSE="DRILL_THROUGH_CLOSE",e.CONTEXT_MENU_OPEN="CONTEXT_MENU_OPEN",e.CLASSIC_TO_COMPACT="CLASSIC_TO_COMPACT",e.RENDER_COMPLETE="RENDER_COMPLETE",e.BEFORE_GRID_DRAW=t.l8Q,e.AFTER_GRID_DRAW=t.p8Q,e}();e.ViewEvent=i;var r=function(e){function t(t){var r=e.call(this,i.FILTER_OPEN)||this;return r.hierarchy=t,r}return Ga(t,e),t}(s._Event);e.FilterOpenEvent=r}((Ac=De||(De={}))._view||(Ac._view={})),Ic=De||(De={}),Rc=Ic._view||(Ic._view={}),Dc=Rc.filter||(Rc.filter={}),Nc=function(){function e(){this.allMembers=[],this.selectedMembers=[],this.searchedMembers=[],this.searchPhrase=r.C4C,this.isAllSelected=!r.F8C}return e.prototype.setHierarchy=function(e){this.currentHierarchy=e},e.prototype.getHierarchy=function(){return this.currentHierarchy},e.prototype.setSortType=function(e){this.sortType=e,this.allMembers=this.currentHierarchy.sortChildren(this.currentHierarchy.allMember,!r.O8C,this.sortType).toArray()},e.prototype.getSortType=function(){return this.sortType},e.prototype.select=function(e,t){if(this.isAllSelected!=t)this.selectedMembers.push(e);else{var i=this.selectedMembers.indexOf(e);-r.O8C<i&&this.selectedMembers.splice(i,r.O8C)}this.selectedMembers.length==this.allMembers.length&&this.selectAll(!this.isAllSelected)},e.prototype.search=function(e,t){var i=r;if(e=e.toLowerCase(),this.searchPhrase===e)t();else if(this.searchPhrase=e,i.F8C==this.searchPhrase.length)t();else{this.searchedMembers.length=i.F8C;var o=this.allMembers.length,s=i.F8C;for(s=i.F8C;s<o;s++)Be.StringUtils.contains(this.allMembers[s].caption,e)&&this.searchedMembers.push(this.allMembers[s]);t(this.searchedMembers)}},e.prototype.setSearchedMembers=function(e){r.x4C!=e?this.searchedMembers=e:this.searchedMembers.length=r.F8C},e.prototype.selectAll=function(e){if(this.isSearched())for(var t=this.searchedMembers.length,i=r.F8C;i<t;i++)Be.StringUtils.contains(this.searchedMembers[i].caption,this.searchPhrase)&&this.select(this.searchedMembers[i],e);else this.isAllSelected=e,this.selectedMembers.length=r.F8C},e.prototype.selectDescendants=function(e){},e.prototype.getTotalSelectedLength=function(){var e=r,t=e.F8C;return t=this.isAllSelected||this.isSearched()?this.isAllSelected&&this.isSearched()?this.searchedMembers.length+this.countTheDifference()-this.selectedMembers.length:this.isAllSelected||e.F8C!=this.selectedMembers.length?this.allMembers.length-this.selectedMembers.length:this.selectedMembers.length:this.selectedMembers.length,e.F8C<t?t:e.F8C},e.prototype.countTheDifference=function(){for(var e=r,t=e.F8C,i=e.F8C,o=e.F8C;i<this.selectedMembers.length;){for(;o<this.searchedMembers.length&&this.searchedMembers[o].uniqueName!=this.selectedMembers[i].uniqueName;)o++;this.searchedMembers.length==o&&t++,o=e.F8C,i++}return t},e.prototype.getSelectedLength=function(){if(this.isSearched()){for(var e=r.F8C,t=r.F8C;t<this.searchedMembers.length;t++)r.F8C>Be.ArrayUtils.findIndex(this.selectedMembers,this.searchedMembers[t].uniqueName,o.M6B)==this.isAllSelected&&e++;return e}return this.getTotalSelectedLength()},e.prototype.setFilterItems=function(e){this.selectedMembers.length=r.F8C;var t=e.length;if(this.isAllSelected=r.F8C==t,!this.isAllSelected)for(var i=r.F8C;i<t;i++)this.selectedMembers.push(e[i])},e.prototype.getFilterItems=function(){var e=r,t=e.F8C,i=[],o=[],s=(o=this.isSearched()&&this.isAllSelected?this.searchedMembers:this.selectedMembers).length;if(this.isSearched()&&this.isAllSelected)for(o=t=e.F8C;t<this.searchedMembers.length;){for(;o<this.selectedMembers.length&&this.searchedMembers[t].uniqueName!=this.selectedMembers[o].uniqueName;)o++;o==this.selectedMembers.length&&i.push(this.searchedMembers[t]),o=e.F8C,t++}else for(;t<s;t++)i[t]=o[t];return{items:i,negation:t=this.isSearched()&&this.isAllSelected?!e.O8C:e.F8C==i.length?!e.O8C:this.isAllSelected}},e.prototype.setItems=function(e){this.allMembers=e,this.searchPhrase=r.C4C,this.searchedMembers.length=r.F8C},e.prototype.getItems=function(e,o){for(var s,n=r,a=[],l=e,h=RegExp(t.K9Q+this.searchPhrase+t.z9Q,i.L2Y),c=this.isSearched()?this.searchedMembers:this.allMembers;l<o&&!(l>c.length-n.O8C);l++)s={member:s=c[l],label:this.isSearched()?s.caption.replace(h,i.w5Y):s.caption,isSelected:(-n.O8C==this.selectedMembers.indexOf(s)?this.isAllSelected:!this.isAllSelected)?n.O8C:n.F8C,levelNum:n.F8C,rightMargin:o-e<c.length-n.O8C?n.A8C:n.F8C},a.push(s);return a},e.prototype.getLength=function(){return this.isSearched()?this.searchedMembers.length:this.allMembers.length},e.prototype.getTotalLength=function(){return this.getLength()},e.prototype.isSearched=function(){return r.F8C<this.searchPhrase.length},e.prototype.expand=function(e){},e.prototype.collapse=function(e){},e}(),Dc.MembersFilterDataProvider=Nc,Mc=De||(De={}),Pc=Mc._view||(Mc._view={}),Hc=Pc.filter||(Pc.filter={}),Uc=function(){function e(){this.numParentsInSearch=r.F8C,this.members=[],this.selectedMembers=[],this.searchedMembers=[],this.partlySelectedMembers=[],this.expandedMembers=[],this.searchPhrase=r.C4C,this.isAllSelected=!r.F8C,this.sortType=Mc.data_.consts.SortType.UNSORTED}return e.prototype.setHierarchy=function(e){this.currentHierarchy=e,this.members.length=r.F8C},e.prototype.getHierarchy=function(){return this.currentHierarchy},e.prototype.setSortType=function(e){this.sortType=e,this.members.length=r.F8C,this.insertDescendants(this.currentHierarchy.allMember,-r.O8C)},e.prototype.getSortType=function(){return this.sortType},e.prototype.setItems=function(e){for(var t,i=r.F8C,o=e.length;i<o;i++)(t=e[i]).isAll||(this.members.push(t),t.isDrilledDown&&t.children&&r.F8C<t.children.length&&(this.expandedMembers.push(t),this.setItems(this.sortType===Mc.data_.consts.SortType.UNSORTED?t.children.toArray():this.currentHierarchy.sortChildren(t,!r.O8C,this.sortType).toArray())))},e.prototype.getItems=function(e,o){for(var s,n=r,a=e,l=[],h=RegExp(t.K9Q+this.searchPhrase+t.z9Q,i.L2Y),c=this.isSearched()?this.searchedMembers:this.members;a<o&&!(a>c.length-n.O8C);a++)s={member:s=c[a],levelNum:s.level.num,label:this.isSearched()?s.caption.replace(h,i.w5Y):s.caption,isSelected:this.isSelected(s),isSearched:this.isSearched(),isExpanded:this.isExpanded(s),rightMargin:o-e<c.length-n.O8C?n.k8C:n.F8C},l.push(s);return l},e.prototype.isSelected=function(e){var t=r,i=(-t.O8C==this.selectedMembers.indexOf(e)?this.isAllSelected:!this.isAllSelected)?t.O8C:t.F8C;return t.F8C<this.selectedMembers.length&&-t.O8C!=this.partlySelectedMembers.indexOf(e)&&(i=-t.O8C),i},e.prototype.isExpanded=function(e){var t=r;return this.isSearched()||e.isLeaf?-t.O8C:-t.O8C!=this.expandedMembers.indexOf(e)?t.O8C:t.F8C},e.prototype.getLength=function(){return this.isSearched()?this.searchedMembers.length:this.members.length},e.prototype.getTotalLength=function(){return this.isSearched()?this.searchedMembers.length-this.numParentsInSearch:this.currentHierarchy?this.currentHierarchy.members.length-r.O8C:r.F8C},e.prototype.select=function(e,t){var i=r,s=-i.O8C;s=this.selectedMembers.indexOf(e),this.isAllSelected!==t?(-i.O8C==s&&this.selectedMembers.push(e),i.F8C<e.children.length&&this.pushDescendantsToSelected(e)):(-i.O8C!=s&&this.selectedMembers.splice(s,i.O8C),i.F8C<e.children.length&&this.removeDescendantsFromSelected(e)),s=Be.ArrayUtils.findIndex(this.partlySelectedMembers,e.uniqueName,o.M6B),-i.O8C!=s&&this.partlySelectedMembers.splice(s,i.O8C),this.selectParents(e),this.selectedMembers.length===this.currentHierarchy.members.length-i.O8C&&(this.selectedMembers.length=i.F8C,this.partlySelectedMembers.length=i.F8C,this.isAllSelected=!this.isAllSelected)},e.prototype.selectDescendants=function(e){-r.O8C==this.partlySelectedMembers.indexOf(e)&&(-r.O8C==this.selectedMembers.indexOf(e)?this.removeDescendantsFromSelected(e):this.pushDescendantsToSelected(e))},e.prototype.selectParents=function(e){var t,i=r,s=e.parent;if(s&&!s.isAll){e=Be.ArrayUtils.findIndex(this.selectedMembers,s.uniqueName,o.M6B),t=Be.ArrayUtils.findIndex(this.partlySelectedMembers,s.uniqueName,o.M6B);var n=-i.O8C!=e;this.hasSelectedChildren(s,!i.O8C)?(this.hasSelectedChildren(s)?(-i.O8C==t&&this.partlySelectedMembers.push(s),this.isAllSelected&&n&&this.selectedMembers.splice(e,i.O8C)):(-i.O8C!=t&&this.partlySelectedMembers.splice(t,i.O8C),this.isAllSelected&&!n&&this.selectedMembers.push(s)),!this.isAllSelected&&n&&this.selectedMembers.splice(e,i.O8C)):(-i.O8C!=t&&this.partlySelectedMembers.splice(t,i.O8C),this.isAllSelected&&n?this.selectedMembers.splice(e,i.O8C):this.isAllSelected||n||this.selectedMembers.push(s)),this.selectParents(s)}},e.prototype.hasSelectedChildren=function(e,t){var i=r;void i.F8C===t&&(t=!i.F8C);for(var s,n=i.F8C,a=e.children.toArray(),l=a.length;n<l;n++)if(s=a[n],-i.O8C==Be.ArrayUtils.findIndex(this.selectedMembers,s.uniqueName,o.M6B)==this.isAllSelected==t||-i.O8C!=Be.ArrayUtils.findIndex(this.partlySelectedMembers,s.uniqueName,o.M6B))return!i.F8C;return!i.O8C},e.prototype.pushDescendantsToSelected=function(e){for(var t,i,s=r,n=s.F8C,a=e.children.toArray(),l=a.length;n<l;n++)i=a[n],e=Be.ArrayUtils.findIndex(this.selectedMembers,i.uniqueName,o.M6B),t=Be.ArrayUtils.findIndex(this.partlySelectedMembers,i.uniqueName,o.M6B),-s.O8C==e&&this.selectedMembers.push(i),-s.O8C!=t&&this.partlySelectedMembers.splice(t,s.O8C),s.F8C<i.children.length&&this.pushDescendantsToSelected(i)},e.prototype.removeDescendantsFromSelected=function(e){for(var t,i,s=r,n=s.F8C,a=e.children.toArray(),l=a.length;n<l;n++)i=a[n],e=Be.ArrayUtils.findIndex(this.selectedMembers,i.uniqueName,o.M6B),t=Be.ArrayUtils.findIndex(this.partlySelectedMembers,i.uniqueName,o.M6B),-s.O8C!=e&&this.selectedMembers.splice(e,s.O8C),-s.O8C!=t&&this.partlySelectedMembers.splice(t,s.O8C),s.F8C<i.children.length&&this.removeDescendantsFromSelected(i)},e.prototype.selectAll=function(e){if(this.isSearched())for(var t=this.searchedMembers.length,i=r.F8C;i<t;i++)Be.StringUtils.contains(this.searchedMembers[i].caption,this.searchPhrase)&&this.select(this.searchedMembers[i],e);else this.isAllSelected=e,this.selectedMembers.length=r.F8C,this.partlySelectedMembers.length=r.F8C},e.prototype.getSelectedLength=function(){if(this.isSearched()){for(var e=r.F8C,t=this.searchedMembers.length,i=r.F8C;i<t;i++)Be.StringUtils.contains(this.searchedMembers[i].caption,this.searchPhrase)&&r.F8C>Be.ArrayUtils.findIndex(this.selectedMembers,this.searchedMembers[i].uniqueName,o.M6B)==this.isAllSelected&&e++;return e}return this.getTotalSelectedLength()},e.prototype.getTotalSelectedLength=function(){var e=this.isAllSelected?this.currentHierarchy.members.length-this.selectedMembers.length-this.partlySelectedMembers.length-r.O8C:this.selectedMembers.length;return r.F8C>e?r.F8C:e},e.prototype.setFilterItems=function(e){var t=r,i=e.length;if(this.selectedMembers.length=t.F8C,this.partlySelectedMembers.length=t.F8C,t.F8C==i)this.isAllSelected=!t.F8C;else{this.isAllSelected=!t.O8C;for(var s,n,a=t.F8C;a<i;a++)for(n=(n=(s=e[a]).children.toArray()).length,this.selectedMembers.push(s),t.F8C<n&&this.pushDescendantsToSelected(s);s.parent&&!s.parent.isAll;)s=s.parent,-t.O8C==Be.ArrayUtils.findIndex(this.partlySelectedMembers,s.uniqueName,o.M6B)&&this.partlySelectedMembers.push(s)}},e.prototype.getFilterItems=function(){for(var e,t,i,s=r,n=s.F8C,a=[],l=[],h=(l=this.isSearched()&&this.isAllSelected?this.searchedMembers:this.selectedMembers).length;n<h;n++)t=(e=l[n]).parent,i=-s.O8C,Be.nullOrUndefined(t)||(i=Be.ArrayUtils.findIndex(l,t.uniqueName,o.M6B)),-s.O8C===i&&a.push(e);return{items:a,negation:n=this.isSearched()&&this.isAllSelected?!s.O8C:s.F8C==a.length?!s.O8C:this.isAllSelected}},e.prototype.search=function(e,t){var i=r;if(e=e.toLowerCase(),this.searchPhrase===e)t();else if(this.searchPhrase=e,i.F8C==this.searchPhrase.length)t();else{this.numParentsInSearch=this.searchedMembers.length=i.F8C,this.fillSearchTree(this.currentHierarchy.allMember,e);var o=i.F8C,s=i.F8C;for(s=i.F8C;s<this.searchedMembers.length;s++)o=this.insertParentsToSearch(this.searchedMembers[s],s),this.numParentsInSearch+=o,s+=o;t(this.searchedMembers)}},e.prototype.setSearchedMembers=function(e){r.x4C!=e?this.searchedMembers=e:this.searchedMembers.length=r.F8C},e.prototype.insertParentsToSearch=function(e,t){var i=e.parent,s=r.F8C;return Be.nullOrUndefined(i)||i.isAll||(-r.O8C==Be.ArrayUtils.findIndex(this.searchedMembers,i.uniqueName,o.M6B)&&(s++,this.searchedMembers.splice(t,r.F8C,i)),s+=this.insertParentsToSearch(i,t)),s},e.prototype.fillSearchTree=function(e,t){for(var i,o=e.children,s=o.length,n=r.F8C;n<s;n++)i=o.getItemAt(n),Be.StringUtils.contains(i.caption,t)&&this.searchedMembers.push(i),this.fillSearchTree(i,t)},e.prototype.isSearched=function(){return r.F8C<this.searchPhrase.length},e.prototype.expand=function(e){-r.O8C==this.expandedMembers.indexOf(e)&&this.expandedMembers.push(e),this.showDescendants(e,!r.F8C)},e.prototype.collapse=function(e){var t=this.expandedMembers.indexOf(e);-r.O8C!=t&&this.expandedMembers.splice(t,r.O8C),this.showDescendants(e,!r.O8C)},e.prototype.showDescendants=function(e,t){var i=Be.ArrayUtils.findIndex(this.members,e.uniqueName,o.M6B);t?this.insertDescendants(e,i):this.members.splice(i+r.O8C,this.getNumDescendants(e))},e.prototype.insertDescendants=function(e,t){for(var i,o=r,s=this.sortType===Mc.data_.consts.SortType.UNSORTED?e.children.toArray():this.currentHierarchy.sortChildren(e,!o.O8C,this.sortType).toArray(),n=s.length-o.O8C,a=t+o.O8C;-o.O8C<n;n--)i=s[n],this.members.splice(a,o.F8C,i),-o.O8C<this.expandedMembers.indexOf(i)&&this.insertDescendants(i,a)},e.prototype.getNumDescendants=function(e){for(var t,i=(e=e.children.toArray()).length,o=i,s=r.F8C;s<i;s++)t=e[s],-r.O8C<this.expandedMembers.indexOf(t)&&(o+=this.getNumDescendants(t));return o},e}(),Hc.MembersTreeDataProvider=Uc,Bc=De||(De={}),kc=Bc._view||(Bc._view={}),Vc=kc.filter||(kc.filter={}),zc=function(e){var t=r;function o(t){var i=e.call(this)||this;return i.controller=t,i.setControls(),i}return Ga(o,e),o.prototype.setControls=function(){var e=i,r="wdr-sort-btn",o=new h.UIComponentBase(t.r4C,e.j3Y);this.addChild(o);var s=new h.UIComponentBase(t.r4C,"wdr-ui-col-2 wdr-vam");o.addChild(s),this.titleLabel=new h.UILabel,this.titleLabel.addClass(e.m1Y),s.addChild(this.titleLabel),s=new h.UIComponentBase(t.r4C,"wdr-ui-col wdr-vam wdr-ui-btns-row"),o.addChild(s),this.cancelBtn=new h.UIButton(t.E2C),this.cancelBtn.setLabel(Bc.model._labels.Labels.BUTTON_CANCEL),this.okBtn=new h.UIButton(e.V8Y),this.okBtn.setLabel(Bc.model._labels.Labels.BUTTON_APPLY),Be.OSUtil.isIOS||Be.OSUtil.isMac?(s.addChild(this.cancelBtn),s.addChild(this.okBtn)):(s.addChild(this.okBtn),s.addChild(this.cancelBtn)),o=new h.UIComponentBase(t.r4C,e.a3Y),this.addChild(o),this.sortContainer=new h.UIComponentBase(t.r4C,"wdr-ui-col-2"),this.sortContainer.container.display=t.y2C,o.addChild(this.sortContainer),this.sortLabel=new h.UILabel,this.sortLabel.setId("wdr-sort-label"),this.sortLabel.addClass(e.K8Y),this.sortLabel.setLabel(Bc.model._labels.Labels.FILTER_SORT),this.sortContainer.addChild(this.sortLabel),s=new h.UIComponentBase(t.r4C,"wdr-sort-btns"),this.sortContainer.addChild(s),this.azBtn=new h.UIToggleButton,this.azBtn.container.addClass(r),this.azBtn.setLabel(Bc.model._labels.Labels.FILTER_ASC_SORT),s.addChild(this.azBtn),this.zaBtn=new h.UIToggleButton,this.zaBtn.container.addClass(r),this.zaBtn.setLabel(Bc.model._labels.Labels.FILTER_DESC_SORT),s.addChild(this.zaBtn),(s=new h.UIComponentBase(t.r4C,"wdr-ui-col-2 wdr-tar wdr-topx-col")).container.display=t.y2C,o.addChild(s),this.top10Btn=new h.UIToggleButton,this.top10Btn.setId("wdr-top10-btn"),this.top10Btn.addClass("wdr-ui-toggle-btn-dark"),this.top10Btn.setLabel(Bc.model._labels.Labels.FILTER_TOP_X),s.addChild(this.top10Btn),this.clearTopBtn=new h.UIComponentBase(t.I2C,"wdr-btn-canceltopx"),this.clearTopBtn.setId("wdr-clear-top-btn"),this.clearTopBtn.container.attr(e.y2Y,Bc.model._labels.Labels.FILTER_TOP_X_CLEAR),this.top10Btn.addChild(this.clearTopBtn),this.topBottomView=new Vc.TopBottomView,this.topBottomView.setId("wdr-filters-topx-view"),this.topBottomView.hide(),this.addChild(this.topBottomView),this.membersView=new Vc.MembersView,this.membersView.addClass("wdr-ft-contentheight-220"),this.addChild(this.membersView)},Object.defineProperty(o.prototype,"selectAllCbx",{get:function(){return this.membersView.selectAllCbx},enumerable:!t.F8C,configurable:!t.F8C}),Object.defineProperty(o.prototype,"membersFilterList",{get:function(){return this.membersView.membersFilterList},enumerable:!t.F8C,configurable:!t.F8C}),Object.defineProperty(o.prototype,"selectedAmountLabel",{get:function(){return this.membersView.selectedAmountLabel},enumerable:!t.F8C,configurable:!t.F8C}),Object.defineProperty(o.prototype,"searchInput",{get:function(){return this.membersView.searchInput},enumerable:!t.F8C,configurable:!t.F8C}),o.prototype.setLabels=function(){this.top10Btn.setLabel(Bc.model._labels.Labels.FILTER_TOP_X),this.clearTopBtn.container.attr(i.y2Y,Bc.model._labels.Labels.FILTER_TOP_X_CLEAR),this.azBtn.setLabel(Bc.model._labels.Labels.FILTER_ASC_SORT),this.zaBtn.setLabel(Bc.model._labels.Labels.FILTER_DESC_SORT),this.searchInput.setPrompt(Bc.model._labels.Labels.FILTER_SEARCH),this.selectAllCbx.setLabel(Bc.model._labels.Labels.FILTER_SELECT_ALL),this.okBtn.setLabel(Bc.model._labels.Labels.BUTTON_APPLY),this.cancelBtn.setLabel(Bc.model._labels.Labels.BUTTON_CANCEL),this.sortLabel.setLabel(Bc.model._labels.Labels.FILTER_SORT),this.topBottomView.setLabels()},o}(h.containers.UIContainer),Vc.FilterViewContent=zc,qc=De||(De={}),Gc=qc._view||(qc._view={}),Wc=Gc.filter||(Gc.filter={}),jc=function(e){function t(){var t=i,o=r,s=e.call(this,o.r4C,"wdr-filters-table")||this,n=new h.UIComponentBase(o.r4C,"wdr-filters-table-header wdr-fth-withsearch");s.addChild(n),s.selectAllCbx=new h.UICheckBox,s.selectAllCbx.setLabel(qc.model._labels.Labels.FILTER_SELECT_ALL),n.addChild(s.selectAllCbx),s.selectedAmountLabel=new h.UILabel,s.selectedAmountLabel.setId("wdr-select-counter"),n.addChild(s.selectedAmountLabel),s.searchWrap=new h.UIComponentBase(o.r4C,t.f3Y),n.addChild(s.searchWrap),(n=new h.UIComponentBase(o.J2C,t.J3Y)).container.text(qc.model._labels.Labels.FILTER_SEARCH),n.addEventListener(o.H2C,function(){return s.onSearchClick()}),s.searchWrap.addChild(n);var a=new h.UIComponentBase(o.I2C,t.E3Y);return n.addChild(a),s.searchInput=new h.UITextInput,s.searchInput.addClass(t.H3Y),s.searchWrap.addChild(s.searchInput),(n=new h.UIComponentBase(o.I2C,t.Z3Y)).addEventListener(o.H2C,function(){return s.onSearchCloseClick()}),s.searchWrap.addChild(n),n=new h.UIComponentBase(o.r4C,"wdr-filters-table-content"),s.addChild(n),s.membersFilterList=new Wc.FilterList,s.membersFilterList.setSmartDataProvider(new Wc.MembersFilterDataProvider),s.membersFilterList.setId("wdr-members-filter-list"),n.addChild(s.membersFilterList),s}return Ga(t,e),t.prototype.onSearchClick=function(){this.searchWrap.addClass(i.X6Y),this.searchInput.container.focus(),this.selectedAmountLabel.hide()},t.prototype.onSearchCloseClick=function(){this.searchWrap.removeClass(i.X6Y),this.searchInput.clear(),this.selectedAmountLabel.show()},t.prototype.reset=function(){this.onSearchCloseClick()},t}(h.UIComponentBase),Wc.MembersView=jc,Yc=De||(De={}),Xc=Yc._view||(Yc._view={}),Kc=Xc.filter||(Xc.filter={}),Qc=function(e){function i(){var t=r,i=e.call(this)||this;return i.levelMargin=t.J8C,i.expandBtn=new h.UIToggleButton,i.expandBtn.removeClass(t.q3C),i.expandBtn.addClass("wdr-expand-toggle-btn"),i.expandBtn.addEventListener(s._Event.CHANGE,function(){return i.onCollapseExpand()}),i.container.append(i.expandBtn.container),i.selectedCheckBox=new h.UICheckBox,i.selectedCheckBox.addEventListener(s._Event.CHANGE,function(){return i.onSelect()}),i.container.append(i.selectedCheckBox.container),i.container.addEventListener(t.H2C,function(e){return i.onClick(e)}),i.invalidate(t.v2C),i}return Ga(i,e),i.prototype.onCollapseExpand=function(){var e=this.getData();e.isExpanded=this.expandBtn.getSelection(),this.container.dispatchWith(Kc.FilterList.EXPAND_EVENT,this,e)},i.prototype.onClick=function(e){e.target==this.container.element&&(this.selectedCheckBox.toggle(),this.onSelect())},i.prototype.onSelect=function(){var e=this.getData();e.isSelected=this.selectedCheckBox.getSelection(),this.container.dispatchWith(Kc.FilterList.SELECT_EVENT,this,e)},i.prototype.draw=function(){var e=r;if(this.isInvalid(t.Z3C)){var i=this.getData();if(this.expandBtn&&this.selectedCheckBox&&i){this.container.css(o.h0B,e.C4C);var s=this.levelMargin*(i.levelNum-e.O8C);i.isSearched||-e.O8C!==i.isExpanded||(s+=e.I8C),e.F8C<s&&this.container.css(o.h0B,s+e.y4C),isNaN(i.isExpanded)||-e.O8C===i.isExpanded||i.isSearched?this.expandBtn.hide():(this.expandBtn.show(),this.expandBtn.setSelection(i.isExpanded)),s=(s=i[this.getLabelField()]).replace(/<(?:.|\n)*?>/gi,e.C4C),this.selectedCheckBox.setLabel(s,!e.F8C),this.selectedCheckBox.setSelection(i.isSelected)}}},i}(h.renderers.UIItemRenderer),Kc.FilterListItemRenderer=Qc,Jc=De||(De={}),Zc=Jc._view||(Jc._view={}),$c=Zc.filter||(Zc.filter={}),ed=function(e){function i(){var t=e.call(this)||this;return t.setItemRendererFactory(function(e,i){return t.getItemRendererFactory(e,i)}),t}return Ga(i,e),i.prototype.getItemRendererFactory=function(e,t){var r=this,o=new $c.FilterListItemRenderer;return o.setData(e),o.setIndex(t),o.addEventListener(i.SELECT_EVENT,function(e){return r.onSelect(e)}),o.addEventListener(i.EXPAND_EVENT,function(e){return r.onExpand(e)}),o},i.prototype.onSelect=function(e){e=e.data,this.setSelected(e,r.O8C===e.isSelected),this.dispatch(new s._Event(i.SELECT_EVENT,this))},i.prototype.onExpand=function(e){var o=this,n=e.data;r.O8C===n.isExpanded?r.F8C===n.member.children.length?Jc.model.PivotModel.getInstance().cube_.loadMemberChildren(n.member.hierarchy_,n.member,function(e){return o.onChildrenLoaded(n.member)}):this.onChildrenLoaded(n.member):(this.getSmartDataProvider().collapse(n.member),this.invalidate(t.Z3C),this.dispatch(new s._Event(i.EXPAND_EVENT,this)))},i.prototype.onChildrenLoaded=function(e){Jc.preloader(!r.O8C),this.getSmartDataProvider().selectDescendants(e),this.getSmartDataProvider().expand(e),this.invalidate(t.Z3C),this.dispatch(new s._Event(i.EXPAND_EVENT,this))},i.prototype.getSmartDataProvider=function(){return this.filterDataProvider},i.prototype.setSmartDataProvider=function(e){this.filterDataProvider=e},i.prototype.getFilterItems=function(){return this.getSmartDataProvider().getFilterItems()},i.prototype.setFilterItems=function(e){this.getSmartDataProvider().setFilterItems(e),this.invalidate(t.Z3C)},i.prototype.getSelectedLength=function(){return this.getSmartDataProvider().getSelectedLength()},i.prototype.getTotalSelectedLength=function(){return this.getSmartDataProvider().getTotalSelectedLength()},i.prototype.getTotalLength=function(){return this.getSmartDataProvider().getLength()},i.prototype.getTotalItemsCount=function(){return this.getSmartDataProvider().getTotalLength()},i.prototype.setSelected=function(e,i){this.getSmartDataProvider().select(e.member,i),this.invalidate(t.Z3C)},i.prototype.selectAll=function(e){this.getSmartDataProvider().selectAll(e),this.invalidate(t.Z3C)},i.prototype.search=function(e,i){var r=this;this.getSmartDataProvider().search(e,function(e){r.getSmartDataProvider().setSearchedMembers(e),r.invalidate(t.Z3C),i()})},i.prototype.isSearched=function(){return this.getSmartDataProvider().isSearched()},i.prototype.setHierarchy=function(e){this.getSmartDataProvider().setHierarchy(e)},i.prototype.sort=function(e){e!==this.getSmartDataProvider().getSortType()&&(this.getSmartDataProvider().setSortType(e),this.invalidate(t.Z3C))},i.SELECT_EVENT=r.V3C,i.EXPAND_EVENT="__",i}(h.lists.UIVirtualList),$c.FilterList=ed,td=De||(De={}),id=td._view||(td._view={}),rd=id.filter||(id.filter={}),od=function(e){function i(){var i=r,o="wdr-topx-btn",n=e.call(this,i.r4C)||this;n._isEmpty=!i.F8C,n.addClass("wdr-filters-subview"),n.quantityInput=new h.UITextInput,n.quantityInput.setId("wdr-top-amount-input"),n.quantityInput.setRestriction(/^\d+$/),n.quantityInput.setType(i.x2C),n.quantityInput.addEventListener(h.UITextInput.CHANGE_EVENT,function(){return n.onQuantityChange()}),n.addChild(n.quantityInput);var a=new h.UIComponentBase(i.r4C);return a.setId("wdr-topx-btns"),n.addChild(a),n.btnTop=new h.UIToggleButton,n.btnTop.setId("wdr-btn-top"),n.btnTop.addClass(o),n.btnTop.setLabel(td.model._labels.Labels.FILTER_TOP),n.btnTop.addEventListener(s._Event.CHANGE,function(){return n.onBtnTopChange()}),a.addChild(n.btnTop),n.btnBottom=new h.UIToggleButton,n.btnBottom.setId("wdr-btn-bottom"),n.btnBottom.addClass(o),n.btnBottom.setLabel(td.model._labels.Labels.FILTER_BOTTOM),n.btnBottom.addEventListener(s._Event.CHANGE,function(){return n.onBtnBottomChange()}),a.addChild(n.btnBottom),n.measuresDropDown=new h.lists.UIDropDownList,n.measuresDropDown.setId("wdr-top-measures-dropdown"),n.measuresDropDown.setLabelField(t.W0B),n.measuresDropDown.setPrompt(i.C4C),n.measuresDropDown.addEventListener(s._Event.CHANGE,function(e){return n.onMeasuresChange(e)}),n.addChild(n.measuresDropDown),n}return Ga(i,e),i.prototype.onBtnTopChange=function(){this._isEmpty=!r.O8C,this.btnBottom.setSelection(r.O8C-this.btnTop.getSelection()),this.dispatch(new s._Event(i.CHANGE_EVENT,this))},i.prototype.onBtnBottomChange=function(){this._isEmpty=!r.O8C,this.btnTop.setSelection(r.O8C-this.btnBottom.getSelection()),this.dispatch(new s._Event(i.CHANGE_EVENT,this))},i.prototype.onMeasuresChange=function(e){this._isEmpty=!r.O8C,this.dispatch(new s._Event(i.CHANGE_EVENT,this))},i.prototype.onQuantityChange=function(){this._isEmpty=!r.O8C,r.C4C==this.getFilterType()&&this.setFilterType(td.data_.consts.FilterType.TOP),this.dispatch(new s._Event(i.CHANGE_EVENT,this))},i.prototype.setMeasures=function(e){this.measuresDropDown.setDataProvider(e),this.measuresDropDown.setSelectedIndex(r.F8C)},i.prototype.getSelectedMeasure=function(){return this.measuresDropDown.getSelectedItem()},i.prototype.setSelectedMeasure=function(e){this._isEmpty=!r.O8C,this.measuresDropDown.setSelectedItem(e,o.M6B)},i.prototype.reset=function(){var e=r;this._isEmpty=!e.F8C;var t=td.model._options.OptionsManager.flatView;this.btnTop.setSelection(t?e.F8C:e.O8C),this.btnBottom.setSelection(e.F8C),this.measuresDropDown.setSelectedIndex(e.F8C),this.measuresDropDown.isVisible(!t),this.quantityInput.setText("10")},i.prototype.setLabels=function(){this.btnTop.setLabel(td.model._labels.Labels.FILTER_TOP),this.btnBottom.setLabel(td.model._labels.Labels.FILTER_BOTTOM),this.measuresDropDown.setPrompt(r.C4C)},i.prototype.getFilterType=function(){return r.O8C===this.btnTop.getSelection()?td.data_.consts.FilterType.TOP:r.O8C===this.btnBottom.getSelection()?td.data_.consts.FilterType.BOTTOM:r.C4C},i.prototype.setFilterType=function(e){var t=r;e==td.data_.consts.FilterType.TOP?(this._isEmpty=!t.O8C,this.btnTop.setSelection(t.O8C),this.btnBottom.setSelection(t.F8C)):e==td.data_.consts.FilterType.BOTTOM&&(this._isEmpty=!t.O8C,this.btnTop.setSelection(t.F8C),this.btnBottom.setSelection(t.O8C))},i.prototype.getFilterQuantity=function(){return parseInt(this.quantityInput.getText())},i.prototype.setFilterQuantity=function(e){this._isEmpty=!r.O8C,this.quantityInput.setText(e.toString())},Object.defineProperty(i.prototype,o.Y6B,{get:function(){return this._isEmpty},enumerable:!r.F8C,configurable:!r.F8C}),i.CHANGE_EVENT=r.V3C,i}(h.UIComponentBase),rd.TopBottomView=od,sd=De||(De={}),nd=sd._view||(sd._view={}),ad=nd.filter||(nd.filter={}),ld=function(){var e=r;function t(){if(this.sortTypeChanged=!e.O8C,e.x4C!=t.instance)throw"FilterModel is singleton!";this.pivotInstance=sd.Pivot.instance,this.modelLocator=sd.model.PivotModel.getInstance(),this.zeroCoord=nd.PivotView.stage.position()}return t.getInstance=function(){return e.x4C==t.instance&&(t.instance=new t),t.instance},t.dispose=function(){t.instance=e.x4C},t.prototype.getHierarchies=function(){return this.hierarchies},t.prototype.setHierarchies=function(e){this.hierarchies=e},t.prototype.update=function(t){this.currentCoord={top:this.zeroCoord.top,left:this.zeroCoord.left};var i=this.modelLocator.cube_.slice_.allHierarchies(!e.O8C,!e.F8C,this.isFlatTable).toArray();this.setHierarchies(i),this.setCurrentHierarchy(t),this.measures=this.modelLocator.cube_.slice_.measures_.toArray()},t.prototype.clearValuesFilter=function(){this.filterType=sd.data_.consts.FilterType.NONE,this.filterQuantity=-e.O8C,this.filterMeasureName=e.C4C},t.prototype.setCurrentHierarchy=function(t){(this.currentHierarchy=t)&&(this.sortType=this.currentHierarchy.sortName,this.sortTypeChanged=!e.O8C,this.filterMeasureName=this.currentHierarchy.filterMeasureName,this.filterQuantity=this.currentHierarchy.filterQuantity,this.filterType=this.currentHierarchy.filterType,this.members=this.sortType!==sd.data_.consts.SortType.UNSORTED?this.currentHierarchy.sortChildren(this.currentHierarchy.allMember,!e.O8C,this.sortType).toArray():this.currentHierarchy.allMember.children.toArray())},t.prototype.getTopBottomMeasures=function(){return this.isFlatTable?[this.modelLocator.cube_.structure_.hierarchyToMeasure(this.currentHierarchy.uniqueName)]:this.measures},t.prototype.getSortType=function(){return this.sortType},t.prototype.setSortType=function(t){this.sortType=t,this.sortTypeChanged=!e.F8C},t.prototype.applyChanges=function(){this.currentHierarchy.hasValuesFilter()&&this.isValuesFilterEmpty&&this.modelLocator.clearFilter(this.currentHierarchy.uniqueName),this.applyMembersFilter(),this.applyValuesFilter(),this.applySort()},Object.defineProperty(t.prototype,"isValuesFilterEmpty",{get:function(){return!this.filterMeasureName||e.F8C===this.filterMeasureName.length||isNaN(this.filterQuantity)||e.O8C>this.filterQuantity||!this.filterType||e.F8C===this.filterType.length||this.filterType===sd.data_.consts.FilterType.NONE},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(t.prototype,"isValuesFilterChanged",{get:function(){return this.currentHierarchy.filterMeasureName!==this.filterMeasureName||this.currentHierarchy.filterQuantity!==this.filterQuantity||this.currentHierarchy.filterType!==this.filterType?!e.F8C:!e.O8C},enumerable:!e.F8C,configurable:!e.F8C}),t.prototype.applyValuesFilter=function(){!this.isValuesFilterEmpty&&this.isValuesFilterChanged&&(e.b2C===this.filterType?this.modelLocator.setTopX(this.currentHierarchy.uniqueName,this.filterQuantity,this.filterMeasureName):e.g2C===this.filterType&&this.modelLocator.setBottomX(this.currentHierarchy.uniqueName,this.filterQuantity,this.filterMeasureName))},t.prototype.isMembersFilterChanged=function(){if(this.filteredMembers.length!==this.currentHierarchy.filterMembers.length&&!this.filterNegation)return!e.F8C;for(var t=e.F8C,i=this.filteredMembers.length;t<i;t++)if(this.filterNegation===this.currentHierarchy.filterMembers.keyExists(this.filteredMembers[t].uniqueName))return!e.F8C;return this.filterNegation&&this.currentHierarchy&&this.currentHierarchy.filterMembers.length+this.filteredMembers.length!==this.currentHierarchy.members.length-e.O8C?!e.F8C:!e.O8C},t.prototype.applyMembersFilter=function(){this.isMembersFilterChanged()&&this.modelLocator.setFilter(this.currentHierarchy.uniqueName,this.filteredMembers,this.filterNegation)},t.prototype.isSortTypeChanged=function(){return this.sortTypeChanged},t.prototype.applySort=function(){this.isSortTypeChanged()&&this.modelLocator.setSort(this.currentHierarchy.uniqueName,this.sortType)},Object.defineProperty(t.prototype,"isPages",{get:function(){return!this.isFlatTable&&this.modelLocator.cube_.slice_.pages.keyExists(this.currentHierarchy.uniqueName)},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(t.prototype,i.g1Y,{get:function(){return sd.model._options.OptionsManager.flatView},enumerable:!e.F8C,configurable:!e.F8C}),t}(),ad.FilterModel=ld,hd=De||(De={}),cd=hd._view||(hd._view={}),dd=cd.filter||(cd.filter={}),ud=function(e){var t="wdr-not-empty";function n(){var t=r,i=e.call(this)||this;return i.model=dd.FilterModel.getInstance(),i.view=new dd.FilterViewContent(i),t.x4C!=i.view.hierarchiesList&&i.view.hierarchiesList.addEventListener(s._Event.CHANGE,function(e){return i.onHierarchiesListChange(e)}),t.x4C!=i.view.searchInput&&i.view.searchInput.addEventListener(h.UITextInput.CHANGE_EVENT,function(e){return i.onSearchInputChange(e.data)}),t.x4C!=i.view.membersFilterList&&(i.view.membersFilterList.addEventListener(dd.FilterList.SELECT_EVENT,function(){return i.onMembersFilterSelect()}),i.view.membersFilterList.addEventListener(dd.FilterList.EXPAND_EVENT,function(){return i.onMembersFilterExpand()})),t.x4C!=i.view.selectAllCbx&&i.view.selectAllCbx.addEventListener(s._Event.CHANGE,function(){return i.onSelectAllChange()}),t.x4C!=i.view.azBtn&&i.view.azBtn.addEventListener(s._Event.CHANGE,function(){return i.onAzBtnChange()}),t.x4C!=i.view.zaBtn&&i.view.zaBtn.addEventListener(s._Event.CHANGE,function(){return i.onZaBtnChange()}),t.x4C!=i.view.top10Btn&&i.view.top10Btn.addEventListener(s._Event.CHANGE,function(){return i.onTop10Change()}),t.x4C!=i.view.clearTopBtn&&i.view.clearTopBtn.container.addEventListener(t.H2C,function(e){return i.onClearTop(e)}),t.x4C!=i.view.topBottomView&&i.view.topBottomView.addEventListener(dd.TopBottomView.CHANGE_EVENT,function(){return i.onTopBottomChange()}),t.x4C!=i.view.okBtn&&i.view.okBtn.addEventListener(h.UIButton.CLICK_EVENT,function(e){return i.onOkClick(e)}),t.x4C!=i.view.cancelBtn&&i.view.cancelBtn.addEventListener(h.UIButton.CLICK_EVENT,function(e){return i.onCancelClick(e)}),i}return Ga(n,e),n.prototype.onDataUpdated=function(){this.update(this.model.currentHierarchy)},n.prototype.onClearTop=function(e){e.stopImmediatePropagation(),this.model.clearValuesFilter(),this.view.topBottomView&&(this.view.topBottomView.reset(),this.view.topBottomView.hide()),this.view.top10Btn&&(this.view.top10Btn.container.removeClass(t),this.view.top10Btn.setSelection(r.F8C))},n.prototype.onTopBottomChange=function(){if(this.view.topBottomView){this.model.filterType=this.view.topBottomView.getFilterType(),this.model.filterQuantity=this.view.topBottomView.getFilterQuantity();var e=this.view.topBottomView.getSelectedMeasure();this.model.filterMeasureName=e?e.uniqueName:r.C4C}this.view.top10Btn&&this.view.top10Btn.container.addClass(t)},n.prototype.onTop10Change=function(){this.view.topBottomView&&this.view.topBottomView.isVisible(r.O8C===this.view.top10Btn.getSelection())},n.prototype.onOkClick=function(e){this.dispatchWith(i.k7Y),e=this.view.membersFilterList.getFilterItems(),this.model.filteredMembers=e.items,this.model.filterNegation=e.negation,this.model.applyChanges()},n.prototype.onCancelClick=function(e){this.dispatchWith(i.k7Y)},n.prototype.onAzBtnChange=function(){var e=r;e.O8C===this.view.azBtn.getSelection()&&(this.view.zaBtn.setSelection(e.F8C),this.model.setSortType(hd.data_.consts.SortType.ASC),this.view.membersFilterList&&this.view.membersFilterList.sort(this.model.getSortType())),e.F8C===this.view.azBtn.getSelection()&&e.F8C===this.view.zaBtn.getSelection()&&(this.model.setSortType(hd.data_.consts.SortType.UNSORTED),this.view.membersFilterList&&this.view.membersFilterList.sort(this.model.getSortType()))},n.prototype.onZaBtnChange=function(){var e=r;e.O8C===this.view.zaBtn.getSelection()&&(this.view.azBtn.setSelection(e.F8C),this.model.setSortType(hd.data_.consts.SortType.DESC),this.view.membersFilterList&&this.view.membersFilterList.sort(this.model.getSortType())),e.F8C===this.view.azBtn.getSelection()&&e.F8C===this.view.zaBtn.getSelection()&&(this.model.setSortType(hd.data_.consts.SortType.UNSORTED),this.view.membersFilterList&&this.view.membersFilterList.sort(this.model.getSortType()))},n.prototype.onSelectAllChange=function(){this.view.membersFilterList&&(this.view.membersFilterList.selectAll(r.O8C==this.view.selectAllCbx.getSelection()),this.view.membersFilterList.getTotalSelectedLength(),this.view.okBtn.setEnabled(r.F8C<this.view.membersFilterList.getTotalSelectedLength())),this.updateSelectedLabel()},n.prototype.onMembersFilterSelect=function(){this.view.okBtn.setEnabled(r.F8C<this.view.membersFilterList.getTotalSelectedLength()),this.updateAllSelectedCbx(),this.updateSelectedLabel()},n.prototype.onMembersFilterExpand=function(){this.updateLayout(),this.updateSelectedLabel()},n.prototype.updateAllSelectedCbx=function(){var e=r;e.F8C==this.view.membersFilterList.getSelectedLength()?this.view.selectAllCbx.setSelection(e.F8C):this.view.membersFilterList.getTotalItemsCount()>this.view.membersFilterList.getSelectedLength()?this.view.selectAllCbx.setSelection(-e.O8C):this.view.membersFilterList.getTotalItemsCount()==this.view.membersFilterList.getSelectedLength()&&this.view.selectAllCbx.setSelection(e.O8C)},n.prototype.update=function(e){var t=r,i=this;!t.O8C!=this.view.isVisible()&&(o.q7B<e.members.length?(hd.preloader(!t.F8C,"Please, wait","Sorting members...",!t.F8C,!t.F8C),setTimeout(function(){i.model.update(e),i.updateView(),hd.preloader(!t.O8C)},t.V0C)):(this.model.update(e),this.updateView()))},n.prototype.onSearchInputChange=function(e){var t=this;e.trim()==e&&this.view.membersFilterList&&this.view.membersFilterList.search(e,function(){return t.onSearchComplete()})},n.prototype.onSearchComplete=function(){this.updateLayout(),this.updateSelectedLabel(),this.updateAllSelectedCbx()},n.prototype.updateView=function(){this.view.setLabels(),this.view.container.toggleClass("wdr-filter-pages-layout",this.model.isPages),this.view.membersView&&this.view.membersView.reset(),this.view.searchInput&&(this.view.searchInput.clear(),this.view.searchInput.setChangeDelay(r.F8C)),this.view.top10Btn&&(hd.data_.types.MeasureType.STRING==hd.data_.types.MeasureType.fromDataType(this.model.currentHierarchy.dimension.type+r.C4C)&&hd.model._options.OptionsManager.flatView?this.view.top10Btn.hide():this.view.top10Btn.show()),this.updateSortType(),this.updateHierarchy(),this.updateMembers(),this.updateTopBottom(),this.updateLayout(),this.updateSelectedLabel();var e=!this.model.isPages;this.view.azBtn&&(e?this.view.azBtn.show():this.view.azBtn.hide()),this.view.zaBtn&&(e?this.view.zaBtn.show():this.view.zaBtn.hide()),this.view.top10Btn&&(this.isAvailableTopX?this.view.top10Btn.show():this.view.top10Btn.hide()),this.view.sortContainer&&(e?this.view.sortContainer.show():this.view.sortContainer.hide())},Object.defineProperty(n.prototype,"isAvailableTopX",{get:function(){if(this.model.isFlatTable){var e=this.model.modelLocator.cube_.structure_.hierarchyToMeasure(this.model.currentHierarchy.uniqueName);return e&&e.type==hd.data_.types.MeasureType.NUMBER}return!this.model.isPages},enumerable:!r.F8C,configurable:!r.F8C}),n.prototype.updateMembers=function(){var e,t=r,i=this.model.currentHierarchy;this.view.selectAllCbx&&this.view.selectAllCbx.setSelection(t.F8C<i.filterMembers.length?-t.O8C:t.O8C),e=t.M8C<i.levels_.length?new dd.MembersTreeDataProvider:new dd.MembersFilterDataProvider,this.view.membersFilterList&&(this.view.membersFilterList.setSmartDataProvider(e),this.view.membersFilterList.setHierarchy(i),this.view.membersFilterList.setDataProvider(this.model.members),this.view.membersFilterList.setFilterItems(i.filterMembers.toArray()),this.view.membersFilterList.sort(this.model.getSortType()))},n.prototype.updateHierarchy=function(){this.view.titleLabel&&this.view.titleLabel.setLabel(this.model.currentHierarchy.caption),this.view.toolbar&&this.view.toolbar.setHeader(this.model.currentHierarchy.caption)},n.prototype.updateLayout=function(){var e=r;if(this.view.membersFilterList&&e.F8C<this.view.membersFilterList.getTotalLength())if(this.view.selectAllCbx&&this.view.selectAllCbx.show(),e.F8C==this.view.explicitListHeight||isNaN(this.view.explicitListHeight)){var t=Be.browserVersion().isMobile?Be.viewportHeight()-e.V0C:cd.PivotView.stage.getY()+cd.PivotView.stageHeight-window.document.documentElement.scrollTop;t=Math.min(t,parseFloat(window.document.documentElement.style.height))-this.view.membersFilterList.container.offset().top+window.document.documentElement.scrollTop-cd.PivotView.stage.toolbarHeight,t=Math.max(t,84),this.setOptimalListHeight(t,!e.F8C)}else this.setOptimalListHeight(this.view.explicitListHeight,!e.O8C);else this.view.selectAllCbx&&this.view.selectAllCbx.hide()},n.prototype.updateSortType=function(){var e=r;this.view.azBtn&&this.view.azBtn.setSelection(o.r6B===this.model.getSortType()?e.O8C:e.F8C),this.view.zaBtn&&this.view.zaBtn.setSelection(i.r7B===this.model.getSortType()?e.O8C:e.F8C)},n.prototype.updateTopBottom=function(){var e=r;this.view.topBottomView&&(this.view.topBottomView.reset(),this.view.topBottomView.setMeasures(this.model.getTopBottomMeasures())),e.b2C===this.model.filterType||e.g2C===this.model.filterType?(this.view.topBottomView&&(this.view.topBottomView.setFilterType(this.model.filterType),this.view.topBottomView.setFilterQuantity(this.model.filterQuantity),this.view.topBottomView.setSelectedMeasure(Be.ArrayUtils.find(this.model.measures,this.model.filterMeasureName,o.M6B)),this.view.topBottomView.show()),this.view.top10Btn&&this.view.top10Btn.setSelection(e.O8C)):(this.view.topBottomView&&this.view.topBottomView.hide(),this.view.top10Btn&&this.view.top10Btn.setSelection(e.F8C));var i=this.view.topBottomView?this.view.topBottomView.isEmpty:!e.F8C;this.view.top10Btn&&this.view.top10Btn.container.toggleClass(t,!i)},n.prototype.setOptimalListHeight=function(e,t){var i=Math.max(Math.min(e,this.view.membersFilterList.getMaxHeight()),this.view.membersFilterList.getMinHeight());t&&(i-=i%this.view.membersFilterList.getRowHeight()),this.view.membersFilterList.setHeight(i),this.view.table&&this.view.contentPanel.setHeight(this.view.table.getHeight())},n.prototype.updateSelectedLabel=function(){var e=r.C4C;this.view.membersFilterList&&(e=this.view.membersFilterList.isSearched()?Be.StringUtils.bind(hd.model._labels.Labels.FILTER_AMOUNT_FOUND,this.view.membersFilterList.getSelectedLength(),this.view.membersFilterList.getTotalItemsCount()):Be.StringUtils.bind(hd.model._labels.Labels.FILTER_AMOUNT_SELECTED,this.view.membersFilterList.getSelectedLength(),this.view.membersFilterList.getTotalItemsCount())),this.view.selectedAmountLabel&&this.view.selectedAmountLabel.setLabel(e),this.view.selectAllCbx&&this.view.selectAllCbx.setLabel(this.view.membersFilterList&&this.view.membersFilterList.isSearched()?hd.model._labels.Labels.FILTER_SELECT_ALL_RESULTS:hd.model._labels.Labels.FILTER_SELECT_ALL)},n.prototype.onHierarchiesListChange=function(e){var t=e.data.selectedItem;-r.O8C<e.data.selectedIndex&&(this.model.setCurrentHierarchy(t),this.updateView())},n}(s.EventDispatcher),dd.FilterController=ud,pd=De||(De={}),Cd=pd._view||(pd._view={}),fd=Cd.filter||(Cd.filter={}),md=function(e){function t(){var t=e.call(this,Cd.PivotView.stage.container)||this;return t.setId("wdr-filter-view"),t.addClass(r.N2C),t.controller=new fd.FilterController,t.controller.addEventListener(i.k7Y,function(){return t.close()}),t.addChild(t.controller.view),t.controller.view.show(),t}return Ga(t,e),t.prototype.openView=function(e){this.open(),this.controller.update(e),this.centerPosition(),this.dispatchWith(s._Event.OPENED)},t.prototype.close=function(){e.prototype.close.call(this),this.dispatchWith(s._Event.CLOSED)},t}(h.containers.UIPopup),fd.FilterView=md,yd=gd||(gd={}),_d=function(){function e(){this.styleSheet=new yd.styles.XLSStyleSheet,this.sheets=[],yd.styles.format.XLSStyleFormat.lastNumFmtId=yd.styles.format.XLSStyleFormat.defaultNumFmtId}return e.prototype.toUint8Array=function(){Be.getTimer();var e=new JSZip;e.file("[Content_Types].xml",yd.XLSTemplates.XML_HEADER+this.composeContentTypeXMLString()),e.file("_rels/.rels",yd.XLSTemplates.XML_HEADER+yd.XLSTemplates._RELS),e.file("xl/_rels/workbook.xml.rels",yd.XLSTemplates.XML_HEADER+this.composeWorkbookRelsXMLString()),e.file("xl/workbook.xml",yd.XLSTemplates.XML_HEADER+this.composeWorkbookXMLString()),e.file("xl/theme/theme1.xml",yd.XLSTemplates.XML_HEADER+yd.XLSTemplates.THEME);for(var t=r.F8C;t<this.sheets.length;t++){var i=this.sheets[t].toXMLString();e.file("xl/worksheets/sheet"+(t+r.O8C)+".xml",yd.XLSTemplates.XML_HEADER+i)}return e.file("xl/sharedStrings.xml",yd.XLSTemplates.XML_HEADER+this.composeSharedStrings()),e.file("xl/styles.xml",yd.XLSTemplates.XML_HEADER+this.styleSheet.toXMLString()),e.file("docProps/app.xml",yd.XLSTemplates.XML_HEADER+yd.XLSTemplates.APP_XML),e.file("docProps/core.xml",yd.XLSTemplates.XML_HEADER+yd.XLSTemplates.CORE_XML),e.generate({compression:"STORE",type:"uint8array"})},e.prototype.composeSharedStrings=function(){var e=r.C4C;Ne.XML.create("<axis/>").attr(t.F5C,t.M8Q);for(var i=r.F8C;i<yd.XLSSharedStrings.strings.length;i++)e=e+"<si><t>"+Be.StringUtils.escapeHtml(yd.XLSSharedStrings.strings[i])+"</t></si>";return Be.StringUtils.bind(yd.XLSTemplates.SHARED_STRING_XML,e)},e.prototype.composeWorkbookXMLString=function(){for(var e=r,t=e.C4C,i=e.F8C;i<this.sheets.length;i++)t+=Be.StringUtils.bind('<sheet name="{0}" sheetId="{1}" r:id="{2}"/>',this.sheets[i].name,i+e.O8C,"rId"+(i+e.j8C));return Be.StringUtils.bind(yd.XLSTemplates.WORKBOOK_XML,t)},e.prototype.composeWorkbookRelsXMLString=function(){for(var e=r,t=e.C4C,i=e.F8C;i<this.sheets.length;i++)t+=Be.StringUtils.bind(yd.XLSTemplates.WORKBOOK_XML_RELS_SHEET,"rId"+(i+e.j8C),"worksheets/sheet"+(i+e.O8C)+".xml");return Be.StringUtils.bind(yd.XLSTemplates.WORKBOOK_XML_RELS,t)},e.prototype.composeContentTypeXMLString=function(){for(var e=r.C4C,t=r.F8C;t<this.sheets.length;t++)e+=Be.StringUtils.bind(yd.XLSTemplates.CONTENT_TYPES_XML_SHEET,"/xl/worksheets/sheet"+(t+r.O8C)+".xml");return Be.StringUtils.bind(yd.XLSTemplates.CONTENT_TYPES_XML,e)},e}(),yd.XLS=_d,vd=gd||(gd={}),bd=function(){var e=r;function o(t,i,r,o){void e.F8C===t&&(t=e.F8C),void e.F8C===i&&(i=e.F8C),void e.F8C===r&&(r=e.C4C),void e.F8C===o&&(o=e.F8C),this.row=t,this.column=i,this.value=r,this.styleIndex=o}return Object.defineProperty(o.prototype,e.W3C,{get:function(){return this._type},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(o.prototype,i.a9Y,{get:function(){return this._value},set:function(i){if(e.x2C===typeof i&&isNaN(i)&&(i=e.C4C),e.K2C===typeof i){i=(i=(i=i.replace(RegExp("<br/?>","gmi"),t.m6C)).replace("/&/gmi",e.C4C)).replace(RegExp("<[^<]+?>","gmi"),e.C4C);var r=vd.XLSSharedStrings.strings.indexOf(i);-e.O8C==r?(this._value=vd.XLSSharedStrings.strings.length,vd.XLSSharedStrings.strings.push(i)):this._value=r,this._type=vd.XLSType.STRING}else this._value=i,this._type=e.x2C===typeof i?vd.XLSType.NUMBER:e.x4C===i?vd.XLSType.NULL:!e.O8C===i?vd.XLSType.MERGED:vd.XLSType.UNKNOWN},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(o.prototype,e.G2C,{get:function(){for(var t=e.C4C,i=this.column+e.O8C,r=e.F8C;26<i;){var o=e.F8C<i%26?i%26:26;i=i/26;if(26==o&&i--,t=String.fromCharCode(o+e.N0C)+t,e.b8C==r++)break}return(t=String.fromCharCode(i+e.N0C)+t)+(this.row+e.O8C)},set:function(e){},enumerable:!e.F8C,configurable:!e.F8C}),o.prototype.toString=function(){return"XLSCell {row: "+this.row+", column: "+this.column+", type: "+this.type+", id: "+this.id+", value: "+this.value+t.C7C},o}(),vd.XLSCell=bd,wd=gd||(gd={}),Fd=function(){function e(){}return e.strings=[],e}(),wd.XLSSharedStrings=Fd,Ed=gd||(gd={}),Od=function(){var e=r;function i(t){this.cells=[],this.maxColumn=this.maxRow=e.F8C,this.columns=[],this.rows=[],this.mergedCells=[],this.name=t}return Object.defineProperty(i.prototype,"maxCell",{get:function(){return this.getCell(this.maxRow,this.maxColumn)},set:function(e){},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(i.prototype,"columnsCount",{get:function(){return this.maxColumn+e.O8C},enumerable:!e.F8C,configurable:!e.F8C}),Object.defineProperty(i.prototype,"rowsCount",{get:function(){return this.maxRow+e.O8C},enumerable:!e.F8C,configurable:!e.F8C}),i.prototype.setColumnWidth=function(e,t){this.columns[e]=t},i.prototype.getColumnWidth=function(t){return this.columns[t]?this.columns[t]:e.F8C},i.prototype.setRowHeight=function(e,t){this.rows[e]=t},i.prototype.getRowHeight=function(t){return this.rows[t]?this.rows[t]:e.F8C},i.prototype.setCell=function(t,i,r,o){void e.F8C===o&&(o=e.x4C),e.x4C==this.cells[t]&&(this.cells[t]=[]),this.cells[t][i]=r instanceof Ed.XLSCell?r:new Ed.XLSCell(t,i,r,e.x4C==o?e.F8C:o.index),this.maxRow<t&&(this.maxRow=t),this.maxColumn<i&&(this.maxColumn=i)},i.prototype.getCell=function(t,i){var r;return e.x4C!=this.cells[t]&&(r=this.cells[t][i]),e.x4C==r&&(r=new Ed.XLSCell(t,i,e.x4C)),r},i.prototype.mergeCells=function(i,r,o){var s=this.getCell(i,r);if(e.x4C!=s){for(var n,a=s.id,l=r+e.O8C;l<r+o;l++)n=new Ed.XLSCell(i,l,!e.O8C,s.styleIndex),this.cells[i][l]=n;a+=t.t7C+(n?n.id:s.id),this.mergedCells.push(a)}},i.prototype.toXMLString=function(){Be.getTimer();for(var i=e.C4C,r=e.F8C;r<this.cells.length;r++){var o=this.cells[r];if(e.x4C!=o&&e.F8C!=o.length){for(var s=e.C4C,n=e.F8C;n<o.length;n++){var a=o[n];e.x4C!=a&&a.type!=Ed.XLSType.NULL&&(s=a.type==Ed.XLSType.MERGED?s+'<c r="'+a.id+'" s="'+a.styleIndex.toString()+'" />':s+'<c r="'+a.id+'" s="'+a.styleIndex.toString()+t.U9Q+(a.type==Ed.XLSType.STRING?' t="s"':e.C4C)+"><v>"+a.value+"</v></c>")}i=isNaN(this.rows[r])?i+Be.StringUtils.bind('<row spans="1:3" r="{0}"  >{1}</row>',r+e.O8C,s):i+Be.StringUtils.bind('<row spans="1:3" r="{0}" x14ac:dyDescent="0.25" ht="{1}" customHeight="1">{2}</row>',r+e.O8C,this.rows[r],s)}}for(r=e.C4C,o=e.F8C;o<this.columns.length;o++)isNaN(this.columns[o])||(r+=Be.StringUtils.bind('<col min="{0}" max="{1}" width="{2}" customWidth="1" />',o+e.O8C,o+e.O8C,this.columns[o]));for(s=e.C4C,o=e.F8C;o<this.mergedCells.length;o++)s+=Be.StringUtils.bind('<mergeCell ref="{0}"/>',this.mergedCells[o]);return o=e.F8C<this.mergedCells.length?Be.StringUtils.bind('<mergeCells count="{0}">{1}</mergeCells>',this.mergeCells.length,s):e.C4C,Be.StringUtils.bind(Ed.XLSTemplates.SHEET_XML,this.getCell(e.F8C,e.F8C).id+t.t7C+this.maxCell.id,r,i,o)},i}(),Ed.XLSSheet=Od,Sd=gd||(gd={}),Td=function(){var e=r;function t(){}return t.NULL=e.F8C,t.NUMBER=e.O8C,t.STRING=e.M8C,t.MERGED=98,t.UNKNOWN=e.g0C,t}(),Sd.XLSType=Td,xd=gd||(gd={}),Ld=xd.styles||(xd.styles={}),Ad=function(){function e(e,t,i,o){var s=r;void s.F8C===i&&(i=s.x4C),void s.F8C===o&&(o=s.x4C),this.index=s.F8C,t instanceof Ld.fills.XLSStyleFill?this.fill=t:!isNaN(t)&&-s.O8C<t?this.fill=new Ld.fills.XLSStyleFill(t):this.fill=new Ld.fills.XLSStyleFill,this.font=e instanceof Ld.fonts.XLSStyleFont?e:new Ld.fonts.XLSStyleFont(e),this.format=i&&i instanceof Ld.format.XLSStyleFormat?i:new Ld.format.XLSStyleFormat(s.F8C,s.C4C),s.x4C!=o&&(this.textAlign=o)}return Object.defineProperty(e.prototype,r.G2C,{get:function(){var e=t;return this.fill.id+e.t7C+this.font.id+e.t7C+this.textIndent+e.t7C+this.textAlign+e.t7C+this.format.id},set:function(e){},enumerable:!r.F8C,configurable:!r.F8C}),e.prototype.toXMLString=function(){var e=r,i=e.C4C;return i=this.textIndent||this.textAlign?Be.StringUtils.bind('<alignment vertical="center" horizontal="{0}" wrapText="1"{1}/>',Be.nullOrUndefined(this.textAlign)?e.M2C:this.textAlign,Be.nullOrUndefined(this.textIndent)?e.C4C:' indent="'+this.textIndent+t.U9Q):'<alignment vertical="center" wrapText="1"/>',Be.StringUtils.bind('<xf numFmtId="{0}"{1} fontId="{2}" fillId="{3}" borderId="1" xfId="0" applyFont="1" applyFill="1"{4}>{5}</xf>',this.format.numFmtId,e.F8C<this.format.numFmtId?' applyNumberFormat = "1"':e.C4C,this.font.fontIndex,this.fill.fillIndex,e.F8C<i.length?' applyAlignment="1"':e.C4C,i)},e}(),Ld.XLSStyle=Ad,Id=gd||(gd={}),Rd=Id.styles||(Id.styles={}),Dd=function(){function e(){this.styles=new Be.AssociativeArray,this.fills=new Be.AssociativeArray,this.fonts=new Be.AssociativeArray,this.formats=new Be.AssociativeArray,this.addFill(new Rd.fills.XLSStyleFill);var e=new Rd.fills.XLSStyleFill;e.patternFill.patternType=i.J9x,e.fillIndex=r.O8C,this.fills.addItem(i.J9x,e)}return e.prototype.addStyle=function(e){this.styles.keyExists(e.id)?e.index=this.styles.getItem(e.id).index:(this.addFill(e.fill),this.addFont(e.font),this.styles.addItem(e.id,e),e.index=this.styles.length)},e.prototype.addFill=function(e){this.fills.keyExists(e.id)?e.fillIndex=this.fills.getItem(e.id).fillIndex:(e.fillIndex=this.fills.length,this.fills.addItem(e.id,e))},e.prototype.addFont=function(e){this.fonts.keyExists(e.id)?e.fontIndex=this.fonts.getItem(e.id).fontIndex:(this.fonts.addItem(e.id,e),e.fontIndex=this.fonts.length)},e.prototype.addFormat=function(e){this.formats.keyExists(e.id)?e.numFmtId=this.formats.getItem(e.id).numFmtId:(-r.O8C==e.numFmtId&&(e.numFmtId=Rd.format.XLSStyleFormat.getNextAvailableCustomNumFmtId()),this.formats.addItem(e.id,e))},e.prototype.toXMLString=function(){var e,t=r,o=t.C4C,s=t.C4C,n=t.C4C,a=t.C4C;if(t.F8C<this.formats.length){var l=t.F8C,h=t.C4C;for(e=t.F8C;e<this.formats.length;e++){var c=this.formats.getItemAt(e);t.C4C!=c.formatCode&&(h+=c=c.toXMLString(),l++)}t.F8C<l&&(o='<numFmts count="'+l+i.Y4Y+h+"</numFmts>")}for(e=t.F8C;e<this.fills.length;e++)s+=(l=this.fills.getItemAt(e)).toXMLString();for(e=t.F8C;e<this.fonts.length;e++)n+=(l=this.fonts.getItemAt(e)).toXMLString();for(e=t.F8C;e<this.styles.length;e++)a+=(l=this.styles.getItemAt(e)).toXMLString();return Be.StringUtils.bind(Id.XLSTemplates.STYLES_XML,o,this.fonts.length+t.O8C,n,this.fills.length,s,this.styles.length+t.O8C,a)},e}(),Rd.XLSStyleSheet=Dd,Nd=gd||(gd={}),Md=Nd.styles||(Nd.styles={}),Pd=Md.color||(Md.color={}),Hd=function(){function e(e){this.rgb=e}return Object.defineProperty(e.prototype,r.G2C,{get:function(){return this.rgb.toString(r.Q8C)},set:function(e){},enumerable:!r.F8C,configurable:!r.F8C}),e.prototype.toXMLString=function(e){var s=t,n=r;void n.F8C===e&&(e=n.C4C),n.F8C==e.length&&(e=o.W2B),e=i.O9Y+e,this.auto&&(e+=' auto="'+this.auto+s.U9Q),this.theme&&(e+=' theme="'+this.theme+s.U9Q),this.tint&&(e+=' tint="'+this.tint+s.U9Q),this.indexed&&(e+=' indexed="'+this.indexed+s.U9Q);for(var a=this.rgb.toString(n.Q8C).toUpperCase();n.o8C>a.length;)a=s.O7C+a;return e+' rgb="FF'+a+i.T9x},e}(),Pd.XLSStyleColor=Hd,Ud=gd||(gd={}),Bd=Ud.styles||(Ud.styles={}),kd=Bd.color||(Bd.color={}),Vd=function(e){function t(t){return e.call(this,t)||this}return Ga(t,e),t.prototype.toXMLString=function(t){return e.prototype.toXMLString.call(this,"bgColor")},t}(kd.XLSStyleColor),kd.XLSStyleBgColor=Vd,zd=gd||(gd={}),qd=zd.styles||(zd.styles={}),Gd=qd.color||(qd.color={}),Wd=function(e){function t(t){return e.call(this,t)||this}return Ga(t,e),t.prototype.toXMLString=function(t){return e.prototype.toXMLString.call(this,"fgColor")},t}(Gd.XLSStyleColor),Gd.XLSStyleFgColor=Wd,jd=gd||(gd={}),Yd=jd.styles||(jd.styles={}),Xd=Yd.fills||(Yd.fills={}),Kd=function(){function e(e){void r.F8C===e&&(e=-r.O8C),this.fillIndex=r.F8C,this.patternFill=new Xd.XLSStylePatternFill(e)}return e.prototype.toXMLString=function(){return"<fill>"+this.patternFill.toXMLString()+"</fill>"},Object.defineProperty(e.prototype,r.G2C,{get:function(){return this.patternFill.id},set:function(e){},enumerable:!r.F8C,configurable:!r.F8C}),e}(),Xd.XLSStyleFill=Kd,Qd=gd||(gd={}),Jd=Qd.styles||(Qd.styles={}),Zd=Jd.fills||(Jd.fills={}),$d=function(){function e(e){var t=r;void t.F8C===e&&(e=-t.O8C),this.patternType=i.J9x,-t.O8C<e?(this.fgColor=new Jd.color.XLSStyleFgColor(e),this.bgColor=new Jd.color.XLSStyleBgColor(e)):this.patternType=t.n2C}return Object.defineProperty(e.prototype,r.G2C,{get:function(){return Be.nullOrUndefined(this.fgColor)?r.n2C:this.fgColor.id},enumerable:!r.F8C,configurable:!r.F8C}),e.prototype.toXMLString=function(){return Be.StringUtils.bind('<patternFill patternType="{0}">{1}{2}</patternFill>',this.patternType,Be.nullOrUndefined(this.fgColor)?r.C4C:this.fgColor.toXMLString(),Be.nullOrUndefined(this.bgColor)?r.C4C:this.bgColor.toXMLString())},e}(),Zd.XLSStylePatternFill=$d,eu=gd||(gd={}),tu=eu.styles||(eu.styles={}),iu=tu.fonts||(tu.fonts={}),ru=function(){function e(e,t,i){this.fontIndex=r.F8C,Be.nullOrUndefined(e)||(this.name=e),Be.nullOrUndefined(t)||(this.size=t),Be.nullOrUndefined(i)||(this.hexColor=new tu.color.XLSStyleColor(i))}return Object.defineProperty(e.prototype,r.G2C,{get:function(){var e=t;return this.name+e.k6C+this.size+e.k6C+(Be.nullOrUndefined(this.hexColor)?r.C4C:this.hexColor.id)+e.k6C+this.bold+e.k6C+this.italic},set:function(e){},enumerable:!r.F8C,configurable:!r.F8C}),e.prototype.toXMLString=function(){var e="<font>";if(this.bold&&(e+="<b/>"),this.size&&(e+='<sz val="'+this.size+i.T9x),this.hexColor&&(e+=this.hexColor.toXMLString()),this.name){var o=this.name;this.name.indexOf(t.k6C)&&(o=this.name.split(t.k6C)[r.F8C].trim()),e+='<name val="'+o+i.T9x}return e+"</font>"},e}(),iu.XLSStyleFont=ru,ou=gd||(gd={}),su=ou.styles||(ou.styles={}),nu=su.format||(su.format={}),au=function(){var e=r;function t(t,i){this.formatCode=e.C4C,this.numFmtId=t,this.formatCode=i}return t.prototype.toXMLString=function(){return'<numFmt numFmtId="'+this.numFmtId+'" formatCode="'+this.formatCode+i.T9x},Object.defineProperty(t.prototype,e.G2C,{get:function(){return e.C4C!=this.formatCode?this.formatCode:this.numFmtId.toString()},set:function(e){},enumerable:!e.F8C,configurable:!e.F8C}),t.getNextAvailableCustomNumFmtId=function(){return t.lastNumFmtId++},t.defaultNumFmtId=e.O8C,t.lastNumFmtId=t.defaultNumFmtId,t}(),nu.XLSStyleFormat=au,lu=De||(De={}),hu=lu.data_||(lu.data_={}),cu=function(){var e=r;function s(i){this.tuples=[],this.facts=[],this.allIndices=[],this.filtered=[],this.rowResult=[],this.columnResult=[],this.keys=[],this.levels=[],this.drilled=[],this.factKeys=[],this.calculatedKeys=[],this.individualKeys=[],this.ids=[],this.pageFields=[],this.columnFields=[],this.rowFields=[],this.sizes=[],this.filters=[],this.subfilters=[],this.factIndices=[],this.values=[],this.updates=[],this.updatesCache=[],this.datePattern=t.L7C,this.dateTimePattern=t.a7C,this._grandTotals=[],this.productIdx=e.F8C,this.cube_=i}return s.prototype.clearData=function(){this.clearValues(),this.rowResult=[],this.columnResult=[],this.allMeasures=this.allHierarchies=e.x4C},s.prototype.clearValues=function(){this.ids=[],this.tuples=[],this.facts=[],this.drilled=[],this.levels=[],this.values=[],this.updates=[],this.updatesCache=[],this.allIndices=[],this.filtered=[],this.filters=[]},s.prototype.clearAll=function(){this.clearData(),this.sizes=[],this.keys=[],this.factKeys=[],this.allIndices=[]},s.prototype.clearUpdates=function(){this.updates=[],this.updatesCache=[],this.values=[]},Object.defineProperty(s.prototype,"slice_",{get:function(){return e.x4C!=this._slice?this._slice:this.cube_.slice_},set:function(e){this._slice=e},enumerable:!e.F8C,configurable:!e.F8C}),s.clone=function(t){var i=new s(t.cube_);return i.allIndices=t.allIndices.slice(e.F8C),i.ids=t.ids.slice(e.F8C),i.tuples=t.tuples.slice(e.F8C),i.facts=t.facts.slice(e.F8C),i.levels=t.levels.slice(e.F8C),i.keys=t.keys.slice(e.F8C),i.factKeys=t.factKeys.slice(e.F8C),i},s.prototype.addKey=function(t,i){if(void e.F8C===i&&(i=e.C4C),-e.O8C!=this.keys.indexOf(t))return this.keys.indexOf(t);if(e.C4C==i)this.levels[this.keys.length]=[-e.O8C,this.keys.length];else{var r=this.keys.indexOf(i);this.levels[r]&&this.levels[r].push(this.keys.length)}return this.keys.push(t),this.keys.length-e.O8C},s.prototype._addKey=function(t,i){return void e.F8C===i&&(i=-e.O8C),-e.O8C!=this.keys.indexOf(t)?this.keys.indexOf(t):(-e.O8C==i?this.levels[this.keys.length]=[-e.O8C,this.keys.length]:this.levels[i].push(this.keys.length),this.keys.push(t),this.keys.length-e.O8C)},s.prototype.addFactKey=function(t,i,r){void e.F8C===i&&(i=e.x4C),void e.F8C===r&&(r=!e.O8C),this.calculatedKeys[this.factKeys.length]=i,this.individualKeys[this.factKeys.length]=r,this.factKeys.push(t)},s.prototype.updateFactKey=function(t,i,r){void e.F8C===i&&(i=e.x4C),void e.F8C===r&&(r=!e.O8C),t=this.factKeys.indexOf(t),e.F8C<=t&&(this.calculatedKeys[t]=i,this.individualKeys[t]=r)},s.prototype.removeFactKey=function(t){t=this.factKeys.indexOf(t),this.factKeys.splice(t,e.O8C)},s.prototype.delete_=function(t){var i=this.ids.indexOf(t);if(!Be.nullOrUndefined(t)&&-e.O8C<i)for(t=e.F8C;t<this.factKeys.length;t++)this.facts[i][t]=NaN,e.x4C==this.updates[t]&&(this.updates[t]=[]),this.updates[t][i]={difference:-this.facts[i][t],percent:-e.O8C}},s.prototype.update=function(t,i,r){var o=this.ids.indexOf(r);if(!Be.nullOrUndefined(r)&&-e.O8C<o){for(r=e.F8C;r<this.factKeys.length;r++)if(this.facts[o][r]!=i[r]){var s=i[r]-this.facts[o][r];isNaN(s)||(e.x4C==this.updates[r]&&(this.updates[r]=[]),this.updates[r][o]={difference:s,percent:s/this.facts[o][r]})}this.facts[o]=i,this.tuples[o]=t}else{for(o=this.tuples.length,Be.nullOrUndefined(r)||(this.ids[o]=r),r=e.F8C;r<this.factKeys.length;r++)s=i[r],isNaN(s)||(e.x4C==this.updates[r]&&(this.updates[r]=[]),this.updates[r][o]={difference:s,percent:e.O8C});this.allIndices.push(o),this.tuples.push(t),this.facts.push(i)}},s.prototype.insert=function(t,i,r){-e.O8C<t.indexOf(e.F8C)||(this.allIndices.push(this.tuples.length),Be.nullOrUndefined(r)||(this.ids[this.tuples.length]=r),this.tuples.push(t),this.facts.push(i))},s.prototype.insertChunk=function(t,i,r,o,s){for(var n=[],a=[],l=e.F8C;l<t.length;l++){if(-e.O8C==t[l][e.O8C])return;a[l]=t[l][e.O8C],n[this.levels[this.rowFields[l]][t[l][e.F8C]]]=a[l]}for(t=[],l=e.F8C;l<i.length;l++){if(-e.O8C==i[l][e.O8C])return;t[l]=i[l][e.O8C],n[this.levels[this.columnFields[l]][i[l][e.F8C]]]=t[l]}i=this.calculateIndex(a,t),a=this.tuples.length,void e.F8C!==this.values[i]?(a=this.findTuple(n),this.facts[a]=r):(this.allIndices.push(a),this.tuples.push(n),this.facts.push(r)),e.F8C<o.length&&(n=s==hu.consts.AxisName.ROWS_AXIS?this.getNode(o,this.rowResult):this.getNode(o,this.columnResult),-e.O8C==n[e.F8C][e.F8C].indexOf(a)&&n[e.F8C][e.F8C].push(a),this.cube_.queryType==hu.consts.QueryType.DRILL_DOWN_TO&&(o=o.slice(e.F8C,-e.O8C),s=s==hu.consts.AxisName.ROWS_AXIS?this.getNode(o,this.rowResult):this.getNode(o,this.columnResult),-e.O8C==s[e.F8C][e.F8C].indexOf(a)&&s[e.F8C][e.F8C].push(a))),this.values[i]=r},s.prototype.findTuple=function(t){for(var i,r=e.F8C;r<this.tuples.length;r++)if(t.length==this.tuples[r].length){i=!e.F8C;for(var o=e.F8C;o<t.length;o++)if(t[o]!=this.tuples[r][o]){i=!e.O8C;break}if(i)return r}return this.tuples.length},s.prototype.keyToMembers=function(r){for(var o,s=t,n=(c=(r=r.split(e.V3C))[e.F8C].split(e.L2C))[e.F8C].split(s.k6C),a=c[e.O8C].split(s.k6C),l=this.slice_.rowsOnly,h=this.slice_.columnsOnly,c=e.C4C,d=[],u=e.F8C;u<l.length;u++)o=(o=l.getItemAt(u)).members.getItemAt(parseInt(n[u])),d.push(o.caption);for(c=d.join(s.k6C),d=[],u=e.F8C;u<h.length;u++)o=(o=h.getItemAt(u)).members.getItemAt(parseInt(a[u])),d.push(o.caption);return(c+=i.O8Y+d.join(s.k6C))+" + "+(r=this.slice_.measures_.getItemAt(parseInt(r[e.O8C]))).caption},s.prototype.timeCaption=function(t){return t&&e.F8C<t.length&&i.f7B!=t?t:lu.model._labels.Labels.INVALID_DATE},s.prototype.addStringMember=function(i,r,o,s){var n=(i=this.cube_.structure_.getDataField(i)).uniqueName+t.f7C+r,a=i.findMember(n);e.x4C==a&&(a=new hu._structure.GenericMember(n,r),i.addMember(a)),o.push(a.ordinal),e.x4C==r||e.C4C==r?s.push(NaN):s.push(e.O8C)},s.prototype.addNumberMember=function(i,r,o,s){var n=(i=this.cube_.structure_.getDataField(i)).uniqueName+t.f7C+r,a=i.findMember(n),l=Be.StringUtils.toNumber(r);e.x4C==a&&(a=new hu._structure.GenericMember(n,r),i.addMember(a)),a.levelOrdinal=l,o.push(a.ordinal),s.push(l)},s.prototype.validateDate=function(t){return e.x4C==t||e.K2C!==typeof t?e.C4C:t=t.trim()},s.prototype.addDateTimeMember=function(i,r,o,s){var n;i=this.cube_.structure_.getDataField(i),r instanceof Date?n=r.getTime():e.x2C==typeof r?n=r:(n=Date.parse(this.validateDate(r)),isNaN(n)&&(n=parseInt(r)));var a=Be.StringUtils.toDateTime(n,this.dateTimePattern),l=i.uniqueName+t.f7C+a,h=i.findMember(l);e.x4C==h&&((h=new hu._structure.GenericMember(l,a)).levelOrdinal=r,i.addMember(h)),o.push(h.ordinal),s.push(n)},s.prototype.addTimeMember=function(i,r,o,s){i=this.cube_.structure_.getDataField(i);var n=parseFloat(r),a=isNaN(r)||e.C4C==r?e.C4C:Be.StringUtils.toTime(n),l=i.uniqueName+t.f7C+a,h=i.findMember(l);e.x4C==h&&((h=new hu._structure.GenericMember(l,a)).levelOrdinal=r,i.addMember(h)),o.push(h.ordinal),s.push(n)},s.prototype.addDateStringMember=function(i,r,o,s){i=this.cube_.structure_.getDataField(i),r=r instanceof Date?r.getTime():e.x2C==typeof r?r:Date.parse(this.validateDate(r));var n=Be.StringUtils.toDate(r,this.datePattern),a=i.uniqueName+t.f7C+n,l=i.findMember(a);e.x4C==l&&((l=new hu._structure.GenericMember(a,n)).levelOrdinal=r,i.addMember(l)),o.push(l.ordinal),s.push(r)},s.prototype.addHierarchcalDateMember=function(i,r,o,s,n){var a,l,h=t;i=this.cube_.structure_.getDataField(i),a=r instanceof Date?r:e.x2C==typeof r?new Date(r):new Date(this.validateDate(r));var c=e.C4C,d=e.C4C,u=r=e.C4C,p=e.C4C,C=e.F8C,f=e.O8C;e.x4C!=a&&(p=Math.floor(a.getUTCMonth()/e.b8C),d=lu.model._labels.Labels.QUARTER_LABELS[p],u=lu.model._labels.Labels.MONTHS_LABELS[a.getUTCMonth()],p=a.getUTCDate().toString(),c=a.getUTCFullYear().toString(),C=a.getTime()),a=i.levels_.getItemAt(f++);var m,g=(i=a.hierarchy).uniqueName+h.f7C+c;l=i.findMember(g),e.x4C==l&&(l=new hu._structure.GenericMember(g,this.timeCaption(c)),i.addMember(l,a.uniqueName)),o.push(l.ordinal),n&&(m=(a=i.levels_.getItemAt(f++)).uniqueName+h.f7C+c+h.l5C+d,l=i.findMember(m),e.x4C==l&&(l=new hu._structure.GenericMember(m,this.timeCaption(d)),i.addMember(l,a.uniqueName,g)),o.push(l.ordinal),r=h.l5C+d),d=(a=i.levels_.getItemAt(f++)).uniqueName+h.f7C+c+r+h.l5C+u,l=i.findMember(d),e.x4C==l&&(l=new hu._structure.GenericMember(d,this.timeCaption(u)),i.addMember(l,a.uniqueName,n?m:g)),o.push(l.ordinal),n=(a=i.levels_.getItemAt(f++)).uniqueName+h.f7C+c+r+h.l5C+u+h.l5C+p,l=i.findMember(n),e.x4C==l&&((l=new hu._structure.GenericMember(n,this.timeCaption(p))).levelOrdinal=C,i.addMember(l,a.uniqueName,d)),o.push(l.ordinal),s.push(e.O8C)},s.prototype.addDateMember=function(i,r,o,s){var n,a=this.cube_.structure_.getDataField(i),l=e.C4C,h=e.C4C;i=e.C4C;var c=e.F8C;try{n=r instanceof Date?r:e.x2C==typeof r?new Date(r):new Date(this.validateDate(r))}catch(t){n=e.x4C}e.x4C!=n&&(h=lu.model._labels.Labels.MONTHS_LABELS[n.getUTCMonth()],i=n.getUTCDate().toString(),l=n.getUTCFullYear().toString(),c=n.getUTCDate());var d=(r=a.hierarchies.getItemAt(e.F8C)).uniqueName+t.f7C+l;n=r.findMember(d),e.x4C==n&&(n=new hu._structure.GenericMember(d,this.timeCaption(l)),r.addMember(n)),o.push(n.ordinal),s.push(e.O8C),l=(r=a.hierarchies.getItemAt(e.O8C)).uniqueName+t.f7C+h,n=r.findMember(l),e.x4C==n&&(n=new hu._structure.GenericMember(l,this.timeCaption(h)),r.addMember(n)),o.push(n.ordinal),s.push(e.O8C),r=a.hierarchies.getItemAt(e.M8C),a=r.uniqueName+t.f7C+i,n=r.findMember(a),e.x4C==n&&((n=new hu._structure.GenericMember(a,this.timeCaption(i))).levelOrdinal=c,r.addMember(n)),o.push(n.ordinal),s.push(e.O8C)},s.prototype.addLevelsMember=function(i,r,o,s){if(e.C4C==r)o.push(e.x4C),s.push(e.x4C);else{var n,a,l=(i=this.cube_.structure_.getDataField(i)).uniqueName+t.f7C+r;if(e.O8C<i.num){if(l=i.hierarchy.levels_.getItemAt(i.num-e.O8C),n=e.O8C==l.num?this.keys.indexOf(i.hierarchy.uniqueName):this.keys.indexOf(l.uniqueName),a=i.hierarchy.members.getItemAt(o[n]),e.x4C==a){var h=l.uniqueName+t.f7C+lu.model._labels.Labels.MEMBER_BLANK;a=i.hierarchy.findMember(h),e.x4C==a&&(a=new hu._structure.GenericMember(h,lu.model._labels.Labels.MEMBER_BLANK),l.hierarchy.addMember(a,l.uniqueName)),o[n]=a.ordinal}l=a.uniqueName+t.f7C+r}n=i.hierarchy.findMember(l),e.x4C==n&&(n=new hu._structure.GenericMember(l,r),e.O8C==i.num?i.hierarchy.addMember(n,i.uniqueName):i.hierarchy.addMember(n,i.uniqueName,a.uniqueName)),o.push(n.ordinal),s.push(e.O8C)}},s.prototype.addMember=function(t,i,r,o,s){switch(r){case hu.types.DataFieldType.STRING:case hu.types.DataFieldType.WEEKDAY:case hu.types.DataFieldType.MONTH:this.addStringMember(t,i,o,s);break;case hu.types.DataFieldType.NUMBER:this.addNumberMember(t,i,o,s);break;case hu.types.DataFieldType.DATE:this.addDateMember(t,i,o,s);break;case hu.types.DataFieldType.LEVEL:this.addLevelsMember(t,i,o,s);break;case hu.types.DataFieldType.HIERARCHICAL_DATE:this.addHierarchcalDateMember(t,i,o,s,!e.O8C);break;case hu.types.DataFieldType.HIERARCHICAL_DATE_WITH_QUARTERS:this.addHierarchcalDateMember(t,i,o,s,!e.F8C);break;case hu.types.DataFieldType.DATE_STRING:this.addDateStringMember(t,i,o,s);break;case hu.types.DataFieldType.DATETIME:this.addDateTimeMember(t,i,o,s);break;case hu.types.DataFieldType.TIME:this.addTimeMember(t,i,o,s);break;case hu.types.DataFieldType.HIDDEN:break;default:this.addStringMember(t,i,o,s)}},s.prototype.insertObject=function(t,i){void e.F8C===i&&(i=!e.O8C);var r,o,s=[],n=[],a=e.C4C,l=this.cube_.structure_.getDataKeys(),h=!e.O8C;i&&(r=this.cube_.structure_.deleteId,h=e.C4C!=r&&t.hasOwnProperty(r));for(var c=e.F8C;c<l.length;c++)r=l[c],(o=this.cube_.structure_.getDataType(r))==hu.types.DataFieldType.ID?a=t[r]:t[r]instanceof Array||h||this.addMember(r,t[r],o,s,n);i?h?this.delete_(a):this.update(s,n,a):this.insert(s,n,a)},s.prototype.insertArray=function(t,i){void e.F8C===i&&(i=!e.O8C);var r,o,s=this.cube_.structure_.getDataKeys(),n=[],a=[],l=e.C4C,h=!e.O8C;i&&(r=this.cube_.structure_.deleteId,e.C4C!=r&&(h=s.indexOf(r),h=!Be.nullOrUndefined(t[h])));for(var c=e.F8C;c<s.length;c++)r=s[c],(o=this.cube_.structure_.getDataType(r))==hu.types.DataFieldType.ID?l=t[c]:h||this.addMember(r,t[c],o,n,a);i?h?this.delete_(l):this.update(n,a,l):this.insert(n,a,l)},s.prototype.filterIndices=function(t,i,r){for(var o=e.F8C;o<i.length;o++){for(var s=i[o],n=r[o],a=(n=Be.nullOrUndefined(this.drilled[n])||Be.nullOrUndefined(this.drilled[n][s])?n:this.drilled[n][s],[]),l=e.F8C;l<t.length;l++)this.tuples[t[l]][n]==s&&a.push(t[l]);t=a}return t},s.prototype.hierarchize=function(t,i,r){var o=this.keys.indexOf(i.hierarchy_.uniqueName),s=r==hu.consts.AxisName.ROWS_AXIS?this.getNode(t,this.rowResult):this.getNode(t,this.columnResult);for(e.O8C<t.length?(t=t.slice(e.F8C,-e.O8C),r=(r==hu.consts.AxisName.ROWS_AXIS?this.getNode(t,this.rowResult):this.getNode(t,this.columnResult))[e.F8C][e.F8C]):r=this.filtered,o=this.levels[o][i.level.num+e.O8C],t=e.F8C;t<i.children.length;t++)for(var n=i.children.getItemAt(t),a=(n=this.filterIndices(r,[n.ordinal],[o]),e.F8C);a<n.length;a++)-e.O8C==s[e.F8C][e.F8C].indexOf(n[a])&&s[e.F8C][e.F8C].push(n[a])},s.prototype.getDistinctCountColumn=function(t,i,r,o,s){if(e.F8C!=t.length){var n,a;for(n=e.F8C;n<t.length;n++)a=this.facts[t[n]][r],isNaN(a)||s[a]||(o.push(a),s[a]=!e.F8C);if(this.columnFields.length!=i.length)for(n=e.F8C;n<o.length;n++){(a=i.slice(e.F8C)).push(o[n]);var l=this.filterIndices(t,a,this.columnFields);this.getDistinctCountColumn(l,a,r,o,s)}}},s.prototype.getDistinctCountRec=function(t,i,r,o,s,n){if(e.F8C!=t.length)if(this.rowFields.length==i.length)this.getDistinctCountColumn(t,r,o,s,n);else{for(var a=[],l=[],h=this.rowFields[i.length],c=e.F8C;c<t.length;c++){var d=this.tuples[t[c]][h];l[d]||e.F8C==d||(a.push(d),l[d]=!e.F8C)}for(c=e.F8C;c<a.length;c++)(l=i.slice(e.F8C)).push(a[c]),h=this.filterIndices(t,l,this.rowFields),this.getDistinctCountRec(h,l,r,o,s,n)}},s.prototype.getDistinctCount=function(e,t,i,r){var o=[];return this.getDistinctCountRec(e,t,i,r,o,[]),o.length},s.prototype.getDistinctMembersCount=function(t,i){if(e.F8C==t.length)return e.F8C;for(var r,o=this.cube_.structure_.measureToHierarchy(i.uniqueName),s=(o=this.keys.indexOf(o.uniqueName),[]),n=[],a=e.F8C;a<t.length;a++)n[r=this.tuples[t[a]][o]]||(n[r]=!e.F8C,isNaN(this.facts[t[a]][o])||s.push(r));return s.length},s.prototype.calculateFlat=function(t,i,r,o){return this.getCalculatedValue([],r,!e.O8C,o)},s.prototype.calculate=function(t,i,r,o){var s=this.getNode(t,this.rowResult),n=this.getNode(i,this.columnResult),a=t.length*n[e.F8C][e.F8C].length<i.length*s[e.F8C][e.F8C].length?this.filterIndices(n[e.F8C][e.F8C],t,this.rowFields):this.filterIndices(s[e.F8C][e.F8C],i,this.columnFields);return this.getCalculatedValue(a,r,!e.O8C,o)},s.prototype.saveFlat=function(i,r,o,s,n){i=this.filtered[i[e.F8C]],r=r[e.F8C],n=[];var a=e.C4C;this.updates=[],this.updates[i]=[],this.values=[],this.updatesCache=[],e.x4C!=o&&(a=o.findMemberByCaption(s),e.x4C==a&&(e.O8C==this.countValue(r,this.tuples[i][r])?(a=o.members.getItemAt(this.tuples[i][r])).caption=s:(a=o.uniqueName+t.f7C+s,e.x4C!=o.findMember(a)&&(a=o.uniqueName+t.f7C+Be.StringUtils.generateID()),a=new hu._structure.GenericMember(a,s),o.addMember(a))),this.tuples[i][r]=a.ordinal,a=e.x4C!=this.ids[i]?this.ids[i]:i,n.push({id:a,field:o.uniqueName,value:s}),o=parseFloat(s)-this.facts[i][r],this.updates[i][r]={difference:o,percent:o/this.facts[i][r]},this.facts[i][r]=parseFloat(s))},s.prototype.save=function(i,r,o,s,n){var a=this.getNode(i,this.rowResult),l=this.getNode(r,this.columnResult);n=(i.length*l[e.F8C][e.F8C].length<r.length*a[e.F8C][e.F8C].length?this.filterIndices(l[e.F8C][e.F8C],i,this.rowFields):this.filterIndices(a[e.F8C][e.F8C],r,this.columnFields))[n],i=[],r=e.C4C,r=this.cube_.structure_.hierarchyToMeasure(o.uniqueName),r=this.factKeys.indexOf(r.uniqueName),this.updates=[],this.updates[r]=[],a=parseFloat(s)-this.facts[n][r],this.updates[r][n]={difference:a,percent:a/this.facts[n][r]},this.facts[n][r]=parseFloat(s),this.values=[],this.updatesCache=[],e.x4C!=o&&(r=this.keys.indexOf(o.uniqueName),a=this.countValue(r,this.tuples[n][r]),l=o.findMemberByCaption(s),e.x4C==l&&(e.O8C==a?(l=o.members.getItemAt(this.tuples[n][r])).caption=s:(a=o.uniqueName+t.f7C+s,e.x4C!=o.findMember(a)&&(a=o.uniqueName+t.f7C+Be.StringUtils.generateID()),l=new hu._structure.GenericMember(a,e.C4C+s),o.addMember(l))),l.levelOrdinal=s,this.tuples[n][r]=l.ordinal,r=e.x4C!=this.ids[n]?this.ids[n]:n,i.push({id:r,field:o.uniqueName,value:s}))},s.prototype.countValue=function(t,i){for(var r=e.F8C,o=e.F8C;o<this.tuples.length;o++)this.tuples[o][t]==i&&r++;return r},s.prototype.drillThrough=function(t,i,r){this.factKeys.indexOf(r.uniqueName);var o=this.getNode(t,this.rowResult),s=this.getNode(i,this.columnResult);for(r=[],r=t.length*s[e.F8C][e.F8C].length<i.length*o[e.F8C][e.F8C].length?this.filterIndices(s[e.F8C][e.F8C],t,this.rowFields):this.filterIndices(o[e.F8C][e.F8C],i,this.columnFields),(t=[]).push(this.keys),i=e.F8C;i<r.length;i++)t.push(this.tuples[r[i]]);return t},s.prototype.getUpdatedValue=function(t,i,r){return t=this.calculateIndex(t,i),r=r.calculated?this.slice_.measures_.indexOf(r.uniqueName)+this.factKeys.length:this.factKeys.indexOf(r.uniqueName),void e.F8C==this.updatesCache[t]?e.x4C:this.updatesCache[t][r]},s.prototype.getFlatUpdatedValue=function(t,i){if(i.calculated)return e.x4C;var r=this.factKeys.indexOf(i.uniqueName);return e.x4C==t?this.checkIfUpdated(this.filtered,r):void e.F8C==this.updatesCache[t]?e.x4C:this.updatesCache[t][r]},s.prototype.getRecordId=function(t,i,r){return e.x4C==this.filtered[t]||e.x4C==this.tuples[this.filtered[t]]||e.C4C==this.cube_.structure_.id?e.x4C:this.ids[this.filtered[t]]},s.prototype.getFlatValue=function(t,i,r,o){return e.x4C==this.filtered[t]||e.x4C==this.tuples[this.filtered[t]]?NaN:o?(r.calculated||(o=this.factKeys.indexOf(r.uniqueName),this.updates.length&&(e.x4C==this.updatesCache[t]&&(this.updatesCache[t]=[]),this.updatesCache[t][o]=this.checkIfUpdated([this.filtered[t]],o))),r.calculated?this.getCalculatedValue([this.filtered[t]],r.params,r.individual):this.facts[this.filtered[t]][i]):this.tuples[this.filtered[t]][i]},s.prototype.getValue=function(t,i,r){var o=this.calculateIndex(t,i),s=r.calculated?this.slice_.measures_.indexOf(r.uniqueName)+this.factKeys.length:this.factKeys.indexOf(r.uniqueName);if(e.x4C==this.values[o]&&(this.values[o]=[]),e.x4C==this.values[o][s]){var n=this.getNode(t,this.rowResult),a=this.getNode(i,this.columnResult),l=[];if(e.x4C==n||e.x4C==n[e.F8C]||e.x4C==a||e.x4C==a[e.F8C])return NaN;e.F8C<a.length&&e.F8C<n.length&&t.length*a[e.F8C][e.F8C].length<i.length*n[e.F8C][e.F8C].length?l=this.filterIndices(a[e.F8C][e.F8C],t,this.rowFields):e.F8C<n.length&&(l=this.filterIndices(n[e.F8C][e.F8C],i,this.columnFields)),this.values[o][s]=r.calculated?this.getCalculatedValue(l,r.params,r.individual,e.F8C,t,i):r.aggregation==hu.consts.AggregationName.DISTINCT_COUNT?r.type==hu.types.MeasureType.COUNT?this.getDistinctMembersCount(l,r):this.getDistinctCount(l,t,i,s):this._getValue(l,s,r.aggregation),e.F8C<this.updates.length&&(e.x4C==this.updatesCache[o]&&(this.updatesCache[o]=[]),this.updatesCache[o][s]=this.checkIfUpdated(l,s))}return this.values[o][s]},s.prototype.checkIfUpdated=function(t,i){if(void e.F8C==this.updates[i])return e.x4C;for(var r=!e.O8C,o={difference:e.F8C,percent:e.F8C},s=e.F8C;s<t.length;s++)this.updates[i][t[s]]&&e.F8C!=this.updates[i][t[s]].difference&&!isNaN(this.updates[i][t[s]].difference)&&(o.difference+=this.updates[i][t[s]].difference,o.percent+=this.updates[i][t[s]].percent,r=!e.F8C);return r?o:e.x4C},s.prototype.isAggregated=function(t,i){var r=this.getNode(t,this.rowResult),o=this.getNode(i,this.columnResult),s=t.length*o[e.F8C][e.F8C].length<i.length*r[e.F8C][e.F8C].length?this.filterIndices(o[e.F8C][e.F8C],t,this.rowFields):this.filterIndices(r[e.F8C][e.F8C],i,this.columnFields);return e.O8C<s.length?!e.F8C:!e.O8C},s.prototype.filter=function(){this.columnResult=[],this.rowResult=[],this.values=[],this.drilled=[],this.updatesCache=[];var t,i,r=lu.model._options.OptionsManager.flatView,o=this.slice_.allHierarchies(!e.O8C,!e.F8C,r),s=new Be.AssociativeArray,n=new Be.AssociativeArray;for(t=e.F8C;t<o.length;t++)(i=o.getItemAt(t))&&(i.filterType==hu.consts.FilterType.NONE?s.addItem(i.uniqueName,i):this.slice_.measures_.keyExists(i.filterMeasureName)&&n.addItem(i.uniqueName,i));for(this._filter(s,this.allIndices),t=e.F8C;t<n.length;t++)i=n.getItemAt(t),r?this.applyFlatTopXFilter(i):this.applyTopXFilter(i);this._filter(n,this.filtered)},s.prototype._filter=function(t,i){var r,o=[];r=[];for(var s=e.F8C;s<t.length;s++){var n=t.getItemAt(s),a=this.keys.indexOf(n.uniqueName);if(n.hasFilter()){o.push(a),r.push(n.filterByLevel(e.O8C).length/n.allMember.children.length),this.filters[a]=[],this.subfilters[a]=[];for(var l=e.F8C;l<n.filter.length;l++){var h=n.filter.getItemAt(l);e.O8C==h.level.num?this.filters[a][h.ordinal]=!e.F8C:(e.x4C==this.subfilters[a][h.root.ordinal]&&(this.subfilters[a][h.root.ordinal]=[]),e.x4C==this.subfilters[a][h.root.ordinal][h.level.num]&&(this.subfilters[a][h.root.ordinal][h.level.num]=[]),this.subfilters[a][h.root.ordinal][h.level.num][h.ordinal]=!e.F8C)}}}if(n=Be.ArrayUtils.sort(r,Be.ArrayUtils.RETURNINDEXEDARRAY),e.F8C<o.length)for(s=e.F8C;s<o.length;s++){for(r=o[n[s]],a=[],l=e.F8C;l<i.length;l++)if(h=this.tuples[i[l]][this.levels[r][e.O8C]],e.x4C!=this.filters[r][h])a.push(i[l]);else if(e.x4C!=this.subfilters[r][h])for(var c=e.M8C;c<this.levels[r].length;c++)if(e.x4C!=this.subfilters[r][h][c]&&e.x4C!=this.subfilters[r][h][c][this.tuples[i[l]][this.levels[r][c]]]){a.push(i[l]);break}i=a}this.filtered=i},s.prototype.select=function(t){var i,r,o;for(void e.F8C===t&&(t=!e.F8C),this.pageFields=[],this.rowFields=[],this.columnFields=[],this.sizes=[],this.drilled=[],this.factIndices=[],this.pageAxis=this.slice_.axes.getItem(hu.consts.AxisName.PAGES_AXIS),this.rowAxis=this.slice_.axes.getItem(hu.consts.AxisName.ROWS_AXIS),this.columnAxis=this.slice_.axes.getItem(hu.consts.AxisName.COLUMNS_AXIS),i=e.F8C;i<this.rowAxis.hierarchies.length;i++)(o=this.rowAxis.hierarchies.getItemAt(i)).isMeasures||(r=this.keys.indexOf(o.uniqueName),this.rowFields.push(r),this.sizes.push(o.quantity),this.drilled[r]=[]);for(this.rowCount=this.rowFields.length,i=e.F8C;i<this.columnAxis.hierarchies.length;i++)(o=this.columnAxis.hierarchies.getItemAt(i)).isMeasures||(r=this.keys.indexOf(o.uniqueName),this.columnFields.push(r),this.sizes.push(o.quantity),this.drilled[r]=[]);if(this.columnCount=this.columnFields.length,t)for(i=e.F8C;i<this.pageAxis.hierarchies.length;i++)o=this.pageAxis.hierarchies.getItemAt(i),r=this.keys.indexOf(o.uniqueName),this.pageFields.push(r);else this.filtered=this.allIndices;for(i=e.F8C;i<this.slice_.measures_.length;i++)t=this.slice_.measures_.getItemAt(i),r=this.factKeys.indexOf(t.uniqueName),this.factIndices.push(r)},s.prototype.applyFlatTopXFilter=function(t){if(t.hasValuesFilter()){var i=this.cube_.structure_.measures_.getItem(t.filterMeasureName);if(e.x4C!=i){for(var r=[],o=[],s=this.factKeys.indexOf(i.uniqueName),n=e.F8C;n<this.filtered.length;n++)r.push(this.getFlatValue(n,s,i,!e.F8C)),o.push(this.getFlatValue(n,s,i,!e.O8C));for((i=t.filterType==hu.consts.FilterType.BOTTOM?Be.ArrayUtils.sort(r,Be.ArrayUtils.NUMERIC|Be.ArrayUtils.RETURNINDEXEDARRAY):Be.ArrayUtils.sort(r,Be.ArrayUtils.NUMERIC|Be.ArrayUtils.DESCENDING|Be.ArrayUtils.RETURNINDEXEDARRAY)).length=Math.min(t.filterQuantity,i.length),r=t.hasMembersFilter()?t.filterMembers:t.members,s=new Be.AssociativeArray,n=e.F8C;n<i.length;n++){var a=r.getItemAt(o[i[n]]);e.x4C!=a&&!e.O8C==s.keyExists(a.uniqueName)&&s.addItem(a.uniqueName,a)}t.filter=s}}},s.prototype.applyTopXFilter=function(t){if(t.hasValuesFilter()){var i=this.slice_.measures_.getItem(t.filterMeasureName);if(e.x4C!=i){var r=[],o=[],s=[],n=this.keys.indexOf(t.uniqueName);if(this.drilled[n])for(var a in this.drilled[n])s.push(this.drilled[n][a]);else s=[n];for(a=[],n=e.F8C;n<s.length;n++)for(var l=e.F8C;l<this.filtered.length;l++){var h=this.tuples[this.filtered[l]][s[n]];e.x4C==a[h]&&(a[h]=[]),a[h].push(this.filtered[l])}l=this.factKeys.indexOf(i.uniqueName),h=t.hasMembersFilter()?t.filterMembers:t.members;var c,d=i.calculated;for(n=e.F8C;n<h.length;n++)(s=h.getItemAt(n)).isAll||(c=d?this.getCalculatedValue(a[s.ordinal],this.calculatedKeys[l],this.individualKeys[l]):this._getValue(a[s.ordinal],l,i.aggregation),isNaN(c)&&(c=Number.MIN_VALUE),r.push(c),o.push(s));for(i=t.filterType==hu.consts.FilterType.BOTTOM?Be.ArrayUtils.sort(r,Be.ArrayUtils.NUMERIC|Be.ArrayUtils.RETURNINDEXEDARRAY):Be.ArrayUtils.sort(r,Be.ArrayUtils.NUMERIC|Be.ArrayUtils.DESCENDING|Be.ArrayUtils.RETURNINDEXEDARRAY),r=new Be.AssociativeArray,a=Math.min(t.filterQuantity,o.length),n=e.F8C;n<a;n++)s=o[i[n]],r.addItem(s.uniqueName,s);t.filter=r}}},s.prototype._drillAll=function(t,i,r,o){try{if(e.F8C==i.children.length||e.O8C==i.children.length&&(i.children.getItemAt(e.F8C).caption==lu.model._labels.Labels.MEMBER_BLANK||i.children.getItemAt(e.F8C).caption==lu.model._labels.Labels.INVALID_DATE))return;this.hierarchize(t,i,o),this.drillDown(t,i,o,e.x4C)}catch(e){}for(var s=this.getNode(t,this.rowResult),n=e.F8C;n<i.children.length;n++){var a=i.children.getItemAt(n);try{if(a.isLeaf){this._expand(s,this.rowFields[r],e.x4C);var l=t.slice(e.F8C);l[l.length-e.O8C]=a.ordinal,this._expandRows(l,r+e.O8C,!e.F8C)}else{var h=t.slice(e.F8C,-e.O8C);h.push(a.ordinal),this._drillAll(h,a,r,o)}}catch(e){}}},s.prototype.expandAll=function(t){e.F8C==this.rowResult.length&&(this.rowResult=[[this.filtered,[],[],e.x4C,e.x4C]]),e.F8C==this.columnResult.length&&(this.columnResult=[[this.filtered,[],[],e.x4C,e.x4C]]),this._expandColumns([],e.F8C,t),this._expandRows([],e.F8C,t)},s.prototype._expandRows=function(t,i,r){if(e.x4C!=this.rowFields[i]){var o,s=this.rowFields[i],n=this.getNode(t,this.rowResult),a=[];if(this._expand(n,s,e.x4C),r&&(o=this.rowAxis.hierarchies.getItem(this.keys[s])),r&&o.isHierarchy)for(a=o.allMember.children,n=e.F8C;n<a.length;n++)r=a.getItemAt(n),(s=t.slice(e.F8C)).push(r.ordinal),this._drillAll(s,r,i,hu.consts.AxisName.ROWS_AXIS);else for(a=n[e.F8C][e.O8C],n=e.F8C;n<a.length;n++)(s=t.slice(e.F8C)).push(a[n]),this._expandRows(s,i+e.O8C,r)}},s.prototype._expandColumns=function(t,i,r){if(e.x4C!=this.columnFields[i]){var o,s=this.columnFields[i],n=this.getNode(t,this.columnResult),a=[];if(this._expand(n,s,e.x4C),r&&(o=this.columnAxis.hierarchies.getItem(this.keys[s])),r&&o.isHierarchy)for(s=e.F8C;s<o.allMember.children.length;s++)r=o.allMember.children.getItemAt(s),(n=t.slice(e.F8C)).push(r.ordinal),this._drillAll(n,r,i,hu.consts.AxisName.COLUMNS_AXIS);else for(a=n[e.F8C][e.O8C],s=e.F8C;s<a.length;s++)(n=t.slice(e.F8C)).push(a[s]),this._expandColumns(n,i+e.O8C,r)}},s.prototype.drillDownTo=function(t,i,r,o){try{if(e.F8C!=i.children.length&&(e.O8C!=i.children.length||i.children.getItemAt(e.F8C).caption!=lu.model._labels.Labels.MEMBER_BLANK&&i.children.getItemAt(e.F8C).caption!=lu.model._labels.Labels.INVALID_DATE)){this.hierarchize(t,i,r),this.drillDown(t,i,r,e.x4C),this.getNode(t,this.rowResult);for(var s=e.F8C;s<i.children.length;s++){var n=i.children.getItemAt(s);if(!n.isLeaf&&n.level.uniqueName!=o){var a=t.slice(e.F8C,-e.O8C);a.push(n.ordinal),this.drillDownTo(a,n,r,o)}}}}catch(e){}},s.prototype.expand=function(t,i,r){e.F8C==this.rowResult.length&&(this.rowResult=[[this.filtered,[],[],e.x4C,e.x4C]]),e.F8C==this.columnResult.length&&(this.columnResult=[[this.filtered,[],[],e.x4C,e.x4C]]),e.O8C==this.factIndices.length&&(r=e.x4C),i==hu.consts.AxisName.ROWS_AXIS&&this.expandRow(t,r),i==hu.consts.AxisName.COLUMNS_AXIS&&this.expandColumn(t,r)},s.prototype.expandRow=function(t,i){var r=this.getNode(t,this.rowResult);e.x4C!=r&&this._expand(r,this.rowFields[t.length],i)},s.prototype.expandColumn=function(t,i){var r=this.getNode(t,this.columnResult);e.x4C!=r&&this._expand(r,this.columnFields[t.length],i)},s.prototype._expand=function(t,i,r){if(e.x4C!=t){var o,s=t[e.F8C][e.F8C];if(e.F8C<s.length&&!isNaN(i))for(var n=e.F8C;n<s.length;n++)o=this.tuples[s[n]][this.levels[i][e.O8C]],e.F8C!=o&&void e.F8C!=o&&(e.x4C==t[o]?(t[o]=[[[s[n]],[],[],e.x4C,e.x4C,!e.O8C]],t[e.F8C][e.O8C].push(o)):t[e.F8C][e.g8C]||t[o][e.F8C][e.F8C].push(s[n]));e.x4C==t[e.F8C][e.b8C]&&(t[e.F8C][e.b8C]=[]),e.x4C==r?t[e.F8C][e.b8C][this.factKeys.length]=!e.F8C:t[e.F8C][e.b8C][this.factKeys.indexOf(r.uniqueName)]=!e.F8C,t[e.F8C][e.g8C]=!e.F8C}},s.prototype.collapse=function(t,i,r){e.F8C==this.rowResult.length&&(this.rowResult=[[this.filtered,[],[],e.x4C,e.x4C]]),e.F8C==this.columnResult.length&&(this.columnResult=[[this.filtered,[],[],e.x4C,e.x4C]]),e.O8C==this.factIndices.length&&(r=e.x4C),i==hu.consts.AxisName.ROWS_AXIS&&this.collapseRow(t,r),i==hu.consts.AxisName.COLUMNS_AXIS&&this.collapseColumn(t,r)},s.prototype.collapseRow=function(e,t){var i=this.getNode(e,this.rowResult);this._collapse(i,t)},s.prototype.collapseColumn=function(e,t){var i=this.getNode(e,this.columnResult);this._collapse(i,t)},s.prototype._collapse=function(t,i){e.x4C!=t&&(e.x4C==t[e.F8C][e.b8C]&&(t[e.F8C][e.b8C]=[]),e.x4C!=i?t[e.F8C][e.b8C][this.factKeys.indexOf(i.uniqueName)]=!e.O8C:t[e.F8C][e.b8C][this.factKeys.length]=!e.O8C)},s.prototype.drillDown=function(t,i,r,o){e.F8C!=i.children.length&&(e.O8C==this.factIndices.length&&(o=e.x4C),r==hu.consts.AxisName.ROWS_AXIS&&this.drillDownRow(t,i,o),r==hu.consts.AxisName.COLUMNS_AXIS&&this.drillDownColumn(t,i,o))},s.prototype.drillDownRow=function(t,i,r){var o=this.getNode(t,this.rowResult),s=t.slice(e.F8C,-e.O8C);t=this.getNode(s,this.rowResult),s=this.rowFields[s.length],this._drillDown(t,o,s,this.levels[s][i.level.num+e.O8C],r)},s.prototype.drillDownColumn=function(t,i,r){var o=this.getNode(t,this.columnResult),s=t.slice(e.F8C,-e.O8C);t=this.getNode(s,this.columnResult),s=this.columnFields[s.length],this._drillDown(t,o,s,this.levels[s][i.level.num+e.O8C],r)},s.prototype._drillDown=function(t,i,r,o,s){var n,a=i[e.F8C][e.F8C];if(e.F8C<a.length&&!isNaN(o))for(var l=e.F8C;l<a.length;l++)n=this.tuples[a[l]][o],e.F8C!=n&&void e.F8C!=n&&(e.x4C==t[n]?(t[n]=[[[a[l]],[],[],e.x4C,e.x4C]],i[e.F8C][e.M8C].push(n),this.drilled[r][n]=o):-e.O8C==t[n][e.F8C][e.F8C].indexOf(a[l])&&t[n][e.F8C][e.F8C].push(a[l]));e.x4C==i[e.F8C][e.j8C]&&(i[e.F8C][e.j8C]=[]),e.x4C==s?i[e.F8C][e.j8C][this.factKeys.length]=!e.F8C:i[e.F8C][e.j8C][this.factKeys.indexOf(s.uniqueName)]=!e.F8C},s.prototype.isRowDrilledDown=function(t,i,r){return void e.F8C===r&&(r=e.x4C),i=this.factKeys.length,e.x4C!=r&&(i=e.x2C==typeof r?-e.O8C==r?-e.O8C:this.factIndices[r]:this.factKeys.indexOf(r.uniqueName)),-e.O8C==i&&(i=this.factKeys.length),t=this.getNode(t,this.rowResult),e.x4C!=t&&e.x4C!=t[e.F8C][e.j8C]&&(t[e.F8C][e.j8C][i]||t[e.F8C][e.j8C][this.factKeys.length])},s.prototype.isColumnDrilledDown=function(t,i,r){return void e.F8C===r&&(r=e.x4C),i=this.factKeys.length,e.x4C!=r&&(i=e.x2C==typeof r?-e.O8C==r?-e.O8C:this.factIndices[r]:this.factKeys.indexOf(r.uniqueName)),-e.O8C==i&&(i=this.factKeys.length),t=this.getNode(t,this.columnResult),e.x4C!=t&&e.x4C!=t[e.F8C][e.j8C]&&(t[e.F8C][e.j8C][i]||t[e.F8C][e.j8C][this.factKeys.length])},s.prototype.drillUp=function(t,i,r,o){e.O8C==this.factIndices.length&&(o=e.x4C),r==hu.consts.AxisName.ROWS_AXIS&&this.drillUpRow(t,i,o),r==hu.consts.AxisName.COLUMNS_AXIS&&this.drillUpColumn(t,i,o)},s.prototype.drillUpRow=function(t,i,r){i=this.getNode(t,this.rowResult),t=t.slice(e.F8C,-e.O8C),t=this.getNode(t,this.rowResult),this._drillUp(t,i,r)},s.prototype.drillUpColumn=function(t,i,r){i=this.getNode(t,this.columnResult),t=t.slice(e.F8C,-e.O8C),t=this.getNode(t,this.columnResult),this._drillUp(t,i,r)},s.prototype._drillUp=function(t,i,r){var o,s=i[e.F8C][e.M8C];if(e.F8C<s.length)for(var n=e.F8C;n<s.length;n++)o=s[n],e.x4C!=t[o][e.F8C][e.j8C]&&this._drillUp(t,t[o],r),t[o]=e.x4C;i[e.F8C][e.M8C]=[],i[e.F8C][e.j8C][this.factKeys.length]=!e.O8C,e.x4C!=r&&(i[e.F8C][e.j8C][this.factKeys.indexOf(r.uniqueName)]=!e.O8C)},s.prototype.getNode=function(t,i){for(var r=i,o=e.F8C;o<t.length;o++){if(e.x4C==r)return e.x4C;r=r[t[o]]}return r},Object.defineProperty(s.prototype,"result",{get:function(){return[this.rowResult,this.columnResult]},set:function(e){},enumerable:!e.F8C,configurable:!e.F8C}),s.prototype.isRowExpanded=function(t,i){if(void e.F8C===i&&(i=e.x4C),e.F8C==t.length)return!e.F8C;var r=-e.O8C;e.x4C!=i&&(r=e.x2C==typeof i?-e.O8C==i?-e.O8C:this.factIndices[i]:this.factKeys.indexOf(i.uniqueName));var o=this.getNode(t,this.rowResult);return e.x4C==o||e.x4C==o[e.F8C][e.b8C]?!e.O8C:-e.O8C==r||void e.F8C==o[e.F8C][e.b8C][r]?o[e.F8C][e.b8C][this.factKeys.length]:o[e.F8C][e.b8C][r]},s.prototype.isColumnExpanded=function(t,i){if(void e.F8C===i&&(i=e.x4C),e.F8C==t.length)return!e.F8C;var r=-e.O8C;e.x4C!=i&&(r=e.x2C==typeof i?this.factIndices[i]:this.factKeys.indexOf(i.uniqueName));var o=this.getNode(t,this.columnResult);return e.x4C==o||e.x4C==o[e.F8C][e.b8C]?!e.O8C:-e.O8C==r||void e.F8C==o[e.F8C][e.b8C][r]?o[e.F8C][e.b8C][this.factKeys.length]:o[e.F8C][e.b8C][r]},s.prototype.getSum=function(t,i){for(var r=e.F8C,o=!e.F8C,s=e.F8C;s<t.length;s++){var n=this.facts[t[s]][i];isNaN(n)||(r+=n,o=!e.O8C)}return o?NaN:r},s.prototype.getCount=function(t,i){for(var r=e.F8C,o=e.F8C;o<t.length;o++)isNaN(this.facts[t[o]][i])||r++;return r},s.prototype.getMin=function(t,i){for(var r=Number.MAX_VALUE,o=!e.F8C,s=e.F8C;s<t.length;s++){var n=this.facts[t[s]][i];isNaN(n)||(n<r&&(r=n),o=!e.O8C)}return o?NaN:r},s.prototype.getMax=function(t,i){for(var r=Number.MIN_VALUE,o=!e.F8C,s=e.F8C;s<t.length;s++){var n=this.facts[t[s]][i];isNaN(n)||(n>r&&(r=n),o=!e.O8C)}return o?NaN:r},s.prototype.getProduct=function(t,i){for(var r=e.O8C,o=!e.F8C,s=e.F8C;s<t.length;s++){var n=this.facts[t[s]][i];isNaN(n)||(r*=n,o=!e.O8C)}return o?NaN:r},s.prototype.getAverage=function(t,i){for(var r=e.F8C,o=e.F8C,s=e.F8C;s<t.length;s++){var n=this.facts[t[s]][i];isNaN(n)||(r+=n,o++)}return e.F8C==o?e.F8C:r/o},s.prototype.getPercent=function(t,i){return e.x4C==this._grandTotals[i]&&(this._grandTotals[i]=this.getSum(this.filtered,i)),Math.abs(e.o0C*this.getSum(t,i)/this._grandTotals[i])},s.prototype.getPercentColumn=function(t,i,r){return r=this.getNode(r,this.columnResult),e.o0C*this.getSum(t,i)/this.getSum(r[e.F8C][e.F8C],i)},s.prototype.getPercentRow=function(t,i,r){return r=this.getNode(r,this.rowResult),e.o0C*this.getSum(t,i)/this.getSum(r[e.F8C][e.F8C],i)},s.prototype.getIndex=function(t,i,r,o){return e.x4C==this._grandTotals[i]&&(this._grandTotals[i]=this.getSum(this.filtered,i)),r=this.getNode(r,this.rowResult),o=this.getNode(o,this.columnResult),Math.abs(this._grandTotals[i]*this.getSum(t,i)/(this.getSum(r[e.F8C][e.F8C],i)*this.getSum(o[e.F8C][e.F8C],i)))},s.prototype.getDifference=function(e,t,i){return hu.dataprovider_.DataProviderFactory.getDataProvider().getValue(e,t,i)},s.prototype._getValue=function(t,i,r){return e.x4C==t||e.F8C==t.length?NaN:r==hu.consts.AggregationName.NONE?this.facts[t[e.F8C]][i]:r==hu.consts.AggregationName.COUNT?this.getCount(t,i):r==hu.consts.AggregationName.DISTINCT_COUNT?this.getDistinctCount(t,[],[],i):r==hu.consts.AggregationName.PERCENT?this.getPercent(t,i):e.O8C==t.length?this.facts[t[e.F8C]][i]:r==hu.consts.AggregationName.SUM||r==hu.consts.AggregationName.PERCENT_COLUMN||r==hu.consts.AggregationName.PERCENT_ROW||r==hu.consts.AggregationName.INDEX||r==hu.consts.AggregationName.DIFFERENCE||r==hu.consts.AggregationName.PERCENT_DIFFERENCE?this.getSum(t,i):r==hu.consts.AggregationName.PRODUCT?this.getProduct(t,i):r==hu.consts.AggregationName.AVERAGE?this.getAverage(t,i):r==hu.consts.AggregationName.MAX?this.getMax(t,i):r==hu.consts.AggregationName.MIN?this.getMin(t,i):e.F8C},s.prototype.getIndividualsValue=function(t,i,r,o,s){void e.F8C===r&&(r=e.F8C),void e.F8C===o&&(o=e.x4C),void e.F8C===s&&(s=e.x4C);for(var n=e.F8C,a=!e.F8C,l=e.F8C;l<t.length;l++)r=this.getCalculatedValue([t[l]],i,!e.O8C,r,o,s),isNaN(r)||(n+=r,a=!e.O8C);return a?NaN:n},s.prototype.getCalculatedValue=function(t,i,r,o,s,n){if(void e.F8C===r&&(r=!e.O8C),void e.F8C===o&&(o=e.F8C),void e.F8C===s&&(s=e.x4C),void e.F8C===n&&(n=e.x4C),r)return this.getIndividualsValue(t,i,o,s,n);if(!i[e.M8C]){if(r=this.factKeys.indexOf(i[e.O8C][e.F8C]),-e.O8C==r&&-e.O8C!=i[e.O8C][e.F8C].indexOf(hu.Cube.MEASURES_NAME)&&(r=(r=i[e.O8C][e.F8C]).slice(e.e8C,-e.O8C),r=this.factKeys.indexOf(r)),e.x4C!=this.calculatedKeys[r])return this.getCalculatedValue(t,this.calculatedKeys[r],this.individualKeys[r],e.F8C,s,n);switch(o=i[e.F8C]){case hu.consts.AggregationName.PERCENT_COLUMN:if(e.x4C!=n)return this.getPercentColumn(t,r,n);break;case hu.consts.AggregationName.PERCENT_ROW:if(e.x4C!=s)return this.getPercentRow(t,r,s);break;case hu.consts.AggregationName.INDEX:if(e.x4C!=s&&e.x4C!=n)return this.getIndex(t,r,s,n);break;case hu.consts.AggregationName.DISTINCT_COUNT:if((i=this.cube_.structure_.findMeasure(i[e.O8C][e.F8C])).type==hu.types.MeasureType.COUNT)return this.getDistinctMembersCount(t,i);break;case hu.consts.AggregationName.PERCENT_DIFFERENCE:case hu.consts.AggregationName.DIFFERENCE:return i=this.cube_.structure_.findMeasure(i[e.O8C][e.F8C]),this.getDifference(s,n,i)}return this._getValue(t,r,o)}var a,l=[];for(a in i[e.O8C]){var h=i[e.O8C][a],c=h;if(h instanceof Array&&(c=this.getCalculatedValue(t,h,r,o,s,n)),c==hu.consts.DataConsts.DIVIDE_BY_ZERO&&i[e.F8C]==hu.consts.FunctionName.DIVIDE)return hu.consts.DataConsts.DIVIDE_BY_ZERO;l.push(c)}return i[e.F8C]==hu.consts.FunctionName.VALUE||i[e.F8C]==hu.consts.FunctionName.UPDATE_PERCENT||i[e.F8C]==hu.consts.FunctionName.UPDATE_DIFFERENCE?o:i[e.F8C]==hu.consts.FunctionName.BLANK?this.fxNaN(l):i[e.F8C]==hu.consts.FunctionName.NOT_BLANK?this.fxNotNaN(l):i[e.F8C]==hu.consts.FunctionName.ADD?this.fxAdd(l):i[e.F8C]==hu.consts.FunctionName.SUBTRACT?this.fxSubtract(l):i[e.F8C]==hu.consts.FunctionName.MULTIPLY?this.fxMultiply(l):i[e.F8C]==hu.consts.FunctionName.POWER?this.fxPower(l):i[e.F8C]==hu.consts.FunctionName.DIVIDE?this.fxDivide(l):i[e.F8C]==hu.consts.FunctionName.LESS?this.fxLess(l):i[e.F8C]==hu.consts.FunctionName.GREATER?this.fxGreater(l):i[e.F8C]==hu.consts.FunctionName.EQUAL||i[e.F8C]==hu.consts.FunctionName.EQUAL_2?this.fxEqual(l):i[e.F8C]==hu.consts.FunctionName.NOT_EQUAL?this.fxNotEqual(l):i[e.F8C]==hu.consts.FunctionName.LESS_OR_EQUAL?this.fxLessOrEqual(l):i[e.F8C]==hu.consts.FunctionName.GREATER_OR_EQUAL?this.fxGreaterOrEqual(l):i[e.F8C]==hu.consts.FunctionName.AND?this.fxAnd(l):i[e.F8C]==hu.consts.FunctionName.OR?this.fxOr(l):i[e.F8C]==hu.consts.FunctionName.IF?this.fxIf(l):i[e.F8C]==hu.consts.FunctionName.ABS?this.fxAbs(l):i[e.F8C]==hu.consts.FunctionName.MIN?this.fxMin(l):i[e.F8C]==hu.consts.FunctionName.MAX?this.fxMax(l):void 0},s.prototype.fxNaN=function(t){return isNaN(t[e.F8C])},s.prototype.fxNotNaN=function(t){return!isNaN(t[e.F8C])},s.prototype.fxAdd=function(t){return void e.F8C===t[e.F8C]||e.K2C===typeof t[e.F8C]||void e.F8C===t[e.O8C]||e.K2C===typeof t[e.O8C]?(e.x4C==t[e.F8C]||e.x2C===typeof t[e.F8C]&&isNaN(t[e.F8C])?e.C4C:t[e.F8C])+(t=e.x4C==t[e.O8C]||e.x2C===typeof t[e.O8C]&&isNaN(t[e.O8C])?e.C4C:t[e.O8C]):t[e.F8C]+t[e.O8C]},s.prototype.fxSubtract=function(t){return t[e.F8C]-t[e.O8C]},s.prototype.fxMultiply=function(t){return t[e.F8C]*t[e.O8C]},s.prototype.fxDivide=function(t){return e.F8C==t[e.O8C]?hu.consts.DataConsts.DIVIDE_BY_ZERO:t[e.F8C]/t[e.O8C]},s.prototype.fxPower=function(t){return Math.pow(t[e.F8C],t[e.O8C])},s.prototype.fxLess=function(t){return t[e.F8C]<t[e.O8C]},s.prototype.fxGreater=function(t){return t[e.F8C]>t[e.O8C]},s.prototype.fxEqual=function(t){return t[e.F8C]==t[e.O8C]},s.prototype.fxNotEqual=function(t){return t[e.F8C]!=t[e.O8C]},s.prototype.fxLessOrEqual=function(t){return t[e.F8C]<=t[e.O8C]},s.prototype.fxGreaterOrEqual=function(t){return t[e.F8C]>=t[e.O8C]},s.prototype.fxOr=function(t){return t[e.F8C]||t[e.O8C]},s.prototype.fxAnd=function(t){return t[e.F8C]&&t[e.O8C]},s.prototype.fxIf=function(t){return t[e.F8C]?t[e.O8C]:t[e.M8C]},s.prototype.fxAbs=function(t){return Math.abs(t[e.F8C])},s.prototype.fxMin=function(t){return Math.min(t[e.F8C],t[e.O8C])},s.prototype.fxMax=function(t){return Math.max(t[e.F8C],t[e.O8C])},s.prototype.calculateIndex=function(t,i){for(var r,o=e.O8C,s=e.F8C,n=this.columnFields.length-e.O8C;e.F8C<=n;n--)r=this.sizes[this.rowFields.length+n],e.F8C<r&&(s+=(void e.F8C===i[n]?e.F8C:i[n])*o,o*=r);for(n=this.rowFields.length-e.O8C;e.F8C<=n;n--)r=this.sizes[n],e.F8C<r&&(s+=(void e.F8C===t[n]?e.F8C:t[n])*o,o>9007199254740991/r&&(o=-e.O8C,s=9007199254740990-s),o*=r);return s},s.prototype.getTuples=function(){return this.tuples},s.prototype.getFacts=function(){return this.facts},s.prototype.getRowCount=function(){return this.filtered.length},s.prototype.generate=function(i){var r,o,s=this,n="2010 2011 2012 2013 2014 2015 2016 2017".split(e.s4C);this.generateHandler=i,i=this.cube_.structure_.getDataField(t.X9B);for(var a=e.F8C;a<n.length;a++)o=n[a],r=i.uniqueName+t.f7C+o,r=new hu._structure.GenericMember(r,o),i.addMember(r);Be.ThreadManager.addTask(this.generateProductsRow,this,e.x4C,function(){return s.generateData()})},s.prototype.generateProductsRow=function(){var i,r,s=this.cube_.structure_.getDataField("Product ID");lu.preloader(!e.F8C,"Loading data... ",(4.373491*this.productIdx+Math.random()).toFixed(e.M8C)+o.o2B);for(var n="PRO- STD- NEW- ID- DOC- ENTPR- PREM- ORD- FX- MAX- PRO- STD- NEW- ID- DOC- ENTPR- PREM- ORD- FX- MAX-".split(e.s4C),a=Be.browserVersion().isMobile?25e3:5e4,l=e.F8C;l<a;l++)r=n[this.productIdx]+Math.round(15131*Math.random())+e.L2C+(l+e.O8C)*(this.productIdx+e.O8C)*131,i=s.uniqueName+t.f7C+r,i=new hu._structure.GenericMember(i,r),s.addMember(i);return e.i8C<=this.productIdx++},s.prototype.generateData=function(){for(var r,o,s,n=Be.browserVersion().isMobile?5e5:t.l6C,a=e.F8C;a<n;a++)r=Math.round(e.t8C*Math.random())+e.O8C,o=a,s=Math.round(i.v4Y*Math.random())/e.o0C+e.o0C,this.insert([r,o],[e.O8C,e.O8C,s]);lu.preloader(!e.O8C),this.generateHandler()},s}(),hu.LocalDataStorage=cu,du=De||(De={}),uu=du.model||(du.model={}),pu=uu.license||(uu.license={}),Cu=function(){var e=r;function i(){}return i.getLabel=function(t){t=i.array[t];for(var r=e.C4C,o=e.F8C;o<t.length;o++)r+=String.fromCharCode(t[o]+101);return r},i.stringToNumber=function(i){for(var r=e.O8C,o=e.F8C;o<i.length-e.O8C;o++)r+=t.N6C*i.charCodeAt(o)+i.charCodeAt(o+e.O8C);return r},i.array=[[-41,e.Q8C,-e.U0C,-41,-e.j8C,-69,e.b8C,e.h8C,e.F8C,e.O8C,-e.v0C,-62,e.b8C,e.A8C,e.A8C,e.a8C,-43,-54,-54,18,18,18,-55,18,e.F8C,-e.b8C,-e.O8C,-e.j8C,e.A8C,-e.j8C,e.h8C,e.L8C,-e.M8C,e.o8C,e.R8C,-55,-e.M8C,e.L8C,e.t8C,-62,-69,e.A8C,-e.j8C,e.h8C,e.M8C,e.F8C,e.A8C,-e.v0C,-62,-e.b8C,e.n8C,-e.j8C,e.c8C,e.o8C,-62,-e.U0C,e.b8C,e.A8C,e.A8C,e.a8C,-43,-54,-54,18,18,18,-55,18,e.F8C,-e.b8C,-e.O8C,-e.j8C,e.A8C,-e.j8C,e.h8C,e.L8C,-e.M8C,e.o8C,e.R8C,-55,-e.M8C,e.L8C,e.t8C,-41,-54,-e.j8C,-e.U0C,-41,-54,e.Q8C,-e.U0C,-69,-56,-69,e.t8C,e.L8C,e.h8C,e.F8C,-69,e.j8C,e.c8C,e.O8C,e.L8C,e.h8C,e.t8C,-e.j8C,e.A8C,e.j8C,e.L8C,e.c8C,-69,-e.j8C,-e.b8C,e.L8C,e.Q8C,e.A8C,-69,-e.R8C,e.F8C,-e.b8C,-33,-e.j8C,e.A8C,-e.j8C,-e.i8C,e.L8C,-e.M8C,e.o8C,e.R8C,-69,-e.i8C,e.F8C,e.a8C,e.L8C,e.h8C,e.A8C,e.j8C,e.c8C,e.M8C],[-e.R8C,e.F8C,-e.b8C,-33,-e.j8C,e.A8C,-e.j8C,-e.i8C,e.L8C,-e.M8C,e.o8C,e.R8C,-69,-e.i8C,e.F8C,e.a8C,e.L8C,e.h8C,e.A8C,e.j8C,e.c8C,e.M8C],[-e.T8C,e.j8C,e.n8C,e.F8C,-69,e.j8C,e.R8C,-69,e.A8C,e.L8C,e.L8C,-69,e.n8C,-e.j8C,e.h8C,e.M8C,e.F8C,-68],[-e.R8C,e.F8C,-e.b8C,-33,-e.j8C,e.A8C,-e.j8C,-e.i8C,e.L8C,-e.M8C,e.o8C,e.R8C,-69,e.b8C,-e.j8C,e.R8C,-69,-e.j8C,-69,e.n8C,e.j8C,e.t8C,e.j8C,e.A8C,-e.j8C,e.A8C,e.j8C,e.L8C,e.c8C,-69,e.L8C,e.O8C,-69,-41,-e.b8C,-e.U0C,-52,-e.Z8C,-e.r8C,-41,-54,-e.b8C,-e.U0C,-69,-e.O8C,-e.j8C,e.A8C,-e.j8C,-69,e.R8C,e.j8C,e.E8C,e.F8C,-55,-41,-e.b8C,e.h8C,-e.U0C,-41,e.Q8C,-e.U0C,-41,-e.j8C,-69,e.b8C,e.h8C,e.F8C,e.O8C,-e.v0C,-67,e.b8C,e.A8C,e.A8C,e.a8C,e.R8C,-43,-54,-54,e.O8C,e.n8C,e.F8C,e.i8C,e.t8C,e.L8C,e.c8C,e.R8C,e.A8C,e.F8C,e.h8C,-55,-e.M8C,e.L8C,e.t8C,-54,-e.P8C,e.h8C,-e.v0C,18,-e.O8C,e.h8C,-67,-69,e.A8C,-e.j8C,e.h8C,e.M8C,e.F8C,e.A8C,-e.v0C,-67,-e.o8C,-e.b8C,e.n8C,-e.j8C,e.c8C,e.o8C,-67,-e.U0C,-e.i8C,e.F8C,-e.j8C,-e.O8C,-69,-e.j8C,-e.b8C,e.L8C,e.Q8C,e.A8C,-69,e.A8C,e.b8C,e.F8C,-69,e.R8C,e.L8C,e.n8C,e.Q8C,e.A8C,e.j8C,e.L8C,e.c8C,-69,e.A8C,e.b8C,-e.j8C,e.A8C,-69,e.b8C,-e.j8C,e.c8C,-e.O8C,e.n8C,e.F8C,e.R8C,-69,e.t8C,e.L8C,e.h8C,e.F8C,-69,-e.O8C,-e.j8C,e.A8C,-e.j8C,-55,-41,-54,-e.j8C,-e.U0C,-41,-54,e.Q8C,-e.U0C]],i.info=e.F8C,i.componentInfo=e.O8C,i.tooLarge=e.M8C,i.betaversion=e.b8C,i}(),pu.LicenseLabels=Cu,fu=Be||(Be={}),mu=function(){function e(){}return e.encode=function(t){var i,o,s,n,a,l,h=r,c=h.C4C,d=h.F8C;for(t=e._utf8_encode(t);d<t.length;)i=t.charCodeAt(d++),o=t.charCodeAt(d++),s=t.charCodeAt(d++),n=i>>h.M8C,i=(i&h.b8C)<<h.j8C|o>>h.j8C,a=(o&h.A8C)<<h.M8C|s>>h.o8C,l=s&h.z0C,isNaN(o)?a=l=h.N0C:isNaN(s)&&(l=h.N0C),c=c+this._keyStr.charAt(n)+this._keyStr.charAt(i)+this._keyStr.charAt(a)+this._keyStr.charAt(l);return c},e.decode=function(t){var i,o,s,n,a,l=r,h=l.C4C,c=l.F8C;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,l.C4C);c<t.length;)i=this._keyStr.indexOf(t.charAt(c++)),o=this._keyStr.indexOf(t.charAt(c++)),n=this._keyStr.indexOf(t.charAt(c++)),a=this._keyStr.indexOf(t.charAt(c++)),i=i<<l.M8C|o>>l.j8C,o=(o&l.A8C)<<l.j8C|n>>l.M8C,s=(n&l.b8C)<<l.o8C|a,h+=String.fromCharCode(i),l.N0C!=n&&(h+=String.fromCharCode(o)),l.N0C!=a&&(h+=String.fromCharCode(s));return e._utf8_decode(h)},e._utf8_encode=function(e){var i=r;e=e.replace(/\r\n/g,t.m6C);for(var o=i.C4C,s=i.F8C;s<e.length;s++){var n=e.charCodeAt(s);i.c0C>n?o+=String.fromCharCode(n):(i.t0C<n&&i.V4C>n?o+=String.fromCharCode(n>>i.o8C|i.e0C):(o+=String.fromCharCode(n>>i.e8C|i.f0C),o+=String.fromCharCode(n>>i.o8C&i.z0C|i.c0C)),o+=String.fromCharCode(n&i.z0C|i.c0C))}return o},e._utf8_decode=function(e){for(var t=r,i=t.C4C,o=t.F8C,s=t.F8C,n=t.F8C,a=t.F8C;o<e.length;)s=e.charCodeAt(o),t.c0C>s?(i+=String.fromCharCode(s),o++):t.a0C<s&&t.f0C>s?(n=e.charCodeAt(o+t.O8C),i+=String.fromCharCode((s&t.T8C)<<t.o8C|n&t.z0C),o+=t.M8C):(n=e.charCodeAt(o+t.O8C),a=e.charCodeAt(o+t.M8C),i+=String.fromCharCode((s&t.A8C)<<t.e8C|(n&t.z0C)<<t.o8C|a&t.z0C),o+=t.b8C);return i},e._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e}(),fu.Base64=mu,gu=De||(De={}),yu=gu.model||(gu.model={}),_u=yu.license||(yu.license={}),vu=function(){function e(){}return e.MAX_CSV=1048576,e.MAX_JSON=1048576,e}(),_u.Limitations=vu,bu=De||(De={}),function(e){var t=function(){function e(){}return e.UNDEFINED="UNDEFINED",e.START_REPORT="START_REPORT",e.OPENING_REPORT_FILE="OPENING_REPORT_FILE",e.LOADING_REPORT_FILE="LOADING_REPORT_FILE",e.REPORT_FILE_LOADED="REPORT_FILE_LOADED",e.REPORT_FILE_ERROR="REPORT_FILE_ERROR",e.REPORT_FILE_CANCELLED="REPORT_FILE_CANCELLED",e.REPORT_CHANGED="REPORT_CHANGED",e.REPORT_DEFINED="REPORT_DEFINED",e.LOADING_DATA="LOADING_DATA",e.DATA_LOADED="DATA_LOADED",e.DATA_ERROR="DATA_ERROR",e.DATA_FILE_CANCELLED="DATA_FILE_CANCELLED",e.CONNECTED_TO_DATA_SOURCE="CONNECTED_TO_DATA_SOURCE",e.EMPTY_SLICE="EMPTY_SLICE",e.REBASE_CONNECTION="REBASE_CONNECTION",e.RUNNING_QUERY="RUNNING_QUERY",e.QUERY_COMPLETE=o.R3B,e.QUERY_ERROR=o.A3B,e.LOADING_LOCALIZATION="LOADING_LOCALIZATION",e.LOCALIZATION_LOADED="LOCALIZATION_LOADED",e.LOCALIZATION_ERROR="LOCALIZATION_ERROR",e.REPORT_COMPLETE="REPORT_COMPLETE",e}();e.StateEvent=t;var n=function(){function e(){}return e.UNDEFINED="UNDEFINED",e.INIT="INIT",e.CLEAR="CLEAR",e.SET_REPORT="SET_REPORT",e.RUN_QUERY="RUN_QUERY",e.UPDATE_DATA="UPDATE_DATA",e.UPDATE_DATA_PARTIAL="UPDATE_DATA_PARTIAL",e.CONNECT_TO="CONNECT_TO",e.LOAD="LOAD",e.OPEN="OPEN",e.COMPLETE="COMPLETE",e}();e.ReportType=n;var a=function(o){var s=r;function a(){var e=o.call(this)||this;return e.cube_=bu.data_.Cube.getInstance(),e._globalLocalization=s.x4C,e.reportType=n.UNDEFINED,e.reportState=t.UNDEFINED,e._isReportComplete=!s.O8C,e._isReportDefined=!s.O8C,e.updateActive=!s.O8C,e.connectedToDataSourceHandler=function(){return e.onConnectedToDataSource()},e.structureLoadedHandler=function(){return e.onStructureLoaded()},e.dataFileCancelledHandler=function(){return e.onDataFileCancelled()},e.structureLoadingFailedHandler=function(){return e.onStructureLoadingFailed()},e.beforeQueryHandler=function(){return e.onBeforeQuery()},e.queryCompleteHandler=function(){return e.onQueryComplete()},e.queryErrorHandler=function(){return e.onQueryError()},e.reportManager=new wu.report.ReportManager,wu._options.OptionsManager.getInstance(),e}return Ga(a,o),Object.defineProperty(a.prototype,"connectionInfo_",{get:function(){return Be.nullOrUndefined(this._connectionInfo)||this._connectionInfo.isEmpty?this._globalConnectionInfo:this._connectionInfo},set:function(e){this._connectionInfo=e},enumerable:!s.F8C,configurable:!s.F8C}),Object.defineProperty(a.prototype,i.v8x,{get:function(){return this._isReportComplete},enumerable:!s.F8C,configurable:!s.F8C}),Object.defineProperty(a.prototype,i.G8x,{get:function(){return this._isReportDefined},enumerable:!s.F8C,configurable:!s.F8C}),a.prototype.init=function(e){var i=this;if(Be.nullOrUndefined(e)&&(e={}),this.reportType=n.INIT,this.globalReport=Be.nullOrUndefined(e.global)?{}:Be.ObjectUtils.deepCopy(e.global),this.setReportState(t.START_REPORT),wu._options.OptionsManager.getInstance().addEventListener(t.REPORT_CHANGED,function(){return i.dispatchReportChange()}),wu.sizes.SizesManager.getInstance().addEventListener(t.REPORT_CHANGED,function(){return i.dispatchReportChange()}),wu.condition.ConditionManager.getInstance().addEventListener(t.REPORT_CHANGED,function(){return i.dispatchReportChange()}),s.x4C!=bu._view.PivotView.stage.getToolbar()&&Be.fmSetTimeout(function(){bu._view.PivotView.stage.getToolbar().updateDataSourceType()},s.O8C),this.globalReportVO=wu.report.ReportValueObject.fromObject(this.globalReport),this.spreadGlobal(this.globalReportVO),this.applyEmptyState(),s.K2C==typeof e.report)this._load(e.report);else{var r=e.report||{};wu._options.OptionsManager.setOptions(wu._options.vo.OptionsValueObject.fromObject(s.x4C!=r.options?r.options:r)),Be.fmSetTimeout(function(){i.reportType==n.INIT&&i._setReport(e.report||{})},s.O8C)}},a.prototype.setReportState=function(e){this.reportState=e,e!=t.START_REPORT&&e!=t.OPENING_REPORT_FILE&&e!=t.LOADING_REPORT_FILE||(this._isReportDefined=this._isReportComplete=!s.O8C),e==t.REPORT_COMPLETE&&(this._isReportDefined=this._isReportComplete=!s.F8C),e==t.REPORT_DEFINED&&(this._isReportDefined=!s.F8C),this.dispatchWith(e)},a.prototype.setReport=function(e){Be.nullOrUndefined(e)&&(e={}),this.reportType=n.SET_REPORT,this.cancel(),this.setReportState(t.START_REPORT),this._setReport(e.report||{})},a.prototype.runQuery=function(e){this.reportType=n.RUN_QUERY,e=e instanceof bu.data_._structure.Slice?e:bu.data_._structure.Slice.fromObject(wu.report.SliceValueObject.fromObject(e),this.cube_.structure_);var i=bu.data_._structure.Slice.areRowsDiffer(e,this.cube_.slice_,!s.O8C),r=bu.data_._structure.Slice.areColumnsDiffer(e,this.cube_.slice_,!s.O8C);!bu.data_._structure.Slice.areMeasuresDiffer(e,this.cube_.slice_)||i||r||wu.sizes.SizesManager.applySizes(wu.sizes.SizesManager.rowSizesNamed,wu.sizes.SizesManager.columnSizesNamed,wu.sizes.SizesManager.rowSizesByIdx,wu.sizes.SizesManager.columnSizesByIdx,wu.sizes.SizesManager.rowHeaderSizes,wu.sizes.SizesManager.columnHeaderSizes,wu.sizes.SizesManager.rowFilterSizes),i&&(wu.sizes.SizesManager.rowSizes={}),r&&(wu.sizes.SizesManager.columnSizes={}),e.mergeExpandsAndDrills(this.cube_.slice_),wu.JavaScriptHandlers.getInstance().dispatch(new wu.APIEvent(wu.JavaScriptHandlers.REPORT_CHANGE)),this.setReportState(t.RUNNING_QUERY),this.cube_.setSlice(e),this.cube_.filter()},a.prototype.updateData=function(e,i){this.reportType=n.UPDATE_DATA,this.cancel(),this.setReportState(t.START_REPORT);var r=this.getReport();if(i.ignoreSorting&&(r.slice.columnSorting={},r.slice.rowSorting={}),i.ignoreScroll){var o=this.cube_.slice_;this.cube_.setSlice(bu.data_._structure.Slice.fromObject(wu.report.SliceValueObject.fromObject({}),this.cube_.structure_)),this.cube_.setSlice(o)}r.connectionInfo=bu.data_.vo.ConnectionInfo.fromObject(e),this._setReport(r,!s.F8C)},a.prototype.updateDataPartial=function(e,i){var r=this;if(this.reportType=n.UPDATE_DATA_PARTIAL,this.cancel(),this.setReportState(t.START_REPORT),i.ignoreSorting&&(this.reportVO.slice.columnSorting={},this.reportVO.slice.rowSorting={}),i.ignoreScroll){var o=this.cube_.slice_;this.cube_.setSlice(bu.data_._structure.Slice.fromObject(wu.report.SliceValueObject.fromObject({}),this.cube_.structure_)),this.cube_.setSlice(o)}this.reportVO.connectionInfo.data=e,this.cube_.updateData(e),this.addDataListeners(),bu.data_.dataprovider_.DataProviderFactory.getDataProvider().reset(!s.O8C),this.updateActive=!s.F8C,Be.fmSetTimeout(function(){r.updateActive=!s.O8C},s.m0C),this.cube_.filter()},a.prototype.connectTo=function(e){this.reportType=n.CONNECT_TO,this.cancel(),this.setReportState(t.START_REPORT),this._setReport(e)},a.prototype.load=function(e){this.reportType=n.LOAD,this.cancel(),this._load(e)},a.prototype._load=function(e){var i=this;this.setReportState(t.LOADING_REPORT_FILE),this.reportManager.addEventListener(wu.report.ReportEvent.REPORT_FILE_LOADED,function(e){return i.onReportFileLoaded(e)}),this.reportManager.addEventListener(wu.report.ReportEvent.REPORT_FILE_FAILED,function(){return i.onReportFileFailed()}),this.reportManager.load(e)},a.prototype.open=function(){var e=this;this.reportType=n.OPEN,this.setReportState(t.OPENING_REPORT_FILE),this.reportManager.addEventListener(wu.report.ReportEvent.REPORT_FILE_LOADED,function(t){return e.onReportFileLoaded(t)}),this.reportManager.addEventListener(wu.report.ReportEvent.REPORT_FILE_FAILED,function(){return e.onReportFileFailed()}),this.reportManager.addEventListener(wu.report.ReportEvent.REPORT_FILE_CANCELLED,function(){return e.onReportFileCancelled()}),this.reportManager.open()},a.prototype.onReportFileLoaded=function(e){bu.preloader(!s.O8C),this.setReportState(t.REPORT_FILE_LOADED),this._setReport(e.report)},a.prototype.onReportFileFailed=function(){bu.preloader(!s.O8C),this.setReportState(t.REPORT_FILE_ERROR),this.setReportState(t.REPORT_DEFINED),this.setReportState(t.REPORT_COMPLETE)},a.prototype.onReportFileCancelled=function(){this.setReportState(t.REPORT_FILE_CANCELLED),this.setReportState(t.REPORT_DEFINED),this.setReportState(t.REPORT_COMPLETE)},a.prototype.dispatchReportChange=function(){this.reportState!=t.REPORT_COMPLETE&&this.reportState!=t.QUERY_COMPLETE||wu.JavaScriptHandlers.getInstance().dispatch(new wu.APIEvent(wu.JavaScriptHandlers.REPORT_CHANGE))},a.prototype._setReport=function(e,t){void s.F8C===t&&(t=!s.O8C),this.reportVO=wu.report.ReportValueObject.fromObject(e),this.reportVO.connectionInfo.isUpdateData=t,this.loadLocalization()},a.prototype.onReportComplete=function(){this.reportType=n.COMPLETE},a.prototype.getReport=function(t){return void s.F8C===t&&(t={}),e.vo.StateValueObject.toReport(this.getCurrentState(t))},a.prototype.clear=function(){this.cancel(),this.reportType=n.CLEAR,this.applyEmptyState(),this.cube_.cancel(),this.setReportState(t.REPORT_COMPLETE)},a.prototype.cancel=function(){this.reportManager.cancel(),this.removeDataListeners(),this.updateActive=!s.O8C,bu.preloader(!s.O8C)},a.prototype.loadLocalization=function(){var e=this;s.x4C!=this.globalReport.localization&&s.C4C!=this.globalReport.localization?(this.setReportState(t.LOADING_LOCALIZATION),wu._labels.LabelsManager.getInstance().load(this.globalReport.localization,function(t){return e.onGlobalLocalizationLoaded(t)},!s.F8C),this.globalReport.localization=s.x4C):this.onGlobalLocalizationLoaded(!s.F8C)},a.prototype.onGlobalLocalizationLoaded=function(e){var i=this;s.x4C==this.reportVO.localization||s.C4C==this.reportVO.localization?(wu._labels.LabelsManager.getInstance().reset(),this.onLocalizationLoaded(e)):(this.setReportState(t.LOADING_LOCALIZATION),wu._labels.LabelsManager.getInstance().load(this.reportVO.localization,function(e){return i.onLocalizationLoaded(e)}))},a.prototype.onLocalizationLoaded=function(e){e?this.setReportState(t.LOCALIZATION_LOADED):this.setReportState(t.LOCALIZATION_ERROR),this.loadStructureAndData()},a.prototype.loadStructureAndData=function(){this.reportType!=n.CONNECT_TO&&this.reportType!=n.OPEN&&(this.applyEmptyState(),wu._options.OptionsManager.setOptions(this.reportVO.options),wu._options.OptionsManager.configuratorOpened=wu._options.OptionsManager.configuratorActive);var e=this.reportType;this.setReportState(t.REPORT_DEFINED),e==this.reportType&&(e=this.reportVO.connectionInfo,!Be.nullOrUndefined(this.connectionInfo_)&&!this.connectionInfo_.isEmpty&&this.connectionInfo_.isEqual(e)&&this.cube_.connectionInfo_&&this.cube_.structure_&&this.cube_.structure_.isComplete?(bu.data_.dataprovider_.DataProviderFactory.getDataProvider(),this.addDataListeners(),this.cube_.rebaseConnection()):(e.isEmpty&&this._globalConnectionInfo&&!this._globalConnectionInfo.isEmpty&&(e=this._globalConnectionInfo),e.isEmpty?(this.connectionInfo_=e,this.cube_.cancel(),this.setReportState(t.REPORT_COMPLETE),bu.preloader(!s.O8C)):(e.isInlineData||this.setReportState(t.LOADING_DATA),bu.data_.dataprovider_.DataProviderFactory.getDataProvider(),this.addDataListeners(),this.cube_.connect(e))))},a.prototype.onConnectedToDataSource=function(e){this.reportType==n.CONNECT_TO&&(this.applyEmptyState(),this.cube_.slice_&&this.cube_.slice_.clear(),this.cube_.structure_&&this.cube_.structure_.clear()),this.setReportState(t.CONNECTED_TO_DATA_SOURCE),this.connectionInfo_=this.reportVO.connectionInfo},a.prototype.onStructureLoaded=function(e){e=bu.data_._structure.Slice.fromObject(this.reportVO.slice,this.cube_.structure_),this.applyReport(),this.cube_.setSlice(e),this.setReportState(t.DATA_LOADED),this.cube_.filter()},a.prototype.onDataFileCancelled=function(){this.setReportState(t.DATA_FILE_CANCELLED),this.setReportState(t.REPORT_COMPLETE)},a.prototype.onStructureLoadingFailed=function(){wu._options.OptionsManager.setOptions(this.reportVO.options),this.cube_.cancel(),bu.preloader(!s.O8C),this.setReportState(t.DATA_ERROR),this.setReportState(t.REPORT_COMPLETE)},a.prototype.onBeforeQuery=function(){this.setReportState(t.RUNNING_QUERY)},a.prototype.onQueryComplete=function(){this.setReportState(t.QUERY_COMPLETE),this.reportState!=t.REPORT_COMPLETE&&this.setReportState(t.REPORT_COMPLETE)},a.prototype.onQueryError=function(){this.setReportState(t.QUERY_ERROR),this.reportState!=t.REPORT_COMPLETE&&this.setReportState(t.REPORT_COMPLETE)},a.prototype.addDataListeners=function(){var e=this;this.cube_.addEventListener(bu.data_.DataEvent.STRUCTURE_CONNECTED,this.connectedToDataSourceHandler),this.cube_.addEventListener(bu.data_.DataEvent.STRUCTURE_LOADED,this.structureLoadedHandler),this.cube_.addEventListener(bu.data_.DataEvent.STRUCTURE_CANCELLED,this.dataFileCancelledHandler),this.cube_.addEventListener(bu.data_.DataEvent.STRUCTURE_LOADING_FAILED,this.structureLoadingFailedHandler),this.cube_.addEventListener(bu.data_.DataEvent.BEFORE_QUERY,this.beforeQueryHandler),this.cube_.addEventListener(bu.data_.DataEvent.QUERY_COMPLETE,this.queryCompleteHandler),this.cube_.addEventListener(bu.data_.DataEvent.QUERY_ERROR,this.queryErrorHandler),this.cube_.addEventListener(t.REPORT_CHANGED,function(){return e.dispatchReportChange()})},a.prototype.removeDataListeners=function(){this.cube_.removeEventListener(bu.data_.DataEvent.STRUCTURE_CONNECTED,this.connectedToDataSourceHandler),this.cube_.removeEventListener(bu.data_.DataEvent.STRUCTURE_LOADED,this.structureLoadedHandler),this.cube_.removeEventListener(bu.data_.DataEvent.STRUCTURE_CANCELLED,this.dataFileCancelledHandler),this.cube_.removeEventListener(bu.data_.DataEvent.STRUCTURE_LOADING_FAILED,this.structureLoadingFailedHandler),this.cube_.removeEventListener(bu.data_.DataEvent.BEFORE_QUERY,this.beforeQueryHandler),this.cube_.removeEventListener(bu.data_.DataEvent.QUERY_COMPLETE,this.queryCompleteHandler),this.cube_.removeEventListener(bu.data_.DataEvent.QUERY_ERROR,this.queryErrorHandler)},a.prototype.save=function(e,t,i,r,o){return void s.F8C===o&&(o=!s.O8C),this.reportManager.save(e,t,i,r,o,this.getReport(e instanceof Object?e:{}))},a.prototype.getCurrentState=function(t){var i=t.hasOwnProperty("withDefaults")?!s.F8C==t.withDefaults:!s.O8C;t=t.hasOwnProperty("withGlobals")?!s.F8C==t.withGlobals:!s.O8C;var r=new e.vo.StateValueObject;return r.withDefaults=i,r.withGlobals=t,r._connectionInfo=t&&this._connectionInfo.isEmpty&&!this._globalConnectionInfo.isEmpty?this._globalConnectionInfo:this._connectionInfo,r._structure=this.cube_.structure_,r._slice=this.cube_.slice_,r._options=wu._options.OptionsManager.getOptions(i,t),r.formats=wu.format.FormatManager.getAllFormats(),r.conditions=wu.condition.ConditionManager.conditions,r.customFields=wu.report.CustomFieldsManager.customFields,r.rowSizes=wu.sizes.SizesManager.rowSizesNamed,r.columnSizes=wu.sizes.SizesManager.columnSizesNamed,r.startTableRow=wu.sizes.SizesManager.startTableRow,r.rowHeaderSizes=wu.sizes.SizesManager.rowHeaderSizes,r.columnHeaderSizes=wu.sizes.SizesManager.columnHeaderSizes,r.rowFilterSizes=wu.sizes.SizesManager.rowFilterSizes,r.expandedRows=this.cube_.slice_?this.cube_.slice_.axes.getItem(bu.data_.consts.AxisName.ROWS_AXIS).expandedTuplesBasedOnUniqueNames:[],r.expandedColumns=this.cube_.slice_?this.cube_.slice_.axes.getItem(bu.data_.consts.AxisName.COLUMNS_AXIS).expandedTuplesBasedOnUniqueNames:[],r.drilledRows=this.cube_.slice_?this.cube_.slice_.axes.getItem(bu.data_.consts.AxisName.ROWS_AXIS).drilledTuplesBasedOnUniqueNames:[],r.drilledColumns=this.cube_.slice_?this.cube_.slice_.axes.getItem(bu.data_.consts.AxisName.COLUMNS_AXIS).drilledTuplesBasedOnUniqueNames:[],this.reportVO&&(r.localization=t&&s.x4C==this.reportVO.localization&&s.x4C!=this._globalLocalization?this._globalLocalization:this.reportVO.localization),r},a.prototype.spreadGlobal=function(e){this._globalConnectionInfo=e.connectionInfo,wu._options.OptionsManager.setGlobalOptions(e.options),this._globalLocalization=e.localization},a.prototype.applyEmptyState=function(){bu.data_.dataprovider_.DataProviderFactory.dispose(),wu.sizes.SizesManager.clear(),wu.condition.ConditionManager.removeAll(),wu.format.FormatManager.clear(),wu.report.CustomFieldsManager.customFields=[],wu._options.OptionsManager.clear()},a.prototype.applyReport=function(){var e;for(wu._options.OptionsManager.setOptions(this.reportVO.options),wu.sizes.SizesManager.clear(),wu.sizes.SizesManager.applySizes(this.reportVO.rowSizes,this.reportVO.columnSizes,this.reportVO.rowSizesByIdx,this.reportVO.columnSizesByIdx,this.reportVO.rowHeaderSizes,this.reportVO.columnHeaderSizes,this.reportVO.rowFilterSizes),wu.condition.ConditionManager.removeAll(),e=s.F8C;e<this.reportVO.conditions.length;e++){var t=wu.condition.vo.ConditionValueObject.fromObject(this.reportVO.conditions[e]);wu.condition.ConditionManager.add(t)}for(wu.format.FormatManager.clear(),e=s.F8C;e<this.reportVO.formats.length;e++)wu.format.FormatManager.setFormat(this.reportVO.formats[e]);wu.report.CustomFieldsManager.customFields=this.reportVO.customFields},a.prototype.dispose=function(){this.cancel(),wu.condition.ConditionManager.dispose(),wu._options.OptionsManager.dispose(),wu.printing.PrintingManager.dispose(),wu.integration.IntegrationDataManager.dispose(),wu._labels.LabelsManager.dispose(),wu.sizes.SizesManager.dispose(),wu.format.FormatManager.dispose(),wu.report.CustomFieldsManager.customFields=[],this._connectionInfo=this.reportManager=s.x4C,this.globalReport={},this.cube_=this.reportVO=this.globalReportVO=s.x4C},a}(s.EventDispatcher);e.StateManager=a}((wu=bu.model||(bu.model={}))._state||(wu._state={})),Fu=gd||(gd={}),Eu=function(){function e(){}return e.CONTENT_TYPES_XML='<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml"/><Default Extension="xml" ContentType="application/xml"/><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"/><Override PartName="/xl/theme/theme1.xml" ContentType="application/vnd.openxmlformats-officedocument.theme+xml"/><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"/><Override PartName="/xl/sharedStrings.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"/><Override PartName="/docProps/core.xml" ContentType="application/vnd.openxmlformats-package.core-properties+xml"/><Override PartName="/docProps/app.xml" ContentType="application/vnd.openxmlformats-officedocument.extended-properties+xml"/>{0}</Types>',e.CONTENT_TYPES_XML_SHEET='<Override PartName="{0}" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"/>',e._RELS='<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml"/><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/></Relationships>',e.APP_XML='<Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties" xmlns:vt="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"><Application>Microsoft Excel</Application><DocSecurity>0</DocSecurity><ScaleCrop>false</ScaleCrop><HeadingPairs><vt:vector size="2" baseType="variant"><vt:variant><vt:lpstr>Worksheets</vt:lpstr></vt:variant><vt:variant><vt:i4>3</vt:i4></vt:variant></vt:vector></HeadingPairs><TitlesOfParts><vt:vector size="3" baseType="lpstr"><vt:lpstr>Sheet1</vt:lpstr><vt:lpstr>Sheet2</vt:lpstr><vt:lpstr>Sheet3</vt:lpstr></vt:vector></TitlesOfParts><Company>Amazon.com</Company><LinksUpToDate>false</LinksUpToDate><SharedDoc>false</SharedDoc><HyperlinksChanged>false</HyperlinksChanged><AppVersion>14.0300</AppVersion></Properties>',e.CORE_XML='<cp:coreProperties xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:dcmitype="http://purl.org/dc/dcmitype/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><dc:creator>EC2</dc:creator><cp:lastModifiedBy>EC2</cp:lastModifiedBy><dcterms:created xsi:type="dcterms:W3CDTF">2010-12-22T15:19:38Z</dcterms:created><dcterms:modified xsi:type="dcterms:W3CDTF">2010-12-22T15:20:08Z</dcterms:modified></cp:coreProperties>',e.WORKBOOK_XML='<workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><fileVersion appName="xl" lastEdited="5" lowestEdited="5" rupBuild="9302"/><workbookPr defaultThemeVersion="124226"/><bookViews><workbookView xWindow="360" yWindow="210" windowWidth="16860" windowHeight="9150"/></bookViews><sheets>{0}</sheets><calcPr calcId="144525"/></workbook>',e.WORKBOOK_XML_RELS='<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme" Target="theme/theme1.xml"/>{0}</Relationships>',e.WORKBOOK_XML_RELS_SHEET='<Relationship Id="{0}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="{1}"/>',e.THEME='<a:theme name="Office Theme" xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main"><a:themeElements><a:clrScheme name="Office"><a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1><a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1><a:dk2><a:srgbClr val="1F497D"/></a:dk2><a:lt2><a:srgbClr val="EEECE1"/></a:lt2><a:accent1><a:srgbClr val="4F81BD"/></a:accent1><a:accent2><a:srgbClr val="C0504D"/></a:accent2><a:accent3><a:srgbClr val="9BBB59"/></a:accent3><a:accent4><a:srgbClr val="8064A2"/></a:accent4><a:accent5><a:srgbClr val="4BACC6"/></a:accent5><a:accent6><a:srgbClr val="F79646"/></a:accent6><a:hlink><a:srgbClr val="0000FF"/></a:hlink><a:folHlink><a:srgbClr val="800080"/></a:folHlink></a:clrScheme><a:fontScheme name="Office"><a:majorFont><a:latin typeface="Cambria"/><a:ea typeface=""/><a:cs typeface=""/><a:font script="Jpan" typeface=" "/><a:font script="Hang" typeface=" "/><a:font script="Hans" typeface=""/><a:font script="Hant" typeface=""/><a:font script="Arab" typeface="Times New Roman"/><a:font script="Hebr" typeface="Times New Roman"/><a:font script="Thai" typeface="Tahoma"/><a:font script="Ethi" typeface="Nyala"/><a:font script="Beng" typeface="Vrinda"/><a:font script="Gujr" typeface="Shruti"/><a:font script="Khmr" typeface="MoolBoran"/><a:font script="Knda" typeface="Tunga"/><a:font script="Guru" typeface="Raavi"/><a:font script="Cans" typeface="Euphemia"/><a:font script="Cher" typeface="Plantagenet Cherokee"/><a:font script="Yiii" typeface="Microsoft Yi Baiti"/><a:font script="Tibt" typeface="Microsoft Himalaya"/><a:font script="Thaa" typeface="MV Boli"/><a:font script="Deva" typeface="Mangal"/><a:font script="Telu" typeface="Gautami"/><a:font script="Taml" typeface="Latha"/><a:font script="Syrc" typeface="Estrangelo Edessa"/><a:font script="Orya" typeface="Kalinga"/><a:font script="Mlym" typeface="Kartika"/><a:font script="Laoo" typeface ="DokChampa"/><a:font script="Sinh" typeface="Iskoola Pota"/><a:font script="Mong" typeface="Mongolian Baiti"/><a:font script="Viet" typeface="Times New Roman"/><a:font script="Uigh" typeface="Microsoft Uighur"/></a:majorFont><a:minorFont><a:latin typeface="Calibri"/><a:ea typeface=""/><a:cs typeface=""/><a:font script="Jpan" typeface=" "/><a:font script="Hang" typeface=" "/><a:font script="Hans" typeface=""/><a:font script="Hant" typeface=""/><a:font script="Arab" typeface="Arial"/><a:font script="Hebr" typeface="Arial"/><a:font script="Thai" typeface="Tahoma"/><a:font script="Ethi" typeface="Nyala"/><a:font script="Beng" typeface="Vrinda"/><a:font script="Gujr" typeface="Shruti"/><a:font script="Khmr" typeface="DaunPenh"/><a:font script="Knda" typeface="Tunga"/><a:font script="Guru" typeface="Raavi"/><a:font script="Cans" typeface="Euphemia"/><a:font script="Cher" typeface="Plantagenet Cherokee"/><a:font script="Yiii" typeface="Microsoft Yi Baiti"/><a:font script="Tibt" typeface="Microsoft Himalaya"/><a:font script="Thaa" typeface="MV Boli"/><a:font script="Deva" typeface="Mangal"/><a:font script="Telu" typeface="Gautami"/><a:font script="Taml" typeface="Latha"/><a:font script="Syrc" typeface="Estrangelo Edessa"/><a:font script="Orya" typeface="Kalinga"/><a:font script="Mlym" typeface="Kartika"/><a:font script="Laoo" typeface ="DokChampa"/><a:font script="Sinh" typeface="Iskoola Pota"/><a:font script="Mong" typeface="Mongolian Baiti"/><a:font script="Viet" typeface="Arial"/><a:font script="Uigh" typeface="Microsoft Uighur"/></a:minorFont></a:fontScheme><a:fmtScheme name="Office"><a:fillStyleLst><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs><a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs></a:gsLst><a:lin ang="16200000" scaled="1"/></a:gradFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:shade val="51000"/><a:satMod val="130000"/></a:schemeClr></a:gs><a:gs pos="80000"><a:schemeClr val="phClr"><a:shade val="93000"/><a:satMod val="130000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="94000"/><a:satMod val="135000"/></a:schemeClr></a:gs></a:gsLst><a:lin ang="16200000" scaled="0"/></a:gradFill></a:fillStyleLst><a:lnStyleLst><a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln><a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln><a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln></a:lnStyleLst><a:effectStyleLst><a:effectStyle><a:effectLst><a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw></a:effectLst></a:effectStyle><a:effectStyle><a:effectLst><a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw></a:effectLst></a:effectStyle><a:effectStyle><a:effectLst><a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw></a:effectLst><a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d><a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d></a:effectStyle></a:effectStyleLst><a:bgFillStyleLst><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs><a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs></a:gsLst><a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path></a:gradFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs></a:gsLst><a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path></a:gradFill></a:bgFillStyleLst></a:fmtScheme></a:themeElements><a:objectDefaults><a:spDef><a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style></a:spDef><a:lnDef><a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style></a:lnDef></a:objectDefaults><a:extraClrSchemeLst/></a:theme>',e.STYLES_XML='<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac">{0}<fonts count="{1}" x14ac:knownFonts="1"><font><sz val="11"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font>{2}</fonts><fills count="{3}">{4}</fills><borders count="2"><border><left/><right/><top/><bottom/><diagonal/></border><border><left style="thin"><color theme="0" tint="-0.14996795556505021"/></left><right style="thin"><color theme="0" tint="-0.14996795556505021"/></right><top style="thin"><color theme="0" tint="-0.14996795556505021"/></top><bottom style="thin"><color theme="0" tint="-0.14996795556505021"/></bottom><diagonal/></border></borders><cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs><cellXfs count="{5}"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" xfId="0"/>{6}</cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles><dxfs count="0"/><tableStyles count="0" defaultTableStyle="TableStyleMedium2" defaultPivotStyle="PivotStyleLight16"/><extLst><ext uri="{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}" xmlns:x14="http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"><x14:slicerStyles defaultSlicerStyle="SlicerStyleLight1"/></ext></extLst></styleSheet>',e.SHARED_STRING_XML='<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" count="5" uniqueCount="5">{0}</sst>',e.SHEET_XML='<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><dimension ref="{0}"/><sheetViews><sheetView tabSelected="1" workbookViewId="0"><selection activeCell="A1" sqref="A1"/></sheetView></sheetViews><sheetFormatPr defaultRowHeight="15" defaultColWidth="15" x14ac:dyDescent="0.25"/><cols>{1}</cols><sheetData>{2}</sheetData>{3}<pageMargins left="0.7" right="0.7" top="0.75" bottom="0.75" header="0.3" footer="0.3"/></worksheet>',e.XML_HEADER='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>',e}(),Fu.XLSTemplates=Eu,Ou=De||(De={}),Su=Ou.data_||(Ou.data_={}),Tu=function(e){function i(){var o=e.call(this)||this;if(o.queryType=Su.consts.QueryType.SELECT,r.x4C!=i.instance)throw Error(t.D5C);return o}return Ga(i,e),i.getInstance=function(){return void r.F8C==i.instance&&(i.instance=new i),i.instance},i.prototype.setSlice=function(e){e.isEmpty&&Ou.model._options.OptionsManager.showDefaultSlice&&e.makeDefault(),e&&!e.isEqual(this.slice_)&&this.dispatchWith("slice_changed"),this.slice_=e},i.prototype.rebaseConnection=function(){this.structure_&&(this.structure_.isComplete=!r.O8C,this.removeAllCalculatedMeasures());for(var e=this.structure_.allHierarchies(!r.O8C),t=r.F8C;t<e.length;t++){var i=e.getItemAt(t);i.clearFilter(),i.clearSort(Ou.model._options.OptionsManager.flatView)}this.slice_&&this.slice_.clear(),this.dispatchStructureLoaded()},i.prototype.connect=function(e){var t=this;Be.nullOrUndefined(this.__structureLoader)||this.__structureLoader.cancel(),this.__structureLoader=Su.StructureLoaderFactory.getStructureLoader(e),this.__structureLoader.load(e,function(){return t.dispatchStructureLoaded()},function(){t.dispatchWith(Su.DataEvent.STRUCTURE_LOADING_FAILED)},function(){t.cancel(!r.O8C),t.connectionInfo_=e,t.structureLoader=t.__structureLoader,t.localDataStorage=new Su.LocalDataStorage(t),t.__structureLoader=r.x4C,t.localDataStorage.datePattern=Ou.model._options.OptionsManager.datePattern,t.localDataStorage.dateTimePattern=Ou.model._options.OptionsManager.dateTimePattern,r.x4C!=t.structure_&&t.structure_.clear(),t.structure_=new Su._structure.GenericStructure,t.structure_.localDataStorage=t.localDataStorage,t.dispatchWith(Su.DataEvent.STRUCTURE_CONNECTED)},function(){t.dispatchWith(Su.DataEvent.STRUCTURE_CANCELLED)})},i.prototype.dispatchStructureLoaded=function(){this.structure_.isComplete=!r.F8C,this.dispatchWith(Su.DataEvent.STRUCTURE_LOADED)},i.prototype.cancel=function(e){var t=r;void t.F8C===e&&(e=!t.F8C),Be.ThreadManager.isRunning()&&Be.ThreadManager.cancel(),this.structureLoader&&(this.structureLoader.cancel(),this.structureLoader=t.x4C),e&&this.structure_&&(this.structure_.clear(),this.structure_=t.x4C),e&&this.slice_&&(this.slice_.clear(),this.slice_=t.x4C),e&&this.localDataStorage&&(this.localDataStorage.clearAll(),this.localDataStorage=t.x4C)},i.prototype.dispatchQueryComplete=function(){var e=new Su.QueryCompleteEvent(this.queryType);this.dispatch(e)},i.prototype.dispatchQueryError=function(){this.dispatchWith(Su.DataEvent.QUERY_ERROR)},i.prototype.filter=function(){this.queryType=Su.consts.QueryType.FILTER,this.select()},i.prototype.clearSortValues=function(e){e.sortMeasure=r.x4C,e.sortTuple=r.x4C,e.sortType=Su.consts.SortType.UNSORTED,e.totalSortType=Su.consts.SortType.UNSORTED,e.totalSortMeasure=r.x4C},i.prototype.sort=function(){this.dispatchQueryComplete()},i.prototype.expand=function(e,t,i,o){var s=r;void s.F8C===i&&(i=s.x4C),void s.F8C===o&&(o=!s.F8C),this._tuple=e,this._axisName=t,this._measure=i,this.queryType=Su.consts.QueryType.EXPAND;var n=new Su.BeforeQueryEvent(Su.consts.QueryType.EXPAND);this.dispatch(n),this.localDataStorage.expand(e,t,i),o&&this.dispatchQueryComplete()},i.prototype.collapse=function(e,t,i,o){var s=r;void s.F8C===i&&(i=s.x4C),void s.F8C===o&&(o=!s.F8C),this.localDataStorage.collapse(e,t,i),this.query=new Su.Query,this.queryType=this.query.type=Su.consts.QueryType.COLLAPSE,o&&this.dispatchQueryComplete()},i.prototype.drillDown=function(e,t,i,o){void r.F8C===o&&(o=r.x4C),this._tuple=e,this._axisName=i,this._measure=o,this._member=t,this._levelName=void r.F8C,t.hierarchy_.drillDownMember(t),this.queryType=Su.consts.QueryType.DRILL_DOWN;var s=new Su.BeforeQueryEvent(Su.consts.QueryType.DRILL_DOWN);this.dispatch(s),this.localDataStorage.drillDown(e,t,i,o),this.dispatchQueryComplete()},i.prototype.drillUp=function(e,t,i,o){void r.F8C===o&&(o=r.x4C),t.hierarchy_.drillUpMember(t),this.localDataStorage.drillUp(e,t,i,o),this.query=new Su.Query,this.queryType=this.query.type=Su.consts.QueryType.DRILL_UP,e=new Su.BeforeQueryEvent(Su.consts.QueryType.DRILL_UP),this.dispatch(e),this.dispatchQueryComplete()},i.prototype.select=function(){var e=new Su.BeforeQueryEvent(this.queryType==Su.consts.QueryType.FILTER?this.queryType:Su.consts.QueryType.SELECT);for(this.dispatch(e),e=r.F8C;e<this.slice_.pages.length;e++)this.slice_.pages.getItemAt(e).clearValuesFilter();this.structure_.measures_.length>this.localDataStorage.factKeys.length&&this.addCalculatedMeasuresToDataStorage(),this.localDataStorage.filter(),this.localDataStorage.select(),this.dispatchQueryComplete()},i.prototype.addCalculatedMeasuresToDataStorage=function(){for(var e=r,t=e.F8C;t<this.structure_.measures_.length;t++){var i=this.structure_.measures_.getItemAt(t);if(i.calculated){for(var o=!e.F8C,s=e.F8C;s<this.localDataStorage.factKeys.length;s++)this.localDataStorage.factKeys[s].toString()==i.uniqueName&&(o=!e.O8C);o&&this.localDataStorage.addFactKey(i.uniqueName,i.params,i.individual)}}this.slice_.axisWithMeasures.sortToSet&&(t=this.slice_.axisWithMeasures.sortToSet,(i=this.structure_.findMeasure(t.measure))&&this.slice_.axisWithMeasures.setSort(i,t.tuple,t.type))},i.prototype.addCalculatedMeasure=function(e){if(r.x4C==this.structure_.findMeasure(e.uniqueName)){if(e.calculated){var t=new Be.Lexer;e.params=t.parse(e.formula)}e.calculated&&r.x4C==e.params||(this.structure_.measuresHierarchy&&this.structure_.addMeasure(e),e.calculated?this.localDataStorage.addFactKey(e.uniqueName,e.params,e.individual):this.localDataStorage.addFactKey(e.uniqueName),this.structure_.isComplete&&this.refresh())}else t=new Be.Lexer,e.params=t.parse(e.formula),e.calculated&&r.x4C==e.params||(this.localDataStorage.updateFactKey(e.uniqueName,e.params,e.individual),(t=this.structure_.findMeasure(e.uniqueName)).caption=e.caption,t.formula=e.formula,t.individual=e.individual,t.params=e.params,this.structure_.isComplete&&this.refresh())},i.prototype.removeCalculatedMeasure=function(e,t){void r.F8C===t&&(t=!r.F8C);var i=this.structure_.findMeasure(e);i&&i.calculated&&(this.structure_.removeMeasure(e),this.localDataStorage.removeFactKey(e),this.slice_.removeMeasure(e),t&&this.structure_.isComplete&&this.refresh())},i.prototype.removeAllCalculatedMeasures=function(){for(var e=r.F8C;e<this.structure_.measures_.length;){var t=this.structure_.measures_.getItemAt(e);t.calculated?this.removeCalculatedMeasure(t.uniqueName,!r.O8C):e++}this.structure_.isComplete&&this.refresh()},i.prototype.refresh=function(){this.structure_.isComplete?(this.connectionInfo_.dataSourceType==Su.consts.DataSourceType.EMPTY&&Be.nullOrUndefined(this.slice_)&&this.dispatchStructureLoaded(),this.filter()):this.connectionInfo_.dataSourceType==Su.consts.DataSourceType.EMPTY&&this.dispatchStructureLoaded()},i.prototype.loadMemberChildren=function(e,t,i){var r=this;this.structureLoader.loadMemberChildren(e,t,i,function(){return r.dispatchQueryError()})},i.prototype.updateData=function(e){this.structureLoader.updateData(e),this.dispatchStructureLoaded()},i.prototype.dispose=function(){var e=r;Be.ThreadManager.dispose();try{this.structure_.clear()}catch(e){}this.slice_=this.structure_=e.x4C;try{this.localDataStorage.clearAll()}catch(e){}this.localDataStorage=e.x4C;try{this.structureLoader.cancel()}catch(e){}this.structureLoader=e.x4C;try{this.__structureLoader.cancel()}catch(e){}this.__structureLoader=e.x4C,i.instance=e.x4C},i.MEASURES_NAME="Measures",i}(s.EventDispatcher),Su.Cube=Tu,function(e){var o=function(){var o=r;function n(i,r){var a,l=this;(this.isCreationComplete=!o.O8C,this.api=o.x4C,this.delayedApiCallsOnReportDefined=[],this.delayedApiCallsOnReportReady=[],o.x4C!=n.instance&&n.instance.dispose(),n.instance=this,this.api=r,Be.nullOrUndefined(i)&&(i={}),!o.O8C!=Be.isHTML5Supported()||!o.O8C!=confirm("WebDataRocks Reporting Component is not completely supported by this version of browser. Please update your browser. Continue anyway?"))&&(i.container instanceof HTMLElement?a=i.container:Be.nullOrUndefined(i.container)||(a=t.R7C==i.container.substr(o.F8C,o.O8C)?i.container.substring(o.O8C):i.container,a=document.getElementById(a)),o.x4C==a?(a=!o.O8C==Be.nullOrEmpty(i.container)?"WebDataRocks Reporting Component:\nUnable to create the component. DOM element with id '"+i.container+"' is not found.":"WebDataRocks Reporting Component:\nUnable to create the component. DOM element is null.",console.error(a),alert(a)):(this.model_=e.model.PivotModel.getInstance(),this.model_.state_.addEventListener(e.model._state.StateEvent.OPENING_REPORT_FILE,function(){return l.onOpeningReportFile()}),this.model_.state_.addEventListener(e.model._state.StateEvent.LOADING_REPORT_FILE,function(){return l.onLoadingReportFile()}),this.model_.state_.addEventListener(e.model._state.StateEvent.REPORT_FILE_LOADED,function(){return l.onReportFileLoaded()}),this.model_.state_.addEventListener(e.model._state.StateEvent.REPORT_FILE_ERROR,function(){return l.onReportFileError()}),this.model_.state_.addEventListener(e.model._state.StateEvent.REPORT_FILE_CANCELLED,function(){return l.onReportFileCancelled()}),this.model_.state_.addEventListener(e.model._state.StateEvent.REPORT_DEFINED,function(){return l.onReportDefined()}),this.model_.state_.addEventListener(e.model._state.StateEvent.LOADING_DATA,function(){return l.onLoadingData()}),this.model_.state_.addEventListener(e.model._state.StateEvent.DATA_LOADED,function(){return l.onDataLoaded()}),this.model_.state_.addEventListener(e.model._state.StateEvent.DATA_ERROR,function(){return l.onDataError()}),this.model_.state_.addEventListener(e.model._state.StateEvent.DATA_FILE_CANCELLED,function(){return l.onDataFileCancelled()}),this.model_.state_.addEventListener(e.model._state.StateEvent.LOADING_LOCALIZATION,function(){return l.onLoadingLocalization()}),this.model_.state_.addEventListener(e.model._state.StateEvent.LOCALIZATION_LOADED,function(){return l.onLocalizationLoaded()}),this.model_.state_.addEventListener(e.model._state.StateEvent.LOCALIZATION_ERROR,function(){return l.onLocalizationError()}),this.model_.state_.addEventListener(e.model._state.StateEvent.EMPTY_SLICE,function(){return l.onEmptySlice()}),this.model_.state_.addEventListener(e.model._state.StateEvent.RUNNING_QUERY,function(){return l.onRunningQuery()}),this.model_.state_.addEventListener(e.model._state.StateEvent.QUERY_COMPLETE,function(){return l.onQueryComplete()}),this.model_.state_.addEventListener(e.model._state.StateEvent.QUERY_ERROR,function(){return l.onQueryError()}),this.model_.state_.addEventListener(e.model._state.StateEvent.REPORT_COMPLETE,function(){return l.onReportComplete()}),this.model_.addEventListener(s.EXPORT,function(){return l.onExportStart()}),this.model_.addEventListener(s.EXPORT_COMPLETE,function(){return l.onExportComplete()}),this.model_.addEventListener(s.PRINT,function(){return l.onPrintStart()}),this.model_.addEventListener(s.PRINT_COMPLETE,function(){return l.onPrintComplete()}),this.view_=new e._view.PivotView(h.UIElement.convert(a),i),this.view_.addEventListener(e._view.ViewEvent.BEFORE_GRID_DRAW,function(e){return l.onBeforeGridDraw(e)}),this.view_.addEventListener(e._view.ViewEvent.RENDER_COMPLETE,function(){return l.onRenderComplete()}),this.model_.init(i),this.isCreationComplete=!o.F8C))}return Object.defineProperty(n.prototype,i.v8x,{get:function(){return this.model_&&this.model_.state_&&this.model_.state_.isReportComplete},enumerable:!o.F8C,configurable:!o.F8C}),Object.defineProperty(n.prototype,i.G8x,{get:function(){return this.model_&&this.model_.state_&&this.model_.state_.isReportDefined},enumerable:!o.F8C,configurable:!o.F8C}),n.prototype.runDelayedCalls=function(){var e=this;Be.fmSetTimeout(function(){for(;o.F8C<e.delayedApiCallsOnReportReady.length;)e.delayedApiCallsOnReportReady.shift().call(e)},o.O8C)},n.prototype.delayApiCall=function(e,t){void o.F8C===t&&(t=o.O8C),o.F8C==t?this.delayedApiCallsOnReportDefined.push(e):this.delayedApiCallsOnReportReady.push(e)},n.prototype.onOpeningReportFile=function(){e.model.JavaScriptHandlers.getInstance().dispatch(new e.model.APIEvent(e.model.JavaScriptHandlers.OPENING_REPORT_FILE))},n.prototype.onLoadingReportFile=function(){e.model.JavaScriptHandlers.getInstance().dispatch(new e.model.APIEvent(e.model.JavaScriptHandlers.LOADING_REPORT_FILE))},n.prototype.onReportFileLoaded=function(){e.model.JavaScriptHandlers.getInstance().dispatch(new e.model.APIEvent(e.model.JavaScriptHandlers.REPORT_FILE_LOADED))},n.prototype.onReportFileError=function(){e.model.JavaScriptHandlers.getInstance().dispatch(new e.model.APIEvent(e.model.JavaScriptHandlers.REPORT_FILE_ERROR))},n.prototype.onReportFileCancelled=function(){e.model.JavaScriptHandlers.getInstance().dispatch(new e.model.APIEvent(e.model.JavaScriptHandlers.REPORT_FILE_CANCELLED))},n.prototype.onReportDefined=function(){for(this.model_.state_.reportType==e.model._state.ReportType.INIT&&Be.fmSetTimeout(function(){e.model.JavaScriptHandlers.getInstance().dispatch(new e.model.APIEvent(e.model.JavaScriptHandlers.READY))},o.O8C);o.F8C<this.delayedApiCallsOnReportDefined.length;)this.delayedApiCallsOnReportDefined.shift().call(this)},n.prototype.onLoadingLocalization=function(){e.model.JavaScriptHandlers.getInstance().dispatch(new e.model.APIEvent(e.model.JavaScriptHandlers.LOADING_LOCALIZATION))},n.prototype.onLocalizationLoaded=function(){e.model.JavaScriptHandlers.getInstance().dispatch(new e.model.APIEvent(e.model.JavaScriptHandlers.LOCALIZATION_LOADED))},n.prototype.onLocalizationError=function(){e.model.JavaScriptHandlers.getInstance().dispatch(new e.model.APIEvent(e.model.JavaScriptHandlers.LOCALIZATION_ERROR))},n.prototype.onLoadingData=function(){e.model.JavaScriptHandlers.getInstance().dispatch(new e.model.APIEvent(e.model.JavaScriptHandlers.LOADING_DATA))},n.prototype.onDataLoaded=function(){e.model.JavaScriptHandlers.getInstance().dispatch(new e.model.APIEvent(e.model.JavaScriptHandlers.DATA_LOADED))},n.prototype.onDataFileCancelled=function(){e.model.JavaScriptHandlers.getInstance().dispatch(new e.model.APIEvent(e.model.JavaScriptHandlers.DATA_FILE_CANCELLED))},n.prototype.onDataError=function(){e.model.JavaScriptHandlers.getInstance().dispatch(new e.model.APIEvent(e.model.JavaScriptHandlers.DATA_ERROR))},n.prototype.onEmptySlice=function(){},n.prototype.onRunningQuery=function(){e.model.JavaScriptHandlers.getInstance().dispatch(new e.model.APIEvent(e.model.JavaScriptHandlers.RUNNING_QUERY))},n.prototype.onQueryComplete=function(){e.model.JavaScriptHandlers.getInstance().dispatch(new e.model.APIEvent(e.model.JavaScriptHandlers.QUERY_COMPLETE)),e.model.JavaScriptHandlers.getInstance().dispatch(new e.model.APIEvent(e.model.JavaScriptHandlers.UPDATE))},n.prototype.onQueryError=function(){e.model.JavaScriptHandlers.getInstance().dispatch(new e.model.APIEvent(e.model.JavaScriptHandlers.QUERY_ERROR))},n.prototype.onReportComplete=function(){},n.prototype.onBeforeGridDraw=function(t){e.model.JavaScriptHandlers.getInstance().dispatch(new e.model.APIEvent(e.model.JavaScriptHandlers.BEFORE_GRID_DRAW,t.data))},n.prototype.onRenderComplete=function(){var t=this;this.isReportComplete&&this.model_.state_.reportType!=e.model._state.ReportType.COMPLETE&&Be.fmSetTimeout(function(){t.runDelayedCalls(),t.model_.state_.reportType=e.model._state.ReportType.COMPLETE,e.model.JavaScriptHandlers.getInstance().dispatch(new e.model.APIEvent(e.model.JavaScriptHandlers.REPORT_COMPLETE))},o.O8C)},n.prototype.onExportStart=function(){e.model.JavaScriptHandlers.getInstance().dispatch(new e.model.APIEvent(e.model.JavaScriptHandlers.EXPORT_START))},n.prototype.onExportComplete=function(){Be.fmSetTimeout(function(){e.model.JavaScriptHandlers.getInstance().dispatch(new e.model.APIEvent(e.model.JavaScriptHandlers.EXPORT_COMPLETE))},o.O8C)},n.prototype.onPrintStart=function(){e.model.JavaScriptHandlers.getInstance().dispatch(new e.model.APIEvent(e.model.JavaScriptHandlers.PRINT_START))},n.prototype.onPrintComplete=function(){Be.fmSetTimeout(function(){e.model.JavaScriptHandlers.getInstance().dispatch(new e.model.APIEvent(e.model.JavaScriptHandlers.PRINT_COMPLETE))},o.O8C)},n.prototype.getAllConditions=function(){return this.isReportComplete?this.model_.getAllConditions():o.x4C},n.prototype.getCondition=function(e){return this.isReportComplete?this.model_.getCondition(e):o.x4C},n.prototype.addCondition=function(e){var t=this;this.isReportComplete?o.x4C!=e&&this.model_.addCondition(e):this.delayApiCall(function(){return t.addCondition(e)})},n.prototype.removeCondition=function(e){var t=this;this.isReportComplete?this.model_.removeCondition(e):this.delayApiCall(function(){return t.removeCondition(e)})},n.prototype.removeAllConditions=function(){var e=this;this.isReportComplete?this.model_.removeAllConditions():this.delayApiCall(function(){return e.removeAllConditions()})},n.prototype.open=function(){this.model_.open()},n.prototype.load=function(e){this.model_.load(e)},n.prototype.getReport=function(e){return this.model_.getReport(e).toObject()},n.prototype.setReport=function(t){if(o.K2C==typeof t)try{t=JSON.parse(t)}catch(t){return void e.uialert(e.model._labels.Labels.MESSAGE_INVALID_REPORT_FORMAT,e.model._labels.Labels.ERROR,e.AlertType.ERROR)}this.model_.setReport({report:t})},n.prototype.getData=function(e,t,i){var r=this;this.isReportComplete?this.model_.getData(e,t,i):this.delayApiCall(function(){return r.getData(e,t,i)})},n.prototype.save=function(i,r,s,n,a){var l=this;void o.F8C===i&&(i={filename:t.R8B}),void o.F8C===r&&(r=o.x4C),void o.F8C===s&&(s=o.x4C),void o.F8C===n&&(n=o.x4C),void o.F8C===a&&(a=!o.O8C);var h=s;this.isReportComplete?(i instanceof Object&&i.hasOwnProperty("callbackHandler")&&(h=i.callbackHandler),o.x4C!=h&&o.K2C==typeof h&&(h=e.model.JavaScriptHandlers.getFunctionByName(h)),this.model_.save(i,r,o.x4C!=h?function(e){return h(e)}:o.x4C,n,a)):this.delayApiCall(function(){return l.save(i,r,s,n,a)})},n.prototype.updateData=function(e,i){var r=this;o.x4C!=e&&(Be.nullOrUndefined(i)?i={partial:!o.O8C}:t.k5C==typeof i&&(i={partial:i}),this.isReportDefined?this.model_.updateData(e,i):this.delayApiCall(function(){return r.updateData(e,i)},o.F8C))},n.prototype.connectTo=function(e){var t=this;o.x4C!=e&&(this.isReportDefined?this.model_.connectTo(e):this.delayApiCall(function(){return t.connectTo(e)},o.F8C))},n.prototype.addCalculatedMeasure=function(t){var i=this;this.isReportComplete?o.x4C!=t&&this.model_.addCalculatedMeasure(e.data_._structure.GenericMeasure.fromObject(t)):this.delayApiCall(function(){return i.addCalculatedMeasure(t)})},n.prototype.removeCalculatedMeasure=function(e){var t=this;this.isReportComplete?this.model_.removeCalculatedMeasure(e):this.delayApiCall(function(){return t.removeCalculatedMeasure(e)})},n.prototype.removeAllCalculatedMeasures=function(){var e=this;this.isReportComplete?this.model_.removeAllCalculatedMeasures():this.delayApiCall(function(){return e.removeAllCalculatedMeasures()})},n.prototype.clear=function(){var e=this;this.isReportComplete?this.model_.clear():this.delayApiCall(function(){return e.clear()})},n.prototype.dispose=function(){Be.fmdocument.dispose(),Be.fmwindow.dispose(),Be.Timers.dispose(),this.model_.dispose(),this.view_.dispose(),this.model_=this.view_=o.x4C,n.instance=o.x4C,e.model.JavaScriptHandlers.dispose()},n.prototype.refresh=function(){var e=this;this.isReportComplete?this.view_.draw():this.delayApiCall(function(){return e.refresh()})},n.prototype.expandAllData=function(e){var t=this;void o.F8C===e&&(e=!o.F8C),this.isReportComplete?this.model_.expandAllData(e):this.delayApiCall(function(){return t.expandAllData(e)})},n.prototype.expandData=function(e){var t=this;this.isReportComplete?this.model_.expandData(e):this.delayApiCall(function(){return t.expandData(e)})},n.prototype.collapseAllData=function(){var e=this;this.isReportComplete?this.model_.collapseAllData():this.delayApiCall(function(){return e.collapseAllData()})},n.prototype.collapseData=function(e){var t=this;this.isReportComplete?this.model_.collapseData(e):this.delayApiCall(function(){return t.collapseData(e)})},n.prototype.print=function(t){var i=this;void o.F8C===t&&(t=o.x4C),this.isReportComplete?this.model_.print(e.model.printing.PrintOptions.fromObject(t)):this.delayApiCall(function(){return i.print(t)})},n.prototype.exportTo=function(t,i,r){var s=this;if(void o.F8C===i&&(i=o.x4C),void o.F8C===r&&(r=o.x4C),this.isReportComplete){if(o.x4C!=t){o.x4C!=r&&o.K2C==typeof r&&(r=e.model.JavaScriptHandlers.getFunctionByName(r));var n=o.x4C!=r?function(){for(var e=[],t=o.F8C;t<arguments.length;t++)e[t]=arguments[t];return r.apply(o.x4C,e)}:o.x4C;this.model_.exportTo(t,e.model._export.ExportOptions.fromObject(i),n)}}else this.delayApiCall(function(){return s.exportTo(t,i,r)})},n.prototype.getFilter=function(e){return this.isReportComplete?this.model_.getFilter(e):o.x4C},n.prototype.getFilterProperties=function(e){return this.isReportComplete?this.model_.getFilterProperties(e):o.x4C},n.prototype.setFilter=function(e,t,i){var r=this;void o.F8C===i&&(i=!o.O8C),this.isReportComplete?this.model_.setFilter(e,t,i):this.delayApiCall(function(){return r.setFilter(e,t,i)})},n.prototype.clearFilter=function(e){var t=this;this.isReportComplete?this.model_.clearFilter(e):this.delayApiCall(function(){return t.clearFilter(e)})},n.prototype.on=function(t,i){o.K2C==typeof i&&(i=e.model.JavaScriptHandlers.getFunctionByName(i)),e.model.JavaScriptHandlers.getInstance().addEventListener(t,i)},n.prototype.off=function(t,i){o.K2C==typeof i&&(i=e.model.JavaScriptHandlers.getFunctionByName(i)),o.x4C==i?e.model.JavaScriptHandlers.getInstance().removeAllEventListeners(t):e.model.JavaScriptHandlers.getInstance().removeEventListener(t,i)},n.prototype.getRows=function(){return this.isReportComplete?this.model_.getRows():o.x4C},n.prototype.getColumns=function(){return this.isReportComplete?this.model_.getColumns():o.x4C},n.prototype.getPages=function(){return this.isReportComplete?this.model_.getPages():o.x4C},n.prototype.getMeasures=function(){return this.isReportComplete?this.model_.getMeasures():o.x4C},n.prototype.getAllMeasures=function(){return this.isReportComplete?this.model_.getAllMeasures():o.x4C},n.prototype.sortValues=function(e,t,i,r){var o=this;this.isReportComplete?this.model_.sortValues(e,t,i,r):this.delayApiCall(function(){return o.sortValues(e,t,i,r)})},n.prototype.setSort=function(e,t){var i=this;this.isReportComplete?this.model_.setSort(e,t):this.delayApiCall(function(){return i.setSort(e,t)})},n.prototype.getSort=function(e){return this.isReportComplete?this.model_.getSort(e):o.x4C},n.prototype.setTopX=function(e,t,i){var r=this;this.isReportComplete?this.model_.setTopX(e,t,i):this.delayApiCall(function(){return r.setTopX(e,t,i)})},n.prototype.setBottomX=function(e,t,i){var r=this;this.isReportComplete?this.model_.setBottomX(e,t,i):this.delayApiCall(function(){return r.setBottomX(e,t,i)})},n.prototype.getOptions=function(){return this.isReportComplete?this.model_.getOptions():o.x4C},n.prototype.setOptions=function(e){var t=this;this.isReportComplete?this.model_.setOptions(e):this.delayApiCall(function(){return t.setOptions(e)})},n.prototype.getMembers=function(t,i,r){var s=this;if(this.isReportComplete)return o.K2C==typeof r&&(r=e.model.JavaScriptHandlers.getFunctionByName(r)),this.model_.getMembers(t,i,r);this.delayApiCall(function(){return s.getMembers(t,i,r)})},n.prototype.runQuery=function(e){var t=this;this.isReportComplete?o.x4C!=e&&this.model_.runQuery(e):this.delayApiCall(function(){return t.runQuery(e)})},n.prototype.getAllHierarchies=function(){return this.isReportComplete?this.model_.getAllHierarchies():o.x4C},n.prototype.replaceHierarchyCaption=function(e){var t=this;this.isReportComplete?this.model_.replaceHierarchyCaption(e):this.delayApiCall(function(){return t.replaceHierarchyCaption(e)})},n.prototype.getFormat=function(e){return this.isReportComplete?this.model_.getFormat(e):o.x4C},n.prototype.setFormat=function(e,t){var i=this;this.isReportComplete?o.x4C!=e&&this.model_.setFormat(e,t):this.delayApiCall(function(){return i.setFormat(e,t)})},n.prototype.getCell=function(e,t){return this.isReportComplete?this.view_.getCell(e,t):o.x4C},n.prototype.getSelectedCell=function(){return this.isReportComplete?this.view_.getSelectedCell():o.x4C},n.prototype.setSelectedCell=function(e,t){var i=this;this.isReportComplete?this.view_.setSelectedCell(e,t):this.delayApiCall(function(){return i.setSelectedCell(e,t)})},n.prototype.removeSelection=function(){var e=this;this.isReportComplete?this.view_.removeSelection():this.delayApiCall(function(){return e.removeSelection()})},n.prototype.openFieldsList=function(){var e=this;this.isCreationComplete?this.view_.openFieldsList():this.delayApiCall(function(){return e.openFieldsList()})},n.prototype.closeFieldsList=function(){var e=this;this.isCreationComplete?this.view_.closeFieldsList():this.delayApiCall(function(){return e.closeFieldsList()})},n.prototype.customizeCell=function(t){e._view.grid.vo.GridCell.customizeCellFunction=t,this.isCreationComplete&&this.refresh()},n.BUILD_VERSION="Version 1.0.2",n.BUILD_DATE="93973261726688",n}();e.Pivot=o;var s=function(){function e(){}return e.PRINT="print",e.PRINT_COMPLETE=t.W8Q,e.EXPORT=t.M1B,e.EXPORT_COMPLETE=t.v8Q,e}();e.PivotEvent=s}(De||(De={})),this.PivotApi=function(e){var i={version:De.Pivot.BUILD_VERSION},o=new De.Pivot(e,i);if(i.getAllConditions=function(){return o.getAllConditions()},i.getCondition=function(e){return o.getCondition(e)},i.addCondition=function(e){return o.addCondition(e)},i.removeCondition=function(e){return o.removeCondition(e)},i.removeAllConditions=function(){return o.removeAllConditions()},i.open=function(){return o.open()},i.load=function(e){return o.load(e)},i.getReport=function(e){return o.getReport(e)},i.setReport=function(e){return o.setReport(e)},i.getData=function(e,t,i){return o.getData(e,t,i)},i.save=function(e,i,s,n,a){var l=r;return void l.F8C===e&&(e={filename:t.R8B}),void l.F8C===i&&(i=l.x4C),void l.F8C===s&&(s=l.x4C),void l.F8C===n&&(n=l.x4C),void l.F8C===a&&(a=!l.O8C),o.save(e,i,s,n,a)},i.updateData=function(e,t){return o.updateData(e,t)},i.connectTo=function(e){return o.connectTo(e)},i.addCalculatedMeasure=function(e){return o.addCalculatedMeasure(e)},i.removeCalculatedMeasure=function(e){return o.removeCalculatedMeasure(e)},i.removeAllCalculatedMeasures=function(){return o.removeAllCalculatedMeasures()},i.clear=function(){return o.clear()},i.dispose=function(){o.dispose()},i.refresh=function(){return o.refresh()},i.expandAllData=function(e){return void r.F8C===e&&(e=!r.F8C),o.expandAllData(e)},i.expandData=function(e){return o.expandData(e)},i.collapseAllData=function(){return o.collapseAllData()},i.collapseData=function(e){return o.collapseData(e)},i.print=function(e){return void r.F8C===e&&(e=r.x4C),o.print(e)},i.exportTo=function(e,t,i){var s=r;return void s.F8C===t&&(t=s.x4C),void s.F8C===i&&(i=s.x4C),o.exportTo(e,t,i)},i.getFilter=function(e){return o.getFilter(e)},i.getFilterProperties=function(e){return o.getFilterProperties(e)},i.setFilter=function(e,t,i){return void r.F8C===i&&(i=!r.O8C),o.setFilter(e,t,i)},i.clearFilter=function(e){return o.clearFilter(e)},i.runQuery=function(e){return o.runQuery(e)},i.on=function(e,t){return o.on(e,t)},i.off=function(e,t){return o.off(e,t)},i.getRows=function(){return o.getRows()},i.getColumns=function(){return o.getColumns()},i.getReportFilters=function(){return o.getPages()},i.getMeasures=function(){return o.getMeasures()},i.getAllMeasures=function(){return o.getAllMeasures()},i.sortValues=function(e,t,i,r){return o.sortValues(e,t,i,r)},i.setSort=function(e,t){return o.setSort(e,t)},i.getSort=function(e){return o.getSort(e)},i.setTopX=function(e,t,i){return o.setTopX(e,t,i)},i.setBottomX=function(e,t,i){return o.setBottomX(e,t,i)},i.getOptions=function(){return o.getOptions()},i.setOptions=function(e){return o.setOptions(e)},i.getMembers=function(e,t,i){return o.getMembers(e,t,i)},i.getAllHierarchies=function(){return o.getAllHierarchies()},i.replaceHierarchyCaption=function(e){return o.replaceHierarchyCaption(e)},i.getFormat=function(e){return o.getFormat(e)},i.setFormat=function(e,t){return o.setFormat(e,t)},i.getCell=function(e,t){return o.getCell(e,t)},i.getSelectedCell=function(){return o.getSelectedCell()},i.setSelectedCell=function(e,t){return o.setSelectedCell(e,t)},i.removeSelection=function(){return o.removeSelection()},i.openFieldsList=function(){return o.openFieldsList()},i.closeFieldsList=function(){return o.closeFieldsList()},i.customizeCell=function(e){return o.customizeCell(e)},void r.F8C!==window.WebDataRocksHighcharts)for(var s in i.highcharts={instance:i},window.WebDataRocksHighcharts)i.highcharts[s]=window.WebDataRocksHighcharts[s];if(void r.F8C!==window.WebDataRocksFusioncharts)for(s in i.fusioncharts={instance:i},window.WebDataRocksFusioncharts)i.fusioncharts[s]=window.WebDataRocksFusioncharts[s];if(void r.F8C!==window.WebDataRocksGooglecharts)for(s in i.googlecharts={instance:i},window.WebDataRocksGooglecharts)i.googlecharts[s]=window.WebDataRocksGooglecharts[s];return window.webdatarocks=i},this.PivotApi(e)},savingAs=savingAs||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(e){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var t=e.document,i=t.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in i,o=function(i){var r=t.createEvent("MouseEvents");r.initMouseEvent("click",!0,!1,e,0,0,0,0,0,!1,!1,!1,!1,0,null),i.dispatchEvent(r)},s=e.webkitRequestFileSystem,n=e.requestFileSystem||s||e.mozRequestFileSystem,a=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},l=0,h=function(t){var i=function(){"string"==typeof t?(e.URL||e.webkitURL||e).revokeObjectURL(t):t.remove()};e.chrome?i():setTimeout(i,500)},c=function(e,t,i){for(var r=(t=[].concat(t)).length;r--;){var o=e["on"+t[r]];if("function"==typeof o)try{o.call(e,i||e)}catch(e){a(e)}}},d=function(t,a){var d,u,p,C=this,f=t.type,m=!1,g=function(){c(C,["writestart","progress","write","writeend"])},y=function(){!m&&d||(d=(e.URL||e.webkitURL||e).createObjectURL(t)),u?u.location.href=d:null==e.open(d,"_blank")&&"undefined"!=typeof safari&&(e.location.href=d),C.readyState=C.DONE,g(),h(d)},_=function(e){return function(){if(C.readyState!==C.DONE)return e.apply(this,arguments)}},v={create:!0,exclusive:!1};C.readyState=C.INIT,a||(a="download"),r?(d=(e.URL||e.webkitURL||e).createObjectURL(t),i.href=d,i.download=a,o(i),C.readyState=C.DONE,g(),h(d)):(e.chrome&&f&&"application/octet-stream"!==f&&(p=t.slice||t.webkitSlice,t=p.call(t,0,t.size,"application/octet-stream"),m=!0),s&&"download"!==a&&(a+=".download"),("application/octet-stream"===f||s)&&(u=e),n?(l+=t.size,n(e.TEMPORARY,l,_(function(e){e.root.getDirectory("saved",v,_(function(e){var i=function(){e.getFile(a,v,_(function(e){e.createWriter(_(function(i){i.onwriteend=function(t){u.location.href=e.toURL(),C.readyState=C.DONE,c(C,"writeend",t),h(e)},i.onerror=function(){var e=i.error;e.code!==e.ABORT_ERR&&y()},["writestart","progress","write","abort"].forEach(function(e){i["on"+e]=C["on"+e]}),i.write(t),C.abort=function(){i.abort(),C.readyState=C.DONE},C.readyState=C.WRITING}),y)}),y)};e.getFile(a,{create:!1},_(function(e){e.remove(),i()}),_(function(e){e.code===e.NOT_FOUND_ERR?i():y()}))}),y)}),y)):y())},u=d.prototype;return u.abort=function(){this.readyState=this.DONE,c(this,"abort")},u.readyState=u.INIT=0,u.WRITING=1,u.DONE=2,u.error=u.onwritestart=u.onprogress=u.onwrite=u.onabort=u.onerror=u.onwriteend=null,function(e,t){return new d(e,t)}}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&null!==module?module.exports=savingAs:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define("savingAs",function(){return savingAs});var u4b={T4:256,f4:"helvetica",K3:" 0 R",P4:"http://www.w3.org/1999/xhtml",C3:"function",r4:"endobj",e4:"italic",N4:"object",X3:">>",d4:"function",B4:"number",L4:"bold",G4:.264583,L3:"putXobjectDict",U3:"undefined",A3:"postPutResources",M3:" ",p3:"undefined",E4:"putResources",K4:!1,u3:"times",F3:"addPage",U4:255,n4:"string",q3:"Unicode",V3:"string",w4:"normal",A4:"right",H4:"courier",p4:null,q4:!0,D4:" ",I3:"application/octet-stream"},jsPDF=function(e){"use strict";var t="1.3",i={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};function r(t){var i={};this.subscribe=function(e,t,r){if(typeof t!==u4b.d4)return u4b.K4;i.hasOwnProperty(e)||(i[e]={});var o=Math.random().toString(35);return i[e][o]=[t,!!r],o},this.unsubscribe=function(e){for(var t in i)if(i[t][e])return delete i[t][e],u4b.q4;return u4b.K4},this.publish=function(r){if(i.hasOwnProperty(r)){var o=Array.prototype.slice.call(arguments,1),s=[];for(var n in i[r]){var a=i[r][n];try{a[0].apply(t,o)}catch(t){e.console&&console.error("jsPDF PubSub Error",t.message,t)}a[1]&&s.push(n)}s.length&&s.forEach(this.unsubscribe)}}}function o(s,n,a,l){var h="' is not recognized. See or extend .CapJoinStyles property for valid styles",c={};typeof s===u4b.N4&&(s=(c=s).orientation,n=c.unit||n,a=c.format||a,l=c.compress||c.compressPdf||l),n=n||"mm",a=a||"a4",s=(""+(s||"P")).toLowerCase();(""+a).toLowerCase();var d,u,p,C,f,m,g,y,_,v,b=!!l&&typeof Uint8Array===u4b.d4,w=c.textColor||"0 g",F=c.drawColor||"0 G",E=c.fontSize||16,O=c.lineHeight||1.15,S=c.lineWidth||.200025,T=2,x=!1,L=[],A={},I={},R=0,D=[],N={},M=[],P=0,H=0,U=0,B={title:"",subject:"",author:"",keywords:"",creator:""},k={},V=new r(k),z=function(e){return e.toFixed(2)},q=function(e){return e.toFixed(3)},G=function(e){return("0"+parseInt(e)).slice(-2)},W=function(e){x?D[C].push(e):(U+=e.length+1,M.push(e))},j=function(){return L[++T]=U,W(T+" 0 obj"),T},Y=function(e){W("stream"),W(e),W("endstream")},X=function(e){e.objectNumber=j(),W("<</BaseFont/"+e.PostScriptName+"/Type/Font"),typeof e.encoding===u4b.V3&&W("/Encoding/"+e.encoding),W("/Subtype/Type1>>"),W(u4b.r4)},K=function(){for(var e in W("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),W("/Font <<"),A)A.hasOwnProperty(e)&&W("/"+e+u4b.D4+A[e].objectNumber+u4b.K3);W(u4b.X3),W("/XObject <<"),V.publish(u4b.L3),W(u4b.X3)},Q=function(){!function(){for(var e in A)A.hasOwnProperty(e)&&X(A[e])}(),V.publish(u4b.E4),L[2]=U,W("2 0 obj"),W("<<"),K(),W(u4b.X3),W(u4b.r4),V.publish(u4b.A3)},J=function(e,t,i){I.hasOwnProperty(t)||(I[t]={}),I[t][i]=e},Z=function(e,t,i,r){var o="F"+(Object.keys(A).length+1).toString(10),s=A[o]={id:o,PostScriptName:e,fontName:t,fontStyle:i,encoding:r,metadata:{}};return J(o,t,i),V.publish("addFont",s),o},$=function(e,t){return function(e,t){var i,r,o,s,n,a,l,h,c;if(o=(t=t||{}).sourceEncoding||u4b.q3,n=t.outputEncoding,(t.autoencode||n)&&A[d].metadata&&A[d].metadata[o]&&A[d].metadata[o].encoding&&(s=A[d].metadata[o].encoding,!n&&A[d].encoding&&(n=A[d].encoding),!n&&s.codePages&&(n=s.codePages[0]),typeof n===u4b.V3&&(n=s[n]),n)){for(l=u4b.K4,a=[],i=0,r=e.length;i<r;i++)(h=n[e.charCodeAt(i)])?a.push(String.fromCharCode(h)):a.push(e[i]),a[i].charCodeAt(0)>>8&&(l=u4b.q4);e=a.join("")}for(i=e.length;void 0===l&&0!==i;)e.charCodeAt(i-1)>>8&&(l=u4b.q4),i--;if(!l)return e;for(a=t.noBOM?[]:[254,u4b.U4],i=0,r=e.length;i<r;i++){if((c=(h=e.charCodeAt(i))>>8)>>8)throw new Error("Character at position "+i+" of string '"+e+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");a.push(c),a.push(h-(c<<8))}return String.fromCharCode.apply(void 0,a)}(e,t).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ee=function(){(function(e,t){var r=typeof t===u4b.V3&&t.toLowerCase();if(typeof e===u4b.V3){var o=e.toLowerCase();i.hasOwnProperty(o)&&(e=i[o][0]/u,t=i[o][1]/u)}if(Array.isArray(e)&&(t=e[1],e=e[0]),r){switch(r.substr(0,1)){case"l":t>e&&(r="s");break;case"p":e>t&&(r="s")}"s"===r&&(p=e,e=t,t=p)}x=u4b.q4,D[++R]=[],N[R]={width:Number(e)||f,height:Number(t)||m},te(R)}).apply(this,arguments),W(z(S*u)+" w"),W(F),0!==P&&W(P+" J"),0!==H&&W(H+" j"),V.publish(u4b.F3,{pageNumber:R})},te=function(e){e>0&&e<=R&&(C=e,f=N[e].width,m=N[e].height)},ie=function(e,t){var i;e=void 0!==e?e:A[d].fontName,t=void 0!==t?t:A[d].fontStyle;try{i=I[e][t]}catch(e){}if(!i)throw new Error("Unable to look up font label for font '"+e+"', '"+t+"'. Refer to getFontList() for available fonts.");return i},re=function(){x=u4b.K4,T=2,M=[],L=[],W("%PDF-"+t),function(){var t,i,r,s,n,a,l,h,c;for(l=e.adler32cs||o.adler32cs,b&&typeof l===u4b.U3&&(b=u4b.K4),t=1;t<=R;t++){if(j(),h=(f=N[t].width)*u,c=(m=N[t].height)*u,W("<</Type /Page"),W("/Parent 1 0 R"),W("/Resources 2 0 R"),W("/MediaBox [0 0 "+z(h)+u4b.D4+z(c)+"]"),W("/Contents "+(T+1)+" 0 R>>"),W(u4b.r4),i=D[t].join("\n"),j(),b){for(r=[],s=i.length;s--;)r[s]=i.charCodeAt(s);a=l.from(i),(n=new Deflater(6)).append(new Uint8Array(r)),i=n.flush(),(r=new Uint8Array(i.length+6)).set(new Uint8Array([120,156])),r.set(i,2),r.set(new Uint8Array([255&a,a>>8&255,a>>16&255,a>>24&255]),i.length+2),i=String.fromCharCode.apply(u4b.p4,r),W("<</Length "+i.length+" /Filter [/FlateDecode]>>")}else W("<</Length "+i.length+">>");Y(i),W(u4b.r4)}L[1]=U,W("1 0 obj"),W("<</Type /Pages");var d="/Kids [";for(s=0;s<R;s++)d+=3+2*s+" 0 R ";W(d+"]"),W("/Count "+R),W(u4b.X3),W(u4b.r4)}(),Q(),j(),W("<<"),function(){for(var e in W("/Producer (jsPDF "+o.version+")"),B)B.hasOwnProperty(e)&&B[e]&&W("/"+e.substr(0,1).toUpperCase()+e.substr(1)+" ("+$(B[e])+")");var t=new Date,i=t.getTimezoneOffset(),r=i<0?"+":"-",s=Math.floor(Math.abs(i/60)),n=Math.abs(i%60),a=[r,G(s),"'",G(n),"'"].join("");W(["/CreationDate (D:",t.getFullYear(),G(t.getMonth()+1),G(t.getDate()),G(t.getHours()),G(t.getMinutes()),G(t.getSeconds()),a,")"].join(""))}(),W(u4b.X3),W(u4b.r4),j(),W("<<"),function(){switch(W("/Type /Catalog"),W("/Pages 1 0 R"),y||(y="fullwidth"),y){case"fullwidth":W("/OpenAction [3 0 R /FitH null]");break;case"fullheight":W("/OpenAction [3 0 R /FitV null]");break;case"fullpage":W("/OpenAction [3 0 R /Fit]");break;case"original":W("/OpenAction [3 0 R /XYZ null null 1]");break;default:var e=""+y;"%"===e.substr(e.length-1)&&(y=parseInt(y)/100),typeof y===u4b.B4&&W("/OpenAction [3 0 R /XYZ null null "+z(y)+"]")}switch(_||(_="continuous"),_){case"continuous":W("/PageLayout /OneColumn");break;case"single":W("/PageLayout /SinglePage");break;case"two":case"twoleft":W("/PageLayout /TwoColumnLeft");break;case"tworight":W("/PageLayout /TwoColumnRight")}g&&W("/PageMode /"+g),V.publish("putCatalog")}(),W(u4b.X3),W(u4b.r4);var i,r=U,s="0000000000";for(W("xref"),W("0 "+(T+1)),W(s+" 65535 f "),i=1;i<=T;i++)W((s+L[i]).slice(-10)+" 00000 n ");return W("trailer"),W("<<"),W("/Size "+(T+1)),W("/Root "+T+u4b.K3),W("/Info "+(T-1)+u4b.K3),W(u4b.X3),W("startxref"),W(r),W("%%EOF"),x=u4b.q4,M.join("\n")},oe=function(e){var t="S";return"F"===e?t="f":"FD"===e||"DF"===e?t="B":"f"!==e&&"f*"!==e&&"B"!==e&&"B*"!==e||(t=e),t},se=function(){for(var e=re(),t=e.length,i=new ArrayBuffer(t),r=new Uint8Array(i);t--;)r[t]=e.charCodeAt(t);return i},ne=function(){return new Blob([se()],{type:"application/pdf"})},ae=((v=function(t,i){var r="dataurlnewwindow",o="dataur"===(""+t).substr(0,6)?"data:application/pdf;base64,"+btoa(re()):0;switch(t){case void 0:return re();case"save":if(navigator.getUserMedia&&(void 0===e.URL||void 0===e.URL.createObjectURL))return k.output(r);saveAs(ne(),i),typeof saveAs.unload===u4b.d4&&e.setTimeout&&setTimeout(saveAs.unload,911);break;case"arraybuffer":return se();case"blob":return ne();case"bloburi":case"bloburl":return e.URL&&e.URL.createObjectURL(ne())||void 0;case"datauristring":case"dataurlstring":return o;case r:var s=e.open(o);if(s||typeof safari===u4b.p3)return s;case"datauri":case"dataurl":return e.document.location.href=o;default:throw new Error('Output type "'+t+'" is not supported.')}}).foo=function(){try{return v.apply(this,arguments)}catch(r){var t=r.stack||"";~t.indexOf(" at ")&&(t=t.split(" at ")[1]);var i="Error in function "+t.split("\n")[0].split("<")[0]+": "+r.message;if(!e.console)throw new Error(i);e.console.error(i,r),e.alert&&alert(i)}},v.foo.bar=v,v.foo);switch(n){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=96/72;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+n}for(var le in k.internal={pdfEscape:$,getStyle:oe,getFont:function(){return A[ie.apply(k,arguments)]},getFontSize:function(){return E},getLineHeight:function(){return E*O},write:function(e){W(1===arguments.length?e:Array.prototype.join.call(arguments," "))},getCoordinateString:function(e){return z(e*u)},getVerticalCoordinateString:function(e){return z((m-e)*u)},collections:{},newObject:j,putStream:Y,events:V,scaleFactor:u,pageSize:{get width(){return f},get height(){return m}},output:function(e,t){return ae(e,t)},getNumberOfPages:function(){return D.length-1},pages:D},k.addPage=function(){return ee.apply(this,arguments),this},k.setPage=function(){return te.apply(this,arguments),this},k.setDisplayMode=function(e,t,i){return y=e,_=t,g=i,this},k.text=function(e,t,i,r,o,s){function n(e){return e=e.split("\t").join(Array(c.TabLen||9).join(" ")),$(e,r)}"number"==typeof e&&(p=i,i=t,t=e,e=p),"string"==typeof e&&e.match(/[\n\r]/)&&(e=e.split(/\r\n|\r|\n/g)),"number"==typeof r&&(o=r,r=null);var a,l="",h="Td";if(o){o*=Math.PI/180;var C=Math.cos(o),f=Math.sin(o);l=[z(C),z(f),z(-1*f),z(C),""].join(" "),h="Tm"}if("noBOM"in(r=r||{})||(r.noBOM=!0),"autoencode"in r||(r.autoencode=!0),"string"==typeof e){if("center"===s)t-=this.getStringUnitWidth(e)*E/u/2;else if("right"===s){t-=this.getStringUnitWidth(e)*E/u}e=n(e)}else{if(!(e instanceof Array))throw new Error('Type of text must be string or Array. "'+e+'" is not recognized.');for(var g=e.concat(),y=[],_=g.length;_--;)y.push(n(g.shift()));var v=Math.ceil((m-i)*u/(E*O));0<=v&&v<y.length+1&&(a=y.splice(v-1)),e=y.join(") Tj\nT* (")}return W("BT\n/"+d+" "+E+" Tf\n"+E*O+" TL\n"+w+"\n"+l+z(t*u)+" "+z((m-i)*u)+" "+h+"\n("+e+") Tj\nET"),a&&(this.addPage(),this.text(a,t,1.7*E/u)),this},k.lstext=function(e,t,i,r){for(var o=0,s=e.length;o<s;o++,t+=r)this.text(e[o],t,i)},k.line=function(e,t,i,r){return this.lines([[i-e,r-t]],e,t)},k.clip=function(){W("W"),W("S")},k.lines=function(e,t,i,r,o,s){var n,a,l,h,c,d,C,f,g,y,_;for("number"==typeof e&&(p=i,i=t,t=e,e=p),r=r||[1,1],W(q(t*u)+" "+q((m-i)*u)+" m "),n=r[0],a=r[1],h=e.length,y=t,_=i,l=0;l<h;l++)2===(c=e[l]).length?(y=c[0]*n+y,_=c[1]*a+_,W(q(y*u)+" "+q((m-_)*u)+" l")):(d=c[0]*n+y,C=c[1]*a+_,f=c[2]*n+y,g=c[3]*a+_,y=c[4]*n+y,_=c[5]*a+_,W(q(d*u)+" "+q((m-C)*u)+" "+q(f*u)+" "+q((m-g)*u)+" "+q(y*u)+" "+q((m-_)*u)+" c"));return s&&W(" h"),null!==o&&W(oe(o)),this},k.rect=function(e,t,i,r,o){oe(o);return W([z(e*u),z((m-t)*u),z(i*u),z(-r*u),"re"].join(" ")),null!==o&&W(oe(o)),this},k.triangle=function(e,t,i,r,o,s,n){return this.lines([[i-e,r-t],[o-i,s-r],[e-o,t-s]],e,t,[1,1],n,u4b.q4),this},k.roundedRect=function(e,t,i,r,o,s,n){var a=4/3*(Math.SQRT2-1);return this.lines([[i-2*o,0],[o*a,0,o,s-s*a,o,s],[0,r-2*s],[0,s*a,-o*a,s,-o,s],[2*o-i,0],[-o*a,0,-o,-s*a,-o,-s],[0,2*s-r],[0,-s*a,o*a,-s,o,-s]],e+o,t,[1,1],n),this},k.ellipse=function(e,t,i,r,o){var s=4/3*(Math.SQRT2-1)*i,n=4/3*(Math.SQRT2-1)*r;return W([z((e+i)*u),z((m-t)*u),"m",z((e+i)*u),z((m-(t-n))*u),z((e+s)*u),z((m-(t-r))*u),z(e*u),z((m-(t-r))*u),"c"].join(u4b.D4)),W([z((e-s)*u),z((m-(t-r))*u),z((e-i)*u),z((m-(t-n))*u),z((e-i)*u),z((m-t)*u),"c"].join(u4b.D4)),W([z((e-i)*u),z((m-(t+n))*u),z((e-s)*u),z((m-(t+r))*u),z(e*u),z((m-(t+r))*u),"c"].join(u4b.D4)),W([z((e+s)*u),z((m-(t+r))*u),z((e+i)*u),z((m-(t+n))*u),z((e+i)*u),z((m-t)*u),"c"].join(u4b.D4)),o!==u4b.p4&&W(oe(o)),this},k.circle=function(e,t,i,r){return this.ellipse(e,t,i,i,r)},k.setProperties=function(e){for(var t in B)B.hasOwnProperty(t)&&e[t]&&(B[t]=e[t]);return this},k.setFontSize=function(e){return E=e,this},k.setFont=function(e,t){return d=ie(e,t),this},k.setFontStyle=k.setFontType=function(e){return d=ie(void 0,e),this},k.getFontList=function(){var e,t,i,r={};for(e in I)if(I.hasOwnProperty(e))for(t in r[e]=i=[],I[e])I[e].hasOwnProperty(t)&&i.push(t);return r},k.setLineWidth=function(e){return W((e*u).toFixed(2)+" w"),this},k.setDrawColor=function(e,t,i,r){var o;return o=void 0===t||void 0===r&&e===t===i?typeof e===u4b.V3?e+" G":z(e/u4b.U4)+" G":void 0===r?typeof e===u4b.V3?[e,t,i,"RG"].join(u4b.D4):[z(e/u4b.U4),z(t/u4b.U4),z(i/u4b.U4),"RG"].join(u4b.D4):typeof e===u4b.V3?[e,t,i,r,"K"].join(u4b.D4):[z(e),z(t),z(i),z(r),"K"].join(u4b.D4),W(o),this},k.setFillColor=function(e,t,i,r){var o;return o=void 0===t||void 0===r&&e===t===i?typeof e===u4b.V3?e+" g":z(e/u4b.U4)+" g":void 0===r?typeof e===u4b.V3?[e,t,i,"rg"].join(u4b.D4):[z(e/u4b.U4),z(t/u4b.U4),z(i/u4b.U4),"rg"].join(u4b.D4):typeof e===u4b.V3?[e,t,i,r,"k"].join(u4b.D4):[z(e),z(t),z(i),z(r),"k"].join(u4b.D4),W(o),this},k.setTextColor=function(e,t,i){if(typeof e===u4b.V3&&/^#[0-9A-Fa-f]{6}$/.test(e)){var r=parseInt(e.substr(1),16);e=r>>16&u4b.U4,t=r>>8&u4b.U4,i=r&u4b.U4}return w=0===e&&0===t&&0===i||typeof t===u4b.U3?q(e/u4b.U4)+" g":[q(e/u4b.U4),q(t/u4b.U4),q(i/u4b.U4),"rg"].join(u4b.D4),this},k.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},k.setLineCap=function(e){var t=this.CapJoinStyles[e];if(void 0===t)throw new Error("Line cap style of '"+e+h);return P=t,W(t+" J"),this},k.setLineJoin=function(e){var t=this.CapJoinStyles[e];if(void 0===t)throw new Error("Line join style of '"+e+h);return H=t,W(t+" j"),this},k.output=ae,k.save=function(e){k.output("save",e)},o.API)o.API.hasOwnProperty(le)&&("events"===le&&o.API.events.length?function(e,t){var i,r,o;for(o=t.length-1;-1!==o;o--)i=t[o][0],r=t[o][1],e.subscribe.apply(e,[i].concat("function"==typeof r?[r]:r))}(V,o.API.events):k[le]=o.API[le]);return function(){for(var e=u4b.f4,t=u4b.u3,i=u4b.H4,r=u4b.w4,o=u4b.L4,s=u4b.e4,n="bolditalic",a=[["Helvetica",e,r],["Helvetica-Bold",e,o],["Helvetica-Oblique",e,s],["Helvetica-BoldOblique",e,n],["Courier",i,r],["Courier-Bold",i,o],["Courier-Oblique",i,s],["Courier-BoldOblique",i,n],["Times-Roman",t,r],["Times-Bold",t,o],["Times-Italic",t,s],["Times-BoldItalic",t,n]],l=0,h=a.length;l<h;l++){var c=Z(a[l][0],a[l][1],a[l][2],"StandardEncoding"),d=a[l][0].split("-");J(c,d[0],d[1]||"")}V.publish("addFonts",{fonts:A,dictionary:I})}(),d="F1",ee(a,s),V.publish("initialized"),k}return o.API={events:[]},o.version="1.0.272-debug 2014-09-29T15:09:diegocr",typeof define===u4b.d4&&define.amd?define("jsPDF",function(){return o}):e.jsPDF=o,o}(typeof self!==u4b.p3&&self||typeof window!==u4b.p3&&window||this);!function(e){"use strict";jsPDF.API.addHTML=function(e,t,i,r,o){if("undefined"==typeof html2canvas&&"undefined"==typeof rasterizeHTML)throw new Error("You need either https://github.com/niklasvh/html2canvas or https://github.com/cburgmer/rasterizeHTML.js");"number"!=typeof t&&(r=t,o=i),"function"==typeof r&&(o=r,r=null);var s=this.internal,n=s.scaleFactor,a=s.pageSize.width,l=s.pageSize.height;if((r=r||{}).onrendered=function(e){t=parseInt(t)||0,i=parseInt(i)||0;var s=r.dim||{},h=s.h||0,c=s.w||Math.min(a,e.width/n)-t,d="JPEG";if(r.format&&(d=r.format),e.height>l&&r.pagesplit){var u=function(){for(var r=0;;){var s=document.createElement("canvas");s.width=Math.min(a*n,e.width),s.height=Math.min(l*n,e.height-r),s.getContext("2d").drawImage(e,0,r,e.width,s.height,0,0,s.width,s.height);var h=[s,t,r?0:i,s.width/n,s.height/n,d,null,"SLOW"];if(this.addImage.apply(this,h),(r+=s.height)>=e.height)break;this.addPage()}o(c,r,null,h)}.bind(this);if("CANVAS"===e.nodeName){var p=new Image;p.onload=u,p.src=e.toDataURL("image/png"),e=p}else u()}else{var C=Math.random().toString(35),f=[e,t,i,c,h,d,C,"SLOW"];this.addImage.apply(this,f),o(c,h,C,f)}}.bind(this),"undefined"!=typeof html2canvas&&!r.rstz)return html2canvas(e,r);if("undefined"!=typeof rasterizeHTML){var h="drawDocument";return"string"==typeof e&&(h=/^http/.test(e)?"drawURL":"drawHTML"),r.width=r.width||a*n,rasterizeHTML[h](e,void 0,r).then(function(e){r.onrendered(e.image)},function(e){o(null,e)})}return null}}(),function(e){"use strict";var t="addImage_",i=["jpeg","jpg","png"],r=function(e){var t=this.internal.newObject(),i=this.internal.write,o=this.internal.putStream;if(e.n=t,i("<</Type /XObject"),i("/Subtype /Image"),i("/Width "+e.w),i("/Height "+e.h),e.cs===this.color_spaces.INDEXED?i("/ColorSpace [/Indexed /DeviceRGB "+(e.pal.length/3-1)+" "+("smask"in e?t+2:t+1)+" 0 R]"):(i("/ColorSpace /"+e.cs),e.cs===this.color_spaces.DEVICE_CMYK&&i("/Decode [1 0 1 0 1 0 1 0]")),i("/BitsPerComponent "+e.bpc),"f"in e&&i("/Filter /"+e.f),"dp"in e&&i("/DecodeParms <<"+e.dp+">>"),"trns"in e&&e.trns.constructor==Array){for(var s="",n=0,a=e.trns.length;n<a;n++)s+=e.trns[n]+" "+e.trns[n]+" ";i("/Mask ["+s+"]")}if("smask"in e&&i("/SMask "+(t+1)+" 0 R"),i("/Length "+e.data.length+">>"),o(e.data),i("endobj"),"smask"in e){var l="/Predictor 15 /Colors 1 /BitsPerComponent "+e.bpc+" /Columns "+e.w,h={w:e.w,h:e.h,cs:"DeviceGray",bpc:e.bpc,dp:l,data:e.smask};"f"in e&&(h.f=e.f),r.call(this,h)}e.cs===this.color_spaces.INDEXED&&(this.internal.newObject(),i("<< /Length "+e.pal.length+">>"),o(this.arrayBufferToBinaryString(new Uint8Array(e.pal))),i("endobj"))},o=function(){var e=this.internal.collections[t+"images"];for(var i in e)r.call(this,e[i])},s=function(){var e,i=this.internal.collections[t+"images"],r=this.internal.write;for(var o in i)r("/I"+(e=i[o]).i,e.n,"0","R")},n=function(e){return"object"==typeof e&&1===e.nodeType},a=function(e,t){var i;if(t)for(var r in t)if(e===t[r].alias){i=t[r];break}return i};e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPERATION:"Seperation",DEVICE_N:"DeviceN"},e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"},e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},e.sHashCode=function(e){return Array.prototype.reduce&&e.split("").reduce(function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e},0)},e.isString=function(e){return"string"==typeof e},e.extractInfoFromBase64DataURI=function(e){return/^data:([\w]+?\/([\w]+?));base64,(.+?)$/g.exec(e)},e.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array},e.isArrayBuffer=function(e){return!!this.supportsArrayBuffer()&&e instanceof ArrayBuffer},e.isArrayBufferView=function(e){return!!this.supportsArrayBuffer()&&("undefined"!=typeof Uint32Array&&(e instanceof Int8Array||e instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array))},e.binaryStringToUint8Array=function(e){for(var t=e.length,i=new Uint8Array(t),r=0;r<t;r++)i[r]=e.charCodeAt(r);return i},e.arrayBufferToBinaryString=function(e){this.isArrayBuffer(e)&&(e=new Uint8Array(e));for(var t="",i=e.byteLength,r=0;r<i;r++)t+=String.fromCharCode(e[r]);return t},e.arrayBufferToBase64=function(e){for(var t,i="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=new Uint8Array(e),s=o.byteLength,n=s%3,a=s-n,l=0;l<a;l+=3)i+=r[(16515072&(t=o[l]<<16|o[l+1]<<8|o[l+2]))>>18]+r[(258048&t)>>12]+r[(4032&t)>>6]+r[63&t];return 1==n?i+=r[(252&(t=o[a]))>>2]+r[(3&t)<<4]+"==":2==n&&(i+=r[(64512&(t=o[a]<<8|o[a+1]))>>10]+r[(1008&t)>>4]+r[(15&t)<<2]+"="),i},e.createImageInfo=function(e,t,i,r,o,s,n,a,l,h,c,d){var u={alias:a,w:t,h:i,cs:r,bpc:o,i:n,data:e};return s&&(u.f=s),l&&(u.dp=l),h&&(u.trns=h),c&&(u.pal=c),d&&(u.smask=d),u},e.addImage=function(r,l,h,c,d,u,p,C,f){if("string"!=typeof l){var m=u;u=d,d=c,c=h,h=l,l=m}if("object"==typeof r&&!n(r)&&"imageData"in r){var g=r;r=g.imageData,l=g.format||l,h=g.x||h||0,c=g.y||c||0,d=g.w||d,u=g.h||u,p=g.alias||p,C=g.compression||C,f=g.rotation||g.angle||f}if(isNaN(h)||isNaN(c))throw console.error("jsPDF.addImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addImage");var y,_,v=function(){var e=this.internal.collections[t+"images"];return e||(this.internal.collections[t+"images"]=e={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",s)),e}.call(this);if(!(y=a(r,v))&&(n(r)&&(r=function(e,t,i){if("IMG"===e.nodeName&&e.hasAttribute("src")){var r=""+e.getAttribute("src");if(!i&&0===r.indexOf("data:image/"))return r;!t&&/\.png(?:[?#].*)?$/i.test(r)&&(t="png")}if("CANVAS"===e.nodeName)var o=e;else{(o=document.createElement("canvas")).width=e.clientWidth||e.width,o.height=e.clientHeight||e.height;var s=o.getContext("2d");if(!s)throw"addImage requires canvas to be supported by browser.";if(i){var n,a,l,h,c,d,u,p,C=Math.PI/180;"object"==typeof i&&(n=i.x,a=i.y,l=i.bg,i=i.angle),p=i*C,h=Math.abs(Math.cos(p)),c=Math.abs(Math.sin(p)),d=o.width,u=o.height,o.width=u*c+d*h,o.height=u*h+d*c,isNaN(n)&&(n=o.width/2),isNaN(a)&&(a=o.height/2),s.clearRect(0,0,o.width,o.height),s.fillStyle=l||"white",s.fillRect(0,0,o.width,o.height),s.save(),s.translate(n,a),s.rotate(p),s.drawImage(e,-d/2,-u/2),s.rotate(-p),s.translate(-n,-a),s.restore()}else s.drawImage(e,0,0,o.width,o.height)}return o.toDataURL("png"==(""+t).toLowerCase()?"image/png":"image/jpeg")}(r,l,f)),function(e){return null==e}(p)&&(p=function(t){return"string"==typeof t&&e.sHashCode(t)}(r)),!(y=a(p,v)))){if(this.isString(r)){var b=this.extractInfoFromBase64DataURI(r);b?(l=b[2],r=atob(b[3])):137===r.charCodeAt(0)&&80===r.charCodeAt(1)&&78===r.charCodeAt(2)&&71===r.charCodeAt(3)&&(l="png")}if(function(e){return-1===i.indexOf(e)}(l=(l||"JPEG").toLowerCase()))throw new Error("addImage currently only supports formats "+i+", not '"+l+"'");if(function(t){return"function"!=typeof e["process"+t.toUpperCase()]}(l))throw new Error("please ensure that the plugin for '"+l+"' support is added");if(this.supportsArrayBuffer()&&(_=r,r=this.binaryStringToUint8Array(r)),!(y=this["process"+l.toUpperCase()](r,function(e){var t=0;return e&&(t=Object.keys?Object.keys(e).length:function(e){var t=0;for(var i in e)e.hasOwnProperty(i)&&t++;return t}(e)),t}(v),p,function(t){return t&&"string"==typeof t&&(t=t.toUpperCase()),t in e.image_compression?t:e.image_compression.NONE}(C),_)))throw new Error("An unkwown error occurred whilst processing the image")}return function(e,t,i,r,o,s,n){var a=function(e,t,i){return e||t||(e=-96,t=-96),e<0&&(e=-1*i.w*72/e/this.internal.scaleFactor),t<0&&(t=-1*i.h*72/t/this.internal.scaleFactor),0===e&&(e=t*i.w/i.h),0===t&&(t=e*i.h/i.w),[e,t]}.call(this,i,r,o),l=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString;i=a[0],r=a[1],n[s]=o,this.internal.write("q",l(i),"0 0",l(r),l(e),h(t+r),"cm /I"+o.i,"Do Q")}.call(this,h,c,d,u,y,y.i,v),this};var l=function(e,t){return e.subarray(t,t+5)};e.processJPEG=function(e,t,i,r,o){var s,n=this.color_spaces.DEVICE_RGB,a=this.decode.DCT_DECODE;return this.isString(e)?(s=function(e){var t;if(255===!e.charCodeAt(0)||216===!e.charCodeAt(1)||255===!e.charCodeAt(2)||224===!e.charCodeAt(3)||!e.charCodeAt(6)==="J".charCodeAt(0)||!e.charCodeAt(7)==="F".charCodeAt(0)||!e.charCodeAt(8)==="I".charCodeAt(0)||!e.charCodeAt(9)==="F".charCodeAt(0)||0===!e.charCodeAt(10))throw new Error("getJpegSize requires a binary string jpeg file");for(var i=256*e.charCodeAt(4)+e.charCodeAt(5),r=4,o=e.length;r<o;){if(r+=i,255!==e.charCodeAt(r))throw new Error("getJpegSize could not find the size of the image");if(192===e.charCodeAt(r+1)||193===e.charCodeAt(r+1)||194===e.charCodeAt(r+1)||195===e.charCodeAt(r+1)||196===e.charCodeAt(r+1)||197===e.charCodeAt(r+1)||198===e.charCodeAt(r+1)||199===e.charCodeAt(r+1))return t=256*e.charCodeAt(r+5)+e.charCodeAt(r+6),[256*e.charCodeAt(r+7)+e.charCodeAt(r+8),t,e.charCodeAt(r+9)];r+=2,i=256*e.charCodeAt(r)+e.charCodeAt(r+1)}}(e),this.createImageInfo(e,s[0],s[1],1==s[3]?this.color_spaces.DEVICE_GRAY:n,8,a,t,i)):(this.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.isArrayBufferView(e)?(s=function(e){if(65496!=(e[0]<<8|e[1]))throw new Error("Supplied data is not a JPEG");for(var t,i=e.length,r=(e[4]<<8)+e[5],o=4;o<i;){if(r=((t=l(e,o+=r))[2]<<8)+t[3],(192===t[1]||194===t[1])&&255===t[0]&&r>7)return{width:((t=l(e,o+5))[2]<<8)+t[3],height:(t[0]<<8)+t[1],numcomponents:t[4]};o+=2}throw new Error("getJpegSizeFromBytes could not find the size of the image")}(e),e=o||this.arrayBufferToBinaryString(e),this.createImageInfo(e,s.width,s.height,1==s.numcomponents?this.color_spaces.DEVICE_GRAY:n,8,a,t,i)):null)},e.processJPG=function(){return this.processJPEG.apply(this,arguments)}}(jsPDF.API),function(e){"use strict";jsPDF.API.autoPrint=function(){var e;return this.internal.events.subscribe(u4b.A3,function(){e=this.internal.newObject(),this.internal.write("<< /S/Named /Type/Action /N/Print >>","endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.write("/OpenAction "+e+" 0 R")}),this}}(),function(e){"use strict";var t,i,r,o,s={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},n=1,a=function(e,t,i,r,o){s={x:e,y:t,w:i,h:r,ln:o}},l=function(){return s},h={left:0,top:0,bottom:0};e.setHeaderFunction=function(e){o=e},e.getTextDimensions=function(e){t=this.internal.getFont().fontName,i=this.table_font_size||this.internal.getFontSize(),r=this.internal.getFont().fontStyle;var o,s,n=72*u4b.G4/25.4;return(s=document.createElement("font")).id="jsPDFCell",s.style.fontStyle=r,s.style.fontName=t,s.style.fontSize=i+"pt",s.textContent=e,document.body.appendChild(s),o={w:(s.offsetWidth+1)*n,h:(s.offsetHeight+1)*n},document.body.removeChild(s),o},e.cellAddPage=function(){var e=this.margins||h;this.addPage(),a(e.left,e.top,void 0,void 0),n+=1},e.cellInitialize=function(){s={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},n=1},e.cell=function(e,t,i,r,o,s,n){var c=l();if(void 0!==c.ln)if(c.ln===s)e=c.x+c.w,t=c.y;else{var d=this.margins||h;c.y+c.h+r+13>=this.internal.pageSize.height-d.bottom&&(this.cellAddPage(),this.printHeaders&&this.tableHeaderRow&&this.printHeaderRow(s,!0)),t=l().y+l().h}if(void 0!==o[0])if(this.printingHeaderRow?this.rect(e,t,i,r,"FD"):this.rect(e,t,i,r),"right"===n){if(o instanceof Array)for(var u=0;u<o.length;u++){var p=o[u],C=this.getStringUnitWidth(p)*this.internal.getFontSize();this.text(p,e+i-C-3,t+this.internal.getLineHeight()*(u+1))}}else this.text(o,e+3,t+this.internal.getLineHeight());return a(e,t,i,r,s),this},e.arrayMax=function(e,t){var i,r,o,s=e[0];for(i=0,r=e.length;i<r;i+=1)o=e[i],t?-1===t(s,o)&&(s=o):o>s&&(s=o);return s},e.table=function(t,i,r,o,a){if(!r)throw"No data for PDF table";var l,c,d,u,p,C,f,m,g,y,_=[],v=[],b={},w={},F=[],E=[],O=!1,S=!0,T=12,x=h;if(x.width=this.internal.pageSize.width,a&&(!0===a.autoSize&&(O=!0),!1===a.printHeaders&&(S=!1),a.fontSize&&(T=a.fontSize),a.margins&&(x=a.margins)),this.lnMod=0,s={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},n=1,this.printHeaders=S,this.margins=x,this.setFontSize(T),this.table_font_size=T,null==o)_=Object.keys(r[0]);else if(o[0]&&"string"!=typeof o[0]){for(c=0,d=o.length;c<d;c+=1)l=o[c],_.push(l.name),v.push(l.prompt),w[l.name]=l.width*(19.049976/25.4)}else _=o;if(O)for(y=function(e){return e[l]},c=0,d=_.length;c<d;c+=1){for(b[l=_[c]]=r.map(y),F.push(this.getTextDimensions(v[c]||l).w),f=0,u=(C=b[l]).length;f<u;f+=1)p=C[f],F.push(this.getTextDimensions(p).w);w[l]=e.arrayMax(F)}if(S){var L=this.calculateLineHeight(_,w,v.length?v:_);for(c=0,d=_.length;c<d;c+=1)l=_[c],E.push([t,i,w[l],L,String(v.length?v[c]:l)]);this.setTableHeaderRow(E),this.printHeaderRow(1,!1)}for(c=0,d=r.length;c<d;c+=1){for(m=r[c],L=this.calculateLineHeight(_,w,m),f=0,g=_.length;f<g;f+=1)l=_[f],this.cell(t,i,w[l],L,m[l],c+2,l.align)}return this.lastCellPos=s,this.table_x=t,this.table_y=i,this},e.calculateLineHeight=function(e,t,i){for(var r,o=0,s=0;s<e.length;s++){i[r=e[s]]=this.splitTextToSize(String(i[r]),t[r]-3);var n=this.internal.getLineHeight()*i[r].length+3;n>o&&(o=n)}return o},e.setTableHeaderRow=function(e){this.tableHeaderRow=e},e.printHeaderRow=function(e,t){if(!this.tableHeaderRow)throw"Property tableHeaderRow does not exist.";var i,r,s,l;if(this.printingHeaderRow=!0,void 0!==o){var h=o(this,n);a(h[0],h[1],h[2],h[3],-1)}this.setFontStyle("bold");var c=[];for(s=0,l=this.tableHeaderRow.length;s<l;s+=1)this.setFillColor(200,200,200),i=this.tableHeaderRow[s],t&&(i[1]=this.margins&&this.margins.top||0,c.push(i)),r=[].concat(i),this.cell.apply(this,r.concat(e));c.length>0&&this.setTableHeaderRow(c),this.setFontStyle("normal"),this.printingHeaderRow=!1}}(jsPDF.API),function(e){var t,i,r,o,s,n,a,l,h,c,d,u,p,C,f,m,g,y,_,v="padding-right",b="padding-left",w="margin-right",F="margin-left",E="padding-bottom",O="padding-top",S="margin-bottom",T="margin-top",x="line-height",L="font-size",A="font-style",I="font-family";t=function(){return function(t){return e.prototype=t,new e};function e(){}}(),h=function(e){var t,i,r,o,s,n,a;for(i=0,r=e.length,t=void 0,o=u4b.K4,n=u4b.K4;!o&&i!==r;)(t=e[i]=e[i].trimLeft())&&(o=u4b.q4),i++;for(i=r-1;r&&!n&&-1!==i;)(t=e[i]=e[i].trimRight())&&(n=u4b.q4),i--;for(s=/\s+$/g,a=u4b.q4,i=0;i!==r;)t=e[i].replace(/\s+/g,u4b.M3),a&&(t=t.trimLeft()),t&&(a=s.test(t)),e[i]=t,i++;return e},d=function(e){var t,i,o;for(t=void 0,i=(o=e.split(",")).shift();!t&&i;)t=r[i.trim().toLowerCase()],i=o.shift();return t},u=function(e){var t;return(e="auto"===e?"0px":e).indexOf("em")>-1&&!isNaN(Number(e.replace("em","")))&&(e=18.719*Number(e.replace("em",""))+"px"),e.indexOf("pt")>-1&&!isNaN(Number(e.replace("pt","")))&&(e=1.333*Number(e.replace("pt",""))+"px"),void 0,16,(t=p[e])?t:void 0!==(t={"xx-small":9,"x-small":11,small:13,medium:16,large:19,"x-large":23,"xx-large":28,auto:0}[{css_line_height_string:e}])?p[e]=t/16:(t=parseFloat(e))?p[e]=t/16:3===(t=e.match(/([\d\.]+)(px)/)).length?p[e]=parseFloat(t[1])/16:p[e]=1},l=function(e){var t,i,r,l,h,c="display";return h=e,l=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(h,u4b.p4):h.currentStyle?h.currentStyle:h.style,i=void 0,(t={})[I]=d((r=function(e){return e=e.replace(/-\D/g,function(e){return e.charAt(1).toUpperCase()}),l[e]})(I))||u4b.u3,t[A]=o[r(A)]||u4b.w4,t["text-align"]=TextAlignMap[r("text-align")]||"left",(i=s[r("font-weight")]||u4b.w4)===u4b.L4&&(t[A]===u4b.w4?t[A]=i:t[A]=i+t[A]),t[L]=u(r(L))||1,t[x]=u(r(x))||1,t[c]="inline"===r(c)?"inline":"block",i="block"===t[c],t[T]=i&&u(r(T))||0,t[S]=i&&u(r(S))||0,t[O]=i&&u(r(O))||0,t[E]=i&&u(r(E))||0,t[F]=i&&u(r(F))||0,t[w]=i&&u(r(w))||0,t[b]=i&&u(r(b))||0,t[v]=i&&u(r(v))||0,t.float=n[r("cssFloat")]||"none",t.clear=a[r("clear")]||"none",t},C=function(e,t,i){var r,o,s,n;if(s=u4b.K4,o=void 0,n=void 0,void 0,r=i["#"+e.id])if(typeof r===u4b.C3)s=r(e,t);else for(o=0,n=r.length;!s&&o!==n;)s=r[o](e,t),o++;if(r=i[e.nodeName],!s&&r)if(typeof r===u4b.C3)s=r(e,t);else for(o=0,n=r.length;!s&&o!==n;)s=r[o](e,t),o++;return s},_=function(e,t){var i,r,o,s,n,a,l,h,c;for(i=[],r=[],o=0,c=e.rows[0].cells.length,l=e.clientWidth;o<c;)h=e.rows[0].cells[o],r[o]={name:h.textContent.toLowerCase().replace(/\s+/g,""),prompt:h.textContent.replace(/\r?\n/g,""),width:h.clientWidth/l*t.pdf.internal.pageSize.width},o++;for(o=1;o<e.rows.length;){for(a=e.rows[o],n={},s=0;s<a.cells.length;)n[r[s].name]=a.cells[s].textContent.replace(/\r?\n/g,""),s++;i.push(n),o++}return{rows:i,headers:r}};var R={SCRIPT:1,STYLE:1,NOSCRIPT:1,OBJECT:1,EMBED:1,SELECT:1},D=1;i=function(e,t,r){var o,s,n,a,h,c,d,u;for(s=e.childNodes,o=void 0,(h="block"===(n=l(e)).display)&&(t.setBlockBoundary(),t.setBlockStyle(n)),19.049976/25.4,a=0,c=s.length;a<c;){if("object"==typeof(o=s[a])){if(t.executeWatchFunctions(o),1===o.nodeType&&"HEADER"===o.nodeName){var p=o,m=t.pdf.margins_doc.top;t.pdf.internal.events.subscribe("addPage",function(e){t.y=m,i(p,t,r),t.pdf.margins_doc.top=t.y+10,t.y+=10},!1)}if(8===o.nodeType&&"#comment"===o.nodeName)~o.textContent.indexOf("ADD_PAGE")&&(t.pdf.addPage(),t.y=t.pdf.margins_doc.top);else if(1!==o.nodeType||R[o.nodeName])if(3===o.nodeType){var g=o.nodeValue;if(o.nodeValue&&"LI"===o.parentNode.nodeName)if("OL"===o.parentNode.parentNode.nodeName)g=D+++". "+g;else{var y=16*n["font-size"],v=2;y>20&&(v=3),u=function(e,t){this.pdf.circle(e,t,v,"FD")}}t.addText(g,n)}else"string"==typeof o&&t.addText(o,n);else{var b;if("IMG"===o.nodeName){var w=o.getAttribute("src");b=f[t.pdf.sHashCode(w)||w]}if(b){t.pdf.internal.pageSize.height-t.pdf.margins_doc.bottom<t.y+o.height&&t.y>t.pdf.margins_doc.top&&(t.pdf.addPage(),t.y=t.pdf.margins_doc.top,t.executeWatchFunctions(o));var F=l(o),E=t.x,O=12/t.pdf.internal.scaleFactor,S=(F["margin-left"]+F["padding-left"])*O,T=(F["margin-right"]+F["padding-right"])*O,x=(F["margin-top"]+F["padding-top"])*O,L=(F["margin-bottom"]+F["padding-bottom"])*O;void 0!==F.float&&"right"===F.float?E+=t.settings.width-o.width-T:E+=S,t.pdf.addImage(b,E,t.y+x,o.width,o.height),b=void 0,"right"===F.float||"left"===F.float?(t.watchFunctions.push(function(e,i,r,o){return t.y>=i?(t.x+=e,t.settings.width+=r,!0):!!(o&&1===o.nodeType&&!R[o.nodeName]&&t.x+o.width>t.pdf.margins_doc.left+t.pdf.margins_doc.width)&&(t.x+=e,t.y=i,t.settings.width+=r,!0)}.bind(this,"left"===F.float?-o.width-S-T:0,t.y+o.height+x+L,o.width)),t.watchFunctions.push(function(e,i,r){return!(t.y<e&&i===t.pdf.internal.getNumberOfPages())||1===r.nodeType&&"both"===l(r).clear&&(t.y=e,!0)}.bind(this,t.y+o.height,t.pdf.internal.getNumberOfPages())),t.settings.width-=o.width+S+T,"left"===F.float&&(t.x+=o.width+S+T)):t.y+=o.height+L}else if("TABLE"===o.nodeName)d=_(o,t),t.y+=10,t.pdf.table(t.x,t.y,d.rows,d.headers,{autoSize:!1,printHeaders:!0,margins:t.pdf.margins_doc}),t.y=t.pdf.lastCellPos.y+t.pdf.lastCellPos.h+20;else if("OL"===o.nodeName||"UL"===o.nodeName)D=1,C(o,t,r)||i(o,t,r),t.y+=10;else if("LI"===o.nodeName){var A=t.x;t.x+="UL"===o.parentNode.nodeName?22:10,t.y+=3,C(o,t,r)||i(o,t,r),t.x=A}else"BR"===o.nodeName?t.y+=n["font-size"]*t.pdf.internal.scaleFactor:C(o,t,r)||i(o,t,r)}}a++}if(h)return t.setBlockBoundary(u)},f={},m=function(e,t,i,r){var o,s=e.getElementsByTagName("img"),n=s.length,a=0;function l(){t.pdf.internal.events.publish("imagesLoaded"),r(o)}function h(e,i,r){if(e){var s=new Image;o=++a,s.crossOrigin="",s.onerror=s.onload=function(){if(s.complete&&(0===s.src.indexOf("data:image/")&&(s.width=i||s.width||0,s.height=r||s.height||0),s.width+s.height)){var o=t.pdf.sHashCode(e)||e;f[o]=f[o]||s}--a||l()},s.src=e}}for(;n--;)h(s[n].getAttribute("src"),s[n].width,s[n].height);return a||l()},g=function(e,t,r){var o=e.getElementsByTagName("footer");if(o.length>0){o=o[0];var s=t.pdf.internal.write,n=t.y;t.pdf.internal.write=function(){},i(o,t,r);var a=Math.ceil(t.y-n)+5;t.y=n,t.pdf.internal.write=s,t.pdf.margins_doc.bottom+=a;for(var l=function(e){var s=void 0!==e?e.pageNumber:1,n=t.y;t.y=t.pdf.internal.pageSize.height-t.pdf.margins_doc.bottom,t.pdf.margins_doc.bottom-=a;for(var l=o.getElementsByTagName("span"),h=0;h<l.length;++h)(" "+l[h].className+" ").replace(/[\n\t]/g," ").indexOf(" pageCounter ")>-1&&(l[h].innerHTML=s),(" "+l[h].className+" ").replace(/[\n\t]/g," ").indexOf(" totalPages ")>-1&&(l[h].innerHTML="###jsPDFVarTotalPages###");i(o,t,r),t.pdf.margins_doc.bottom+=a,t.y=n},h=o.getElementsByTagName("span"),c=0;c<h.length;++c)(" "+h[c].className+" ").replace(/[\n\t]/g," ").indexOf(" totalPages ")>-1&&t.pdf.internal.events.subscribe("htmlRenderingFinished",t.pdf.putTotalPages.bind(t.pdf,"###jsPDFVarTotalPages###"),!0);t.pdf.internal.events.subscribe("addPage",l,!1),l(),R.FOOTER=1}},y=function(e,t,r,o,s,n){if(!t)return u4b.K4;var a,l,h,d;typeof t===u4b.n4||t.parentNode||(t=""+t.innerHTML),typeof t===u4b.n4&&(a=t.replace(/<\/?script[^>]*?>/gi,""),d="jsPDFhtmlText"+Date.now().toString()+(1e3*Math.random()).toFixed(0),(h=document.createElement("div")).style.cssText="position: absolute !important;clip: rect(1px 1px 1px 1px); /* IE6, IE7 */clip: rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height: 1px !important;width: 1px !important; top:auto;left:-100px;overflow: hidden;",h.innerHTML='<iframe style="height:1px;width:1px" name="'+d+'" />',document.body.appendChild(h),(l=window.frames[d]).document.body.innerHTML=a,t=l.document.body);var u,p=new c(e,r,o,s);return m.call(this,t,p,s.elementHandlers,function(e){g(t,p,s.elementHandlers),i(t,p,s.elementHandlers),p.pdf.internal.events.publish("htmlRenderingFinished"),u=p.dispose(),typeof n===u4b.d4?n(u):e&&console.error("jsPDF Warning: rendering issues? provide a callback to fromHTML!")}),u||{x:p.x,y:p.y}},(c=function(e,t,i,r){return this.pdf=e,this.x=t,this.y=i,this.settings=r,this.watchFunctions=[],this.init(),this}).prototype.init=function(){return this.paragraph={text:[],style:[]},this.pdf.internal.write("q")},c.prototype.dispose=function(){return this.pdf.internal.write("Q"),{x:this.x,y:this.y,ready:u4b.q4}},c.prototype.executeWatchFunctions=function(e){var t=!1,i=[];if(this.watchFunctions.length>0){for(var r=0;r<this.watchFunctions.length;++r)!0===this.watchFunctions[r](e)?t=!0:i.push(this.watchFunctions[r]);this.watchFunctions=i}return t},c.prototype.splitFragmentsIntoLines=function(e,i){var r,o,s,n,a,l,h,c,d,u,p,C,f,m;for(12,u=this.pdf.internal.scaleFactor,n={},o=void 0,d=void 0,s=void 0,a=void 0,m=void 0,c=void 0,h=void 0,l=void 0,C=[p=[]],r=0,f=this.settings.width;e.length;)if(a=e.shift(),m=i.shift(),a)if((s=n[(o=m["font-family"])+(d=m["font-style"])])||(s=this.pdf.internal.getFont(o,d).metadata.Unicode,n[o+d]=s),c={widths:s.widths,kerning:s.kerning,fontSize:12*m["font-size"],textIndent:r},r+(h=this.pdf.getStringUnitWidth(a,c)*c.fontSize/u)>f){for(l=this.pdf.splitTextToSize(a,f,c),p.push([l.shift(),m]);l.length;)p=[[l.shift(),m]],C.push(p);r=this.pdf.getStringUnitWidth(p[0][0],c)*c.fontSize/u}else p.push([a,m]),r+=h;if(void 0!==m["text-align"]&&("center"===m["text-align"]||"right"===m["text-align"]||"justify"===m["text-align"]))for(var g=0;g<C.length;++g){var y=this.pdf.getStringUnitWidth(C[g][0][0],c)*c.fontSize/u;g>0&&(C[g][0][1]=t(C[g][0][1]));var _=f-y;if("right"===m["text-align"])C[g][0][1]["margin-left"]=_;else if("center"===m["text-align"])C[g][0][1]["margin-left"]=_/2;else if("justify"===m["text-align"]){var v=C[g][0][0].split(" ").length-1;C[g][0][1]["word-spacing"]=_/v,g===C.length-1&&(C[g][0][1]["word-spacing"]=0)}}return C},c.prototype.RenderTextFragment=function(e,t){var i,r;r=0,this.pdf.internal.pageSize.height-this.pdf.margins_doc.bottom<this.y+this.pdf.internal.getFontSize()&&(this.pdf.internal.write("ET","Q"),this.pdf.addPage(),this.y=this.pdf.margins_doc.top,this.pdf.internal.write("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td"),r=Math.max(r,t["line-height"],t["font-size"]),this.pdf.internal.write(0,(-12*r).toFixed(2),"Td")),i=this.pdf.internal.getFont(t["font-family"],t["font-style"]),void 0!==t["word-spacing"]&&t["word-spacing"]>0&&this.pdf.internal.write(t["word-spacing"].toFixed(2),"Tw"),this.pdf.internal.write("/"+i.id,(12*t["font-size"]).toFixed(2),"Tf","("+this.pdf.internal.pdfEscape(e)+") Tj"),void 0!==t["word-spacing"]&&this.pdf.internal.write(0,"Tw")},c.prototype.renderParagraph=function(e){var t,i,r,o,s,n,a,l,c,d,u,p,C,f;if(r=h(this.paragraph.text),C=this.paragraph.style,t=this.paragraph.blockstyle,p=this.paragraph.blockstyle||{},this.paragraph={text:[],style:[],blockstyle:{},priorblockstyle:t},r.join("").trim()){a=this.splitFragmentsIntoLines(r,C),n=void 0,l=void 0,12,i=12/this.pdf.internal.scaleFactor,u=(Math.max((t["margin-top"]||0)-(p["margin-bottom"]||0),0)+(t["padding-top"]||0))*i,d=((t["margin-bottom"]||0)+(t["padding-bottom"]||0))*i,c=this.pdf.internal.write,o=void 0,s=void 0,this.y+=u,c("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td");for(var m=0;a.length;){for(l=0,o=0,s=(n=a.shift()).length;o!==s;)n[o][0].trim()&&(l=Math.max(l,n[o][1]["line-height"],n[o][1]["font-size"]),f=7*n[o][1]["font-size"]),o++;var g=0;for(void 0!==n[0][1]["margin-left"]&&n[0][1]["margin-left"]>0&&(wantedIndent=this.pdf.internal.getCoordinateString(n[0][1]["margin-left"]),g=wantedIndent-m,m=wantedIndent),c(g,(-12*l).toFixed(2),"Td"),o=0,s=n.length;o!==s;)n[o][0]&&this.RenderTextFragment(n[o][0],n[o][1]),o++;if(this.y+=l*i,this.executeWatchFunctions(n[0][1])&&a.length>0){var y=[],_=[];a.forEach(function(e){for(var t=0,i=e.length;t!==i;)e[t][0]&&(y.push(e[t][0]+" "),_.push(e[t][1])),++t}),a=this.splitFragmentsIntoLines(h(y),_),c("ET","Q"),c("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td")}}return e&&"function"==typeof e&&e.call(this,this.x-9,this.y-f/2),c("ET","Q"),this.y+=d}},c.prototype.setBlockBoundary=function(e){return this.renderParagraph(e)},c.prototype.setBlockStyle=function(e){return this.paragraph.blockstyle=e},c.prototype.addText=function(e,t){return this.paragraph.text.push(e),this.paragraph.style.push(t)},r={helvetica:u4b.f4,"sans-serif":u4b.f4,"times new roman":u4b.u3,serif:u4b.u3,times:u4b.u3,monospace:u4b.H4,courier:u4b.H4},s={100:u4b.w4,200:u4b.w4,300:u4b.w4,400:u4b.w4,500:u4b.L4,600:u4b.L4,700:u4b.L4,800:u4b.L4,900:u4b.L4,normal:u4b.w4,bold:u4b.L4,bolder:u4b.L4,lighter:u4b.w4},o={normal:u4b.w4,italic:u4b.e4,oblique:u4b.e4},TextAlignMap={left:"left",right:"right",center:"center",justify:"justify"},n={none:"none",right:u4b.A4,left:"left"},a={none:"none",both:"both"},p={normal:1},e.fromHTML=function(e,t,i,r,o,s){"use strict";return this.margins_doc=s||{top:0,bottom:0},r||(r={}),r.elementHandlers||(r.elementHandlers={}),y(this,e,isNaN(t)?4:t,isNaN(i)?4:i,r,o)}}(jsPDF.API),function(e){"use strict";var t,i,r;jsPDF.API.addJS=function(e){return r=e,this.internal.events.subscribe(u4b.A3,function(e){t=this.internal.newObject(),this.internal.write("<< /Names [(EmbeddedJS) "+(t+1)+" 0 R] >>",u4b.r4),i=this.internal.newObject(),this.internal.write("<< /S /JavaScript /JS (",r,") >>",u4b.r4)}),this.internal.events.subscribe("putCatalog",function(){void 0!==t&&void 0!==i&&this.internal.write("/Names <</JavaScript "+t+" 0 R>>")}),this}}(),function(e){"use strict";var t=function(){var e="function"==typeof Deflater;if(!e)throw new Error("requires deflate.js for compression");return e},i=function(t,i,n,d){var u=5,p=l;switch(d){case e.image_compression.FAST:u=3,p=a;break;case e.image_compression.MEDIUM:u=6,p=h;break;case e.image_compression.SLOW:u=9,p=c}t=s(t,i,n,p);var C=new Uint8Array(r(u)),f=o(t),m=new Deflater(u),g=m.append(t),y=m.flush(),_=C.length+g.length+y.length,v=new Uint8Array(_+4);return v.set(C),v.set(g,C.length),v.set(y,C.length+g.length),v[_++]=f>>>24&255,v[_++]=f>>>16&255,v[_++]=f>>>8&255,v[_++]=255&f,e.arrayBufferToBinaryString(v)},r=function(e,t){var i=Math.LOG2E*Math.log(32768)-8<<4|8,r=i<<8;return r|=Math.min(3,(t-1&255)>>1)<<6,r|=0,[i,255&(r+=31-r%31)]},o=function(e,t){for(var i,r=1,o=0,s=e.length,n=0;s>0;){s-=i=s>t?t:s;do{o+=r+=e[n++]}while(--i);r%=65521,o%=65521}return(o<<16|r)>>>0},s=function(e,t,i,r){for(var o,s,n,a=e.length/t,l=new Uint8Array(e.length+a),h=u(),c=0;c<a;c++){if(n=c*t,o=e.subarray(n,n+t),r)l.set(r(o,i,s),n+c);else{for(var d=0,C=h.length,f=[];d<C;d++)f[d]=h[d](o,i,s);var m=p(f.concat());l.set(f[m],n+c)}s=o}return l},n=function(e,t,i){var r=Array.apply([],e);return r.unshift(0),r},a=function(e,t,i){var r,o=[],s=0,n=e.length;for(o[0]=1;s<n;s++)r=e[s-t]||0,o[s+1]=e[s]-r+256&255;return o},l=function(e,t,i){var r,o=[],s=0,n=e.length;for(o[0]=2;s<n;s++)r=i&&i[s]||0,o[s+1]=e[s]-r+256&255;return o},h=function(e,t,i){var r,o,s=[],n=0,a=e.length;for(s[0]=3;n<a;n++)r=e[n-t]||0,o=i&&i[n]||0,s[n+1]=e[n]+256-(r+o>>>1)&255;return s},c=function(e,t,i){var r,o,s,n,a=[],l=0,h=e.length;for(a[0]=4;l<h;l++)r=e[l-t]||0,o=i&&i[l]||0,s=i&&i[l-t]||0,n=d(r,o,s),a[l+1]=e[l]-n+256&255;return a},d=function(e,t,i){var r=e+t-i,o=Math.abs(r-e),s=Math.abs(r-t),n=Math.abs(r-i);return o<=s&&o<=n?e:s<=n?t:i},u=function(){return[n,a,l,h,c]},p=function(e){for(var t,i,r,o=0,s=e.length;o<s;)((t=C(e[o].slice(1)))<i||!i)&&(i=t,r=o),o++;return r},C=function(e){for(var t=0,i=e.length,r=0;t<i;)r+=Math.abs(e[t++]);return r};e.processPNG=function(r,o,s,n,a){var l,h,c,d,u,p,C=this.color_spaces.DEVICE_RGB,f=this.decode.FLATE_DECODE,m=8;if(this.isArrayBuffer(r)&&(r=new Uint8Array(r)),this.isArrayBufferView(r)){if("function"!=typeof PNG||"function"!=typeof FlateStream)throw new Error("PNG support requires png.js and zlib.js");if(r=(l=new PNG(r)).imgData,m=l.bits,C=l.colorSpace,d=l.colors,-1!==[4,6].indexOf(l.colorType)){if(8===l.bits)for(var g,y=(L=new(0,window["Uint"+l.pixelBitlength+"Array"])(l.decodePixels().buffer)).length,_=new Uint8Array(y*l.colors),v=new Uint8Array(y),b=l.pixelBitlength-l.bits,w=0,F=0;w<y;w++){for(E=L[w],g=0;g<b;)_[F++]=E>>>g&255,g+=l.bits;v[w]=E>>>g&255}if(16===l.bits){y=(L=new Uint32Array(l.decodePixels().buffer)).length,_=new Uint8Array(y*(32/l.pixelBitlength)*l.colors),v=new Uint8Array(y*(32/l.pixelBitlength));for(var E,O=l.colors>1,S=(w=0,F=0,0);w<y;)E=L[w++],_[F++]=E>>>0&255,O&&(_[F++]=E>>>16&255,E=L[w++],_[F++]=E>>>0&255),v[S++]=E>>>16&255;m=8}!function(i){return i!==e.image_compression.NONE&&t()}(n)?(r=_,p=v,f=null):(r=i(_,l.width*l.colors,l.colors,n),p=i(v,l.width,1,n))}if(3===l.colorType&&(C=this.color_spaces.INDEXED,u=l.palette,l.transparency.indexed)){var T=l.transparency.indexed,x=0;for(w=0,y=T.length;w<y;++w)x+=T[w];if((x/=255)===y-1&&-1!==T.indexOf(0))c=[T.indexOf(0)];else if(x!==y){var L=l.decodePixels();for(v=new Uint8Array(L.length),w=0,y=L.length;w<y;w++)v[w]=T[L[w]];p=i(v,l.width,1)}}return h=f===this.decode.FLATE_DECODE?"/Predictor 15 /Colors "+d+" /BitsPerComponent "+m+" /Columns "+l.width:"/Colors "+d+" /BitsPerComponent "+m+" /Columns "+l.width,(this.isArrayBuffer(r)||this.isArrayBufferView(r))&&(r=this.arrayBufferToBinaryString(r)),(p&&this.isArrayBuffer(p)||this.isArrayBufferView(p))&&(p=this.arrayBufferToBinaryString(p)),this.createImageInfo(r,l.width,l.height,C,m,f,o,s,h,c,u,p)}throw new Error("Unsupported PNG image data, try using JPEG instead.")}}(jsPDF.API),function(e){"use strict";jsPDF.API.addSVG=function(e,t,i,r,o){var s;if(t===s||i===s)throw new Error("addSVG needs values for 'x' and 'y'");function n(e){for(var t=parseFloat(e[1]),i=parseFloat(e[2]),r=[],o=3,s=e.length;o<s;)"c"===e[o]?(r.push([parseFloat(e[o+1]),parseFloat(e[o+2]),parseFloat(e[o+3]),parseFloat(e[o+4]),parseFloat(e[o+5]),parseFloat(e[o+6])]),o+=7):"l"===e[o]?(r.push([parseFloat(e[o+1]),parseFloat(e[o+2])]),o+=3):o+=1;return[t,i,r]}var a,l,h=function(e,t){var i=(t.contentWindow||t.contentDocument).document;return i.write(e),i.close(),i.getElementsByTagName("svg")[0]}(e,(a=document,l=a.createElement("iframe"),function(e,t){var i=t.createElement("style");i.type="text/css",i.styleSheet?i.styleSheet.cssText=e:i.appendChild(t.createTextNode(e)),t.getElementsByTagName("head")[0].appendChild(i)}(".jsPDF_sillysvg_iframe {display:none;position:absolute;}",a),l.name="childframe",l.setAttribute("width",0),l.setAttribute("height",0),l.setAttribute("frameborder","0"),l.setAttribute("scrolling","no"),l.setAttribute("seamless","seamless"),l.setAttribute("class","jsPDF_sillysvg_iframe"),a.body.appendChild(l),l)),c=[1,1],d=parseFloat(h.getAttribute("width")),u=parseFloat(h.getAttribute("height"));d&&u&&(r&&o?c=[r/d,o/u]:r?c=[r/d,r/d]:o&&(c=[o/u,o/u]));var p,C,f,m,g=h.childNodes;for(p=0,C=g.length;p<C;p++)(f=g[p]).tagName&&"PATH"===f.tagName.toUpperCase()&&((m=n(f.getAttribute("d").split(" ")))[0]=m[0]*c[0]+t,m[1]=m[1]*c[1]+i,this.lines.call(this,m[2],m[0],m[1],c));return this}}(),function(e){"use strict";var t=e.getCharWidthsArray=function(e,t){t||(t={});var i,r,o,s=t.widths?t.widths:this.internal.getFont().metadata.Unicode.widths,n=s.fof?s.fof:1,a=t.kerning?t.kerning:this.internal.getFont().metadata.Unicode.kerning,l=a.fof?a.fof:1,h=0,c=s[0]||n,d=[];for(i=0,r=e.length;i<r;i++)o=e.charCodeAt(i),d.push((s[o]||c)/n+(a[o]&&a[o][h]||0)/l),h=o;return d},i=function(e){for(var t=e.length,i=0;t;)i+=e[--t];return i},r=e.getStringUnitWidth=function(e,r){return i(t.call(this,e,r))},o=function(e,t,i,r){for(var o=[],s=0,n=e.length,a=0;s!==n&&a+t[s]<i;)a+=t[s],s++;o.push(e.slice(0,s));var l=s;for(a=0;s!==n;)a+t[s]>r&&(o.push(e.slice(l,s)),a=0,l=s),a+=t[s],s++;return l!==s&&o.push(e.slice(l,s)),o},s=function(e,s,n){n||(n={});var a,l,h,c,d,u,p=[],C=[p],f=n.textIndent||0,m=0,g=0,y=e.split(" "),_=t(" ",n)[0];if(u=-1===n.lineIndent?y[0].length+2:n.lineIndent||0){var v=Array(u).join(" "),b=[];y.map(function(e){(e=e.split(/\s*\n/)).length>1?b=b.concat(e.map(function(e,t){return(t&&e.length?"\n":"")+e})):b.push(e[0])}),y=b,u=r(v,n)}for(h=0,c=y.length;h<c;h++){var w=0;if(a=y[h],u&&"\n"==a[0]&&(a=a.substr(1),w=1),l=t(a,n),f+m+(g=i(l))>s||w){if(g>s){for(d=o(a,l,s-(f+m),s),p.push(d.shift()),p=[d.pop()];d.length;)C.push([d.shift()]);g=i(l.slice(a.length-p[0].length))}else p=[a];C.push(p),f=g+u,m=_}else p.push(a),f+=m+g,m=_}if(u)var F=function(e,t){return(t?v:"")+e.join(" ")};else F=function(e){return e.join(" ")};return C.map(F)};e.splitTextToSize=function(e,t,i){i||(i={});var r,o=i.fontSize||this.internal.getFontSize(),n=function(e){var t={0:1},i={};if(e.widths&&e.kerning)return{widths:e.widths,kerning:e.kerning};var r=this.internal.getFont(e.fontName,e.fontStyle),o="Unicode";return r.metadata[o]?{widths:r.metadata[o].widths||t,kerning:r.metadata[o].kerning||i}:{widths:t,kerning:i}}.call(this,i);r=Array.isArray(e)?e:e.split(/\r?\n/);var a=1*this.internal.scaleFactor*t/o;n.textIndent=i.textIndent?1*i.textIndent*this.internal.scaleFactor/o:0,n.lineIndent=i.lineIndent;var l,h,c=[];for(l=0,h=r.length;l<h;l++)c=c.concat(s(r[l],a,n));return c}}(jsPDF.API),function(e){"use strict";var t=function(e){for(var t="klmnopqrstuvwxyz",i={},r=0;r<t.length;r++)i[t[r]]="0123456789abcdef"[r];var o,s,n,a,l,h={},c=1,d=h,u=[],p="",C="",f=e.length-1;for(r=1;r!=f;)l=e[r],r+=1,"'"==l?s?(a=s.join(""),s=o):s=[]:s?s.push(l):"{"==l?(u.push([d,a]),d={},a=o):"}"==l?((n=u.pop())[0][n[1]]=d,a=o,d=n[0]):"-"==l?c=-1:a===o?i.hasOwnProperty(l)?(p+=i[l],a=parseInt(p,16)*c,c=1,p=""):p+=l:i.hasOwnProperty(l)?(C+=i[l],d[a]=parseInt(C,16)*c,c=1,a=o,C=""):C+=l;return h},i={codePages:["WinAnsiEncoding"],WinAnsiEncoding:t("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},r={Unicode:{Courier:i,"Courier-Bold":i,"Courier-BoldOblique":i,"Courier-Oblique":i,Helvetica:i,"Helvetica-Bold":i,"Helvetica-BoldOblique":i,"Helvetica-Oblique":i,"Times-Roman":i,"Times-Bold":i,"Times-BoldItalic":i,"Times-Italic":i}},o={Unicode:{"Courier-Oblique":t("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":t("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":t("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:t("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":t("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":t("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Helvetica:t("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":t("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),"Courier-Bold":t("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":t("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":t("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":t("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFonts",function(e){var t,i,s,n,a,l="Unicode";for(i in e.fonts)e.fonts.hasOwnProperty(i)&&(t=e.fonts[i],(s=o[l][t.PostScriptName])&&((n=t.metadata[l]?t.metadata[l]:t.metadata[l]={}).widths=s.widths,n.kerning=s.kerning),(a=r[l][t.PostScriptName])&&((n=t.metadata[l]?t.metadata[l]:t.metadata[l]={}).encoding=a,a.codePages&&a.codePages.length&&(t.encoding=a.codePages[0])))}])}(jsPDF.API),function(e){"use strict";jsPDF.API.putTotalPages=function(e){for(var t=new RegExp(e,"g"),i=1;i<=this.internal.getNumberOfPages();i++)for(var r=0;r<this.internal.pages[i].length;r++)this.internal.pages[i][r]=this.internal.pages[i][r].replace(t,this.internal.getNumberOfPages());return this}}(),function(e){"use strict";if(e.URL=e.URL||e.webkitURL,e.Blob&&e.URL)try{return void new Blob}catch(e){}var t=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||function(e){var t=function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},i=function(){this.data=[]},r=function(e,t,i){this.data=e,this.size=e.length,this.type=t,this.encoding=i},o=i.prototype,s=r.prototype,n=e.FileReaderSync,a=function(e){this.code=this[this.name=e]},l="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),h=l.length,c=e.URL||e.webkitURL||e,d=c.createObjectURL,u=c.revokeObjectURL,p=c,C=e.btoa,f=e.atob,m=e.ArrayBuffer,g=e.Uint8Array,y=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(r.fake=s.fake=!0;h--;)a.prototype[l[h]]=h+1;return c.createObjectURL||(p=e.URL=function(e){var t,i=document.createElementNS("http://www.w3.org/1999/xhtml","a");return i.href=e,"origin"in i||("data:"===i.protocol.toLowerCase()?i.origin=null:(t=e.match(y),i.origin=t&&t[1])),i}),p.createObjectURL=function(e){var t,i=e.type;return null===i&&(i="application/octet-stream"),e instanceof r?(t="data:"+i,"base64"===e.encoding?t+";base64,"+e.data:"URI"===e.encoding?t+","+decodeURIComponent(e.data):C?t+";base64,"+C(e.data):t+","+encodeURIComponent(e.data)):d?d.call(c,e):void 0},p.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&u&&u.call(c,e)},o.append=function(e){var i=this.data;if(g&&(e instanceof m||e instanceof g)){for(var o="",s=new g(e),l=0,h=s.length;l<h;l++)o+=String.fromCharCode(s[l]);i.push(o)}else if("Blob"===t(e)||"File"===t(e)){if(!n)throw new a("NOT_READABLE_ERR");var c=new n;i.push(c.readAsBinaryString(e))}else e instanceof r?"base64"===e.encoding&&f?i.push(f(e.data)):"URI"===e.encoding?i.push(decodeURIComponent(e.data)):"raw"===e.encoding&&i.push(e.data):("string"!=typeof e&&(e+=""),i.push(unescape(encodeURIComponent(e))))},o.getBlob=function(e){return arguments.length||(e=null),new r(this.data.join(""),e,"raw")},o.toString=function(){return"[object BlobBuilder]"},s.slice=function(e,t,i){var o=arguments.length;return o<3&&(i=null),new r(this.data.slice(e,o>1?t:this.data.length),i,this.encoding)},s.toString=function(){return"[object Blob]"},s.close=function(){this.size=0,delete this.data},i}(e);e.Blob=function(e,i){var r=i&&i.type||"",o=new t;if(e)for(var s=0,n=e.length;s<n;s++)o.append(e[s]);return o.getBlob(r)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this);var saveAs=saveAs||typeof navigator!==u4b.p3&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(e){"use strict";var t="download";if(typeof navigator===u4b.p3||!/MSIE [1-9]\./.test(navigator.userAgent)){var i=e.document,r=function(){return e.URL||e.webkitURL||e},o=i.createElementNS(u4b.P4,"a"),s=t in o,n=e.webkitRequestFileSystem,a=e.requestFileSystem||n||e.mozRequestFileSystem,l=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},h=u4b.I3,c=0,d=function(t){var i=function(){typeof t===u4b.n4?r().revokeObjectURL(t):t.remove()};e.chrome?i():setTimeout(i,10)},u=function(e,t,i){for(var r=(t=[].concat(t)).length;r--;){var o=e["on"+t[r]];if(typeof o===u4b.C3)try{o.call(e,i||e)}catch(e){l(e)}}},p=function(l,p){var C,f,m,g,y,_=this,v=l.type,b=u4b.K4,w=function(){u(_,"writestart progress write writeend".split(u4b.M3))},F=function(){(!b&&C||(C=r().createObjectURL(l)),f)?f.location.href=C:null==e.open(C,"_blank")&&typeof safari!==u4b.p3&&(e.location.href=C);_.readyState=_.DONE,w(),d(C)},E=function(e){return function(){if(_.readyState!==_.DONE)return e.apply(this,arguments)}},O={create:u4b.q4,exclusive:u4b.K4};if(_.readyState=_.INIT,p||(p=t),s)return C=r().createObjectURL(l),o.href=C,o.download=p,g=o,(y=i.createEvent("MouseEvents")).initMouseEvent("click",u4b.q4,u4b.K4,e,0,0,0,0,0,u4b.K4,u4b.K4,u4b.K4,u4b.K4,0,u4b.p4),g.dispatchEvent(y),_.readyState=_.DONE,w(),void d(C);e.chrome&&v&&v!==h&&(m=l.slice||l.webkitSlice,l=m.call(l,0,l.size,h),b=u4b.q4),n&&p!==t&&(p+=".download"),(v===h||n)&&(f=e),a?(c+=l.size,a(e.TEMPORARY,c,E(function(e){e.root.getDirectory("saved",O,E(function(e){var t=function(){e.getFile(p,O,E(function(e){e.createWriter(E(function(t){t.onwriteend=function(t){f.location.href=e.toURL(),_.readyState=_.DONE,u(_,"writeend",t),d(e)},t.onerror=function(){var e=t.error;e.code!==e.ABORT_ERR&&F()},"writestart progress write abort".split(" ").forEach(function(e){t["on"+e]=_["on"+e]}),t.write(l),_.abort=function(){t.abort(),_.readyState=_.DONE},_.readyState=_.WRITING}),F)}),F)};e.getFile(p,{create:!1},E(function(e){e.remove(),t()}),E(function(e){e.code===e.NOT_FOUND_ERR?t():F()}))}),F)}),F)):F()},C=p.prototype;return C.abort=function(){var e=this;e.readyState=e.DONE,u(e,"abort")},C.readyState=C.INIT=0,C.WRITING=1,C.DONE=2,C.error=C.onwritestart=C.onprogress=C.onwrite=C.onabort=C.onerror=C.onwriteend=null,function(e,t){return new p(e,t)}}}(typeof self!==u4b.p3&&self||typeof window!==u4b.p3&&window||this.content);typeof module!==u4b.p3&&module!==u4b.p4?module.exports=saveAs:u4b.p3,function(e,t){"object"==typeof module?module.exports=t():e.adler32cs=t()}(jsPDF,function(){var e,t,i,r="function"==typeof ArrayBuffer&&"function"==typeof Uint8Array,o=null,s=function(){if(!r)return function(){return!1};try{var e=require("buffer");"function"==typeof e.Buffer&&(o=e.Buffer)}catch(e){}return function(e){return e instanceof ArrayBuffer||null!==o&&e instanceof o}}(),a=null!==o?function(e){return new o(e,"utf8").toString("binary")}:function(e){return unescape(encodeURIComponent(e))},l=65521,h=function(e,t){for(var i=65535&e,r=e>>>16,o=0,s=t.length;o<s;o++)r=(r+(i=(i+(255&t.charCodeAt(o)))%l))%l;return(r<<16|i)>>>0},c=function(e,t){for(var i=65535&e,r=e>>>16,o=0,s=t.length;o<s;o++)r=(r+(i=(i+t[o])%l))%l;return(r<<16|i)>>>0},d={};d.Adler32=((i=(t=function(e){if(!(this instanceof t))throw new TypeError("Constructor cannot called be as a function.");if(!isFinite(e=null==e?1:+e))throw new Error("First arguments needs to be a finite number.");this.checksum=e>>>0}).prototype={}).constructor=t,t.from=((e=function(e){if(!(this instanceof t))throw new TypeError("Constructor cannot called be as a function.");if(null==e)throw new Error("First argument needs to be a string.");this.checksum=h(1,e.toString())}).prototype=i,e),t.fromUtf8=function(e){return e.prototype=i,e}(function(e){if(!(this instanceof t))throw new TypeError("Constructor cannot called be as a function.");if(null==e)throw new Error("First argument needs to be a string.");var i=a(e.toString());this.checksum=h(1,i)}),r&&(t.fromBuffer=function(e){return e.prototype=i,e}(function(e){if(!(this instanceof t))throw new TypeError("Constructor cannot called be as a function.");if(!s(e))throw new Error("First argument needs to be ArrayBuffer.");var i=new Uint8Array(e);return this.checksum=c(1,i)})),i.update=function(e){if(null==e)throw new Error("First argument needs to be a string.");return e=e.toString(),this.checksum=h(this.checksum,e)},i.updateUtf8=function(e){if(null==e)throw new Error("First argument needs to be a string.");var t=a(e.toString());return this.checksum=h(this.checksum,t)},r&&(i.updateBuffer=function(e){if(!s(e))throw new Error("First argument needs to be ArrayBuffer.");var t=new Uint8Array(e);return this.checksum=c(this.checksum,t)}),i.clone=function(){return new n(this.checksum)},t);return d.from=function(e){if(null==e)throw new Error("First argument needs to be a string.");return h(1,e.toString())},d.fromUtf8=function(e){if(null==e)throw new Error("First argument needs to be a string.");var t=a(e.toString());return h(1,t)},r&&(d.fromBuffer=function(e){if(!s(e))throw new Error("First argument need to be ArrayBuffer.");var t=new Uint8Array(e);return c(1,t)}),d});var Deflater=function(e){var t=15,i=30,r=19,o=u4b.T4,s=o+1+29,n=2*s+1,a=u4b.T4,l=16,h=17,c=18,d=16,u=-1,p=1,C=2,f=0,m=0,g=1,y=3,_=4,v=0,b=1,w=2,F=-2,E=-3,O=-5,S=[0,1,2,3,4,4,5,5,6,6,6,6,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,0,0,16,17,18,18,19,19,20,20,20,20,21,21,21,21,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29];function T(){var e=this;function i(e,t){var i=0;do{i|=1&e,e>>>=1,i<<=1}while(--t>0);return i>>>1}e.build_tree=function(r){var o,s,a,l=e.dyn_tree,h=e.stat_desc.static_tree,c=e.stat_desc.elems,d=-1;for(r.heap_len=0,r.heap_max=n,o=0;o<c;o++)0!==l[2*o]?(r.heap[++r.heap_len]=d=o,r.depth[o]=0):l[2*o+1]=0;for(;r.heap_len<2;)l[2*(a=r.heap[++r.heap_len]=d<2?++d:0)]=1,r.depth[a]=0,r.opt_len--,h&&(r.static_len-=h[2*a+1]);for(e.max_code=d,o=Math.floor(r.heap_len/2);o>=1;o--)r.pqdownheap(l,o);a=c;do{o=r.heap[1],r.heap[1]=r.heap[r.heap_len--],r.pqdownheap(l,1),s=r.heap[1],r.heap[--r.heap_max]=o,r.heap[--r.heap_max]=s,l[2*a]=l[2*o]+l[2*s],r.depth[a]=Math.max(r.depth[o],r.depth[s])+1,l[2*o+1]=l[2*s+1]=a,r.heap[1]=a++,r.pqdownheap(l,1)}while(r.heap_len>=2);r.heap[--r.heap_max]=r.heap[1],function(i){var r,o,s,a,l,h,c=e.dyn_tree,d=e.stat_desc.static_tree,u=e.stat_desc.extra_bits,p=e.stat_desc.extra_base,C=e.stat_desc.max_length,f=0;for(a=0;a<=t;a++)i.bl_count[a]=0;for(c[2*i.heap[i.heap_max]+1]=0,r=i.heap_max+1;r<n;r++)(a=c[2*c[2*(o=i.heap[r])+1]+1]+1)>C&&(a=C,f++),c[2*o+1]=a,o>e.max_code||(i.bl_count[a]++,l=0,o>=p&&(l=u[o-p]),h=c[2*o],i.opt_len+=h*(a+l),d&&(i.static_len+=h*(d[2*o+1]+l)));if(0!==f){do{for(a=C-1;0===i.bl_count[a];)a--;i.bl_count[a]--,i.bl_count[a+1]+=2,i.bl_count[C]--,f-=2}while(f>0);for(a=C;0!==a;a--)for(o=i.bl_count[a];0!==o;)(s=i.heap[--r])>e.max_code||(c[2*s+1]!=a&&(i.opt_len+=(a-c[2*s+1])*c[2*s],c[2*s+1]=a),o--)}}(r),function(e,r,o){var s,n,a,l=[],h=0;for(s=1;s<=t;s++)l[s]=h=h+o[s-1]<<1;for(n=0;n<=r;n++)0!==(a=e[2*n+1])&&(e[2*n]=i(l[a]++,a))}(l,e.max_code,r.bl_count)}}function x(e,t,i,r,o){var s=this;s.static_tree=e,s.extra_bits=t,s.extra_base=i,s.elems=r,s.max_length=o}T._length_code=[0,1,2,3,4,5,6,7,8,8,9,9,10,10,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28],T.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],T.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,u4b.T4,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],T.d_code=function(e){return e<u4b.T4?S[e]:S[u4b.T4+(e>>>7)]},T.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],T.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],T.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],T.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],x.static_ltree=[12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,u4b.U4,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8],x.static_dtree=[0,5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5],x.static_l_desc=new x(x.static_ltree,T.extra_lbits,o+1,s,t),x.static_d_desc=new x(x.static_dtree,T.extra_dbits,0,i,t),x.static_bl_desc=new x(u4b.p4,T.extra_blbits,0,r,7);var L=9,A=8;function I(e,t,i,r,o){var s=this;s.good_length=e,s.max_lazy=t,s.nice_length=i,s.max_chain=r,s.func=o}var R=0,D=1,N=2,M=[new I(0,0,0,0,R),new I(4,4,8,4,D),new I(4,5,16,8,D),new I(4,6,32,32,D),new I(4,4,16,16,N),new I(8,16,32,32,N),new I(8,16,128,128,N),new I(8,32,128,u4b.T4,N),new I(32,128,258,1024,N),new I(32,258,258,4096,N)],P=["need dictionary","stream end","","","stream error","data error","","buffer error","",""],H=0,U=1,B=2,k=3,V=32,z=42,q=113,G=666,W=8,j=0,Y=1,X=2,K=3,Q=258,J=Q+K+1;function Z(e,t,i,r){var o=e[2*t],s=e[2*i];return o<s||o==s&&r[t]<=r[i]}function $(){var e,t,n,S,I,$,ee,te,ie,re,oe,se,ne,ae,le,he,ce,de,ue,pe,Ce,fe,me,ge,ye,_e,ve,be,we,Fe,Ee,Oe,Se,Te,xe,Le,Ae,Ie,Re,De,Ne,Me=this,Pe=new T,He=new T,Ue=new T;function Be(){var e;for(e=0;e<s;e++)Ee[2*e]=0;for(e=0;e<i;e++)Oe[2*e]=0;for(e=0;e<r;e++)Se[2*e]=0;Ee[2*a]=1,Me.opt_len=Me.static_len=0,Le=Ie=0}function ke(e,t){var i,r,o=-1,s=e[1],n=0,a=7,d=4;for(0===s&&(a=138,d=3),e[2*(t+1)+1]=65535,i=0;i<=t;i++)r=s,s=e[2*(i+1)+1],++n<a&&r==s||(n<d?Se[2*r]+=n:0!==r?(r!=o&&Se[2*r]++,Se[2*l]++):n<=10?Se[2*h]++:Se[2*c]++,n=0,o=r,0===s?(a=138,d=3):r==s?(a=6,d=3):(a=7,d=4))}function Ve(e){Me.pending_buf[Me.pending++]=e}function ze(e){Ve(255&e),Ve(e>>>8&255)}function qe(e,t){var i,r=t;Ne>d-r?(ze(De|=(i=e)<<Ne&65535),De=i>>>d-Ne,Ne+=r-d):(De|=e<<Ne&65535,Ne+=r)}function Ge(e,t){var i=2*e;qe(65535&t[i],65535&t[i+1])}function We(e,t){var i,r,o=-1,s=e[1],n=0,a=7,d=4;for(0===s&&(a=138,d=3),i=0;i<=t;i++)if(r=s,s=e[2*(i+1)+1],!(++n<a&&r==s)){if(n<d)do{Ge(r,Se)}while(0!=--n);else 0!==r?(r!=o&&(Ge(r,Se),n--),Ge(l,Se),qe(n-3,2)):n<=10?(Ge(h,Se),qe(n-3,3)):(Ge(c,Se),qe(n-11,7));n=0,o=r,0===s?(a=138,d=3):r==s?(a=6,d=3):(a=7,d=4)}}function je(){16==Ne?(ze(De),De=0,Ne=0):Ne>=8&&(Ve(255&De),De>>>=8,Ne-=8)}function Ye(e,t){var r,s,n;if(Me.pending_buf[Ae+2*Le]=e>>>8&255,Me.pending_buf[Ae+2*Le+1]=255&e,Me.pending_buf[Te+Le]=255&t,Le++,0===e?Ee[2*t]++:(Ie++,e--,Ee[2*(T._length_code[t]+o+1)]++,Oe[2*T.d_code(e)]++),0==(8191&Le)&&ve>2){for(r=8*Le,s=Ce-ce,n=0;n<i;n++)r+=Oe[2*n]*(5+T.extra_dbits[n]);if(r>>>=3,Ie<Math.floor(Le/2)&&r<Math.floor(s/2))return u4b.q4}return Le==xe-1}function Xe(e,t){var i,r,s,n,l=0;if(0!==Le)do{i=Me.pending_buf[Ae+2*l]<<8&65280|255&Me.pending_buf[Ae+2*l+1],r=255&Me.pending_buf[Te+l],l++,0===i?Ge(r,e):(Ge((s=T._length_code[r])+o+1,e),0!==(n=T.extra_lbits[s])&&qe(r-=T.base_length[s],n),i--,Ge(s=T.d_code(i),t),0!==(n=T.extra_dbits[s])&&qe(i-=T.base_dist[s],n))}while(l<Le);Ge(a,e),Re=e[2*a+1]}function Ke(){Ne>8?ze(De):Ne>0&&Ve(255&De),De=0,Ne=0}function Qe(e,t,i){qe((j<<1)+(i?1:0),3),function(e,t,i){Ke(),Re=8,i&&(ze(t),ze(~t)),Me.pending_buf.set(te.subarray(e,e+t),Me.pending),Me.pending+=t}(e,t,u4b.q4)}function Je(e,t,i){var o,s,n=0;ve>0?(Pe.build_tree(Me),He.build_tree(Me),n=function(){var e;for(ke(Ee,Pe.max_code),ke(Oe,He.max_code),Ue.build_tree(Me),e=r-1;e>=3&&0===Se[2*T.bl_order[e]+1];e--);return Me.opt_len+=3*(e+1)+5+5+4,e}(),o=Me.opt_len+3+7>>>3,(s=Me.static_len+3+7>>>3)<=o&&(o=s)):o=s=t+5,t+4<=o&&-1!=e?Qe(e,t,i):s==o?(qe((Y<<1)+(i?1:0),3),Xe(x.static_ltree,x.static_dtree)):(qe((X<<1)+(i?1:0),3),function(e,t,i){var r;for(qe(e-257,5),qe(t-1,5),qe(i-4,4),r=0;r<i;r++)qe(Se[2*T.bl_order[r]+1],3);We(Ee,e-1),We(Oe,t-1)}(Pe.max_code+1,He.max_code+1,n+1),Xe(Ee,Oe)),Be(),i&&Ke()}function Ze(t){Je(ce>=0?ce:-1,Ce-ce,t),ce=Ce,e.flush_pending()}function $e(){var t,i,r,o;do{if(0===(o=ie-me-Ce)&&0===Ce&&0===me)o=I;else if(-1==o)o--;else if(Ce>=I+I-J){te.set(te.subarray(I,I+I),0),fe-=I,Ce-=I,ce-=I,r=t=ne;do{i=65535&oe[--r],oe[r]=i>=I?i-I:0}while(0!=--t);r=t=I;do{i=65535&re[--r],re[r]=i>=I?i-I:0}while(0!=--t);o+=I}if(0===e.avail_in)return;t=e.read_buf(te,Ce+me,o),(me+=t)>=K&&(se=((se=255&te[Ce])<<he^255&te[Ce+1])&le)}while(me<J&&0!==e.avail_in)}function et(e){var t,i,r=ye,o=Ce,s=ge,n=Ce>I-J?Ce-(I-J):0,a=Fe,l=ee,h=Ce+Q,c=te[o+s-1],d=te[o+s];ge>=we&&(r>>=2),a>me&&(a=me);do{if(te[(t=e)+s]==d&&te[t+s-1]==c&&te[t]==te[o]&&te[++t]==te[o+1]){o+=2,t++;do{}while(te[++o]==te[++t]&&te[++o]==te[++t]&&te[++o]==te[++t]&&te[++o]==te[++t]&&te[++o]==te[++t]&&te[++o]==te[++t]&&te[++o]==te[++t]&&te[++o]==te[++t]&&o<h);if(i=Q-(h-o),o=h-Q,i>s){if(fe=e,s=i,i>=a)break;c=te[o+s-1],d=te[o+s]}}}while((e=65535&re[e&l])>n&&0!=--r);return s<=me?s:me}function tt(e){return e.total_in=e.total_out=0,e.msg=u4b.p4,Me.pending=0,Me.pending_out=0,t=q,S=m,Pe.dyn_tree=Ee,Pe.stat_desc=x.static_l_desc,He.dyn_tree=Oe,He.stat_desc=x.static_d_desc,Ue.dyn_tree=Se,Ue.stat_desc=x.static_bl_desc,De=0,Ne=0,Re=8,Be(),function(){var e;for(ie=2*I,oe[ne-1]=0,e=0;e<ne-1;e++)oe[e]=0;_e=M[ve].max_lazy,we=M[ve].good_length,Fe=M[ve].nice_length,ye=M[ve].max_chain,Ce=0,ce=0,me=0,de=ge=K-1,pe=0,se=0}(),v}Me.depth=[],Me.bl_count=[],Me.heap=[],Ee=[],Oe=[],Se=[],Me.pqdownheap=function(e,t){for(var i=Me.heap,r=i[t],o=t<<1;o<=Me.heap_len&&(o<Me.heap_len&&Z(e,i[o+1],i[o],Me.depth)&&o++,!Z(e,r,i[o],Me.depth));)i[t]=i[o],t=o,o<<=1;i[t]=r},Me.deflateInit=function(e,t,i,r,o,s){return r||(r=W),o||(o=A),s||(s=f),e.msg=u4b.p4,t==u&&(t=6),o<1||o>L||r!=W||i<9||i>15||t<0||t>9||s<0||s>C?F:(e.dstate=Me,ee=(I=1<<($=i))-1,le=(ne=1<<(ae=o+7))-1,he=Math.floor((ae+K-1)/K),te=new Uint8Array(2*I),re=[],oe=[],xe=1<<o+6,Me.pending_buf=new Uint8Array(4*xe),n=4*xe,Ae=Math.floor(xe/2),Te=3*xe,ve=t,be=s,255&r,tt(e))},Me.deflateEnd=function(){return t!=z&&t!=q&&t!=G?F:(Me.pending_buf=u4b.p4,oe=u4b.p4,re=u4b.p4,te=u4b.p4,Me.dstate=u4b.p4,t==q?E:v)},Me.deflateParams=function(e,t,i){var r=v;return t==u&&(t=6),t<0||t>9||i<0||i>C?F:(M[ve].func!=M[t].func&&0!==e.total_in&&(r=e.deflate(g)),ve!=t&&(_e=M[ve=t].max_lazy,we=M[ve].good_length,Fe=M[ve].nice_length,ye=M[ve].max_chain),be=i,r)},Me.deflateSetDictionary=function(e,i,r){var o,s=r,n=0;if(!i||t!=z)return F;if(s<K)return v;for(s>I-J&&(n=r-(s=I-J)),te.set(i.subarray(n,n+s),0),Ce=s,ce=s,se=((se=255&te[0])<<he^255&te[1])&le,o=0;o<=s-K;o++)se=(se<<he^255&te[o+(K-1)])&le,re[o&ee]=oe[se],oe[se]=o;return v},Me.deflate=function(i,r){var o,s,l,h,c;if(r>_||r<0)return F;if(!i.next_out||!i.next_in&&0!==i.avail_in||t==G&&r!=_)return i.msg=P[w-F],F;if(0===i.avail_out)return i.msg=P[w-O],O;if(e=i,h=S,S=r,t==z&&(s=W+($-8<<4)<<8,(l=(ve-1&255)>>1)>3&&(l=3),s|=l<<6,0!==Ce&&(s|=V),t=q,function(e){Ve(e>>8&255),Ve(255&e)}(s+=31-s%31)),0!==Me.pending){if(e.flush_pending(),0===e.avail_out)return S=-1,v}else if(0===e.avail_in&&r<=h&&r!=_)return e.msg=P[w-O],O;if(t==G&&0!==e.avail_in)return i.msg=P[w-O],O;if(0!==e.avail_in||0!==me||r!=m&&t!=G){switch(c=-1,M[ve].func){case R:c=function(t){var i,r=65535;for(r>n-5&&(r=n-5);u4b.q4;){if(me<=1){if($e(),0===me&&t==m)return H;if(0===me)break}if(Ce+=me,me=0,i=ce+r,(0===Ce||Ce>=i)&&(me=Ce-i,Ce=i,Ze(u4b.K4),0===e.avail_out))return H;if(Ce-ce>=I-J&&(Ze(u4b.K4),0===e.avail_out))return H}return Ze(t==_),0===e.avail_out?t==_?B:H:t==_?k:U}(r);break;case D:c=function(t){for(var i,r=0;u4b.q4;){if(me<J){if($e(),me<J&&t==m)return H;if(0===me)break}if(me>=K&&(se=(se<<he^255&te[Ce+(K-1)])&le,r=65535&oe[se],re[Ce&ee]=oe[se],oe[se]=Ce),0!==r&&(Ce-r&65535)<=I-J&&be!=C&&(de=et(r)),de>=K)if(i=Ye(Ce-fe,de-K),me-=de,de<=_e&&me>=K){de--;do{se=(se<<he^255&te[++Ce+(K-1)])&le,r=65535&oe[se],re[Ce&ee]=oe[se],oe[se]=Ce}while(0!=--de);Ce++}else Ce+=de,de=0,se=((se=255&te[Ce])<<he^255&te[Ce+1])&le;else i=Ye(0,255&te[Ce]),me--,Ce++;if(i&&(Ze(u4b.K4),0===e.avail_out))return H}return Ze(t==_),0===e.avail_out?t==_?B:H:t==_?k:U}(r);break;case N:c=function(t){for(var i,r,o=0;u4b.q4;){if(me<J){if($e(),me<J&&t==m)return H;if(0===me)break}if(me>=K&&(se=(se<<he^255&te[Ce+(K-1)])&le,o=65535&oe[se],re[Ce&ee]=oe[se],oe[se]=Ce),ge=de,ue=fe,de=K-1,0!==o&&ge<_e&&(Ce-o&65535)<=I-J&&(be!=C&&(de=et(o)),de<=5&&(be==p||de==K&&Ce-fe>4096)&&(de=K-1)),ge>=K&&de<=ge){r=Ce+me-K,i=Ye(Ce-1-ue,ge-K),me-=ge-1,ge-=2;do{++Ce<=r&&(se=(se<<he^255&te[Ce+(K-1)])&le,o=65535&oe[se],re[Ce&ee]=oe[se],oe[se]=Ce)}while(0!=--ge);if(pe=0,de=K-1,Ce++,i&&(Ze(u4b.K4),0===e.avail_out))return H}else if(0!==pe){if((i=Ye(0,255&te[Ce-1]))&&Ze(u4b.K4),Ce++,me--,0===e.avail_out)return H}else pe=1,Ce++,me--}return 0!==pe&&(i=Ye(0,255&te[Ce-1]),pe=0),Ze(t==_),0===e.avail_out?t==_?B:H:t==_?k:U}(r)}if(c!=B&&c!=k||(t=G),c==H||c==B)return 0===e.avail_out&&(S=-1),v;if(c==U){if(r==g)qe(Y<<1,3),Ge(a,x.static_ltree),je(),1+Re+10-Ne<9&&(qe(Y<<1,3),Ge(a,x.static_ltree),je()),Re=7;else if(Qe(0,0,u4b.K4),r==y)for(o=0;o<ne;o++)oe[o]=0;if(e.flush_pending(),0===e.avail_out)return S=-1,v}}return r!=_?v:b}}function ee(){var e=this;e.next_in_index=0,e.next_out_index=0,e.avail_in=0,e.total_in=0,e.avail_out=0,e.total_out=0}return ee.prototype={deflateInit:function(e,i){var r=this;return r.dstate=new $,i||(i=t),r.dstate.deflateInit(r,e,i)},deflate:function(e){var t=this;return t.dstate?t.dstate.deflate(t,e):F},deflateEnd:function(){var e=this;if(!e.dstate)return F;var t=e.dstate.deflateEnd();return e.dstate=u4b.p4,t},deflateParams:function(e,t){var i=this;return i.dstate?i.dstate.deflateParams(i,e,t):F},deflateSetDictionary:function(e,t){var i=this;return i.dstate?i.dstate.deflateSetDictionary(i,e,t):F},read_buf:function(e,t,i){var r=this,o=r.avail_in;return o>i&&(o=i),0===o?0:(r.avail_in-=o,e.set(r.next_in.subarray(r.next_in_index,r.next_in_index+o),t),r.next_in_index+=o,r.total_in+=o,o)},flush_pending:function(){var e=this,t=e.dstate.pending;t>e.avail_out&&(t=e.avail_out),0!==t&&(e.next_out.set(e.dstate.pending_buf.subarray(e.dstate.pending_out,e.dstate.pending_out+t),e.next_out_index),e.next_out_index+=t,e.dstate.pending_out+=t,e.total_out+=t,e.avail_out-=t,e.dstate.pending-=t,0===e.dstate.pending&&(e.dstate.pending_out=0))}},function(e){var t=new ee,i=512,r=m,o=new Uint8Array(i);typeof e==u4b.p3&&(e=u),t.deflateInit(e),t.next_out=o,this.append=function(e,s){var n,a=[],l=0,h=0,c=0;if(e.length){t.next_in_index=0,t.next_in=e,t.avail_in=e.length;do{if(t.next_out_index=0,t.avail_out=i,t.deflate(r)!=v)throw"deflating: "+t.msg;t.next_out_index&&(t.next_out_index==i?a.push(new Uint8Array(o)):a.push(new Uint8Array(o.subarray(0,t.next_out_index)))),c+=t.next_out_index,s&&t.next_in_index>0&&t.next_in_index!=l&&(s(t.next_in_index),l=t.next_in_index)}while(t.avail_in>0||0===t.avail_out);return n=new Uint8Array(c),a.forEach(function(e){n.set(e,h),h+=e.length}),n}},this.flush=function(){var e,r,s=[],n=0,a=0;do{if(t.next_out_index=0,t.avail_out=i,(e=t.deflate(_))!=b&&e!=v)throw"deflating: "+t.msg;i-t.avail_out>0&&s.push(new Uint8Array(o.subarray(0,t.next_out_index))),a+=t.next_out_index}while(t.avail_in>0||0===t.avail_out);return t.deflateEnd(),r=new Uint8Array(a),s.forEach(function(e){r.set(e,n),n+=e.length}),r}}}();!function(e){var t;t=function(){var t,i,r;function o(e){var t,i,r,o,s,n,a,l,h,c,d,u,p,C;for(this.data=e,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},n=null;;){switch(t=this.readUInt32(),h=function(){var e,t;for(t=[],e=0;e<4;++e)t.push(String.fromCharCode(this.data[this.pos++]));return t}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(t);break;case"fcTL":n&&this.animation.frames.push(n),this.pos+=4,n={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},s=this.readUInt16(),o=this.readUInt16()||100,n.delay=1e3*s/o,n.disposeOp=this.data[this.pos++],n.blendOp=this.data[this.pos++],n.data=[];break;case"IDAT":case"fdAT":for("fdAT"===h&&(this.pos+=4,t-=4),e=(null!=n?n.data:void 0)||this.imgData,u=0;0<=t?u<t:u>t;0<=t?++u:--u)e.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(r=this.palette.length/3,this.transparency.indexed=this.read(t),this.transparency.indexed.length>r)throw new Error("More transparent colors than palette size");if((c=r-this.transparency.indexed.length)>0)for(p=0;0<=c?p<c:p>c;0<=c?++p:--p)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(t)[0];break;case 2:this.transparency.rgb=this.read(t)}break;case"tEXt":a=(d=this.read(t)).indexOf(0),l=String.fromCharCode.apply(String,d.slice(0,a)),this.text[l]=String.fromCharCode.apply(String,d.slice(a+1));break;case"IEND":return n&&this.animation.frames.push(n),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(C=this.colorType)||6===C,i=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*i,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=t}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}o.load=function(e,t,i){var r;return"function"==typeof t&&(i=t),(r=new XMLHttpRequest).open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){var e;return e=new o(new Uint8Array(r.response||r.mozResponseArrayBuffer)),"function"==typeof(null!=t?t.getContext:void 0)&&e.render(t),"function"==typeof i?i(e):void 0},r.send(null)},o.prototype.read=function(e){var t,i;for(i=[],t=0;0<=e?t<e:t>e;0<=e?++t:--t)i.push(this.data[this.pos++]);return i},o.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},o.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},o.prototype.decodePixels=function(e){var t,i,r,o,s,n,a,l,h,c,d,u,p,C,f,m,g,y,_,v,b,w,F;if(null==e&&(e=this.imgData),0===e.length)return new Uint8Array(0);for(e=(e=new FlateStream(e)).getBytes(),m=(u=this.pixelBitlength/8)*this.width,p=new Uint8Array(m*this.height),n=e.length,f=0,C=0,i=0;C<n;){switch(e[C++]){case 0:for(o=_=0;_<m;o=_+=1)p[i++]=e[C++];break;case 1:for(o=v=0;v<m;o=v+=1)t=e[C++],s=o<u?0:p[i-u],p[i++]=(t+s)%256;break;case 2:for(o=b=0;b<m;o=b+=1)t=e[C++],r=(o-o%u)/u,g=f&&p[(f-1)*m+r*u+o%u],p[i++]=(g+t)%256;break;case 3:for(o=w=0;w<m;o=w+=1)t=e[C++],r=(o-o%u)/u,s=o<u?0:p[i-u],g=f&&p[(f-1)*m+r*u+o%u],p[i++]=(t+Math.floor((s+g)/2))%256;break;case 4:for(o=F=0;F<m;o=F+=1)t=e[C++],r=(o-o%u)/u,s=o<u?0:p[i-u],0===f?g=y=0:(g=p[(f-1)*m+r*u+o%u],y=r&&p[(f-1)*m+(r-1)*u+o%u]),a=s+g-y,l=Math.abs(a-s),c=Math.abs(a-g),d=Math.abs(a-y),h=l<=c&&l<=d?s:c<=d?g:y,p[i++]=(t+h)%256;break;default:throw new Error("Invalid filter algorithm: "+e[C-1])}f++}return p},o.prototype.decodePalette=function(){var e,t,i,r,o,s,n,a,l;for(i=this.palette,s=this.transparency.indexed||[],o=new Uint8Array((s.length||0)+i.length),r=0,i.length,e=0,t=n=0,a=i.length;n<a;t=n+=3)o[r++]=i[t],o[r++]=i[t+1],o[r++]=i[t+2],o[r++]=null!=(l=s[e++])?l:255;return o},o.prototype.copyToImageData=function(e,t){var i,r,o,s,n,a,l,h,c,d,u;if(r=this.colors,c=null,i=this.hasAlphaChannel,this.palette.length&&(c=null!=(u=this._decodedPalette)?u:this._decodedPalette=this.decodePalette(),r=4,i=!0),h=(o=e.data||e).length,n=c||t,s=a=0,1===r)for(;s<h;)l=c?4*t[s/4]:a,d=n[l++],o[s++]=d,o[s++]=d,o[s++]=d,o[s++]=i?n[l++]:255,a=l;else for(;s<h;)l=c?4*t[s/4]:a,o[s++]=n[l++],o[s++]=n[l++],o[s++]=n[l++],o[s++]=i?n[l++]:255,a=l},o.prototype.decode=function(){var e;return e=new Uint8Array(this.width*this.height*4),this.copyToImageData(e,this.decodePixels()),e};try{i=e.document.createElement("canvas"),r=i.getContext("2d")}catch(e){return-1}return t=function(e){var t;return r.width=e.width,r.height=e.height,r.clearRect(0,0,e.width,e.height),r.putImageData(e,0,0),(t=new Image).src=i.toDataURL(),t},o.prototype.decodeFrames=function(e){var i,r,o,s,n,a,l,h;if(this.animation){for(h=[],r=n=0,a=(l=this.animation.frames).length;n<a;r=++n)i=l[r],o=e.createImageData(i.width,i.height),s=this.decodePixels(new Uint8Array(i.data)),this.copyToImageData(o,s),i.imageData=o,h.push(i.image=t(o));return h}},o.prototype.renderFrame=function(e,t){var i,r,o;return i=(r=this.animation.frames)[t],o=r[t-1],0===t&&e.clearRect(0,0,this.width,this.height),1===(null!=o?o.disposeOp:void 0)?e.clearRect(o.xOffset,o.yOffset,o.width,o.height):2===(null!=o?o.disposeOp:void 0)&&e.putImageData(o.imageData,o.xOffset,o.yOffset),0===i.blendOp&&e.clearRect(i.xOffset,i.yOffset,i.width,i.height),e.drawImage(i.image,i.xOffset,i.yOffset)},o.prototype.animate=function(e){var t,i,r,o,s,n,a=this;return i=0,n=this.animation,o=n.numFrames,r=n.frames,s=n.numPlays,(t=function(){var n,l;if(n=i++%o,l=r[n],a.renderFrame(e,n),o>1&&i/o<s)return a.animation._timeout=setTimeout(t,l.delay)})()},o.prototype.stopAnimation=function(){var e;return clearTimeout(null!=(e=this.animation)?e._timeout:void 0)},o.prototype.render=function(e){var t,i;return e._png&&e._png.stopAnimation(),e._png=this,e.width=this.width,e.height=this.height,t=e.getContext("2d"),this.animation?(this.decodeFrames(t),this.animate(t)):(i=t.createImageData(this.width,this.height),this.copyToImageData(i,this.decodePixels()),t.putImageData(i,0,0))},o}(),e.PNG=t}(typeof window!==u4b.p3&&window||this);var DecodeStream=function(){function e(){this.pos=0,this.bufferLength=0,this.eof=u4b.K4,this.buffer=u4b.p4}return e.prototype={ensureBuffer:function(e){var t=this.buffer,i=t?t.byteLength:0;if(e<i)return t;for(var r=512;r<e;)r<<=1;for(var o=new Uint8Array(r),s=0;s<i;++s)o[s]=t[s];return this.buffer=o},getByte:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(e){var t=this.pos;if(e){this.ensureBuffer(t+e);for(var i=t+e;!this.eof&&this.bufferLength<i;)this.readBlock();var r=this.bufferLength;i>r&&(i=r)}else{for(;!this.eof;)this.readBlock();i=this.bufferLength}return this.pos=i,this.buffer.subarray(t,i)},lookChar:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(e,t,i){for(var r=e+t;this.bufferLength<=r&&!this.eof;)this.readBlock();return new Stream(this.buffer,e,t,i)},skip:function(e){e||(e=1),this.pos+=e},reset:function(){this.pos=0}},e}(),FlateStream=function(){if(typeof Uint32Array!==u4b.U3){var e=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),t=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),i=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),r=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],o=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];return n.prototype=Object.create(DecodeStream.prototype),n.prototype.getBits=function(e){for(var t,i=this.codeSize,r=this.codeBuf,o=this.bytes,n=this.bytesPos;i<e;)typeof(t=o[n++])==u4b.U3&&s("Bad encoding in flate stream"),r|=t<<i,i+=8;return t=r&(1<<e)-1,this.codeBuf=r>>e,this.codeSize=i-=e,this.bytesPos=n,t},n.prototype.getCode=function(e){for(var t=e[0],i=e[1],r=this.codeSize,o=this.codeBuf,n=this.bytes,a=this.bytesPos;r<i;){var l;typeof(l=n[a++])==u4b.U3&&s("Bad encoding in flate stream"),o|=l<<r,r+=8}var h=t[o&(1<<i)-1],c=h>>16,d=65535&h;return(0==r||r<c||0==c)&&s("Bad encoding in flate stream"),this.codeBuf=o>>c,this.codeSize=r-c,this.bytesPos=a,d},n.prototype.generateHuffmanTable=function(e){for(var t=e.length,i=0,r=0;r<t;++r)e[r]>i&&(i=e[r]);for(var o=1<<i,s=new Uint32Array(o),n=1,a=0,l=2;n<=i;++n,a<<=1,l<<=1)for(var h=0;h<t;++h)if(e[h]==n){var c=0,d=a;for(r=0;r<n;++r)c=c<<1|1&d,d>>=1;for(r=c;r<o;r+=l)s[r]=n<<16|h;++a}return[s,i]},n.prototype.readBlock=function(){function n(e,t,i,r,o){for(var s=e.getBits(i)+r;s-- >0;)t[C++]=o}var a=this.getBits(3);if(1&a&&(this.eof=!0),0!=(a>>=1)){var l,h;if(1==a)l=r,h=o;else if(2==a){for(var c=this.getBits(5)+257,d=this.getBits(5)+1,u=this.getBits(4)+4,p=Array(e.length),C=0;C<u;)p[e[C++]]=this.getBits(3);for(var f=this.generateHuffmanTable(p),m=0,g=(C=0,c+d),y=new Array(g);C<g;){var _=this.getCode(f);16==_?n(this,y,2,3,m):17==_?n(this,y,3,3,m=0):18==_?n(this,y,7,11,m=0):y[C++]=m=_}l=this.generateHuffmanTable(y.slice(0,c)),h=this.generateHuffmanTable(y.slice(c,g))}else s("Unknown block type in flate stream");for(var v=(R=this.buffer)?R.length:0,b=this.bufferLength;;){var w=this.getCode(l);if(w<256)b+1>=v&&(v=(R=this.ensureBuffer(b+1)).length),R[b++]=w;else{if(256==w)return void(this.bufferLength=b);var F=(w=t[w-=257])>>16;F>0&&(F=this.getBits(F));m=(65535&w)+F;w=this.getCode(h),(F=(w=i[w])>>16)>0&&(F=this.getBits(F));var E=(65535&w)+F;b+m>=v&&(v=(R=this.ensureBuffer(b+m)).length);for(var O=0;O<m;++O,++b)R[b]=R[b-E]}}}else{var S,T=this.bytes,x=this.bytesPos;void 0===(S=T[x++])&&s("Bad block header in flate stream");var L=S;void 0===(S=T[x++])&&s("Bad block header in flate stream"),L|=S<<8,void 0===(S=T[x++])&&s("Bad block header in flate stream");var A=S;void 0===(S=T[x++])&&s("Bad block header in flate stream"),(A|=S<<8)!=(65535&~L)&&s("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var I=this.bufferLength,R=this.ensureBuffer(I+L),D=I+L;this.bufferLength=D;for(var N=I;N<D;++N){if(void 0===(S=T[x++])){this.eof=!0;break}R[N]=S}this.bytesPos=x}},n}function s(e){throw new Error(e)}function n(e){var t=0,i=e[t++],r=e[t++];-1!=i&&-1!=r||s("Invalid header in flate stream"),8!=(15&i)&&s("Unknown compression method in flate stream"),((i<<8)+r)%31!=0&&s("Bad FCHECK in flate stream"),32&r&&s("FDICT bit set in flate stream"),this.bytes=e,this.bytesPos=2,this.codeSize=0,this.codeBuf=0,DecodeStream.call(this)}}();!function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";typeof e.btoa===u4b.U3&&(e.btoa=function(e){var i,r,o,s,n,a=0,l=0,h="",c=[];if(!e)return e;do{i=(n=e.charCodeAt(a++)<<16|e.charCodeAt(a++)<<8|e.charCodeAt(a++))>>18&63,r=n>>12&63,o=n>>6&63,s=63&n,c[l++]=t.charAt(i)+t.charAt(r)+t.charAt(o)+t.charAt(s)}while(a<e.length);h=c.join("");var d=e.length%3;return(d?h.slice(0,d-3):h)+"===".slice(d||3)}),typeof e.atob===u4b.U3&&(e.atob=function(e){var i,r,o,s,n,a,l=0,h=0,c=[];if(!e)return e;e+="";do{i=(a=t.indexOf(e.charAt(l++))<<18|t.indexOf(e.charAt(l++))<<12|(s=t.indexOf(e.charAt(l++)))<<6|(n=t.indexOf(e.charAt(l++))))>>16&255,r=a>>8&255,o=255&a,c[h++]=64==s?String.fromCharCode(i):64==n?String.fromCharCode(i,r):String.fromCharCode(i,r,o)}while(l<e.length);return c.join("")}),Array.prototype.map||(Array.prototype.map=function(e){if(null==this||"function"!=typeof e)throw new TypeError;for(var t=Object(this),i=t.length>>>0,r=new Array(i),o=arguments.length>1?arguments[1]:void 0,s=0;s<i;s++)s in t&&(r[s]=e.call(o,t[s],s,t));return r}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){"use strict";if(null==this||"function"!=typeof e)throw new TypeError;for(var i=Object(this),r=i.length>>>0,o=0;o<r;o++)o in i&&e.call(t,i[o],o,i)}),Object.keys||(Object.keys=function(){"use strict";var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=i.length;return function(o){if("object"!=typeof o&&("function"!=typeof o||null===o))throw new TypeError;var s,n,a=[];for(s in o)e.call(o,s)&&a.push(s);if(t)for(n=0;n<r;n++)e.call(o,i[n])&&a.push(i[n]);return a}}()),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),String.prototype.trimLeft||(String.prototype.trimLeft=function(){return this.replace(/^\s+/g,"")}),String.prototype.trimRight||(String.prototype.trimRight=function(){return this.replace(/\s+$/g,"")})}(typeof self!==u4b.p3&&self||typeof window!==u4b.p3&&window||this),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(0,function(){"use strict";function e(){}function t(e){if(!(this instanceof t))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],n(e,this)}function i(e,i){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,t._immediateFn(function(){var t=1===e._state?i.onFulfilled:i.onRejected;if(null!==t){var s;try{s=t(e._value)}catch(e){return void o(i.promise,e)}r(i.promise,s)}else(1===e._state?r:o)(i.promise,e._value)})):e._deferreds.push(i)}function r(e,i){try{if(i===e)throw new TypeError("A promise cannot be resolved with itself.");if(i&&("object"==typeof i||"function"==typeof i)){var r=i.then;if(i instanceof t)return e._state=3,e._value=i,void s(e);if("function"==typeof r)return void n(function(e,t){return function(){e.apply(t,arguments)}}(r,i),e)}e._state=1,e._value=i,s(e)}catch(t){o(e,t)}}function o(e,t){e._state=2,e._value=t,s(e)}function s(e){2===e._state&&0===e._deferreds.length&&t._immediateFn(function(){e._handled||t._unhandledRejectionFn(e._value)});for(var r=0,o=e._deferreds.length;o>r;r++)i(e,e._deferreds[r]);e._deferreds=null}function n(e,t){var i=!1;try{e(function(e){i||(i=!0,r(t,e))},function(e){i||(i=!0,o(t,e))})}catch(e){if(i)return;i=!0,o(t,e)}}var a=function(e){var t=this.constructor;return this.then(function(i){return t.resolve(e()).then(function(){return i})},function(i){return t.resolve(e()).then(function(){return t.reject(i)})})},l=setTimeout;t.prototype.catch=function(e){return this.then(null,e)},t.prototype.then=function(t,r){var o=new this.constructor(e);return i(this,new function(e,t,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=i}(t,r,o)),o},t.prototype.finally=a,t.all=function(e){return new t(function(t,i){function r(e,n){try{if(n&&("object"==typeof n||"function"==typeof n)){var a=n.then;if("function"==typeof a)return void a.call(n,function(t){r(e,t)},i)}o[e]=n,0==--s&&t(o)}catch(e){i(e)}}if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var o=Array.prototype.slice.call(e);if(0===o.length)return t([]);for(var s=o.length,n=0;o.length>n;n++)r(n,o[n])})},t.resolve=function(e){return e&&"object"==typeof e&&e.constructor===t?e:new t(function(t){t(e)})},t.reject=function(e){return new t(function(t,i){i(e)})},t.race=function(e){return new t(function(t,i){for(var r=0,o=e.length;o>r;r++)e[r].then(t,i)})},t._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){l(e,0)},t._unhandledRejectionFn=function(e){void 0!==console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var h=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw Error("unable to locate global object")}();h.Promise?h.Promise.prototype.finally||(h.Promise.prototype.finally=a):h.Promise=t}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.html2canvas=e()}}(function(){return function e(t,i,r){function o(n,a){if(!i[n]){if(!t[n]){var l="function"==typeof require&&require;if(!a&&l)return l(n,!0);if(s)return s(n,!0);var h=new Error("Cannot find module '"+n+"'");throw h.code="MODULE_NOT_FOUND",h}var c=i[n]={exports:{}};t[n][0].call(c.exports,function(e){var i=t[n][1][e];return o(i||e)},c,c.exports,e,t,i,r)}return i[n].exports}for(var s="function"==typeof require&&require,n=0;n<r.length;n++)o(r[n]);return o}({1:[function(e,t,i){(function(e){!function(r){function o(e){throw RangeError(I[e])}function s(e,t){for(var i=e.length;i--;)e[i]=t(e[i]);return e}function n(e,t){return s(e.split(A),t).join(".")}function a(e){for(var t,i,r=[],o=0,s=e.length;s>o;)(t=e.charCodeAt(o++))>=55296&&56319>=t&&s>o?56320==(64512&(i=e.charCodeAt(o++)))?r.push(((1023&t)<<10)+(1023&i)+65536):(r.push(t),o--):r.push(t);return r}function l(e){return s(e,function(e){var t="";return e>65535&&(t+=N((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+N(e)}).join("")}function h(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:v}function c(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function d(e,t,i){var r=0;for(e=i?D(e/E):e>>1,e+=D(e/t);e>R*w>>1;r+=v)e=D(e/R);return D(r+(R+1)*e/(e+F))}function u(e){var t,i,r,s,n,a,c,u,p,C,f=[],m=e.length,g=0,y=S,F=O;for(0>(i=e.lastIndexOf(T))&&(i=0),r=0;i>r;++r)e.charCodeAt(r)>=128&&o("not-basic"),f.push(e.charCodeAt(r));for(s=i>0?i+1:0;m>s;){for(n=g,a=1,c=v;s>=m&&o("invalid-input"),((u=h(e.charCodeAt(s++)))>=v||u>D((_-g)/a))&&o("overflow"),g+=u*a,!((p=F>=c?b:c>=F+w?w:c-F)>u);c+=v)a>D(_/(C=v-p))&&o("overflow"),a*=C;F=d(g-n,t=f.length+1,0==n),D(g/t)>_-y&&o("overflow"),y+=D(g/t),g%=t,f.splice(g++,0,y)}return l(f)}function p(e){var t,i,r,s,n,l,h,u,p,C,f,m,g,y,F,E=[];for(m=(e=a(e)).length,t=S,i=0,n=O,l=0;m>l;++l)128>(f=e[l])&&E.push(N(f));for(r=s=E.length,s&&E.push(T);m>r;){for(h=_,l=0;m>l;++l)(f=e[l])>=t&&h>f&&(h=f);for(h-t>D((_-i)/(g=r+1))&&o("overflow"),i+=(h-t)*g,t=h,l=0;m>l;++l)if(t>(f=e[l])&&++i>_&&o("overflow"),f==t){for(u=i,p=v;!((C=n>=p?b:p>=n+w?w:p-n)>u);p+=v)F=u-C,y=v-C,E.push(N(c(C+F%y,0))),u=D(F/y);E.push(N(c(u,0))),n=d(i,g,r==s),i=0,++r}++i,++t}return E.join("")}var C="object"==typeof i&&i,f="object"==typeof t&&t&&t.exports==C&&t,m="object"==typeof e&&e;(m.global===m||m.window===m)&&(r=m);var g,y,_=2147483647,v=36,b=1,w=26,F=38,E=700,O=72,S=128,T="-",x=/^xn--/,L=/[^ -~]/,A=/\x2E|\u3002|\uFF0E|\uFF61/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=v-b,D=Math.floor,N=String.fromCharCode;if(g={version:"1.2.4",ucs2:{decode:a,encode:l},decode:u,encode:p,toASCII:function(e){return n(e,function(e){return L.test(e)?"xn--"+p(e):e})},toUnicode:function(e){return n(e,function(e){return x.test(e)?u(e.slice(4).toLowerCase()):e})}},C&&!C.nodeType)if(f)f.exports=g;else for(y in g)g.hasOwnProperty(y)&&(C[y]=g[y]);else r.punycode=g}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t){function i(e,t){for(var o=3===e.nodeType?document.createTextNode(e.nodeValue):e.cloneNode(!1),s=e.firstChild;s;)(!0===t||1!==s.nodeType||"SCRIPT"!==s.nodeName)&&o.appendChild(i(s,t)),s=s.nextSibling;return 1===e.nodeType&&(o._scrollTop=e.scrollTop,o._scrollLeft=e.scrollLeft,"CANVAS"===e.nodeName?function(e,t){try{t&&(t.width=e.width,t.height=e.height,t.getContext("2d").putImageData(e.getContext("2d").getImageData(0,0,e.width,e.height),0,0))}catch(t){r("Unable to copy canvas content from",e,t)}}(e,o):("TEXTAREA"===e.nodeName||"SELECT"===e.nodeName)&&(o.value=e.value)),o}var r=e("./log");t.exports=function(e,t,r,o,s,n,a){var l=i(e.documentElement,s.javascriptEnabled),h=t.createElement("iframe");return h.className="html2canvas-container",h.style.visibility="hidden",h.style.position="fixed",h.style.left="-10000px",h.style.top="0px",h.style.border="0",h.width=r,h.height=o,h.scrolling="no",t.body.appendChild(h),new Promise(function(t){var i=h.contentWindow.document;h.contentWindow.onload=h.onload=function(){var e=setInterval(function(){i.body.childNodes.length>0&&(function e(t){if(1===t.nodeType){t.scrollTop=t._scrollTop,t.scrollLeft=t._scrollLeft;for(var i=t.firstChild;i;)e(i),i=i.nextSibling}}(i.documentElement),clearInterval(e),"view"===s.type&&(h.contentWindow.scrollTo(n,a),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||h.contentWindow.scrollY===a&&h.contentWindow.scrollX===n||(i.documentElement.style.top=-a+"px",i.documentElement.style.left=-n+"px",i.documentElement.style.position="absolute")),t(h))},50)},i.open(),i.write("<!DOCTYPE html><html></html>"),function(e,t,i){!e.defaultView||t===e.defaultView.pageXOffset&&i===e.defaultView.pageYOffset||e.defaultView.scrollTo(t,i)}(e,n,a),i.replaceChild(i.adoptNode(l),i.documentElement),i.close()})}},{"./log":13}],3:[function(e,t){function i(e){this.r=0,this.g=0,this.b=0,this.a=null,this.fromArray(e)||this.namedColor(e)||this.rgb(e)||this.rgba(e)||this.hex6(e)||this.hex3(e)}i.prototype.darken=function(e){var t=1-e;return new i([Math.round(this.r*t),Math.round(this.g*t),Math.round(this.b*t),this.a])},i.prototype.isTransparent=function(){return 0===this.a},i.prototype.isBlack=function(){return 0===this.r&&0===this.g&&0===this.b},i.prototype.fromArray=function(e){return Array.isArray(e)&&(this.r=Math.min(e[0],255),this.g=Math.min(e[1],255),this.b=Math.min(e[2],255),e.length>3&&(this.a=e[3])),Array.isArray(e)};var r=/^#([a-f0-9]{3})$/i;i.prototype.hex3=function(e){var t;return null!==(t=e.match(r))&&(this.r=parseInt(t[1][0]+t[1][0],16),this.g=parseInt(t[1][1]+t[1][1],16),this.b=parseInt(t[1][2]+t[1][2],16)),null!==t};var o=/^#([a-f0-9]{6})$/i;i.prototype.hex6=function(e){var t=null;return null!==(t=e.match(o))&&(this.r=parseInt(t[1].substring(0,2),16),this.g=parseInt(t[1].substring(2,4),16),this.b=parseInt(t[1].substring(4,6),16)),null!==t};var s=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/;i.prototype.rgb=function(e){var t;return null!==(t=e.match(s))&&(this.r=Number(t[1]),this.g=Number(t[2]),this.b=Number(t[3])),null!==t};var n=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/;i.prototype.rgba=function(e){var t;return null!==(t=e.match(n))&&(this.r=Number(t[1]),this.g=Number(t[2]),this.b=Number(t[3]),this.a=Number(t[4])),null!==t},i.prototype.toString=function(){return null!==this.a&&1!==this.a?"rgba("+[this.r,this.g,this.b,this.a].join(",")+")":"rgb("+[this.r,this.g,this.b].join(",")+")"},i.prototype.namedColor=function(e){e=e.toLowerCase();var t=a[e];if(t)this.r=t[0],this.g=t[1],this.b=t[2];else if("transparent"===e)return this.r=this.g=this.b=this.a=0,!0;return!!t},i.prototype.isColor=!0;var a={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};t.exports=i},{}],4:[function(e,t){function i(e,t){var i=m++;if((t=t||{}).logging&&(c.options.logging=!0,c.options.start=Date.now()),t.async=void 0===t.async||t.async,t.allowTaint=void 0!==t.allowTaint&&t.allowTaint,t.removeContainer=void 0===t.removeContainer||t.removeContainer,t.javascriptEnabled=void 0!==t.javascriptEnabled&&t.javascriptEnabled,t.imageTimeout=void 0===t.imageTimeout?1e4:t.imageTimeout,t.renderer="function"==typeof t.renderer?t.renderer:n,t.strict=!!t.strict,"string"==typeof e){if("string"!=typeof t.proxy)return Promise.reject("Proxy must be used when rendering url");var o=null!=t.width?t.width:window.innerWidth,s=null!=t.height?t.height:window.innerHeight;return p(function(e){var t=document.createElement("a");return t.href=e,t.href=t.href,t}(e),t.proxy,document,o,s,t).then(function(e){return r(e.contentWindow.document.documentElement,e,t,o,s)})}var a=(void 0===e?[document.documentElement]:e.length?e:[e])[0];return a.setAttribute(f+i,i),function(e,t,i,o,s){return u(e,e,i,o,t,e.defaultView.pageXOffset,e.defaultView.pageYOffset).then(function(n){c("Document cloned");var a=f+s,l="["+a+"='"+s+"']";e.querySelector(l).removeAttribute(a);var h=n.contentWindow,d=h.document.querySelector(l),u=Promise.resolve("function"!=typeof t.onclone||t.onclone(h.document));return u.then(function(){return r(d,n,t,i,o)})})}(a.ownerDocument,t,a.ownerDocument.defaultView.innerWidth,a.ownerDocument.defaultView.innerHeight,i).then(function(e){return"function"==typeof t.onrendered&&(c("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas"),t.onrendered(e)),e})}function r(e,t,i,r,n){var h=t.contentWindow,d=new s(h.document),u=new a(i,d),p=C(e),f="view"===i.type?r:function(e){return Math.max(Math.max(e.body.scrollWidth,e.documentElement.scrollWidth),Math.max(e.body.offsetWidth,e.documentElement.offsetWidth),Math.max(e.body.clientWidth,e.documentElement.clientWidth))}(h.document),m="view"===i.type?n:function(e){return Math.max(Math.max(e.body.scrollHeight,e.documentElement.scrollHeight),Math.max(e.body.offsetHeight,e.documentElement.offsetHeight),Math.max(e.body.clientHeight,e.documentElement.clientHeight))}(h.document),g=new i.renderer(f,m,u,i,document);return new l(e,g,d,u,i).ready.then(function(){var r;return c("Finished rendering"),r="view"===i.type?o(g.canvas,{width:g.canvas.width,height:g.canvas.height,top:0,left:0,x:0,y:0}):e===h.document.body||e===h.document.documentElement||null!=i.canvas?g.canvas:o(g.canvas,{width:null!=i.width?i.width:p.width,height:null!=i.height?i.height:p.height,top:p.top,left:p.left,x:0,y:0}),function(e,t){t.removeContainer&&(e.parentNode.removeChild(e),c("Cleaned up container"))}(t,i),r})}function o(e,t){var i=document.createElement("canvas"),r=Math.min(e.width-1,Math.max(0,t.left)),o=Math.min(e.width,Math.max(1,t.left+t.width)),s=Math.min(e.height-1,Math.max(0,t.top)),n=Math.min(e.height,Math.max(1,t.top+t.height));i.width=t.width,i.height=t.height;var a=o-r,l=n-s;return c("Cropping canvas at:","left:",t.left,"top:",t.top,"width:",a,"height:",l),c("Resulting crop with width",t.width,"and height",t.height,"with x",r,"and y",s),i.getContext("2d").drawImage(e,r,s,a,l,t.x,t.y,a,l),i}var s=e("./support"),n=e("./renderers/canvas"),a=e("./imageloader"),l=e("./nodeparser"),h=e("./nodecontainer"),c=e("./log"),d=e("./utils"),u=e("./clone"),p=e("./proxy").loadUrlDocument,C=d.getBounds,f="data-html2canvas-node",m=0;i.CanvasRenderer=n,i.NodeContainer=h,i.log=c,i.utils=d;var g="undefined"==typeof document||"function"!=typeof Object.create||"function"!=typeof document.createElement("canvas").getContext?function(){return Promise.reject("No canvas support")}:i;t.exports=g},{"./clone":2,"./imageloader":11,"./log":13,"./nodecontainer":14,"./nodeparser":15,"./proxy":16,"./renderers/canvas":20,"./support":22,"./utils":26}],5:[function(e,t){var i=e("./log"),r=e("./utils").smallImage;t.exports=function e(t){if(this.src=t,i("DummyImageContainer for",t),!this.promise||!this.image){i("Initiating DummyImageContainer"),e.prototype.image=new Image;var o=this.image;e.prototype.promise=new Promise(function(e,t){o.onload=e,o.onerror=t,o.src=r(),!0===o.complete&&e(o)})}}},{"./log":13,"./utils":26}],6:[function(e,t){var i=e("./utils").smallImage;t.exports=function(e,t){var r,o,s=document.createElement("div"),n=document.createElement("img"),a=document.createElement("span"),l="Hidden Text";s.style.visibility="hidden",s.style.fontFamily=e,s.style.fontSize=t,s.style.margin=0,s.style.padding=0,document.body.appendChild(s),n.src=i(),n.width=1,n.height=1,n.style.margin=0,n.style.padding=0,n.style.verticalAlign="baseline",a.style.fontFamily=e,a.style.fontSize=t,a.style.margin=0,a.style.padding=0,a.appendChild(document.createTextNode(l)),s.appendChild(a),s.appendChild(n),r=n.offsetTop-a.offsetTop+1,s.removeChild(a),s.appendChild(document.createTextNode(l)),s.style.lineHeight="normal",n.style.verticalAlign="super",o=n.offsetTop-s.offsetTop+1,document.body.removeChild(s),this.baseline=r,this.lineWidth=1,this.middle=o}},{"./utils":26}],7:[function(e,t){function i(){this.data={}}var r=e("./font");i.prototype.getMetrics=function(e,t){return void 0===this.data[e+"-"+t]&&(this.data[e+"-"+t]=new r(e,t)),this.data[e+"-"+t]},t.exports=i},{"./font":6}],8:[function(e,t){function i(t,i,o){this.image=null,this.src=t;var s=this,n=r(t);this.promise=(i?new Promise(function(e){"about:blank"===t.contentWindow.document.URL||null==t.contentWindow.document.documentElement?t.contentWindow.onload=t.onload=function(){e(t)}:e(t)}):this.proxyLoad(o.proxy,n,o)).then(function(t){return e("./core")(t.contentWindow.document.documentElement,{type:"view",width:t.width,height:t.height,proxy:o.proxy,javascriptEnabled:o.javascriptEnabled,removeContainer:o.removeContainer,allowTaint:o.allowTaint,imageTimeout:o.imageTimeout/2})}).then(function(e){return s.image=e})}var r=e("./utils").getBounds,o=e("./proxy").loadUrlDocument;i.prototype.proxyLoad=function(e,t,i){var r=this.src;return o(r.src,e,r.ownerDocument,t.width,t.height,i)},t.exports=i},{"./core":4,"./proxy":16,"./utils":26}],9:[function(e,t){function i(e){this.src=e.value,this.colorStops=[],this.type=null,this.x0=.5,this.y0=.5,this.x1=.5,this.y1=.5,this.promise=Promise.resolve(!0)}i.TYPES={LINEAR:1,RADIAL:2},i.REGEXP_COLORSTOP=/^\s*(rgba?\(\s*\d{1,3},\s*\d{1,3},\s*\d{1,3}(?:,\s*[0-9\.]+)?\s*\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\s+(\d{1,3}(?:\.\d+)?)(%|px)?)?(?:\s|$)/i,t.exports=i},{}],10:[function(e,t){t.exports=function(e,t){this.src=e,this.image=new Image;var i=this;this.tainted=null,this.promise=new Promise(function(r,o){i.image.onload=r,i.image.onerror=o,t&&(i.image.crossOrigin="anonymous"),i.image.src=e,!0===i.image.complete&&r(i.image)})}},{}],11:[function(e,t){function i(e,t){this.link=null,this.options=e,this.support=t,this.origin=this.getOrigin(window.location.href)}var r=e("./log"),o=e("./imagecontainer"),s=e("./dummyimagecontainer"),n=e("./proxyimagecontainer"),a=e("./framecontainer"),l=e("./svgcontainer"),h=e("./svgnodecontainer"),c=e("./lineargradientcontainer"),d=e("./webkitgradientcontainer"),u=e("./utils").bind;i.prototype.findImages=function(e){var t=[];return e.reduce(function(e,t){switch(t.node.nodeName){case"IMG":return e.concat([{args:[t.node.src],method:"url"}]);case"svg":case"IFRAME":return e.concat([{args:[t.node],method:t.node.nodeName}])}return e},[]).forEach(this.addImage(t,this.loadImage),this),t},i.prototype.findBackgroundImage=function(e,t){return t.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(e,this.loadImage),this),e},i.prototype.addImage=function(e,t){return function(i){i.args.forEach(function(o){this.imageExists(e,o)||(e.splice(0,0,t.call(this,i)),r("Added image #"+e.length,"string"==typeof o?o.substring(0,100):o))},this)}},i.prototype.hasImageBackground=function(e){return"none"!==e.method},i.prototype.loadImage=function(e){if("url"===e.method){var t=e.args[0];return!this.isSVG(t)||this.support.svg||this.options.allowTaint?t.match(/data:image\/.*;base64,/i)?new o(t.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),!1):this.isSameOrigin(t)||!0===this.options.allowTaint||this.isSVG(t)?new o(t,!1):this.support.cors&&!this.options.allowTaint&&this.options.useCORS?new o(t,!0):this.options.proxy?new n(t,this.options.proxy):new s(t):new l(t)}return"linear-gradient"===e.method?new c(e):"gradient"===e.method?new d(e):"svg"===e.method?new h(e.args[0],this.support.svg):"IFRAME"===e.method?new a(e.args[0],this.isSameOrigin(e.args[0].src),this.options):new s(e)},i.prototype.isSVG=function(e){return"svg"===e.substring(e.length-3).toLowerCase()||l.prototype.isInline(e)},i.prototype.imageExists=function(e,t){return e.some(function(e){return e.src===t})},i.prototype.isSameOrigin=function(e){return this.getOrigin(e)===this.origin},i.prototype.getOrigin=function(e){var t=this.link||(this.link=document.createElement("a"));return t.href=e,t.href=t.href,t.protocol+t.hostname+t.port},i.prototype.getPromise=function(e){return this.timeout(e,this.options.imageTimeout).catch(function(){return new s(e.src).promise.then(function(t){e.image=t})})},i.prototype.get=function(e){var t=null;return this.images.some(function(i){return(t=i).src===e})?t:null},i.prototype.fetch=function(e){return this.images=e.reduce(u(this.findBackgroundImage,this),this.findImages(e)),this.images.forEach(function(e,t){e.promise.then(function(){r("Succesfully loaded image #"+(t+1),e)},function(i){r("Failed loading image #"+(t+1),e,i)})}),this.ready=Promise.all(this.images.map(this.getPromise,this)),r("Finished searching images"),this},i.prototype.timeout=function(e,t){var i,o=Promise.race([e.promise,new Promise(function(o,s){i=setTimeout(function(){r("Timed out loading image",e),s(e)},t)})]).then(function(e){return clearTimeout(i),e});return o.catch(function(){clearTimeout(i)}),o},t.exports=i},{"./dummyimagecontainer":5,"./framecontainer":8,"./imagecontainer":10,"./lineargradientcontainer":12,"./log":13,"./proxyimagecontainer":17,"./svgcontainer":23,"./svgnodecontainer":24,"./utils":26,"./webkitgradientcontainer":27}],12:[function(e,t){function i(e){r.apply(this,arguments),this.type=r.TYPES.LINEAR;var t=i.REGEXP_DIRECTION.test(e.args[0])||!r.REGEXP_COLORSTOP.test(e.args[0]);t?e.args[0].split(/\s+/).reverse().forEach(function(e,t){switch(e){case"left":this.x0=0,this.x1=1;break;case"top":this.y0=0,this.y1=1;break;case"right":this.x0=1,this.x1=0;break;case"bottom":this.y0=1,this.y1=0;break;case"to":var i=this.y0,r=this.x0;this.y0=this.y1,this.x0=this.x1,this.x1=r,this.y1=i;break;case"center":break;default:var o=.01*parseFloat(e,10);if(isNaN(o))break;0===t?(this.y0=o,this.y1=1-this.y0):(this.x0=o,this.x1=1-this.x0)}},this):(this.y0=0,this.y1=1),this.colorStops=e.args.slice(t?1:0).map(function(e){var t=e.match(r.REGEXP_COLORSTOP),i=+t[2],s=0===i?"%":t[3];return{color:new o(t[1]),stop:"%"===s?i/100:null}}),null===this.colorStops[0].stop&&(this.colorStops[0].stop=0),null===this.colorStops[this.colorStops.length-1].stop&&(this.colorStops[this.colorStops.length-1].stop=1),this.colorStops.forEach(function(e,t){null===e.stop&&this.colorStops.slice(t).some(function(i,r){return null!==i.stop&&(e.stop=(i.stop-this.colorStops[t-1].stop)/(r+1)+this.colorStops[t-1].stop,!0)},this)},this)}var r=e("./gradientcontainer"),o=e("./color");i.prototype=Object.create(r.prototype),i.REGEXP_DIRECTION=/^\s*(?:to|left|right|top|bottom|center|\d{1,3}(?:\.\d+)?%?)(?:\s|$)/i,t.exports=i},{"./color":3,"./gradientcontainer":9}],13:[function(e,t){var i=function(){i.options.logging&&window.console&&window.console.log&&Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-i.options.start+"ms","html2canvas:"].concat([].slice.call(arguments,0)))};i.options={logging:!1},t.exports=i},{}],14:[function(e,t){function i(e,t){this.node=e,this.parent=t,this.stack=null,this.bounds=null,this.borders=null,this.clip=[],this.backgroundClip=[],this.offsetBounds=null,this.visible=null,this.computedStyles=null,this.colors={},this.styles={},this.backgroundImages=null,this.transformData=null,this.transformMatrix=null,this.isPseudoElement=!1,this.opacity=null}function r(e){return-1!==e.toString().indexOf("%")}function o(e){return e.replace("px","")}function s(e){return parseFloat(e)}var n=e("./color"),a=e("./utils"),l=a.getBounds,h=a.parseBackgrounds,c=a.offsetBounds;i.prototype.cloneTo=function(e){e.visible=this.visible,e.borders=this.borders,e.bounds=this.bounds,e.clip=this.clip,e.backgroundClip=this.backgroundClip,e.computedStyles=this.computedStyles,e.styles=this.styles,e.backgroundImages=this.backgroundImages,e.opacity=this.opacity},i.prototype.getOpacity=function(){return null===this.opacity?this.opacity=this.cssFloat("opacity"):this.opacity},i.prototype.assignStack=function(e){this.stack=e,e.children.push(this)},i.prototype.isElementVisible=function(){return this.node.nodeType===Node.TEXT_NODE?this.parent.visible:"none"!==this.css("display")&&"hidden"!==this.css("visibility")&&!this.node.hasAttribute("data-html2canvas-ignore")&&("INPUT"!==this.node.nodeName||"hidden"!==this.node.getAttribute("type"))},i.prototype.css=function(e){return this.computedStyles||(this.computedStyles=this.isPseudoElement?this.parent.computedStyle(this.before?":before":":after"):this.computedStyle(null)),this.styles[e]||(this.styles[e]=this.computedStyles[e])},i.prototype.prefixedCss=function(e){var t=this.css(e);return void 0===t&&["webkit","moz","ms","o"].some(function(i){return void 0!==(t=this.css(i+e.substr(0,1).toUpperCase()+e.substr(1)))},this),void 0===t?null:t},i.prototype.computedStyle=function(e){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,e)},i.prototype.cssInt=function(e){var t=parseInt(this.css(e),10);return isNaN(t)?0:t},i.prototype.color=function(e){return this.colors[e]||(this.colors[e]=new n(this.css(e)))},i.prototype.cssFloat=function(e){var t=parseFloat(this.css(e));return isNaN(t)?0:t},i.prototype.fontWeight=function(){var e=this.css("fontWeight");switch(parseInt(e,10)){case 401:e="bold";break;case 400:e="normal"}return e},i.prototype.parseClip=function(){var e=this.css("clip").match(this.CLIP);return e?{top:parseInt(e[1],10),right:parseInt(e[2],10),bottom:parseInt(e[3],10),left:parseInt(e[4],10)}:null},i.prototype.parseBackgroundImages=function(){return this.backgroundImages||(this.backgroundImages=h(this.css("backgroundImage")))},i.prototype.cssList=function(e,t){var i=(this.css(e)||"").split(",");return 1===(i=(i=i[t||0]||i[0]||"auto").trim().split(" ")).length&&(i=[i[0],r(i[0])?"auto":i[0]]),i},i.prototype.parseBackgroundSize=function(e,t,i){var o,s,n=this.cssList("backgroundSize",i);if(r(n[0]))o=e.width*parseFloat(n[0])/100;else{if(/contain|cover/.test(n[0])){var a=e.width/e.height,l=t.width/t.height;return l>a^"contain"===n[0]?{width:e.height*l,height:e.height}:{width:e.width,height:e.width/l}}o=parseInt(n[0],10)}return s="auto"===n[0]&&"auto"===n[1]?t.height:"auto"===n[1]?o/t.width*t.height:r(n[1])?e.height*parseFloat(n[1])/100:parseInt(n[1],10),"auto"===n[0]&&(o=s/t.height*t.width),{width:o,height:s}},i.prototype.parseBackgroundPosition=function(e,t,i,o){var s,n,a=this.cssList("backgroundPosition",i);return s=r(a[0])?(e.width-(o||t).width)*(parseFloat(a[0])/100):parseInt(a[0],10),n="auto"===a[1]?s/t.width*t.height:r(a[1])?(e.height-(o||t).height)*parseFloat(a[1])/100:parseInt(a[1],10),"auto"===a[0]&&(s=n/t.height*t.width),{left:s,top:n}},i.prototype.parseBackgroundRepeat=function(e){return this.cssList("backgroundRepeat",e)[0]},i.prototype.parseTextShadows=function(){var e=this.css("textShadow"),t=[];if(e&&"none"!==e)for(var i=e.match(this.TEXT_SHADOW_PROPERTY),r=0;i&&r<i.length;r++){var o=i[r].match(this.TEXT_SHADOW_VALUES);t.push({color:new n(o[0]),offsetX:o[1]?parseFloat(o[1].replace("px","")):0,offsetY:o[2]?parseFloat(o[2].replace("px","")):0,blur:o[3]?o[3].replace("px",""):0})}return t},i.prototype.parseTransform=function(){if(!this.transformData)if(this.hasTransform()){var e=this.parseBounds(),t=this.prefixedCss("transformOrigin").split(" ").map(o).map(s);t[0]+=e.left,t[1]+=e.top,this.transformData={origin:t,matrix:this.parseTransformMatrix()}}else this.transformData={origin:[0,0],matrix:[1,0,0,1,0,0]};return this.transformData},i.prototype.parseTransformMatrix=function(){if(!this.transformMatrix){var e=this.prefixedCss("transform"),t=e?function(e){if(e&&"matrix"===e[1])return e[2].split(",").map(function(e){return parseFloat(e.trim())});if(e&&"matrix3d"===e[1]){var t=e[2].split(",").map(function(e){return parseFloat(e.trim())});return[t[0],t[1],t[4],t[5],t[12],t[13]]}}(e.match(this.MATRIX_PROPERTY)):null;this.transformMatrix=t||[1,0,0,1,0,0]}return this.transformMatrix},i.prototype.parseBounds=function(){return this.bounds||(this.bounds=this.hasTransform()?c(this.node):l(this.node))},i.prototype.hasTransform=function(){return"1,0,0,1,0,0"!==this.parseTransformMatrix().join(",")||this.parent&&this.parent.hasTransform()},i.prototype.getValue=function(){var e=this.node.value||"";return"SELECT"===this.node.tagName?e=function(e){var t=e.options[e.selectedIndex||0];return t&&t.text||""}(this.node):"password"===this.node.type&&(e=Array(e.length+1).join("")),0===e.length?this.node.placeholder||"":e},i.prototype.MATRIX_PROPERTY=/(matrix|matrix3d)\((.+)\)/,i.prototype.TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,i.prototype.TEXT_SHADOW_VALUES=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g,i.prototype.CLIP=/^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/,t.exports=i},{"./color":3,"./utils":26}],15:[function(e,t){function i(e,t,i,r,o){A("Starting NodeParser"),this.renderer=t,this.options=o,this.range=null,this.support=i,this.renderQueue=[],this.stack=new H(!0,1,e.ownerDocument,null);var s=new R(e,null);if(o.background&&t.rectangle(0,0,t.width,t.height,new P(o.background)),e===e.ownerDocument.documentElement){var n=new R(s.color("backgroundColor").isTransparent()?e.ownerDocument.body:e.ownerDocument.documentElement,null);t.rectangle(0,0,t.width,t.height,n.color("backgroundColor"))}s.visibile=s.isElementVisible(),this.createPseudoHideStyles(e.ownerDocument),this.disableAnimations(e.ownerDocument),this.nodes=x([s].concat(this.getChildren(s)).filter(function(e){return e.visible=e.isElementVisible()}).map(this.getPseudoElements,this)),this.fontMetrics=new M,A("Fetched nodes, total:",this.nodes.length),A("Calculate overflow clips"),this.calculateOverflowClips(),A("Start fetching images"),this.images=r.fetch(this.nodes.filter(w)),this.ready=this.images.ready.then(B(function(){return A("Images loaded, starting parsing"),A("Creating stacking contexts"),this.createStackingContexts(),A("Sorting stacking contexts"),this.sortStackingContexts(this.stack),this.parse(this.stack),A("Render queue created with "+this.renderQueue.length+" items"),new Promise(B(function(e){o.async?"function"==typeof o.async?o.async.call(this,this.renderQueue,e):this.renderQueue.length>0?(this.renderIndex=0,this.asyncRenderer(this.renderQueue,e)):e():(this.renderQueue.forEach(this.paint,this),e())},this))},this))}function r(e){return e.parent&&e.parent.clip.length}function o(e){return e.replace(/(\-[a-z])/g,function(e){return e.toUpperCase().replace("-","")})}function s(){}function n(e,t,i,r){return e.map(function(o,s){if(o.width>0){var n=t.left,a=t.top,l=t.width,h=t.height-e[2].width;switch(s){case 0:h=e[0].width,o.args=c({c1:[n,a],c2:[n+l,a],c3:[n+l-e[1].width,a+h],c4:[n+e[3].width,a+h]},r[0],r[1],i.topLeftOuter,i.topLeftInner,i.topRightOuter,i.topRightInner);break;case 1:n=t.left+t.width-e[1].width,l=e[1].width,o.args=c({c1:[n+l,a],c2:[n+l,a+h+e[2].width],c3:[n,a+h],c4:[n,a+e[0].width]},r[1],r[2],i.topRightOuter,i.topRightInner,i.bottomRightOuter,i.bottomRightInner);break;case 2:a=a+t.height-e[2].width,h=e[2].width,o.args=c({c1:[n+l,a+h],c2:[n,a+h],c3:[n+e[3].width,a],c4:[n+l-e[3].width,a]},r[2],r[3],i.bottomRightOuter,i.bottomRightInner,i.bottomLeftOuter,i.bottomLeftInner);break;case 3:l=e[3].width,o.args=c({c1:[n,a+h+e[2].width],c2:[n,a],c3:[n+l,a+e[0].width],c4:[n+l,a+h]},r[3],r[0],i.bottomLeftOuter,i.bottomLeftInner,i.topLeftOuter,i.topLeftInner)}}return o})}function a(e,t,i,r){var o=(Math.sqrt(2)-1)/3*4,s=i*o,n=r*o,a=e+i,l=t+r;return{topLeft:h({x:e,y:l},{x:e,y:l-n},{x:a-s,y:t},{x:a,y:t}),topRight:h({x:e,y:t},{x:e+s,y:t},{x:a,y:l-n},{x:a,y:l}),bottomRight:h({x:a,y:t},{x:a,y:t+n},{x:e+s,y:l},{x:e,y:l}),bottomLeft:h({x:a,y:l},{x:a-s,y:l},{x:e,y:t+n},{x:e,y:t})}}function l(e,t,i){var r=e.left,o=e.top,s=e.width,n=e.height,l=t[0][0]<s/2?t[0][0]:s/2,h=t[0][1]<n/2?t[0][1]:n/2,c=t[1][0]<s/2?t[1][0]:s/2,d=t[1][1]<n/2?t[1][1]:n/2,u=t[2][0]<s/2?t[2][0]:s/2,p=t[2][1]<n/2?t[2][1]:n/2,C=t[3][0]<s/2?t[3][0]:s/2,f=t[3][1]<n/2?t[3][1]:n/2,m=s-c,g=n-p,y=s-u,_=n-f;return{topLeftOuter:a(r,o,l,h).topLeft.subdivide(.5),topLeftInner:a(r+i[3].width,o+i[0].width,Math.max(0,l-i[3].width),Math.max(0,h-i[0].width)).topLeft.subdivide(.5),topRightOuter:a(r+m,o,c,d).topRight.subdivide(.5),topRightInner:a(r+Math.min(m,s+i[3].width),o+i[0].width,m>s+i[3].width?0:c-i[3].width,d-i[0].width).topRight.subdivide(.5),bottomRightOuter:a(r+y,o+g,u,p).bottomRight.subdivide(.5),bottomRightInner:a(r+Math.min(y,s-i[3].width),o+Math.min(g,n+i[0].width),Math.max(0,u-i[1].width),p-i[2].width).bottomRight.subdivide(.5),bottomLeftOuter:a(r,o+_,C,f).bottomLeft.subdivide(.5),bottomLeftInner:a(r+i[3].width,o+_,Math.max(0,C-i[3].width),f-i[2].width).bottomLeft.subdivide(.5)}}function h(e,t,i,r){var o=function(e,t,i){return{x:e.x+(t.x-e.x)*i,y:e.y+(t.y-e.y)*i}};return{start:e,startControl:t,endControl:i,end:r,subdivide:function(s){var n=o(e,t,s),a=o(t,i,s),l=o(i,r,s),c=o(n,a,s),d=o(a,l,s),u=o(c,d,s);return[h(e,n,c,u),h(u,d,l,r)]},curveTo:function(e){e.push(["bezierCurve",t.x,t.y,i.x,i.y,r.x,r.y])},curveToReversed:function(r){r.push(["bezierCurve",i.x,i.y,t.x,t.y,e.x,e.y])}}}function c(e,t,i,r,o,s,n){var a=[];return t[0]>0||t[1]>0?(a.push(["line",r[1].start.x,r[1].start.y]),r[1].curveTo(a)):a.push(["line",e.c1[0],e.c1[1]]),i[0]>0||i[1]>0?(a.push(["line",s[0].start.x,s[0].start.y]),s[0].curveTo(a),a.push(["line",n[0].end.x,n[0].end.y]),n[0].curveToReversed(a)):(a.push(["line",e.c2[0],e.c2[1]]),a.push(["line",e.c3[0],e.c3[1]])),t[0]>0||t[1]>0?(a.push(["line",o[1].end.x,o[1].end.y]),o[1].curveToReversed(a)):a.push(["line",e.c4[0],e.c4[1]]),a}function d(e,t,i,r,o,s,n){t[0]>0||t[1]>0?(e.push(["line",r[0].start.x,r[0].start.y]),r[0].curveTo(e),r[1].curveTo(e)):e.push(["line",s,n]),(i[0]>0||i[1]>0)&&e.push(["line",o[0].start.x,o[0].start.y])}function u(e){return e.cssInt("zIndex")<0}function p(e){return e.cssInt("zIndex")>0}function C(e){return 0===e.cssInt("zIndex")}function f(e){return-1!==["inline","inline-block","inline-table"].indexOf(e.css("display"))}function m(e){return e instanceof H}function g(e){return e.node.data.trim().length>0}function y(e){return e.nodeType===Node.TEXT_NODE||e.nodeType===Node.ELEMENT_NODE}function _(e){return"static"!==e.css("position")}function v(e){return"none"!==e.css("float")}function b(e){var t=this;return function(){return!e.apply(t,arguments)}}function w(e){return e.node.nodeType===Node.ELEMENT_NODE}function F(e){return!0===e.isPseudoElement}function E(e){return e.node.nodeType===Node.TEXT_NODE}function O(e){return parseInt(e,10)}function S(e){return e.width}function T(e){return e.node.nodeType!==Node.ELEMENT_NODE||-1===["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"].indexOf(e.node.nodeName)}function x(e){return[].concat.apply([],e)}function L(e){return-1!==[32,13,10,9,45].indexOf(e)}var A=e("./log"),I=e("punycode"),R=e("./nodecontainer"),D=e("./textcontainer"),N=e("./pseudoelementcontainer"),M=e("./fontmetrics"),P=e("./color"),H=e("./stackingcontext"),U=e("./utils"),B=U.bind,k=U.getBounds,V=U.parseBackgrounds,z=U.offsetBounds;i.prototype.calculateOverflowClips=function(){this.nodes.forEach(function(e){if(w(e)){F(e)&&e.appendToDOM(),e.borders=this.parseBorders(e);var t="hidden"===e.css("overflow")?[e.borders.clip]:[],i=e.parseClip();i&&-1!==["absolute","fixed"].indexOf(e.css("position"))&&t.push([["rect",e.bounds.left+i.left,e.bounds.top+i.top,i.right-i.left,i.bottom-i.top]]),e.clip=r(e)?e.parent.clip.concat(t):t,e.backgroundClip="hidden"!==e.css("overflow")?e.clip.concat([e.borders.clip]):e.clip,F(e)&&e.cleanDOM()}else E(e)&&(e.clip=r(e)?e.parent.clip:[]);F(e)||(e.bounds=null)},this)},i.prototype.asyncRenderer=function(e,t,i){i=i||Date.now(),this.paint(e[this.renderIndex++]),e.length===this.renderIndex?t():i+20>Date.now()?this.asyncRenderer(e,t,i):setTimeout(B(function(){this.asyncRenderer(e,t)},this),0)},i.prototype.createPseudoHideStyles=function(e){this.createStyles(e,"."+N.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+':before { content: "" !important; display: none !important; }.'+N.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER+':after { content: "" !important; display: none !important; }')},i.prototype.disableAnimations=function(e){this.createStyles(e,"* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}")},i.prototype.createStyles=function(e,t){var i=e.createElement("style");i.innerHTML=t,e.body.appendChild(i)},i.prototype.getPseudoElements=function(e){var t=[[e]];if(e.node.nodeType===Node.ELEMENT_NODE){var i=this.getPseudoElement(e,":before"),r=this.getPseudoElement(e,":after");i&&t.push(i),r&&t.push(r)}return x(t)},i.prototype.getPseudoElement=function(e,t){var i=e.computedStyle(t);if(!i||!i.content||"none"===i.content||"-moz-alt-content"===i.content||"none"===i.display)return null;for(var r=function(e){var t=e.substr(0,1);return t===e.substr(e.length-1)&&t.match(/'|"/)?e.substr(1,e.length-2):e}(i.content),s="url"===r.substr(0,3),n=document.createElement(s?"img":"html2canvaspseudoelement"),a=new N(n,e,t),l=i.length-1;l>=0;l--){var h=o(i.item(l));n.style[h]=i[h]}if(n.className=N.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+N.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER,s)return n.src=V(r)[0].args[0],[a];var c=document.createTextNode(r);return n.appendChild(c),[a,new D(c,a)]},i.prototype.getChildren=function(e){return x([].filter.call(e.node.childNodes,y).map(function(t){var i=[t.nodeType===Node.TEXT_NODE?new D(t,e):new R(t,e)].filter(T);return t.nodeType===Node.ELEMENT_NODE&&i.length&&"TEXTAREA"!==t.tagName?i[0].isElementVisible()?i.concat(this.getChildren(i[0])):[]:i},this))},i.prototype.newStackingContext=function(e,t){var i=new H(t,e.getOpacity(),e.node,e.parent);e.cloneTo(i),(t?i.getParentStack(this):i.parent.stack).contexts.push(i),e.stack=i},i.prototype.createStackingContexts=function(){this.nodes.forEach(function(e){w(e)&&(this.isRootElement(e)||function(e){return e.getOpacity()<1}(e)||function(e){var t=e.css("position");return"auto"!==(-1!==["absolute","relative","fixed"].indexOf(t)?e.css("zIndex"):"auto")}(e)||this.isBodyWithTransparentRoot(e)||e.hasTransform())?this.newStackingContext(e,!0):w(e)&&(_(e)&&C(e)||function(e){return-1!==["inline-block","inline-table"].indexOf(e.css("display"))}(e)||v(e))?this.newStackingContext(e,!1):e.assignStack(e.parent.stack)},this)},i.prototype.isBodyWithTransparentRoot=function(e){return"BODY"===e.node.nodeName&&e.parent.color("backgroundColor").isTransparent()},i.prototype.isRootElement=function(e){return null===e.parent},i.prototype.sortStackingContexts=function(e){e.contexts.sort(function(e){return function(t,i){return t.cssInt("zIndex")+e.indexOf(t)/e.length-(i.cssInt("zIndex")+e.indexOf(i)/e.length)}}(e.contexts.slice(0))),e.contexts.forEach(this.sortStackingContexts,this)},i.prototype.parseTextBounds=function(e){return function(t,i,r){if("none"!==e.parent.css("textDecoration").substr(0,4)||0!==t.trim().length){if(this.support.rangeBounds&&!e.parent.hasTransform()){var o=r.slice(0,i).join("").length;return this.getRangeBounds(e.node,o,t.length)}if(e.node&&"string"==typeof e.node.data){var s=e.node.splitText(t.length),n=this.getWrapperBounds(e.node,e.parent.hasTransform());return e.node=s,n}}else(!this.support.rangeBounds||e.parent.hasTransform())&&(e.node=e.node.splitText(t.length));return{}}},i.prototype.getWrapperBounds=function(e,t){var i=e.ownerDocument.createElement("html2canvaswrapper"),r=e.parentNode,o=e.cloneNode(!0);i.appendChild(e.cloneNode(!0)),r.replaceChild(i,e);var s=t?z(i):k(i);return r.replaceChild(o,i),s},i.prototype.getRangeBounds=function(e,t,i){var r=this.range||(this.range=e.ownerDocument.createRange());return r.setStart(e,t),r.setEnd(e,t+i),r.getBoundingClientRect()},i.prototype.parse=function(e){var t=e.contexts.filter(u),i=e.children.filter(w),r=i.filter(b(v)),o=r.filter(b(_)).filter(b(f)),n=i.filter(b(_)).filter(v),a=r.filter(b(_)).filter(f),l=e.contexts.concat(r.filter(_)).filter(C),h=e.children.filter(E).filter(g),c=e.contexts.filter(p);t.concat(o).concat(n).concat(a).concat(l).concat(h).concat(c).forEach(function(e){this.renderQueue.push(e),m(e)&&(this.parse(e),this.renderQueue.push(new s))},this)},i.prototype.paint=function(e){try{e instanceof s?this.renderer.ctx.restore():E(e)?(F(e.parent)&&e.parent.appendToDOM(),this.paintText(e),F(e.parent)&&e.parent.cleanDOM()):this.paintNode(e)}catch(e){if(A(e),this.options.strict)throw e}},i.prototype.paintNode=function(e){m(e)&&(this.renderer.setOpacity(e.opacity),this.renderer.ctx.save(),e.hasTransform()&&this.renderer.setTransform(e.parseTransform())),"INPUT"===e.node.nodeName&&"checkbox"===e.node.type?this.paintCheckbox(e):"INPUT"===e.node.nodeName&&"radio"===e.node.type?this.paintRadio(e):this.paintElement(e)},i.prototype.paintElement=function(e){var t=e.parseBounds();this.renderer.clip(e.backgroundClip,function(){this.renderer.renderBackground(e,t,e.borders.borders.map(S))},this),this.renderer.clip(e.clip,function(){this.renderer.renderBorders(e.borders.borders)},this),this.renderer.clip(e.backgroundClip,function(){switch(e.node.nodeName){case"svg":case"IFRAME":var i=this.images.get(e.node);i?this.renderer.renderImage(e,t,e.borders,i):A("Error loading <"+e.node.nodeName+">",e.node);break;case"IMG":var r=this.images.get(e.node.src);r?this.renderer.renderImage(e,t,e.borders,r):A("Error loading <img>",e.node.src);break;case"CANVAS":this.renderer.renderImage(e,t,e.borders,{image:e.node});break;case"SELECT":case"INPUT":case"TEXTAREA":this.paintFormValue(e)}},this)},i.prototype.paintCheckbox=function(e){var t=e.parseBounds(),i=Math.min(t.width,t.height),r={width:i-1,height:i-1,top:t.top,left:t.left},o=[3,3],s=[o,o,o,o],a=[1,1,1,1].map(function(e){return{color:new P("#A5A5A5"),width:e}}),h=l(r,s,a);this.renderer.clip(e.backgroundClip,function(){this.renderer.rectangle(r.left+1,r.top+1,r.width-2,r.height-2,new P("#DEDEDE")),this.renderer.renderBorders(n(a,r,h,s)),e.node.checked&&(this.renderer.font(new P("#424242"),"normal","normal","bold",i-3+"px","arial"),this.renderer.text("",r.left+i/6,r.top+i-1))},this)},i.prototype.paintRadio=function(e){var t=e.parseBounds(),i=Math.min(t.width,t.height)-2;this.renderer.clip(e.backgroundClip,function(){this.renderer.circleStroke(t.left+1,t.top+1,i,new P("#DEDEDE"),1,new P("#A5A5A5")),e.node.checked&&this.renderer.circle(Math.ceil(t.left+i/4)+1,Math.ceil(t.top+i/4)+1,Math.floor(i/2),new P("#424242"))},this)},i.prototype.paintFormValue=function(e){var t=e.getValue();if(t.length>0){var i=e.node.ownerDocument,r=i.createElement("html2canvaswrapper");["lineHeight","textAlign","fontFamily","fontWeight","fontSize","color","paddingLeft","paddingTop","paddingRight","paddingBottom","width","height","borderLeftStyle","borderTopStyle","borderLeftWidth","borderTopWidth","boxSizing","whiteSpace","wordWrap"].forEach(function(t){try{r.style[t]=e.css(t)}catch(e){A("html2canvas: Parse: Exception caught in renderFormValue: "+e.message)}});var o=e.parseBounds();r.style.position="fixed",r.style.left=o.left+"px",r.style.top=o.top+"px",r.textContent=t,i.body.appendChild(r),this.paintText(new D(r.firstChild,e)),i.body.removeChild(r)}},i.prototype.paintText=function(e){e.applyTextTransform();var t=I.ucs2.decode(e.node.data),i=this.options.letterRendering&&!function(e){return/^(normal|none|0px)$/.test(e.parent.css("letterSpacing"))}(e)||function(e){return/[^\u0000-\u00ff]/.test(e)}(e.node.data)?t.map(function(e){return I.ucs2.encode([e])}):function(e){for(var t,i=[],r=0,o=!1;e.length;)L(e[r])===o?((t=e.splice(0,r)).length&&i.push(I.ucs2.encode(t)),o=!o,r=0):r++,r>=e.length&&(t=e.splice(0,r)).length&&i.push(I.ucs2.encode(t));return i}(t),r=e.parent.fontWeight(),o=e.parent.css("fontSize"),s=e.parent.css("fontFamily"),n=e.parent.parseTextShadows();this.renderer.font(e.parent.color("color"),e.parent.css("fontStyle"),e.parent.css("fontVariant"),r,o,s),n.length?this.renderer.fontShadow(n[0].color,n[0].offsetX,n[0].offsetY,n[0].blur):this.renderer.clearShadow(),this.renderer.clip(e.parent.clip,function(){i.map(this.parseTextBounds(e),this).forEach(function(t,r){t&&(this.renderer.text(i[r],t.left,t.bottom),this.renderTextDecoration(e.parent,t,this.fontMetrics.getMetrics(s,o)))},this)},this)},i.prototype.renderTextDecoration=function(e,t,i){switch(e.css("textDecoration").split(" ")[0]){case"underline":this.renderer.rectangle(t.left,Math.round(t.top+i.baseline+i.lineWidth),t.width,1,e.color("color"));break;case"overline":this.renderer.rectangle(t.left,Math.round(t.top),t.width,1,e.color("color"));break;case"line-through":this.renderer.rectangle(t.left,Math.ceil(t.top+i.middle+i.lineWidth),t.width,1,e.color("color"))}};var q={inset:[["darken",.6],["darken",.1],["darken",.1],["darken",.6]]};i.prototype.parseBorders=function(e){var t=e.parseBounds(),i=function(e){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(t){var i=e.css("border"+t+"Radius").split(" ");return i.length<=1&&(i[1]=i[0]),i.map(O)})}(e),r=["Top","Right","Bottom","Left"].map(function(t,i){var r=e.css("border"+t+"Style"),o=e.color("border"+t+"Color");"inset"===r&&o.isBlack()&&(o=new P([255,255,255,o.a]));var s=q[r]?q[r][i]:null;return{width:e.cssInt("border"+t+"Width"),color:s?o[s[0]](s[1]):o,args:null}}),o=l(t,i,r);return{clip:this.parseBackgroundClip(e,o,r,i,t),borders:n(r,t,o,i)}},i.prototype.parseBackgroundClip=function(e,t,i,r,o){var s=[];switch(e.css("backgroundClip")){case"content-box":case"padding-box":d(s,r[0],r[1],t.topLeftInner,t.topRightInner,o.left+i[3].width,o.top+i[0].width),d(s,r[1],r[2],t.topRightInner,t.bottomRightInner,o.left+o.width-i[1].width,o.top+i[0].width),d(s,r[2],r[3],t.bottomRightInner,t.bottomLeftInner,o.left+o.width-i[1].width,o.top+o.height-i[2].width),d(s,r[3],r[0],t.bottomLeftInner,t.topLeftInner,o.left+i[3].width,o.top+o.height-i[2].width);break;default:d(s,r[0],r[1],t.topLeftOuter,t.topRightOuter,o.left,o.top),d(s,r[1],r[2],t.topRightOuter,t.bottomRightOuter,o.left+o.width,o.top),d(s,r[2],r[3],t.bottomRightOuter,t.bottomLeftOuter,o.left+o.width,o.top+o.height),d(s,r[3],r[0],t.bottomLeftOuter,t.topLeftOuter,o.left,o.top+o.height)}return s},t.exports=i},{"./color":3,"./fontmetrics":7,"./log":13,"./nodecontainer":14,"./pseudoelementcontainer":18,"./stackingcontext":21,"./textcontainer":25,"./utils":26,punycode:1}],16:[function(e,t,i){function r(e,t,i){var r="withCredentials"in new XMLHttpRequest;if(!t)return Promise.reject("No proxy configured");var l=s(r),h=n(t,e,l);return r?a(h):o(i,h,l).then(function(e){return d(e.content)})}function o(e,t,i){return new Promise(function(r,o){var s=e.createElement("script"),n=function(){delete window.html2canvas.proxy[i],e.body.removeChild(s)};window.html2canvas.proxy[i]=function(e){n(),r(e)},s.src=t,s.onerror=function(e){n(),o(e)},e.body.appendChild(s)})}function s(e){return e?"":"html2canvas_"+Date.now()+"_"+ ++u+"_"+Math.round(1e5*Math.random())}function n(e,t,i){return e+"?url="+encodeURIComponent(t)+(i.length?"&callback=html2canvas.proxy."+i:"")}var a=e("./xhr"),l=e("./utils"),h=e("./log"),c=e("./clone"),d=l.decode64,u=0;i.Proxy=r,i.ProxyURL=function(e,t,i){var r="crossOrigin"in new Image,a=s(r),l=n(t,e,a);return r?Promise.resolve(l):o(i,l,a).then(function(e){return"data:"+e.type+";base64,"+e.content})},i.loadUrlDocument=function(e,t,i,o,s,n){return new r(e,t,window.document).then(function(e){return function(t){var i,r=new DOMParser;try{i=r.parseFromString(t,"text/html")}catch(e){h("DOMParser not supported, falling back to createHTMLDocument"),i=document.implementation.createHTMLDocument("");try{i.open(),i.write(t),i.close()}catch(e){h("createHTMLDocument write not supported, falling back to document.body.innerHTML"),i.body.innerHTML=t}}var o=i.querySelector("base");if(!o||!o.href.host){var s=i.createElement("base");s.href=e,i.head.insertBefore(s,i.head.firstChild)}return i}}(e)).then(function(e){return c(e,i,o,s,n,0,0)})}},{"./clone":2,"./log":13,"./utils":26,"./xhr":28}],17:[function(e,t){var i=e("./proxy").ProxyURL;t.exports=function(e,t){var r=document.createElement("a");r.href=e,e=r.href,this.src=e,this.image=new Image;var o=this;this.promise=new Promise(function(r,s){o.image.crossOrigin="Anonymous",o.image.onload=r,o.image.onerror=s,new i(e,t,document).then(function(e){o.image.src=e}).catch(s)})}},{"./proxy":16}],18:[function(e,t){function i(e,t,i){r.call(this,e,t),this.isPseudoElement=!0,this.before=":before"===i}var r=e("./nodecontainer");i.prototype.cloneTo=function(e){i.prototype.cloneTo.call(this,e),e.isPseudoElement=!0,e.before=this.before},i.prototype=Object.create(r.prototype),i.prototype.appendToDOM=function(){this.before?this.parent.node.insertBefore(this.node,this.parent.node.firstChild):this.parent.node.appendChild(this.node),this.parent.node.className+=" "+this.getHideClass()},i.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node),this.parent.node.className=this.parent.node.className.replace(this.getHideClass(),"")},i.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")]},i.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",i.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",t.exports=i},{"./nodecontainer":14}],19:[function(e,t){function i(e,t,i,r,o){this.width=e,this.height=t,this.images=i,this.options=r,this.document=o}var r=e("./log");i.prototype.renderImage=function(e,t,i,r){var o=e.cssInt("paddingLeft"),s=e.cssInt("paddingTop"),n=e.cssInt("paddingRight"),a=e.cssInt("paddingBottom"),l=i.borders,h=t.width-(l[1].width+l[3].width+o+n),c=t.height-(l[0].width+l[2].width+s+a);this.drawImage(r,0,0,r.image.width||h,r.image.height||c,t.left+o+l[3].width,t.top+s+l[0].width,h,c)},i.prototype.renderBackground=function(e,t,i){t.height>0&&t.width>0&&(this.renderBackgroundColor(e,t),this.renderBackgroundImage(e,t,i))},i.prototype.renderBackgroundColor=function(e,t){var i=e.color("backgroundColor");i.isTransparent()||this.rectangle(t.left,t.top,t.width,t.height,i)},i.prototype.renderBorders=function(e){e.forEach(this.renderBorder,this)},i.prototype.renderBorder=function(e){e.color.isTransparent()||null===e.args||this.drawShape(e.args,e.color)},i.prototype.renderBackgroundImage=function(e,t,i){e.parseBackgroundImages().reverse().forEach(function(o,s,n){switch(o.method){case"url":var a=this.images.get(o.args[0]);a?this.renderBackgroundRepeating(e,t,a,n.length-(s+1),i):r("Error loading background-image",o.args[0]);break;case"linear-gradient":case"gradient":var l=this.images.get(o.value);l?this.renderBackgroundGradient(l,t,i):r("Error loading background-image",o.args[0]);break;case"none":break;default:r("Unknown background-image type",o.args[0])}},this)},i.prototype.renderBackgroundRepeating=function(e,t,i,r,o){var s=e.parseBackgroundSize(t,i.image,r),n=e.parseBackgroundPosition(t,i.image,r,s);switch(e.parseBackgroundRepeat(r)){case"repeat-x":case"repeat no-repeat":this.backgroundRepeatShape(i,n,s,t,t.left+o[3],t.top+n.top+o[0],99999,s.height,o);break;case"repeat-y":case"no-repeat repeat":this.backgroundRepeatShape(i,n,s,t,t.left+n.left+o[3],t.top+o[0],s.width,99999,o);break;case"no-repeat":this.backgroundRepeatShape(i,n,s,t,t.left+n.left+o[3],t.top+n.top+o[0],s.width,s.height,o);break;default:this.renderBackgroundRepeat(i,n,s,{top:t.top,left:t.left},o[3],o[0])}},t.exports=i},{"./log":13}],20:[function(e,t){function i(e,t){o.apply(this,arguments),this.canvas=this.options.canvas||this.document.createElement("canvas"),this.options.canvas||(this.canvas.width=e,this.canvas.height=t),this.ctx=this.canvas.getContext("2d"),this.taintCtx=this.document.createElement("canvas").getContext("2d"),this.ctx.textBaseline="bottom",this.variables={},n("Initialized CanvasRenderer with size",e,"x",t)}function r(e){return e.length>0}var o=e("../renderer"),s=e("../lineargradientcontainer"),n=e("../log");i.prototype=Object.create(o.prototype),i.prototype.setFillStyle=function(e){return this.ctx.fillStyle="object"==typeof e&&e.isColor?e.toString():e,this.ctx},i.prototype.rectangle=function(e,t,i,r,o){this.setFillStyle(o).fillRect(e,t,i,r)},i.prototype.circle=function(e,t,i,r){this.setFillStyle(r),this.ctx.beginPath(),this.ctx.arc(e+i/2,t+i/2,i/2,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()},i.prototype.circleStroke=function(e,t,i,r,o,s){this.circle(e,t,i,r),this.ctx.strokeStyle=s.toString(),this.ctx.stroke()},i.prototype.drawShape=function(e,t){this.shape(e),this.setFillStyle(t).fill()},i.prototype.taints=function(e){if(null===e.tainted){this.taintCtx.drawImage(e.image,0,0);try{this.taintCtx.getImageData(0,0,1,1),e.tainted=!1}catch(t){this.taintCtx=document.createElement("canvas").getContext("2d"),e.tainted=!0}}return e.tainted},i.prototype.drawImage=function(e,t,i,r,o,s,n,a,l){(!this.taints(e)||this.options.allowTaint)&&this.ctx.drawImage(e.image,t,i,r,o,s,n,a,l)},i.prototype.clip=function(e,t,i){this.ctx.save(),e.filter(r).forEach(function(e){this.shape(e).clip()},this),t.call(i),this.ctx.restore()},i.prototype.shape=function(e){return this.ctx.beginPath(),e.forEach(function(e,t){"rect"===e[0]?this.ctx.rect.apply(this.ctx,e.slice(1)):this.ctx[0===t?"moveTo":e[0]+"To"].apply(this.ctx,e.slice(1))},this),this.ctx.closePath(),this.ctx},i.prototype.font=function(e,t,i,r,o,s){this.setFillStyle(e).font=[t,i,r,o,s].join(" ").split(",")[0]},i.prototype.fontShadow=function(e,t,i,r){this.setVariable("shadowColor",e.toString()).setVariable("shadowOffsetY",t).setVariable("shadowOffsetX",i).setVariable("shadowBlur",r)},i.prototype.clearShadow=function(){this.setVariable("shadowColor","rgba(0,0,0,0)")},i.prototype.setOpacity=function(e){this.ctx.globalAlpha=e},i.prototype.setTransform=function(e){this.ctx.translate(e.origin[0],e.origin[1]),this.ctx.transform.apply(this.ctx,e.matrix),this.ctx.translate(-e.origin[0],-e.origin[1])},i.prototype.setVariable=function(e,t){return this.variables[e]!==t&&(this.variables[e]=this.ctx[e]=t),this},i.prototype.text=function(e,t,i){this.ctx.fillText(e,t,i)},i.prototype.backgroundRepeatShape=function(e,t,i,r,o,s,n,a,l){var h=[["line",Math.round(o),Math.round(s)],["line",Math.round(o+n),Math.round(s)],["line",Math.round(o+n),Math.round(a+s)],["line",Math.round(o),Math.round(a+s)]];this.clip([h],function(){this.renderBackgroundRepeat(e,t,i,r,l[3],l[0])},this)},i.prototype.renderBackgroundRepeat=function(e,t,i,r,o,s){var n=Math.round(r.left+t.left+o),a=Math.round(r.top+t.top+s);this.setFillStyle(this.ctx.createPattern(this.resizeImage(e,i),"repeat")),this.ctx.translate(n,a),this.ctx.fill(),this.ctx.translate(-n,-a)},i.prototype.renderBackgroundGradient=function(e,t){if(e instanceof s){var i=this.ctx.createLinearGradient(t.left+t.width*e.x0,t.top+t.height*e.y0,t.left+t.width*e.x1,t.top+t.height*e.y1);e.colorStops.forEach(function(e){i.addColorStop(e.stop,e.color.toString())}),this.rectangle(t.left,t.top,t.width,t.height,i)}},i.prototype.resizeImage=function(e,t){var i=e.image;if(i.width===t.width&&i.height===t.height)return i;var r=document.createElement("canvas");return r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(i,0,0,i.width,i.height,0,0,t.width,t.height),r},t.exports=i},{"../lineargradientcontainer":12,"../log":13,"../renderer":19}],21:[function(e,t){function i(e,t,i,o){r.call(this,i,o),this.ownStacking=e,this.contexts=[],this.children=[],this.opacity=(this.parent?this.parent.stack.opacity:1)*t}var r=e("./nodecontainer");i.prototype=Object.create(r.prototype),i.prototype.getParentStack=function(e){var t=this.parent?this.parent.stack:null;return t?t.ownStacking?t:t.getParentStack(e):e.stack},t.exports=i},{"./nodecontainer":14}],22:[function(e,t){function i(e){this.rangeBounds=this.testRangeBounds(e),this.cors=this.testCORS(),this.svg=this.testSVG()}i.prototype.testRangeBounds=function(e){var t,i,r=!1;return e.createRange&&((t=e.createRange()).getBoundingClientRect&&((i=e.createElement("boundtest")).style.height="123px",i.style.display="block",e.body.appendChild(i),t.selectNode(i),123===t.getBoundingClientRect().height&&(r=!0),e.body.removeChild(i))),r},i.prototype.testCORS=function(){return void 0!==(new Image).crossOrigin},i.prototype.testSVG=function(){var e=new Image,t=document.createElement("canvas"),i=t.getContext("2d");e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{i.drawImage(e,0,0),t.toDataURL()}catch(e){return!1}return!0},t.exports=i},{}],23:[function(e,t){function i(e){this.src=e,this.image=null;var t=this;this.promise=this.hasFabric().then(function(){return t.isInline(e)?Promise.resolve(t.inlineFormatting(e)):r(e)}).then(function(e){return new Promise(function(i){window.html2canvas.svg.fabric.loadSVGFromString(e,t.createCanvas.call(t,i))})})}var r=e("./xhr"),o=e("./utils").decode64;i.prototype.hasFabric=function(){return window.html2canvas.svg&&window.html2canvas.svg.fabric?Promise.resolve():Promise.reject(new Error("html2canvas.svg.js is not loaded, cannot render svg"))},i.prototype.inlineFormatting=function(e){return/^data:image\/svg\+xml;base64,/.test(e)?this.decode64(this.removeContentType(e)):this.removeContentType(e)},i.prototype.removeContentType=function(e){return e.replace(/^data:image\/svg\+xml(;base64)?,/,"")},i.prototype.isInline=function(e){return/^data:image\/svg\+xml/i.test(e)},i.prototype.createCanvas=function(e){var t=this;return function(i,r){var o=new window.html2canvas.svg.fabric.StaticCanvas("c");t.image=o.lowerCanvasEl,o.setWidth(r.width).setHeight(r.height).add(window.html2canvas.svg.fabric.util.groupSVGElements(i,r)).renderAll(),e(o.lowerCanvasEl)}},i.prototype.decode64=function(e){return"function"==typeof window.atob?window.atob(e):o(e)},t.exports=i},{"./utils":26,"./xhr":28}],24:[function(e,t){function i(e,t){this.src=e,this.image=null;var i=this;this.promise=t?new Promise(function(t,r){i.image=new Image,i.image.onload=t,i.image.onerror=r,i.image.src="data:image/svg+xml,"+(new XMLSerializer).serializeToString(e),!0===i.image.complete&&t(i.image)}):this.hasFabric().then(function(){return new Promise(function(t){window.html2canvas.svg.fabric.parseSVGDocument(e,i.createCanvas.call(i,t))})})}var r=e("./svgcontainer");i.prototype=Object.create(r.prototype),t.exports=i},{"./svgcontainer":23}],25:[function(e,t){function i(e,t){o.call(this,e,t)}function r(e,t,i){return e.length>0?t+i.toUpperCase():void 0}var o=e("./nodecontainer");i.prototype=Object.create(o.prototype),i.prototype.applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"))},i.prototype.transform=function(e){var t=this.node.data;switch(e){case"lowercase":return t.toLowerCase();case"capitalize":return t.replace(/(^|\s|:|-|\(|\))([a-z])/g,r);case"uppercase":return t.toUpperCase();default:return t}},t.exports=i},{"./nodecontainer":14}],26:[function(e,t,i){i.smallImage=function(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},i.bind=function(e,t){return function(){return e.apply(t,arguments)}},i.decode64=function(e){var t,i,r,o,s,n,a,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=e.length,c="";for(t=0;h>t;t+=4)s=l.indexOf(e[t])<<2|(i=l.indexOf(e[t+1]))>>4,n=(15&i)<<4|(r=l.indexOf(e[t+2]))>>2,a=(3&r)<<6|(o=l.indexOf(e[t+3])),c+=64===r?String.fromCharCode(s):64===o||-1===o?String.fromCharCode(s,n):String.fromCharCode(s,n,a);return c},i.getBounds=function(e){if(e.getBoundingClientRect){var t=e.getBoundingClientRect(),i=null==e.offsetWidth?t.width:e.offsetWidth;return{top:t.top,bottom:t.bottom||t.top+t.height,right:t.left+i,left:t.left,width:i,height:null==e.offsetHeight?t.height:e.offsetHeight}}return{}},i.offsetBounds=function(e){var t=e.offsetParent?i.offsetBounds(e.offsetParent):{top:0,left:0};return{top:e.offsetTop+t.top,bottom:e.offsetTop+e.offsetHeight+t.top,right:e.offsetLeft+t.left+e.offsetWidth,left:e.offsetLeft+t.left,width:e.offsetWidth,height:e.offsetHeight}},i.parseBackgrounds=function(e){var t,i,r,o,s,n,a,l=[],h=0,c=0,d=function(){t&&('"'===i.substr(0,1)&&(i=i.substr(1,i.length-2)),i&&a.push(i),"-"===t.substr(0,1)&&(o=t.indexOf("-",1)+1)>0&&(r=t.substr(0,o),t=t.substr(o)),l.push({prefix:r,method:t.toLowerCase(),value:s,args:a,image:null})),a=[],t=r=i=s=""};return a=[],t=r=i=s="",e.split("").forEach(function(e){if(!(0===h&&" \r\n\t".indexOf(e)>-1)){switch(e){case'"':n?n===e&&(n=null):n=e;break;case"(":if(n)break;if(0===h)return h=1,void(s+=e);c++;break;case")":if(n)break;if(1===h){if(0===c)return h=0,s+=e,void d();c--}break;case",":if(n)break;if(0===h)return void d();if(1===h&&0===c&&!t.match(/^url$/i))return a.push(i),i="",void(s+=e)}s+=e,0===h?t+=e:i+=e}}),d(),l}},{}],27:[function(e,t){function i(e){r.apply(this,arguments),this.type="linear"===e.args[0]?r.TYPES.LINEAR:r.TYPES.RADIAL}var r=e("./gradientcontainer");i.prototype=Object.create(r.prototype),t.exports=i},{"./gradientcontainer":9}],28:[function(e,t){t.exports=function(e){return new Promise(function(t,i){var r=new XMLHttpRequest;r.open("GET",e),r.onload=function(){200===r.status?t(r.responseText):i(new Error(r.statusText))},r.onerror=function(){i(new Error("Network Error"))},r.send()})}},{}]},{},[4])(4)});var r0="\0\0",k0="application/zip",e0="application/zip",n0="undefined",q0=null,h0=!1,JSZip=function(e,t){this.files={},this.root="",e&&this.load(e,t)};JSZip.signature={LOCAL_FILE_HEADER:"PK",CENTRAL_FILE_HEADER:"PK",CENTRAL_DIRECTORY_END:"PK",ZIP64_CENTRAL_DIRECTORY_LOCATOR:"PK",ZIP64_CENTRAL_DIRECTORY_END:"PK",DATA_DESCRIPTOR:"PK\b"},JSZip.defaults={base64:h0,binary:h0,dir:h0,date:q0,compression:q0},JSZip.support={arraybuffer:typeof ArrayBuffer!==n0&&typeof Uint8Array!==n0,nodebuffer:typeof Buffer!==n0,uint8array:typeof Uint8Array!==n0,blob:function(){if(typeof ArrayBuffer===n0)return h0;var e=new ArrayBuffer(0);try{return 0===new Blob([e],{type:e0}).size}catch(e){}try{var t=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);return t.append(e),0===t.getBlob(k0).size}catch(e){}return h0}()},JSZip.prototype=function(){var e,t;JSZip.support.uint8array&&"function"==typeof TextEncoder&&"function"==typeof TextDecoder&&(e=new TextEncoder("utf-8"),t=new TextDecoder("utf-8"));var i=function(e){if(e._data instanceof JSZip.CompressedObject&&(e._data=e._data.getContent(),e.options.binary=!0,e.options.base64=!1,"uint8array"===JSZip.utils.getTypeOf(e._data))){var t=e._data;e._data=new Uint8Array(t.length),0!==t.length&&e._data.set(t,0)}return e._data},r=function(t){var r=i(t);if("string"===JSZip.utils.getTypeOf(r)){if(!t.options.binary){if(e)return e.encode(r);if(JSZip.support.nodebuffer)return new Buffer(r,"utf-8")}return t.asBinary()}return r},o=function(e){var t=i(this);return null==t?"":(this.options.base64&&(t=JSZip.base64.decode(t)),t=e&&this.options.binary?JSZip.prototype.utf8decode(t):JSZip.utils.transformTo("string",t),e||this.options.binary||(t=JSZip.prototype.utf8encode(t)),t)},s=function(e,t,i){this.name=e,this._data=t,this.options=i};s.prototype={asText:function(){return o.call(this,!0)},asBinary:function(){return o.call(this,!1)},asNodeBuffer:function(){var e=r(this);return JSZip.utils.transformTo("nodebuffer",e)},asUint8Array:function(){var e=r(this);return JSZip.utils.transformTo("uint8array",e)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var n=function(e,t){var i,r="";for(i=0;i<t;i++)r+=String.fromCharCode(255&e),e>>>=8;return r},a=function(){var e,t,i={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&void 0===i[t]&&(i[t]=arguments[e][t]);return i},l=function(e,t,i){var r=h(e),o=JSZip.utils.getTypeOf(t);if(r&&c.call(this,r),(i=function(e){return!0===(e=e||{}).base64&&null==e.binary&&(e.binary=!0),(e=a(e,JSZip.defaults)).date=e.date||new Date,null!==e.compression&&(e.compression=e.compression.toUpperCase()),e}(i)).dir||null==t)i.base64=!1,i.binary=!1,t=null;else if("string"===o)i.binary&&!i.base64&&!0!==i.optimizedBinaryString&&(t=JSZip.utils.string2binary(t));else{if(i.base64=!1,i.binary=!0,!(o||t instanceof JSZip.CompressedObject))throw new Error("The data of '"+e+"' is in an unsupported format !");"arraybuffer"===o&&(t=JSZip.utils.transformTo("uint8array",t))}return this.files[e]=new s(e,t,i)},h=function(e){"/"==e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return t>0?e.substring(0,t):""},c=function(e){return"/"!=e.slice(-1)&&(e+="/"),this.files[e]||l.call(this,e,null,{dir:!0}),this.files[e]},d=function(e,t){var i,o=new JSZip.CompressedObject;return e._data instanceof JSZip.CompressedObject?(o.uncompressedSize=e._data.uncompressedSize,o.crc32=e._data.crc32,0===o.uncompressedSize||e.options.dir?(t=JSZip.compressions.STORE,o.compressedContent="",o.crc32=0):e._data.compressionMethod===t.magic?o.compressedContent=e._data.getCompressedContent():(i=e._data.getContent(),o.compressedContent=t.compress(JSZip.utils.transformTo(t.compressInputType,i)))):((i=r(e))&&0!==i.length&&!e.options.dir||(t=JSZip.compressions.STORE,i=""),o.uncompressedSize=i.length,o.crc32=this.crc32(i),o.compressedContent=t.compress(JSZip.utils.transformTo(t.compressInputType,i))),o.compressedSize=o.compressedContent.length,o.compressionMethod=t.magic,o},u=function(e,t,i,r){i.compressedContent;var o,s,a=this.utf8encode(t.name),l=a!==t.name,h=t.options;o=h.date.getHours(),o<<=6,o|=h.date.getMinutes(),o<<=5,o|=h.date.getSeconds()/2,s=h.date.getFullYear()-1980,s<<=4,s|=h.date.getMonth()+1,s<<=5,s|=h.date.getDate();var c="";return c+="\n\0",c+=l?"\0\b":"\0\0",c+=i.compressionMethod,c+=n(o,2),c+=n(s,2),c+=n(i.crc32,4),c+=n(i.compressedSize,4),c+=n(i.uncompressedSize,4),c+=n(a.length,2),c+="\0\0",{fileRecord:JSZip.signature.LOCAL_FILE_HEADER+c+a,dirRecord:JSZip.signature.CENTRAL_FILE_HEADER+"\0"+c+"\0\0\0\0\0\0"+(!0===t.options.dir?"\0\0\0":"\0\0\0\0")+n(r,4)+a,compressedObject:i}},p=function(){this.data=[]};p.prototype={append:function(e){e=JSZip.utils.transformTo("string",e),this.data.push(e)},finalize:function(){return this.data.join("")}};var C=function(e){this.data=new Uint8Array(e),this.index=0};return C.prototype={append:function(e){0!==e.length&&(e=JSZip.utils.transformTo("uint8array",e),this.data.set(e,this.index),this.index+=e.length)},finalize:function(){return this.data}},{load:function(e,t){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(e){var t,i,r,o,n=[];for(t in this.files)this.files.hasOwnProperty(t)&&(r=this.files[t],o=new s(r.name,r._data,a(r.options)),i=t.slice(this.root.length,t.length),t.slice(0,this.root.length)===this.root&&e(i,o)&&n.push(o));return n},file:function(e,t,i){if(1===arguments.length){if(JSZip.utils.isRegExp(e)){var r=e;return this.filter(function(e,t){return!t.options.dir&&r.test(e)})}return this.filter(function(t,i){return!i.options.dir&&t===e})[0]||null}return e=this.root+e,l.call(this,e,t,i),this},folder:function(e){if(!e)return this;if(JSZip.utils.isRegExp(e))return this.filter(function(t,i){return i.options.dir&&e.test(t)});var t=this.root+e,i=c.call(this,t),r=this.clone();return r.root=i.name,r},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!=e.slice(-1)&&(e+="/"),t=this.files[e]),t)if(t.options.dir)for(var i=this.filter(function(t,i){return i.name.slice(0,e.length)===e}),r=0;r<i.length;r++)delete this.files[i[r].name];else delete this.files[e];return this},generate:function(e){e=a(e||{},{base64:!0,compression:"STORE",type:"base64"}),JSZip.utils.checkSupport(e.type);var t,i,r=[],o=0,s=0;for(var l in this.files)if(this.files.hasOwnProperty(l)){var h=this.files[l],c=h.options.compression||e.compression.toUpperCase(),f=JSZip.compressions[c];if(!f)throw new Error(c+" is not a valid compression method !");var m=d.call(this,h,f),g=u.call(this,l,h,m,o);o+=g.fileRecord.length+m.compressedSize,s+=g.dirRecord.length,r.push(g)}var y;switch(y=JSZip.signature.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(r.length,2)+n(r.length,2)+n(s,4)+n(o,4)+"\0\0",e.type.toLowerCase()){case"uint8array":case"arraybuffer":case"blob":case"nodebuffer":t=new C(o+s+y.length);break;case"base64":default:t=new p(o+s+y.length)}for(i=0;i<r.length;i++)t.append(r[i].fileRecord),t.append(r[i].compressedObject.compressedContent);for(i=0;i<r.length;i++)t.append(r[i].dirRecord);t.append(y);var _=t.finalize();switch(e.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return JSZip.utils.transformTo(e.type.toLowerCase(),_);case"blob":return JSZip.utils.arrayBuffer2Blob(JSZip.utils.transformTo("arraybuffer",_));case"base64":return e.base64?JSZip.base64.encode(_):_;default:return _}},crc32:function(e,t){if(void 0===e||!e.length)return 0;var i="string"!==JSZip.utils.getTypeOf(e),r=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];void 0===t&&(t=0);t^=-1;for(var o=0,s=e.length;o<s;o++)t=t>>>8^r[255&(t^(i?e[o]:e.charCodeAt(o)))];return-1^t},clone:function(){var e=new JSZip;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e},utf8encode:function(t){if(e){var i=e.encode(t);return JSZip.utils.transformTo("string",i)}if(JSZip.support.nodebuffer)return JSZip.utils.transformTo("string",new Buffer(t,"utf-8"));for(var r=[],o=0,s=0;s<t.length;s++){var n=t.charCodeAt(s);n<128?r[o++]=String.fromCharCode(n):n>127&&n<2048?(r[o++]=String.fromCharCode(n>>6|192),r[o++]=String.fromCharCode(63&n|128)):(r[o++]=String.fromCharCode(n>>12|224),r[o++]=String.fromCharCode(n>>6&63|128),r[o++]=String.fromCharCode(63&n|128))}return r.join("")},utf8decode:function(e){var i=[],r=0,o="string"!==JSZip.utils.getTypeOf(e),s=0,n=0,a=0,l=0;if(t)return t.decode(JSZip.utils.transformTo("uint8array",e));if(JSZip.support.nodebuffer)return JSZip.utils.transformTo("nodebuffer",e).toString("utf-8");for(;s<e.length;)(n=o?e[s]:e.charCodeAt(s))<128?(i[r++]=String.fromCharCode(n),s++):n>191&&n<224?(a=o?e[s+1]:e.charCodeAt(s+1),i[r++]=String.fromCharCode((31&n)<<6|63&a),s+=2):(a=o?e[s+1]:e.charCodeAt(s+1),l=o?e[s+2]:e.charCodeAt(s+2),i[r++]=String.fromCharCode((15&n)<<12|(63&a)<<6|63&l),s+=3);return i.join("")}}}(),JSZip.compressions={STORE:{magic:r0,compress:function(e){return e},uncompress:function(e){return e},compressInputType:q0,uncompressInputType:q0}},function(){function e(e){return e}function t(e,t){for(var i=0;i<e.length;++i)t[i]=255&e.charCodeAt(i);return t}function i(e){var t=65536,i=[],r=e.length,o=JSZip.utils.getTypeOf(e),s=0,n=!0;try{switch(o){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,new Buffer(0))}}catch(e){n=!1}if(!n){for(var a="",l=0;l<e.length;l++)a+=String.fromCharCode(e[l]);return a}for(;s<r&&t>1;)try{"array"===o||"nodebuffer"===o?i.push(String.fromCharCode.apply(null,e.slice(s,Math.min(s+t,r)))):i.push(String.fromCharCode.apply(null,e.subarray(s,Math.min(s+t,r)))),s+=t}catch(e){t=Math.floor(t/2)}return i.join("")}function r(e,t){for(var i=0;i<e.length;i++)t[i]=e[i];return t}JSZip.utils={string2binary:function(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(255&e.charCodeAt(i));return t},string2Uint8Array:function(e){return JSZip.utils.transformTo("uint8array",e)},uint8Array2String:function(e){return JSZip.utils.transformTo("string",e)},arrayBuffer2Blob:function(e){JSZip.utils.checkSupport("blob");try{return new Blob([e],{type:"application/zip"})}catch(e){}try{var t=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);return t.append(e),t.getBlob("application/zip")}catch(e){}throw new Error("Bug : can't construct the Blob.")},string2Blob:function(e){var t=JSZip.utils.transformTo("arraybuffer",e);return JSZip.utils.arrayBuffer2Blob(t)}};var o={};o.string={string:e,array:function(e){return t(e,new Array(e.length))},arraybuffer:function(e){return o.string.uint8array(e).buffer},uint8array:function(e){return t(e,new Uint8Array(e.length))},nodebuffer:function(e){return t(e,new Buffer(e.length))}},o.array={string:i,array:e,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return new Buffer(e)}},o.arraybuffer={string:function(e){return i(new Uint8Array(e))},array:function(e){return r(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:e,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return new Buffer(new Uint8Array(e))}},o.uint8array={string:i,array:function(e){return r(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:e,nodebuffer:function(e){return new Buffer(e)}},o.nodebuffer={string:i,array:function(e){return r(e,new Array(e.length))},arraybuffer:function(e){return o.nodebuffer.uint8array(e).buffer},uint8array:function(e){return r(e,new Uint8Array(e.length))},nodebuffer:e},JSZip.utils.transformTo=function(e,t){if(t||(t=""),!e)return t;JSZip.utils.checkSupport(e);var i=JSZip.utils.getTypeOf(t);return o[i][e](t)},JSZip.utils.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":JSZip.support.nodebuffer&&Buffer.isBuffer(e)?"nodebuffer":JSZip.support.uint8array&&e instanceof Uint8Array?"uint8array":JSZip.support.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},JSZip.utils.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},JSZip.utils.checkSupport=function(e){var t=!0;switch(e.toLowerCase()){case"uint8array":t=JSZip.support.uint8array;break;case"arraybuffer":t=JSZip.support.arraybuffer;break;case"nodebuffer":t=JSZip.support.nodebuffer;break;case"blob":t=JSZip.support.blob}if(!t)throw new Error(e+" is not supported by this browser")}}(),JSZip.CompressedObject=function(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=q0,this.compressedContent=q0},JSZip.CompressedObject.prototype={getContent:function(){return q0},getCompressedContent:function(){return q0}},JSZip.base64=function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{encode:function(t,i){for(var r,o,s,n,a,l,h,c="",d=0;d<t.length;)n=(r=t.charCodeAt(d++))>>2,a=(3&r)<<4|(o=t.charCodeAt(d++))>>4,l=(15&o)<<2|(s=t.charCodeAt(d++))>>6,h=63&s,isNaN(o)?l=h=64:isNaN(s)&&(h=64),c=c+e.charAt(n)+e.charAt(a)+e.charAt(l)+e.charAt(h);return c},decode:function(t,i){var r,o,s,n,a,l,h="",c=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<t.length;)r=e.indexOf(t.charAt(c++))<<2|(n=e.indexOf(t.charAt(c++)))>>4,o=(15&n)<<4|(a=e.indexOf(t.charAt(c++)))>>2,s=(3&a)<<6|(l=e.indexOf(t.charAt(c++))),h+=String.fromCharCode(r),64!=a&&(h+=String.fromCharCode(o)),64!=l&&(h+=String.fromCharCode(s));return h}}}(),void 0!==window.jQuery&&(window.jQuery.fn.webdatarocks=function(e){return(e=e||{}).container=this.get(0),e=window.WebDataRocks?window.WebDataRocks(e):window.PivotApi(e),this.data("webdatarocks",e),e}),void 0!==window.angular&&window.angular.module("webdatarocks",[]).directive("wbrPivot",function(){return{restrict:"A",scope:{report:"=wbrReport",customizeCell:"&wbrCustomizeCell",cellclick:"&wbrCellClick",celldoubleclick:"&wbrCellDoubleClick",dataerror:"&wbrDataError",datafilecancelled:"&wbrDataFileCancelled",dataloaded:"&wbrDataLoaded",datachanged:"&wbrDataChanged",fieldslistclose:"&wbrFieldsListClose",fieldslistopen:"&wbrFieldsListOpen",filteropen:"&wbrFilteropen",fullscreen:"&wbrFullscreen",loadingdata:"&wbrLoadingData",loadinglocalization:"&wbrLoadingLocalization",loadingolapstructure:"&wbrLoadingOlapStructure",loadingreportfile:"&wbrLoadingReportFile",localizationerror:"&wbrLocalizationError",localizationloaded:"&wbrLocalizationLoaded",openingreportfile:"&wbrOpeningReportFile",querycomplete:"&wbrQueryComplete",queryerror:"&wbrQueryError",ready:"&wbrReady",reportchange:"&wbrReportChange",reportcomplete:"&wbrReportComplete",reportfilecancelled:"&wbrReportFileCancelled",reportfileerror:"&wbrReportFileError",reportfileloaded:"&wbrReportFileLoaded",runningquery:"&wbrRunningQuery",update:"&wbrUpdate",beforetoolbarcreated:"&wbrBeforeToolbarCreated"},link:function(e,t,i,r){(r={}).container=t[0],function(e,t){void 0!==e.wbrGlobal&&(t.global=e.wbrGlobal),void 0!==e.wbrWidth&&(t.width=e.wbrWidth),void 0!==e.wbrHeight&&(t.height=e.wbrHeight),void 0!==e.wbrToolbar&&(t.toolbar=!0===e.wbrToolbar||"true"==e.wbrToolbar||"on"==e.wbrToolbar)}(i,r),e.customizeCell&&(r.customizeCell=function(t,i){return e.customizeCell({html:t,data:i})}),e.cellclick&&(r.cellclick=function(t){e.cellclick({cell:t})}),e.celldoubleclick&&(r.celldoubleclick=function(t){e.celldoubleclick({cell:t})}),r.dataerror=e.dataerror,r.datafilecancelled=e.datafilecancelled,r.dataloaded=e.dataloaded,r.datachanged&&(r.datachanged=function(t){e.datachanged({event:t})}),r.fieldslistclose=e.fieldslistclose,r.fieldslistopen=e.fieldslistopen,r.filteropen&&(r.filteropen=function(t){e.filteropen({params:t})}),r.fullscreen&&(r.fullscreen=function(t){e.fullscreen({fullScreenMode:t})}),r.loadingdata=e.loadingdata,r.loadinglocalization=e.loadinglocalization,r.loadingolapstructure=e.loadingolapstructure,r.loadingreportfile=e.loadingreportfile,r.localizationerror=e.localizationerror,r.localizationloaded=e.localizationloaded,r.olapstructureerror=e.olapstructureerror,r.olapstructureloaded=e.olapstructureloaded,r.openingreportfile=e.openingreportfile,r.querycomplete=e.querycomplete,r.queryerror=e.queryerror,e.ready&&(r.ready=function(){e.ready({pivot:o})}),r.reportchange=e.reportchange,r.reportcomplete=e.reportcomplete,r.reportfilecancelled=e.reportfilecancelled,r.reportfileerror=e.reportfileerror,r.reportfileloaded=e.reportfileloaded,r.runningquery=e.runningquery,r.loadingdata=e.loadingdata,r.loadingdata=e.loadingdata,r.loadingdata=e.loadingdata,r.update=e.update,e.beforetoolbarcreated&&(r.beforetoolbarcreated=function(t){e.beforetoolbarcreated({toolbar:t})}),e.report&&(r.report=e.report),e.global&&(r.global=e.global);var o=new WebDataRocks(r)}}}),void 0!==window.React&&(window.WebDataRocksReact={Pivot:React.createClass({propTypes:{global:React.PropTypes.object,width:React.PropTypes.oneOfType([React.PropTypes.string,React.PropTypes.number]),height:React.PropTypes.oneOfType([React.PropTypes.string,React.PropTypes.number]),report:React.PropTypes.oneOfType([React.PropTypes.string,React.PropTypes.object]),toolbar:React.PropTypes.bool,customizeCell:React.PropTypes.func,cellclick:React.PropTypes.func,celldoubleclick:React.PropTypes.func,dataerror:React.PropTypes.func,datafilecancelled:React.PropTypes.func,dataloaded:React.PropTypes.func,datachanged:React.PropTypes.func,fieldslistclose:React.PropTypes.func,fieldslistopen:React.PropTypes.func,filteropen:React.PropTypes.func,fullscreen:React.PropTypes.func,loadingdata:React.PropTypes.func,loadinglocalization:React.PropTypes.func,loadingolapstructure:React.PropTypes.func,loadingreportfile:React.PropTypes.func,localizationerror:React.PropTypes.func,localizationloaded:React.PropTypes.func,olapstructureerror:React.PropTypes.func,olapstructureloaded:React.PropTypes.func,openingreportfile:React.PropTypes.func,querycomplete:React.PropTypes.func,queryerror:React.PropTypes.func,ready:React.PropTypes.func,reportchange:React.PropTypes.func,reportcomplete:React.PropTypes.func,reportfilecancelled:React.PropTypes.func,reportfileerror:React.PropTypes.func,reportfileloaded:React.PropTypes.func,runningquery:React.PropTypes.func,update:React.PropTypes.func,beforetoolbarcreated:React.PropTypes.func},render:function(){return React.DOM.div()},componentDidMount:function(){var e={};e.container=ReactDOM.findDOMNode(this),this.parseProps(e),this.webdatarocks=new window.WebDataRocks(e)},shouldComponentUpdate:function(){return!1},componentWillUnmount:function(){},parseProps:function(e){for(var t in this.props)e[t]=this.props[t]}})}),"object"==typeof module&&module.exports&&(module.exports=WebDataRocks);
